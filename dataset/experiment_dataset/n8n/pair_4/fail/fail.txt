2025-04-15T08:22:32.5860049Z Requested labels: ubuntu-latest
2025-04-15T08:22:32.5860370Z Job defined at: n8n-io/n8n/.github/workflows/ci-postgres-mysql.yml@refs/pull/14468/merge
2025-04-15T08:22:32.5860474Z Waiting for a runner to pick up this job...
2025-04-15T08:22:32.9854761Z Job is waiting for a hosted runner to come online.
2025-04-15T08:22:35.6724304Z Job is about to start running on the hosted runner: GitHub Actions 55 (hosted)
2025-04-15T08:22:37.0653332Z Current runner version: '2.323.0'
2025-04-15T08:22:37.0682423Z ##[group]Operating System
2025-04-15T08:22:37.0683494Z Ubuntu
2025-04-15T08:22:37.0684060Z 24.04.2
2025-04-15T08:22:37.0684570Z LTS
2025-04-15T08:22:37.0685042Z ##[endgroup]
2025-04-15T08:22:37.0685630Z ##[group]Runner Image
2025-04-15T08:22:37.0686192Z Image: ubuntu-24.04
2025-04-15T08:22:37.0686737Z Version: 20250406.1.0
2025-04-15T08:22:37.0687844Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250406.1/images/ubuntu/Ubuntu2404-Readme.md
2025-04-15T08:22:37.0689271Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250406.1
2025-04-15T08:22:37.0690183Z ##[endgroup]
2025-04-15T08:22:37.0690792Z ##[group]Runner Image Provisioner
2025-04-15T08:22:37.0691376Z 2.0.422.1
2025-04-15T08:22:37.0691860Z ##[endgroup]
2025-04-15T08:22:37.0694402Z ##[group]GITHUB_TOKEN Permissions
2025-04-15T08:22:37.0696847Z Actions: write
2025-04-15T08:22:37.0697708Z Attestations: write
2025-04-15T08:22:37.0698411Z Checks: write
2025-04-15T08:22:37.0698939Z Contents: write
2025-04-15T08:22:37.0699532Z Deployments: write
2025-04-15T08:22:37.0700120Z Discussions: write
2025-04-15T08:22:37.0700710Z Issues: write
2025-04-15T08:22:37.0701227Z Metadata: read
2025-04-15T08:22:37.0701778Z Models: read
2025-04-15T08:22:37.0702295Z Packages: write
2025-04-15T08:22:37.0703058Z Pages: write
2025-04-15T08:22:37.0703698Z PullRequests: write
2025-04-15T08:22:37.0704293Z RepositoryProjects: write
2025-04-15T08:22:37.0704870Z SecurityEvents: write
2025-04-15T08:22:37.0705492Z Statuses: write
2025-04-15T08:22:37.0705969Z ##[endgroup]
2025-04-15T08:22:37.0709287Z Secret source: Actions
2025-04-15T08:22:37.0710311Z Prepare workflow directory
2025-04-15T08:22:37.1176506Z Prepare all required actions
2025-04-15T08:22:37.1213183Z Getting action download info
2025-04-15T08:22:37.3395358Z Download action repository 'actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11' (SHA:b4ffde65f46336ab88eb53be808477a3936bae11)
2025-04-15T08:22:37.4494437Z Download action repository 'actions/setup-node@1d0ff469b7ec7b3cb9d8673fde0c81c44821de2a' (SHA:1d0ff469b7ec7b3cb9d8673fde0c81c44821de2a)
2025-04-15T08:22:37.5450464Z Download action repository 'rharkor/caching-for-turbo@439abec0d28d21b192fa8817b744ffdf1ee5ac0d' (SHA:439abec0d28d21b192fa8817b744ffdf1ee5ac0d)
2025-04-15T08:22:37.8374662Z Download action repository 'actions/cache@1bd1e32a3bdc45362d1e726936510720a7c30a57' (SHA:1bd1e32a3bdc45362d1e726936510720a7c30a57)
2025-04-15T08:22:37.9541155Z Download action repository 'isbang/compose-action@802a148945af6399a338c7906c267331b39a71af' (SHA:802a148945af6399a338c7906c267331b39a71af)
2025-04-15T08:22:38.2229242Z Complete job name: MariaDB
2025-04-15T08:22:38.3075062Z ##[group]Run actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11
2025-04-15T08:22:38.3076192Z with:
2025-04-15T08:22:38.3076616Z   repository: n8n-io/n8n
2025-04-15T08:22:38.3077399Z   token: ***
2025-04-15T08:22:38.3077792Z   ssh-strict: true
2025-04-15T08:22:38.3078203Z   persist-credentials: true
2025-04-15T08:22:38.3078683Z   clean: true
2025-04-15T08:22:38.3079089Z   sparse-checkout-cone-mode: true
2025-04-15T08:22:38.3079599Z   fetch-depth: 1
2025-04-15T08:22:38.3079993Z   fetch-tags: false
2025-04-15T08:22:38.3080400Z   show-progress: true
2025-04-15T08:22:38.3080814Z   lfs: false
2025-04-15T08:22:38.3081214Z   submodules: false
2025-04-15T08:22:38.3081640Z   set-safe-directory: true
2025-04-15T08:22:38.3082306Z env:
2025-04-15T08:22:38.3082939Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T08:22:38.3083437Z ##[endgroup]
2025-04-15T08:22:38.5028521Z Syncing repository: n8n-io/n8n
2025-04-15T08:22:38.5030294Z ##[group]Getting Git version info
2025-04-15T08:22:38.5031053Z Working directory is '/home/runner/work/n8n/n8n'
2025-04-15T08:22:38.5031945Z [command]/usr/bin/git version
2025-04-15T08:22:38.5076148Z git version 2.49.0
2025-04-15T08:22:38.5105580Z ##[endgroup]
2025-04-15T08:22:38.5122058Z Temporarily overriding HOME='/home/runner/work/_temp/b8701e12-607b-42ce-ab85-842b2d3499bc' before making global git config changes
2025-04-15T08:22:38.5124065Z Adding repository directory to the temporary git global config as a safe directory
2025-04-15T08:22:38.5126246Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/n8n/n8n
2025-04-15T08:22:38.5162031Z Deleting the contents of '/home/runner/work/n8n/n8n'
2025-04-15T08:22:38.5166174Z ##[group]Initializing the repository
2025-04-15T08:22:38.5169325Z [command]/usr/bin/git init /home/runner/work/n8n/n8n
2025-04-15T08:22:38.5268048Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-04-15T08:22:38.5269406Z hint: is subject to change. To configure the initial branch name to use in all
2025-04-15T08:22:38.5270342Z hint: of your new repositories, which will suppress this warning, call:
2025-04-15T08:22:38.5271024Z hint:
2025-04-15T08:22:38.5271515Z hint: 	git config --global init.defaultBranch <name>
2025-04-15T08:22:38.5272105Z hint:
2025-04-15T08:22:38.5273118Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-04-15T08:22:38.5274763Z hint: 'development'. The just-created branch can be renamed via this command:
2025-04-15T08:22:38.5276011Z hint:
2025-04-15T08:22:38.5276671Z hint: 	git branch -m <name>
2025-04-15T08:22:38.5277758Z Initialized empty Git repository in /home/runner/work/n8n/n8n/.git/
2025-04-15T08:22:38.5286455Z [command]/usr/bin/git remote add origin https://github.com/n8n-io/n8n
2025-04-15T08:22:38.5317249Z ##[endgroup]
2025-04-15T08:22:38.5318022Z ##[group]Disabling automatic garbage collection
2025-04-15T08:22:38.5319615Z [command]/usr/bin/git config --local gc.auto 0
2025-04-15T08:22:38.5346534Z ##[endgroup]
2025-04-15T08:22:38.5347249Z ##[group]Setting up auth
2025-04-15T08:22:38.5351708Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-04-15T08:22:38.5378427Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-04-15T08:22:38.5688757Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-04-15T08:22:38.5715754Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-04-15T08:22:38.5937971Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-04-15T08:22:38.6010467Z ##[endgroup]
2025-04-15T08:22:38.6011406Z ##[group]Fetching the repository
2025-04-15T08:22:38.6020170Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +b166e406461ce2a6532018d6e615f5a4bf8aef71:refs/remotes/pull/14468/merge
2025-04-15T08:22:40.6315686Z From https://github.com/n8n-io/n8n
2025-04-15T08:22:40.6317343Z  * [new ref]         b166e406461ce2a6532018d6e615f5a4bf8aef71 -> pull/14468/merge
2025-04-15T08:22:40.6403999Z ##[endgroup]
2025-04-15T08:22:40.6404627Z ##[group]Determining the checkout info
2025-04-15T08:22:40.6406308Z ##[endgroup]
2025-04-15T08:22:40.6406992Z ##[group]Checking out the ref
2025-04-15T08:22:40.6410652Z [command]/usr/bin/git checkout --progress --force refs/remotes/pull/14468/merge
2025-04-15T08:22:41.2113623Z Note: switching to 'refs/remotes/pull/14468/merge'.
2025-04-15T08:22:41.2114299Z 
2025-04-15T08:22:41.2114787Z You are in 'detached HEAD' state. You can look around, make experimental
2025-04-15T08:22:41.2117025Z changes and commit them, and you can discard any commits you make in this
2025-04-15T08:22:41.2117606Z state without impacting any branches by switching back to a branch.
2025-04-15T08:22:41.2117914Z 
2025-04-15T08:22:41.2118365Z If you want to create a new branch to retain commits you create, you may
2025-04-15T08:22:41.2118900Z do so (now or later) by using -c with the switch command. Example:
2025-04-15T08:22:41.2119194Z 
2025-04-15T08:22:41.2119322Z   git switch -c <new-branch-name>
2025-04-15T08:22:41.2119924Z 
2025-04-15T08:22:41.2120051Z Or undo this operation with:
2025-04-15T08:22:41.2120241Z 
2025-04-15T08:22:41.2120351Z   git switch -
2025-04-15T08:22:41.2120485Z 
2025-04-15T08:22:41.2120720Z Turn off this advice by setting config variable advice.detachedHead to false
2025-04-15T08:22:41.2121031Z 
2025-04-15T08:22:41.2121386Z HEAD is now at b166e40 Merge 747c66a4ad127de348a47150637325f08aeb5c7c into a12c9522d5992a7fc2719644a9cfa4af5cdc3712
2025-04-15T08:22:41.2135175Z ##[endgroup]
2025-04-15T08:22:41.2172318Z [command]/usr/bin/git log -1 --format='%H'
2025-04-15T08:22:41.2195265Z 'b166e406461ce2a6532018d6e615f5a4bf8aef71'
2025-04-15T08:22:41.2420281Z ##[group]Run actions/setup-node@1d0ff469b7ec7b3cb9d8673fde0c81c44821de2a
2025-04-15T08:22:41.2420751Z with:
2025-04-15T08:22:41.2420986Z   node-version: 20.x
2025-04-15T08:22:41.2421241Z   always-auth: false
2025-04-15T08:22:41.2421495Z   check-latest: false
2025-04-15T08:22:41.2421900Z   token: ***
2025-04-15T08:22:41.2422145Z env:
2025-04-15T08:22:41.2422381Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T08:22:41.2422660Z ##[endgroup]
2025-04-15T08:22:41.4168073Z Found in cache @ /opt/hostedtoolcache/node/20.19.0/x64
2025-04-15T08:22:41.4172158Z ##[group]Environment details
2025-04-15T08:22:41.7781252Z node: v20.19.0
2025-04-15T08:22:41.7781674Z npm: 10.8.2
2025-04-15T08:22:41.7782024Z yarn: 1.22.22
2025-04-15T08:22:41.7782998Z ##[endgroup]
2025-04-15T08:22:41.7892412Z ##[group]Run npm i -g corepack@0.31
2025-04-15T08:22:41.7893195Z [36;1mnpm i -g corepack@0.31[0m
2025-04-15T08:22:41.7893624Z [36;1mcorepack enable[0m
2025-04-15T08:22:41.7945173Z shell: /usr/bin/bash -e {0}
2025-04-15T08:22:41.7945430Z env:
2025-04-15T08:22:41.7945626Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T08:22:41.7945865Z ##[endgroup]
2025-04-15T08:22:42.5059734Z 
2025-04-15T08:22:42.5067974Z changed 1 package in 647ms
2025-04-15T08:22:42.5768672Z ##[group]Run pnpm install --frozen-lockfile
2025-04-15T08:22:42.5769046Z [36;1mpnpm install --frozen-lockfile[0m
2025-04-15T08:22:42.5816449Z shell: /usr/bin/bash -e {0}
2025-04-15T08:22:42.5816685Z env:
2025-04-15T08:22:42.5816881Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T08:22:42.5817116Z ##[endgroup]
2025-04-15T08:22:42.7676613Z ! Corepack is about to download https://registry.npmjs.org/pnpm/-/pnpm-10.2.1.tgz
2025-04-15T08:22:43.8147892Z Scope: all 29 workspace projects
2025-04-15T08:23:09.1688019Z .../sqlite3@5.1.7/node_modules/sqlite3 install$ prebuild-install -r napi || node-gyp rebuild
2025-04-15T08:23:09.4524643Z .../sqlite3@5.1.7/node_modules/sqlite3 install: Done
2025-04-15T08:23:10.2430245Z 
2025-04-15T08:23:10.2431532Z devDependencies:
2025-04-15T08:23:10.2432108Z + @biomejs/biome 1.9.0
2025-04-15T08:23:10.2433081Z + @n8n/eslint-config 0.0.1 <- packages/@n8n/eslint-config
2025-04-15T08:23:10.2433851Z + @types/jest 29.5.3
2025-04-15T08:23:10.2434436Z + @types/node 18.16.16
2025-04-15T08:23:10.2434958Z + @types/supertest 6.0.2
2025-04-15T08:23:10.2435462Z + cross-env 7.0.3
2025-04-15T08:23:10.2435891Z + jest 29.6.2
2025-04-15T08:23:10.2436414Z + jest-environment-jsdom 29.6.2
2025-04-15T08:23:10.2436948Z + jest-expect-message 1.1.3
2025-04-15T08:23:10.2437449Z + jest-junit 16.0.0
2025-04-15T08:23:10.2437896Z + jest-mock 29.6.2
2025-04-15T08:23:10.2438387Z + jest-mock-extended 3.0.4
2025-04-15T08:23:10.2438874Z + lefthook 1.7.15
2025-04-15T08:23:10.2439266Z + nock 14.0.1
2025-04-15T08:23:10.2439686Z + nodemon 3.0.1
2025-04-15T08:23:10.2446315Z + npm-run-all2 7.0.2
2025-04-15T08:23:10.2446612Z + p-limit 3.1.0
2025-04-15T08:23:10.2446829Z + rimraf 5.0.1
2025-04-15T08:23:10.2447052Z + run-script-os 1.1.6
2025-04-15T08:23:10.2447296Z + supertest 7.0.0
2025-04-15T08:23:10.2447527Z + ts-jest 29.1.1
2025-04-15T08:23:10.2447734Z + tsc-alias 1.8.10
2025-04-15T08:23:10.2447948Z + tsc-watch 6.2.0
2025-04-15T08:23:10.2448133Z + turbo 2.3.3
2025-04-15T08:23:10.2448408Z + typescript 5.8.2
2025-04-15T08:23:10.2448605Z + zx 8.1.4
2025-04-15T08:23:10.2448710Z 
2025-04-15T08:23:10.2451363Z Ignored build scripts: @biomejs/biome, @fortawesome/fontawesome-common-types, @fortawesome/fontawesome-svg-core, @fortawesome/free-regular-svg-icons, @fortawesome/free-solid-svg-icons, core-js, cpu-features, cypress, esbuild, eslint-plugin-n8n-nodes-base, lefthook, msgpackr-extract, protobufjs, sharp, ssh2, tree-sitter, tree-sitter-bash, vue-demi. Run "pnpm approve-builds" to pick which dependencies should be allowed to run scripts.
2025-04-15T08:23:10.2455598Z 
2025-04-15T08:23:10.6249857Z . preinstall$ node scripts/block-npm-install.js
2025-04-15T08:23:10.6654929Z . preinstall: Done
2025-04-15T08:23:10.6656787Z . prepare$ node scripts/prepare.mjs
2025-04-15T08:23:10.7089913Z . prepare: Done
2025-04-15T08:23:10.8329809Z Done in 27.4s
2025-04-15T08:23:10.9481228Z ##[group]Run rharkor/caching-for-turbo@439abec0d28d21b192fa8817b744ffdf1ee5ac0d
2025-04-15T08:23:10.9481617Z with:
2025-04-15T08:23:10.9481802Z   cache-prefix: turbogha_
2025-04-15T08:23:10.9482005Z env:
2025-04-15T08:23:10.9482182Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T08:23:10.9482417Z ##[endgroup]
2025-04-15T08:23:11.2696398Z Cache version: turbogha_v2
2025-04-15T08:23:11.2697821Z Cache prefix: turbogha_
2025-04-15T08:23:11.2698318Z Launched child process: 1976
2025-04-15T08:23:11.2699016Z Server log file: /home/runner/work/_temp/turbogha.log
2025-04-15T08:23:11.8113281Z Server is now up and running.
2025-04-15T08:23:11.8113850Z The following environment variables are exported:
2025-04-15T08:23:11.8119947Z   TURBOGHA_PORT=41230
2025-04-15T08:23:11.8121958Z   TURBO_API=http://localhost:41230
2025-04-15T08:23:11.8122524Z   TURBO_TOKEN=turbogha
2025-04-15T08:23:11.8123776Z   TURBO_TEAM=turbogha
2025-04-15T08:23:11.8324565Z ##[group]Run actions/cache/restore@1bd1e32a3bdc45362d1e726936510720a7c30a57
2025-04-15T08:23:11.8324953Z with:
2025-04-15T08:23:11.8325139Z   path: ./packages/**/dist
2025-04-15T08:23:11.8325413Z   key: b166e406461ce2a6532018d6e615f5a4bf8aef71:db-tests
2025-04-15T08:23:11.8325718Z   enableCrossOsArchive: false
2025-04-15T08:23:11.8325958Z   fail-on-cache-miss: false
2025-04-15T08:23:11.8326187Z   lookup-only: false
2025-04-15T08:23:11.8326366Z env:
2025-04-15T08:23:11.8326551Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T08:23:11.8326776Z   TURBOGHA_PORT: 41230
2025-04-15T08:23:11.8327008Z   TURBO_API: http://localhost:41230
2025-04-15T08:23:11.8327256Z   TURBO_TOKEN: turbogha
2025-04-15T08:23:11.8327447Z   TURBO_TEAM: turbogha
2025-04-15T08:23:11.8327639Z ##[endgroup]
2025-04-15T08:23:12.0425787Z Cache hit for: b166e406461ce2a6532018d6e615f5a4bf8aef71:db-tests
2025-04-15T08:23:12.3862133Z Received 46905400 of 46905400 (100.0%), 148.1 MBs/sec
2025-04-15T08:23:12.3863801Z Cache Size: ~45 MB (46905400 B)
2025-04-15T08:23:12.3897630Z [command]/usr/bin/tar -xf /home/runner/work/_temp/036a0f41-6aaa-40ee-a6a7-e4dd8226adf3/cache.tzst -P -C /home/runner/work/n8n/n8n --use-compress-program unzstd
2025-04-15T08:23:15.9849112Z Cache restored successfully
2025-04-15T08:23:16.0135995Z Cache restored from key: b166e406461ce2a6532018d6e615f5a4bf8aef71:db-tests
2025-04-15T08:23:16.0277991Z ##[group]Run isbang/compose-action@802a148945af6399a338c7906c267331b39a71af
2025-04-15T08:23:16.0278387Z with:
2025-04-15T08:23:16.0278595Z   compose-file: ./.github/docker-compose.yml
2025-04-15T08:23:16.0279315Z   services: mariadb

2025-04-15T08:23:16.0279525Z   cwd: /home/runner/work/n8n/n8n
2025-04-15T08:23:16.0279812Z env:
2025-04-15T08:23:16.0280011Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T08:23:16.0280237Z   TURBOGHA_PORT: 41230
2025-04-15T08:23:16.0280470Z   TURBO_API: http://localhost:41230
2025-04-15T08:23:16.0280709Z   TURBO_TOKEN: turbogha
2025-04-15T08:23:16.0280905Z   TURBO_TEAM: turbogha
2025-04-15T08:23:16.0281095Z ##[endgroup]
2025-04-15T08:23:16.3588797Z 2.27.1
2025-04-15T08:23:16.8637480Z docker-compose version: 2.27.1
2025-04-15T08:23:16.9370552Z  mariadb Pulling 
2025-04-15T08:23:17.5619324Z  13b7e930469f Pulling fs layer 
2025-04-15T08:23:17.5619886Z  333f0c69df78 Pulling fs layer 
2025-04-15T08:23:17.5620418Z  8b4f3d191a1d Pulling fs layer 
2025-04-15T08:23:17.5621277Z  39925a082074 Pulling fs layer 
2025-04-15T08:23:17.5621701Z  06c2bf42d3da Pulling fs layer 
2025-04-15T08:23:17.5622137Z  f5df99d02de0 Pulling fs layer 
2025-04-15T08:23:17.5622557Z  23dfc5d6cd7e Pulling fs layer 
2025-04-15T08:23:17.5623172Z  329c81ca2d70 Pulling fs layer 
2025-04-15T08:23:17.5623535Z  39925a082074 Waiting 
2025-04-15T08:23:17.5623757Z  f5df99d02de0 Waiting 
2025-04-15T08:23:17.5623972Z  06c2bf42d3da Waiting 
2025-04-15T08:23:17.5624177Z  23dfc5d6cd7e Waiting 
2025-04-15T08:23:17.5624391Z  329c81ca2d70 Waiting 
2025-04-15T08:23:17.6377270Z  333f0c69df78 Downloading [====================>                              ]     720B/1.72kB
2025-04-15T08:23:17.6379262Z  333f0c69df78 Downloading [==================================================>]   1.72kB/1.72kB
2025-04-15T08:23:17.6379986Z  333f0c69df78 Verifying Checksum 
2025-04-15T08:23:17.6380531Z  333f0c69df78 Download complete 
2025-04-15T08:23:17.6569193Z  13b7e930469f Downloading [>                                                  ]  281.9kB/27.51MB
2025-04-15T08:23:17.6578007Z  8b4f3d191a1d Downloading [>                                                  ]  73.09kB/7.189MB
2025-04-15T08:23:17.7219227Z  8b4f3d191a1d Verifying Checksum 
2025-04-15T08:23:17.7219768Z  8b4f3d191a1d Download complete 
2025-04-15T08:23:17.7231497Z  39925a082074 Downloading [==================================================>]     116B/116B
2025-04-15T08:23:17.7233126Z  39925a082074 Verifying Checksum 
2025-04-15T08:23:17.7233627Z  39925a082074 Download complete 
2025-04-15T08:23:17.7577846Z  13b7e930469f Downloading [================================================>  ]   26.8MB/27.51MB
2025-04-15T08:23:17.7594233Z  13b7e930469f Verifying Checksum 
2025-04-15T08:23:17.7594775Z  13b7e930469f Download complete 
2025-04-15T08:23:17.7955045Z  13b7e930469f Extracting [>                                                  ]  294.9kB/27.51MB
2025-04-15T08:23:17.8100359Z  06c2bf42d3da Downloading [==================================================>]     334B/334B
2025-04-15T08:23:17.8101316Z  06c2bf42d3da Verifying Checksum 
2025-04-15T08:23:17.8101867Z  06c2bf42d3da Download complete 
2025-04-15T08:23:17.8280318Z  f5df99d02de0 Downloading [>                                                  ]  539.9kB/86.27MB
2025-04-15T08:23:17.8464911Z  23dfc5d6cd7e Downloading [========>                                          ]     720B/4.022kB
2025-04-15T08:23:17.8465905Z  23dfc5d6cd7e Downloading [==================================================>]  4.022kB/4.022kB
2025-04-15T08:23:17.8466574Z  23dfc5d6cd7e Verifying Checksum 
2025-04-15T08:23:17.8467073Z  23dfc5d6cd7e Download complete 
2025-04-15T08:23:17.8937000Z  329c81ca2d70 Downloading [====>                                              ]     720B/8.196kB
2025-04-15T08:23:17.8941279Z  329c81ca2d70 Downloading [==================================================>]  8.196kB/8.196kB
2025-04-15T08:23:17.8946787Z  329c81ca2d70 Verifying Checksum 
2025-04-15T08:23:17.8947378Z  329c81ca2d70 Download complete 
2025-04-15T08:23:17.8999525Z  13b7e930469f Extracting [==========>                                        ]  5.898MB/27.51MB
2025-04-15T08:23:17.9283273Z  f5df99d02de0 Downloading [========>                                          ]  15.05MB/86.27MB
2025-04-15T08:23:18.0077259Z  13b7e930469f Extracting [=================>                                 ]  9.437MB/27.51MB
2025-04-15T08:23:18.0312203Z  f5df99d02de0 Downloading [===============>                                   ]  27.36MB/86.27MB
2025-04-15T08:23:18.1118749Z  13b7e930469f Extracting [=========================>                         ]  13.86MB/27.51MB
2025-04-15T08:23:18.1396009Z  f5df99d02de0 Downloading [========================>                          ]  41.85MB/86.27MB
2025-04-15T08:23:18.2168956Z  13b7e930469f Extracting [======================================>            ]  20.94MB/27.51MB
2025-04-15T08:23:18.2421903Z  f5df99d02de0 Downloading [========================================>          ]  69.25MB/86.27MB
2025-04-15T08:23:18.3352407Z  f5df99d02de0 Verifying Checksum 
2025-04-15T08:23:18.3353430Z  f5df99d02de0 Download complete 
2025-04-15T08:23:18.3867515Z  13b7e930469f Extracting [==========================================>        ]   23.3MB/27.51MB
2025-04-15T08:23:18.5248942Z  13b7e930469f Extracting [================================================>  ]  26.54MB/27.51MB
2025-04-15T08:23:18.6628821Z  13b7e930469f Extracting [==================================================>]  27.51MB/27.51MB
2025-04-15T08:23:18.7053639Z  13b7e930469f Pull complete 
2025-04-15T08:23:18.7087988Z  333f0c69df78 Extracting [==================================================>]   1.72kB/1.72kB
2025-04-15T08:23:18.7092168Z  333f0c69df78 Extracting [==================================================>]   1.72kB/1.72kB
2025-04-15T08:23:21.4527443Z  333f0c69df78 Pull complete 
2025-04-15T08:23:21.4545075Z  8b4f3d191a1d Extracting [>                                                  ]   98.3kB/7.189MB
2025-04-15T08:23:21.5550334Z  8b4f3d191a1d Extracting [====================================>              ]   5.21MB/7.189MB
2025-04-15T08:23:21.6615645Z  8b4f3d191a1d Extracting [==========================================>        ]  6.095MB/7.189MB
2025-04-15T08:23:21.8141193Z  8b4f3d191a1d Extracting [===========================================>       ]  6.291MB/7.189MB
2025-04-15T08:23:21.9511670Z  8b4f3d191a1d Extracting [=============================================>     ]  6.488MB/7.189MB
2025-04-15T08:23:21.9792477Z  8b4f3d191a1d Extracting [==================================================>]  7.189MB/7.189MB
2025-04-15T08:23:22.0455780Z  8b4f3d191a1d Pull complete 
2025-04-15T08:23:22.0467511Z  39925a082074 Extracting [==================================================>]     116B/116B
2025-04-15T08:23:22.0472888Z  39925a082074 Extracting [==================================================>]     116B/116B
2025-04-15T08:23:22.0554130Z  39925a082074 Pull complete 
2025-04-15T08:23:22.0566108Z  06c2bf42d3da Extracting [==================================================>]     334B/334B
2025-04-15T08:23:22.0571448Z  06c2bf42d3da Extracting [==================================================>]     334B/334B
2025-04-15T08:23:22.0692067Z  06c2bf42d3da Pull complete 
2025-04-15T08:23:22.0934813Z  f5df99d02de0 Extracting [>                                                  ]  557.1kB/86.27MB
2025-04-15T08:23:22.1948708Z  f5df99d02de0 Extracting [====>                                              ]  8.356MB/86.27MB
2025-04-15T08:23:22.2988053Z  f5df99d02de0 Extracting [=========>                                         ]  16.71MB/86.27MB
2025-04-15T08:23:22.4014375Z  f5df99d02de0 Extracting [==============>                                    ]  24.51MB/86.27MB
2025-04-15T08:23:22.5092945Z  f5df99d02de0 Extracting [==================>                                ]  32.31MB/86.27MB
2025-04-15T08:23:22.6136925Z  f5df99d02de0 Extracting [======================>                            ]  39.55MB/86.27MB
2025-04-15T08:23:22.7173151Z  f5df99d02de0 Extracting [============================>                      ]  48.46MB/86.27MB
2025-04-15T08:23:22.8256077Z  f5df99d02de0 Extracting [=================================>                 ]  58.49MB/86.27MB
2025-04-15T08:23:22.9257319Z  f5df99d02de0 Extracting [====================================>              ]  62.39MB/86.27MB
2025-04-15T08:23:23.0619584Z  f5df99d02de0 Extracting [======================================>            ]  66.85MB/86.27MB
2025-04-15T08:23:23.1669170Z  f5df99d02de0 Extracting [=========================================>         ]  70.75MB/86.27MB
2025-04-15T08:23:23.2694900Z  f5df99d02de0 Extracting [=============================================>     ]   79.1MB/86.27MB
2025-04-15T08:23:23.4021172Z  f5df99d02de0 Extracting [===============================================>   ]  82.44MB/86.27MB
2025-04-15T08:23:23.5135864Z  f5df99d02de0 Extracting [================================================>  ]  84.12MB/86.27MB
2025-04-15T08:23:23.6978871Z  f5df99d02de0 Extracting [=================================================> ]  85.79MB/86.27MB
2025-04-15T08:23:23.7339411Z  f5df99d02de0 Extracting [==================================================>]  86.27MB/86.27MB
2025-04-15T08:23:24.2820900Z  f5df99d02de0 Pull complete 
2025-04-15T08:23:24.2831008Z  23dfc5d6cd7e Extracting [==================================================>]  4.022kB/4.022kB
2025-04-15T08:23:24.2836443Z  23dfc5d6cd7e Extracting [==================================================>]  4.022kB/4.022kB
2025-04-15T08:23:24.2927245Z  23dfc5d6cd7e Pull complete 
2025-04-15T08:23:24.2942627Z  329c81ca2d70 Extracting [==================================================>]  8.196kB/8.196kB
2025-04-15T08:23:24.2946810Z  329c81ca2d70 Extracting [==================================================>]  8.196kB/8.196kB
2025-04-15T08:23:24.3046606Z  329c81ca2d70 Pull complete 
2025-04-15T08:23:24.3127764Z  mariadb Pulled 
2025-04-15T08:23:24.3167288Z  Network github_default  Creating
2025-04-15T08:23:24.3772325Z  Network github_default  Created
2025-04-15T08:23:24.3773029Z  Container github-mariadb-1  Creating
2025-04-15T08:23:24.3991899Z  Container github-mariadb-1  Created
2025-04-15T08:23:24.3998005Z  Container github-mariadb-1  Starting
2025-04-15T08:23:24.6397954Z  Container github-mariadb-1  Started
2025-04-15T08:23:25.1444482Z docker-compose is up
2025-04-15T08:23:25.1508701Z ##[group]Run pnpm test:mariadb --testTimeout 30000
2025-04-15T08:23:25.1509105Z [36;1mpnpm test:mariadb --testTimeout 30000[0m
2025-04-15T08:23:25.1556586Z shell: /usr/bin/bash -e {0}
2025-04-15T08:23:25.1556812Z env:
2025-04-15T08:23:25.1557005Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T08:23:25.1557241Z   TURBOGHA_PORT: 41230
2025-04-15T08:23:25.1557473Z   TURBO_API: http://localhost:41230
2025-04-15T08:23:25.1557717Z   TURBO_TOKEN: turbogha
2025-04-15T08:23:25.1557910Z   TURBO_TEAM: turbogha
2025-04-15T08:23:25.1558102Z ##[endgroup]
2025-04-15T08:23:25.5159352Z 
2025-04-15T08:23:25.5160524Z > n8n@1.89.0 test:mariadb /home/runner/work/n8n/n8n/packages/cli
2025-04-15T08:23:25.5161731Z > N8N_LOG_LEVEL=silent DB_TYPE=mariadb DB_TABLE_PREFIX=test_ jest --no-coverage --testTimeout 30000
2025-04-15T08:23:25.5162451Z 
2025-04-15T08:23:39.2838442Z /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/@n8n/typeorm/driver/mysql/MysqlQueryRunner.js:165
2025-04-15T08:23:39.2845081Z                         return fail(new QueryFailedError_1.QueryFailedError(query, parameters, err));
2025-04-15T08:23:39.2845801Z                                     ^
2025-04-15T08:23:39.2848138Z 
2025-04-15T08:23:39.2848714Z QueryFailedError: Can't add new command when connection is in closed state
2025-04-15T08:23:39.2850704Z     at Query.onResult (/home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:246:33)
2025-04-15T08:23:39.2854224Z     at PoolConnection._addCommandClosedState (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:169:11)
2025-04-15T08:23:39.2861618Z     at PoolConnection.query (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:575:17)
2025-04-15T08:23:39.2864062Z     at /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:207:36
2025-04-15T08:23:39.2865775Z     at processTicksAndRejections (node:internal/process/task_queues:95:5) {
2025-04-15T08:23:39.2866856Z   query: 'DELETE FROM `test_insights_by_period` WHERE `periodStart` < DATE_SUB(CURRENT_DATE, INTERVAL 10 DAY)',
2025-04-15T08:23:39.2867649Z   parameters: [],
2025-04-15T08:23:39.2868244Z   driverError: Error: Can't add new command when connection is in closed state
2025-04-15T08:23:39.2869690Z       at PoolConnection._addCommandClosedState (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:164:17)
2025-04-15T08:23:39.2871944Z       at PoolConnection.query (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:575:17)
2025-04-15T08:23:39.2874342Z       at /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:207:36
2025-04-15T08:23:39.2876180Z       at processTicksAndRejections (node:internal/process/task_queues:95:5) {
2025-04-15T08:23:39.2876848Z     fatal: true
2025-04-15T08:23:39.2877162Z   },
2025-04-15T08:23:39.2877437Z   fatal: true
2025-04-15T08:23:39.2877771Z }
2025-04-15T08:23:39.2877934Z 
2025-04-15T08:23:39.2878090Z Node.js v20.19.0
2025-04-15T08:23:43.2372609Z PASS test/integration/workflows/workflows.controller.ee.test.ts (16.413 s)
2025-04-15T08:23:43.2393968Z   router should switch based on flag
2025-04-15T08:23:43.2395121Z     âœ“ when sharing is disabled (133 ms)
2025-04-15T08:23:43.2396134Z     âœ“ when sharing is enabled (53 ms)
2025-04-15T08:23:43.2396848Z   PUT /workflows/:workflowId/share
2025-04-15T08:23:43.2397984Z     âœ“ should save sharing with new users (38 ms)
2025-04-15T08:23:43.2398811Z     âœ“ should succeed when sharing with invalid user-id (28 ms)
2025-04-15T08:23:43.2399568Z     âœ“ should allow sharing with pending users (41 ms)
2025-04-15T08:23:43.2400291Z     âœ“ should allow sharing with multiple users (28 ms)
2025-04-15T08:23:43.2400901Z     âœ“ should override sharing (39 ms)
2025-04-15T08:23:43.2401585Z     âœ“ should allow sharing by the owner of the workflow (29 ms)
2025-04-15T08:23:43.2421357Z     âœ“ should allow sharing by the instance owner (46 ms)
2025-04-15T08:23:43.2422186Z     âœ“ should not allow sharing by another shared member (30 ms)
2025-04-15T08:23:43.2423346Z     âœ“ should not allow sharing with self by another non-shared member (25 ms)
2025-04-15T08:23:43.2424350Z     âœ“ should not allow sharing by another non-shared member (27 ms)
2025-04-15T08:23:43.2425330Z     âœ“ should not call internal hooks listener for email sent if emailing is disabled (34 ms)
2025-04-15T08:23:43.2426189Z     âœ“ should ignore sharing with owner project (23 ms)
2025-04-15T08:23:43.2426998Z     âœ“ should ignore sharing with project that already has it shared (26 ms)
2025-04-15T08:23:43.2427546Z   GET /workflows/new
2025-04-15T08:23:43.2428272Z     âœ“ should return an auto-incremented name, even when sharing is enabled (28 ms)
2025-04-15T08:23:43.2429290Z     âœ“ should return an auto-incremented name, even when sharing is disabled (25 ms)
2025-04-15T08:23:43.2429917Z   GET /workflows/:workflowId
2025-04-15T08:23:43.2430519Z     âœ“ should fail with invalid id due to route rule (32 ms)
2025-04-15T08:23:43.2431271Z     âœ“ should return 404 for non existing workflow (14 ms)
2025-04-15T08:23:43.2431965Z     âœ“ project viewers can view workflows (37 ms)
2025-04-15T08:23:43.2432616Z     âœ“ should return a workflow with owner (31 ms)
2025-04-15T08:23:43.2439187Z     âœ“ should return tags (37 ms)
2025-04-15T08:23:43.2439855Z     âœ“ should return shared workflow with user data (34 ms)
2025-04-15T08:23:43.2440534Z     âœ“ should return all sharees (39 ms)
2025-04-15T08:23:43.2441288Z     âœ“ should return workflow with credentials owned by user (39 ms)
2025-04-15T08:23:43.2442439Z     âœ“ should return workflow with credentials saying owner does have access even when not shared (45 ms)
2025-04-15T08:23:43.2444627Z     âœ“ should return workflow with credentials saying admin does have access even when not shared (63 ms)
2025-04-15T08:23:43.2445883Z     âœ“ should return workflow with credentials for all users with or without access (87 ms)
2025-04-15T08:23:43.2446969Z     âœ“ should return workflow with credentials for all users with access (72 ms)
2025-04-15T08:23:43.2453755Z     âœ“ should return workflow credentials home project and shared with projects (52 ms)
2025-04-15T08:23:43.2455971Z   POST /workflows
2025-04-15T08:23:43.2458300Z     âœ“ project viewers cannot create workflows (42 ms)
2025-04-15T08:23:43.2459030Z     âœ“ Should create a workflow that uses no credential (35 ms)
2025-04-15T08:23:43.2462671Z     âœ“ Should save a new workflow with credentials (26 ms)
2025-04-15T08:23:43.2463782Z     âœ“ Should not allow saving a workflow using credential you have no access (19 ms)
2025-04-15T08:23:43.2464779Z     âœ“ Should allow owner to save a workflow using credential owned by others (35 ms)
2025-04-15T08:23:43.2465891Z     âœ“ Should allow saving a workflow using a credential owned by others and shared with you (43 ms)
2025-04-15T08:23:43.2466890Z     âœ“ Should create workflow history version when licensed (37 ms)
2025-04-15T08:23:43.2467746Z     âœ“ Should not create workflow history version when not licensed (27 ms)
2025-04-15T08:23:43.2468372Z   PATCH /workflows/:workflowId
2025-04-15T08:23:43.2469001Z     âœ“ project viewers cannot update workflows (21 ms)
2025-04-15T08:23:43.2469611Z     validate credential permissions to user
2025-04-15T08:23:43.2470443Z       âœ“ Should succeed when saving unchanged workflow nodes (80 ms)
2025-04-15T08:23:43.2471498Z       âœ“ Should allow owner to add node containing credential not shared with the owner (61 ms)
2025-04-15T08:23:43.2473997Z       âœ“ Tamper proofing kicks in if the workflow is owned by the owner and shared with the member, the credentials is owned by the owner, and the member tries to use the credential in the workflow (38 ms)
2025-04-15T08:23:43.2476223Z       âœ“ Tamper proofing kicks in if the workflow is owned by team 1, the credentials is owned by the member, and the member tries to use the credential in the workflow (31 ms)
2025-04-15T08:23:43.2478221Z       âœ“ Tamper proofing kicks in if the workflow is owned by team 1, the credentials is owned by team 2, and the member tries to use the credential in the workflow (45 ms)
2025-04-15T08:23:43.2480247Z       âœ“ Tamper proofing kicks in if the workflow is owned by the member, the credentials is owned by the owner, and the member tries to use the credential in the workflow (58 ms)
2025-04-15T08:23:43.2482412Z       âœ“ Tamper proofing kicks in if the workflow is owned by the member, the credentials is owned by team 2, and the member tries to use the credential in the workflow (51 ms)
2025-04-15T08:23:43.2484416Z       âœ“ Should succeed but prevent modifying node attributes other than position, name and disabled (105 ms)
2025-04-15T08:23:43.2485200Z     validate interim updates
2025-04-15T08:23:43.2486036Z       âœ“ should block owner updating workflow nodes on interim update by member (119 ms)
2025-04-15T08:23:43.2487132Z       âœ“ should block member updating workflow nodes on interim update by owner (141 ms)
2025-04-15T08:23:43.2488228Z       âœ“ should block owner activation on interim activation by member (117 ms)
2025-04-15T08:23:43.2489252Z       âœ“ should block member activation on interim activation by owner (141 ms)
2025-04-15T08:23:43.2490399Z       âœ“ should block member updating workflow settings on interim update by owner (109 ms)
2025-04-15T08:23:43.2491429Z       âœ“ should block member updating workflow name on interim update by owner (113 ms)
2025-04-15T08:23:43.2492020Z     workflow history
2025-04-15T08:23:43.2492525Z       âœ“ Should create workflow history version when licensed (42 ms)
2025-04-15T08:23:43.2493592Z       âœ“ Should not create workflow history version when not licensed (55 ms)
2025-04-15T08:23:43.2494241Z     activate workflow
2025-04-15T08:23:43.2496853Z       âœ“ should activate workflow without changing version ID (46 ms)
2025-04-15T08:23:43.2497567Z       âœ“ should deactivate workflow without changing version ID (33 ms)
2025-04-15T08:23:43.2498045Z   PUT /:workflowId/transfer
2025-04-15T08:23:43.2501304Z     âœ“ cannot transfer into the same project (28 ms)
2025-04-15T08:23:43.2502055Z     âœ“ cannot transfer somebody elses workflow (26 ms)
2025-04-15T08:23:43.2503120Z     âœ“ cannot transfer if you're not a member of the destination project (29 ms)
2025-04-15T08:23:43.2503940Z     âœ“ project:editors cannot transfer workflows (26 ms)
2025-04-15T08:23:43.2505015Z     âœ“ project:viewers cannot transfer workflows (27 ms)
2025-04-15T08:23:43.2505902Z     âœ“ global owners can transfer workflows from a team project to a team project (40 ms)
2025-04-15T08:23:43.2507078Z     âœ“ global owners can transfer workflows from a team project to a personal project (38 ms)
2025-04-15T08:23:43.2508182Z     âœ“ global owners can transfer workflows from a personal project to a team project (38 ms)
2025-04-15T08:23:43.2509212Z     âœ“ global admins can transfer workflows from a team project to a team project (38 ms)
2025-04-15T08:23:43.2510188Z     âœ“ global admins can transfer workflows from a team project to a personal project (48 ms)
2025-04-15T08:23:43.2511186Z     âœ“ global admins can transfer workflows from a personal project to a team project (43 ms)
2025-04-15T08:23:43.2512391Z     âœ“ removes and re-adds the workflow from the active workflow manager during the transfer (43 ms)
2025-04-15T08:23:43.2513520Z     âœ“ should detach workflow from parent folder in source project (60 ms)
2025-04-15T08:23:43.2514814Z     âœ“ deactivates the workflow if it cannot be added to the active workflow manager again and returns the WorkflowActivationError as data (66 ms)
2025-04-15T08:23:43.2516434Z     âœ“ owner transfers workflow from project they are not part of, e.g. test global cred sharing scope (85 ms)
2025-04-15T08:23:43.2517662Z     âœ“ admin transfers workflow from project they are not part of, e.g. test global cred sharing scope (76 ms)
2025-04-15T08:23:43.2519048Z     âœ“ member transfers workflow from personal project to team project and wf contains a credential that they can use but not share (57 ms)
2025-04-15T08:23:43.2520532Z     âœ“ member transfers workflow from their personal project to another team project in which they have editor role (50 ms)
2025-04-15T08:23:43.2521976Z     âœ“ member transfers workflow from a team project as project admin to another team project in which they have editor role (65 ms)
2025-04-15T08:23:43.2555582Z     âœ“ member transfers workflow from a team project as project admin to another team project in which they have editor role but cannot share the credential that is only shared into the source project (52 ms)
2025-04-15T08:23:43.2560203Z     âœ“ member transfers workflow from a team project as project admin to another team project in which they have editor role but cannot share all the credentials (85 ms)
2025-04-15T08:23:43.2561673Z     âœ“ returns a 500 if the workflow cannot be activated due to an unknown error (47 ms)
2025-04-15T08:23:43.2562348Z   POST /workflows/:workflowId/run
2025-04-15T08:23:43.2572284Z     âœ“ project viewers cannot run workflows (22 ms)
2025-04-15T08:23:43.2572968Z 
2025-04-15T08:23:44.1369506Z PASS test/integration/workflows/workflows.controller.test.ts (17.339 s)
2025-04-15T08:23:44.1376719Z   POST /workflows
2025-04-15T08:23:44.1377789Z     âœ“ should store pin data for node in workflow (133 ms)
2025-04-15T08:23:44.1378723Z     âœ“ should set pin data to null if no pin data (61 ms)
2025-04-15T08:23:44.1380145Z     âœ“ should return scopes on created workflow (60 ms)
2025-04-15T08:23:44.1381352Z     âœ“ should create workflow history version when licensed (56 ms)
2025-04-15T08:23:44.1384302Z     âœ“ should not create workflow history version when not licensed (47 ms)
2025-04-15T08:23:44.1385637Z     âœ“ create workflow in personal project by default (108 ms)
2025-04-15T08:23:44.1386906Z     âœ“ creates workflow in a specific project if the projectId is passed (84 ms)
2025-04-15T08:23:44.1388299Z     âœ“ does not create the workflow in a specific project if the user is not part of the project (75 ms)
2025-04-15T08:23:44.1390741Z     âœ“ does not create the workflow in a specific project if the user does not have the right role to do so (48 ms)
2025-04-15T08:23:44.1392994Z     âœ“ create link workflow with folder if one is provided (74 ms)
2025-04-15T08:23:44.1394164Z     âœ“ create workflow without parent folder if no folder is provided (57 ms)
2025-04-15T08:23:44.1395680Z     âœ“ create workflow without parent is provided folder does not exist in the project (54 ms)
2025-04-15T08:23:44.1397826Z   GET /workflows/:workflowId
2025-04-15T08:23:44.1398700Z     âœ“ should return pin data (69 ms)
2025-04-15T08:23:44.1399459Z     âœ“ should return tags (54 ms)
2025-04-15T08:23:44.1400019Z   GET /workflows
2025-04-15T08:23:44.1400970Z     âœ“ should return zero workflows if none exist (35 ms)
2025-04-15T08:23:44.1403328Z     âœ“ should return workflows (79 ms)
2025-04-15T08:23:44.1404421Z     âœ“ should return workflows with scopes when ?includeScopes=true (138 ms)
2025-04-15T08:23:44.1406011Z     filter
2025-04-15T08:23:44.1407387Z       âœ“ should filter workflows by field: name (49 ms)
2025-04-15T08:23:44.1408356Z       âœ“ should filter workflows by field: active (57 ms)
2025-04-15T08:23:44.1410090Z       âœ“ should filter workflows by field: tags (AND operator) (101 ms)
2025-04-15T08:23:44.1411036Z       âœ“ should filter workflows by projectId (67 ms)
2025-04-15T08:23:44.1411862Z       âœ“ should filter workflows by parentFolderId (70 ms)
2025-04-15T08:23:44.1439731Z       âœ“ should return homeProject when filtering workflows by projectId (63 ms)
2025-04-15T08:23:44.1440419Z     select
2025-04-15T08:23:44.1440977Z       âœ“ should select workflow field: name (48 ms)
2025-04-15T08:23:44.1441658Z       âœ“ should select workflow field: active (50 ms)
2025-04-15T08:23:44.1442656Z       âœ“ should select workflow field: tags (62 ms)
2025-04-15T08:23:44.1443797Z       âœ“ should select workflow fields: createdAt and updatedAt (66 ms)
2025-04-15T08:23:44.1444664Z       âœ“ should select workflow field: versionId (64 ms)
2025-04-15T08:23:44.1445432Z       âœ“ should select workflow field: ownedBy (63 ms)
2025-04-15T08:23:44.1446178Z       âœ“ should select workflow field: parentFolder (55 ms)
2025-04-15T08:23:44.1446699Z     sortBy
2025-04-15T08:23:44.1447410Z       âœ“ should fail when trying to sort by non sortable column (40 ms)
2025-04-15T08:23:44.1448184Z       âœ“ should sort by createdAt column (73 ms)
2025-04-15T08:23:44.1448844Z       âœ“ should sort by name column (71 ms)
2025-04-15T08:23:44.1449514Z       âœ“ should sort by updatedAt column (62 ms)
2025-04-15T08:23:44.1450024Z     pagination
2025-04-15T08:23:44.1450654Z       âœ“ should fail when skip is provided without take (76 ms)
2025-04-15T08:23:44.1451438Z       âœ“ should handle skip with take parameter (88 ms)
2025-04-15T08:23:44.1452231Z       âœ“ should handle pagination with sorting (81 ms)
2025-04-15T08:23:44.1453830Z       âœ“ should handle pagination with filtering (88 ms)
2025-04-15T08:23:44.1454767Z       âœ“ should return empty array when pagination exceeds total count (70 ms)
2025-04-15T08:23:44.1455897Z       âœ“ should return all results when no pagination parameters are provided (71 ms)
2025-04-15T08:23:44.1456628Z   GET /workflows?includeFolders=true
2025-04-15T08:23:44.1457418Z     âœ“ should return zero workflows and folders if none exist (35 ms)
2025-04-15T08:23:44.1458234Z     âœ“ should return workflows and folders (66 ms)
2025-04-15T08:23:44.1459236Z     âœ“ should return workflows with scopes and folders when ?includeScopes=true (130 ms)
2025-04-15T08:23:44.1459960Z     filter
2025-04-15T08:23:44.1460599Z       âœ“ should filter workflows and folders by field: name (59 ms)
2025-04-15T08:23:44.1461527Z       âœ“ should filter workflows and folders by field: active (44 ms)
2025-04-15T08:23:44.1462588Z       âœ“ should filter workflows and folders by field: tags (AND operator) (75 ms)
2025-04-15T08:23:44.1463709Z       âœ“ should filter workflows by projectId (58 ms)
2025-04-15T08:23:44.1464811Z       âœ“ should filter workflows by parentFolderId and its descendants when filtering by name (74 ms)
2025-04-15T08:23:44.1466104Z       âœ“ should return homeProject when filtering workflows and folders by projectId (69 ms)
2025-04-15T08:23:44.1466792Z     sortBy
2025-04-15T08:23:44.1467455Z       âœ“ should fail when trying to sort by non sortable column (42 ms)
2025-04-15T08:23:44.1468238Z       âœ“ should sort by createdAt column (90 ms)
2025-04-15T08:23:44.1468892Z       âœ“ should sort by name column (119 ms)
2025-04-15T08:23:44.1469512Z       âœ“ should sort by updatedAt column (73 ms)
2025-04-15T08:23:44.1470309Z     pagination
2025-04-15T08:23:44.1470940Z       âœ“ should fail when skip is provided without take (64 ms)
2025-04-15T08:23:44.1471715Z       âœ“ should handle skip with take parameter (72 ms)
2025-04-15T08:23:44.1472463Z       âœ“ should handle pagination with sorting (78 ms)
2025-04-15T08:23:44.1473494Z       âœ“ should handle pagination with filtering (113 ms)
2025-04-15T08:23:44.1474376Z       âœ“ should return empty array when pagination exceeds total count (86 ms)
2025-04-15T08:23:44.1475468Z       âœ“ should return all results when no pagination parameters are provided (72 ms)
2025-04-15T08:23:44.1476188Z   PATCH /workflows/:workflowId
2025-04-15T08:23:44.1476905Z     âœ“ should create workflow history version when licensed (72 ms)
2025-04-15T08:23:44.1477817Z     âœ“ should not create workflow history version when not licensed (63 ms)
2025-04-15T08:23:44.1478713Z     âœ“ should activate workflow without changing version ID (60 ms)
2025-04-15T08:23:44.1479598Z     âœ“ should deactivate workflow without changing version ID (60 ms)
2025-04-15T08:23:44.1480361Z     âœ“ should update workflow meta (61 ms)
2025-04-15T08:23:44.1480994Z     âœ“ should move workflow to folder (61 ms)
2025-04-15T08:23:44.1481654Z     âœ“ should move workflow to project root (64 ms)
2025-04-15T08:23:44.1483293Z     âœ“ should fail if trying update workflow parent folder with a folder that does not belong to project (67 ms)
2025-04-15T08:23:44.1484205Z   POST /workflows/:workflowId/run
2025-04-15T08:23:44.1484918Z     âœ“ should prevent tampering if sharing is enabled (47 ms)
2025-04-15T08:23:44.1485831Z     âœ“ should skip tampering prevention if sharing is disabled (55 ms)
2025-04-15T08:23:44.1486455Z   DELETE /workflows/:workflowId
2025-04-15T08:23:44.1487058Z     âœ“ deletes a workflow owned by the user (44 ms)
2025-04-15T08:23:44.1488001Z     âœ“ deletes a workflow owned by the user, even if the user is just a member (48 ms)
2025-04-15T08:23:44.1488971Z     âœ“ does not delete a workflow that is not owned by the user (47 ms)
2025-04-15T08:23:44.1489844Z     âœ“ allows the owner to delete workflows they don't own (51 ms)
2025-04-15T08:23:44.1490262Z 
2025-04-15T08:23:47.2008115Z /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/@n8n/typeorm/driver/mysql/MysqlQueryRunner.js:165
2025-04-15T08:23:47.2034644Z                         return fail(new QueryFailedError_1.QueryFailedError(query, parameters, err));
2025-04-15T08:23:47.2040748Z                                     ^
2025-04-15T08:23:47.2042981Z 
2025-04-15T08:23:47.2045882Z QueryFailedError: Can't add new command when connection is in closed state
2025-04-15T08:23:47.2073229Z     at Query.onResult (/home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:246:33)
2025-04-15T08:23:47.2105470Z     at PoolConnection._addCommandClosedState (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:169:11)
2025-04-15T08:23:47.2107415Z     at PoolConnection.query (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:575:17)
2025-04-15T08:23:47.2109642Z     at /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:207:36
2025-04-15T08:23:47.2111418Z     at processTicksAndRejections (node:internal/process/task_queues:95:5) {
2025-04-15T08:23:47.2112550Z   query: 'DELETE FROM `test_insights_by_period` WHERE `periodStart` < DATE_SUB(CURRENT_DATE, INTERVAL 10 DAY)',
2025-04-15T08:23:47.2113591Z   parameters: [],
2025-04-15T08:23:47.2114213Z   driverError: Error: Can't add new command when connection is in closed state
2025-04-15T08:23:47.2115654Z       at PoolConnection._addCommandClosedState (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:164:17)
2025-04-15T08:23:47.2118189Z       at PoolConnection.query (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:575:17)
2025-04-15T08:23:47.2120311Z       at /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:207:36
2025-04-15T08:23:47.2122021Z       at processTicksAndRejections (node:internal/process/task_queues:95:5) {
2025-04-15T08:23:47.2122660Z     fatal: true
2025-04-15T08:23:47.2123165Z   },
2025-04-15T08:23:47.2123445Z   fatal: true
2025-04-15T08:23:47.2123775Z }
2025-04-15T08:23:47.2123949Z 
2025-04-15T08:23:47.2124095Z Node.js v20.19.0
2025-04-15T08:23:54.1803673Z PASS test/integration/credentials/credentials.api.test.ts (10.661 s)
2025-04-15T08:23:54.1806648Z   GET /credentials
2025-04-15T08:23:54.1809522Z     âœ“ should return all creds for owner (108 ms)
2025-04-15T08:23:54.1811422Z     âœ“ should return only own creds for member (71 ms)
2025-04-15T08:23:54.1812145Z     âœ“ should return scopes when ?includeScopes=true (104 ms)
2025-04-15T08:23:54.1813399Z     âœ“ should return data when ?includeData=true (100 ms)
2025-04-15T08:23:54.1814078Z     âœ“ should return data when ?includeData=true for owners (56 ms)
2025-04-15T08:23:54.1814525Z     should return
2025-04-15T08:23:54.1814962Z       âœ“ all credentials for owner (95 ms)
2025-04-15T08:23:54.1815522Z       âœ“ only own credentials for member (63 ms)
2025-04-15T08:23:54.1815924Z     filter
2025-04-15T08:23:54.1816515Z       âœ“ should filter credentials by field: name - full match (57 ms)
2025-04-15T08:23:54.1817379Z       âœ“ should filter credentials by field: name - partial match (50 ms)
2025-04-15T08:23:54.1818225Z       âœ“ should filter credentials by field: type - full match (53 ms)
2025-04-15T08:23:54.1819073Z       âœ“ should filter credentials by field: type - partial match (41 ms)
2025-04-15T08:23:54.1819836Z       âœ“ should filter credentials by projectId (46 ms)
2025-04-15T08:23:54.1820684Z       âœ“ should return homeProject when filtering credentials by projectId (61 ms)
2025-04-15T08:23:54.1821717Z       âœ“ should return all credentials in a team project that member is part of (58 ms)
2025-04-15T08:23:54.1822923Z       âœ“ should return no credentials in a team project that member not is part of (50 ms)
2025-04-15T08:23:54.1824218Z       âœ“ should return only owned and explicitly shared credentials when filtering by any personal project id (58 ms)
2025-04-15T08:23:54.1825665Z       âœ“ should not ignore the project filter when the request is done by an owner and also includes the scopes (69 ms)
2025-04-15T08:23:54.1826447Z     select
2025-04-15T08:23:54.1826907Z       âœ“ should select credential field: id (45 ms)
2025-04-15T08:23:54.1827519Z       âœ“ should select credential field: name (42 ms)
2025-04-15T08:23:54.1828122Z       âœ“ should select credential field: type (40 ms)
2025-04-15T08:23:54.1828538Z     take
2025-04-15T08:23:54.1829041Z       âœ“ should return n credentials or less, without skip (57 ms)
2025-04-15T08:23:54.1829729Z       âœ“ should return n credentials or less, with skip (51 ms)
2025-04-15T08:23:54.1830192Z   POST /credentials
2025-04-15T08:23:54.1830582Z     âœ“ should create cred (54 ms)
2025-04-15T08:23:54.1831063Z     âœ“ should fail with invalid inputs (55 ms)
2025-04-15T08:23:54.1831578Z     âœ“ should ignore ID in payload (59 ms)
2025-04-15T08:23:54.1832207Z     âœ“ creates credential in personal project by default (56 ms)
2025-04-15T08:23:54.1833182Z     âœ“ creates credential in a specific project if the projectId is passed (62 ms)
2025-04-15T08:23:54.1834268Z     âœ“ does not create the credential in a specific project if the user is not part of the project (69 ms)
2025-04-15T08:23:54.1834956Z   DELETE /credentials/:id
2025-04-15T08:23:54.1835434Z     âœ“ should delete owned cred for owner (56 ms)
2025-04-15T08:23:54.1836022Z     âœ“ should delete non-owned cred for owner (49 ms)
2025-04-15T08:23:54.1836877Z     âœ“ should delete owned cred for member (56 ms)
2025-04-15T08:23:54.1837482Z     âœ“ should not delete non-owned cred for member (62 ms)
2025-04-15T08:23:54.1838208Z     âœ“ should not delete non-owned but shared cred for member (64 ms)
2025-04-15T08:23:54.1838839Z     âœ“ should fail if cred not found (62 ms)
2025-04-15T08:23:54.1839235Z   PATCH /credentials/:id
2025-04-15T08:23:54.1839717Z     âœ“ should update owned cred for owner (55 ms)
2025-04-15T08:23:54.1840323Z     âœ“ should update non-owned cred for owner (50 ms)
2025-04-15T08:23:54.1840926Z     âœ“ should update owned cred for member (69 ms)
2025-04-15T08:23:54.1841557Z     âœ“ should not update non-owned cred for member (38 ms)
2025-04-15T08:23:54.1842285Z     âœ“ should not update non-owned but shared cred for member (46 ms)
2025-04-15T08:23:54.1843295Z     âœ“ should update non-owned but shared cred for instance owner (55 ms)
2025-04-15T08:23:54.1844148Z     âœ“ should not allow to overwrite oauthTokenData (74 ms)
2025-04-15T08:23:54.1844856Z     âœ“ should fail with invalid inputs (132 ms)
2025-04-15T08:23:54.1845935Z     âœ“ should fail with a 404 if the credential does not exist and the actor has the global credential:update scope (44 ms)
2025-04-15T08:23:54.1847620Z     âœ“ should fail with a 403 if the credential does not exist and the actor does not have the global credential:update scope (39 ms)
2025-04-15T08:23:54.1848706Z     âœ“ should fail with a 400 is credential is managed (60 ms)
2025-04-15T08:23:54.1849198Z   GET /credentials/new
2025-04-15T08:23:54.1849901Z     âœ“ should return default name for new credential or its increment (133 ms)
2025-04-15T08:23:54.1850862Z     âœ“ should return name from query for new credential or its increment (104 ms)
2025-04-15T08:23:54.1851442Z   GET /credentials/:id
2025-04-15T08:23:54.1851949Z     âœ“ should retrieve owned cred for owner (69 ms)
2025-04-15T08:23:54.1882920Z     âœ“ should redact the data when `includeData:true` is passed (71 ms)
2025-04-15T08:23:54.1884000Z     âœ“ should omit oauth data when `includeData:true` is passed (49 ms)
2025-04-15T08:23:54.1884727Z     âœ“ should retrieve owned cred for member (74 ms)
2025-04-15T08:23:54.1885382Z     âœ“ should retrieve non-owned cred for owner (49 ms)
2025-04-15T08:23:54.1886070Z     âœ“ should not retrieve non-owned cred for member (50 ms)
2025-04-15T08:23:54.1886766Z     âœ“ should return 404 if cred not found (44 ms)
2025-04-15T08:23:54.1887252Z   POST /credentials/test
2025-04-15T08:23:54.1887866Z     âœ“ should test a credential with unredacted data (39 ms)
2025-04-15T08:23:54.1888585Z     âœ“ should test a credential with redacted data (47 ms)
2025-04-15T08:23:54.1888929Z 
2025-04-15T08:23:55.3404169Z /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/@n8n/typeorm/driver/mysql/MysqlQueryRunner.js:165
2025-04-15T08:23:55.3406201Z                         return fail(new QueryFailedError_1.QueryFailedError(query, parameters, err));
2025-04-15T08:23:55.3407017Z                                     ^
2025-04-15T08:23:55.3407309Z 
2025-04-15T08:23:55.3407844Z QueryFailedError: Can't add new command when connection is in closed state
2025-04-15T08:23:55.3409869Z     at Query.onResult (/home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:246:33)
2025-04-15T08:23:55.3412248Z     at PoolConnection._addCommandClosedState (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:169:11)
2025-04-15T08:23:55.3414324Z     at PoolConnection.query (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:575:17)
2025-04-15T08:23:55.3416572Z     at /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:207:36
2025-04-15T08:23:55.3418885Z     at processTicksAndRejections (node:internal/process/task_queues:95:5) {
2025-04-15T08:23:55.3420064Z   query: 'DELETE FROM `test_insights_by_period` WHERE `periodStart` < DATE_SUB(CURRENT_DATE, INTERVAL 10 DAY)',
2025-04-15T08:23:55.3420882Z   parameters: [],
2025-04-15T08:23:55.3421528Z   driverError: Error: Can't add new command when connection is in closed state
2025-04-15T08:23:55.3423194Z       at PoolConnection._addCommandClosedState (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:164:17)
2025-04-15T08:23:55.3424981Z       at PoolConnection.query (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:575:17)
2025-04-15T08:23:55.3427175Z       at /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:207:36
2025-04-15T08:23:55.3428958Z       at processTicksAndRejections (node:internal/process/task_queues:95:5) {
2025-04-15T08:23:55.3429628Z     fatal: true
2025-04-15T08:23:55.3429940Z   },
2025-04-15T08:23:55.3431044Z   fatal: true
2025-04-15T08:23:55.3431473Z }
2025-04-15T08:23:55.3431647Z 
2025-04-15T08:23:55.3431792Z Node.js v20.19.0
2025-04-15T08:23:55.9920767Z PASS test/integration/public-api/workflows.test.ts (11.589 s)
2025-04-15T08:23:55.9921443Z   GET /workflows
2025-04-15T08:23:55.9922169Z     âœ“ should fail due to missing API Key (39 ms)
2025-04-15T08:23:55.9923039Z     âœ“ should fail due to invalid API Key (16 ms)
2025-04-15T08:23:55.9923675Z     âœ“ should return all owned workflows (1333 ms)
2025-04-15T08:23:55.9924418Z     âœ“ should return all owned workflows with pagination (71 ms)
2025-04-15T08:23:55.9925206Z     âœ“ should return all owned workflows filtered by tag (40 ms)
2025-04-15T08:23:55.9926013Z     âœ“ should return all owned workflows filtered by tags (68 ms)
2025-04-15T08:23:55.9927022Z     âœ“ for owner, should return all workflows filtered by `projectId` (53 ms)
2025-04-15T08:23:55.9928186Z     âœ“ for member, should return all member-accessible workflows filtered by `projectId` (36 ms)
2025-04-15T08:23:55.9929192Z     âœ“ should return all owned workflows filtered by name (45 ms)
2025-04-15T08:23:55.9930013Z     âœ“ should return all workflows for owner (52 ms)
2025-04-15T08:23:55.9930883Z     âœ“ should return all owned workflows without pinned data (37 ms)
2025-04-15T08:23:55.9931460Z   GET /workflows/:id
2025-04-15T08:23:55.9932058Z     âœ“ should fail due to missing API Key (13 ms)
2025-04-15T08:23:55.9932975Z     âœ“ should fail due to invalid API Key (11 ms)
2025-04-15T08:23:55.9933735Z     âœ“ should fail due to non-existing workflow (24 ms)
2025-04-15T08:23:55.9934375Z     âœ“ should retrieve workflow (38 ms)
2025-04-15T08:23:55.9935048Z     âœ“ should retrieve non-owned workflow for owner (27 ms)
2025-04-15T08:23:55.9935852Z     âœ“ should retrieve workflow without pinned data (42 ms)
2025-04-15T08:23:55.9936423Z   DELETE /workflows/:id
2025-04-15T08:23:55.9937087Z     âœ“ should fail due to missing API Key (14 ms)
2025-04-15T08:23:55.9937770Z     âœ“ should fail due to invalid API Key (11 ms)
2025-04-15T08:23:55.9938449Z     âœ“ should fail due to non-existing workflow (39 ms)
2025-04-15T08:23:55.9939073Z     âœ“ should delete the workflow (35 ms)
2025-04-15T08:23:55.9939689Z     âœ“ should delete non-owned workflow when owner (49 ms)
2025-04-15T08:23:55.9940188Z   POST /workflows/:id/activate
2025-04-15T08:23:55.9940728Z     âœ“ should fail due to missing API Key (9 ms)
2025-04-15T08:23:55.9941354Z     âœ“ should fail due to invalid API Key (11 ms)
2025-04-15T08:23:55.9942000Z     âœ“ should fail due to non-existing workflow (23 ms)
2025-04-15T08:23:55.9948220Z     âœ“ should fail due to trying to activate a workflow without any nodes (38 ms)
2025-04-15T08:23:55.9949290Z     âœ“ should fail due to trying to activate a workflow without a trigger (35 ms)
2025-04-15T08:23:55.9950458Z     âœ“ should set workflow as active (106 ms)
2025-04-15T08:23:55.9951152Z     âœ“ should set non-owned workflow as active when owner (94 ms)
2025-04-15T08:23:55.9951728Z   POST /workflows/:id/deactivate
2025-04-15T08:23:55.9952293Z     âœ“ should fail due to missing API Key (11 ms)
2025-04-15T08:23:55.9953112Z     âœ“ should fail due to invalid API Key (10 ms)
2025-04-15T08:23:55.9953767Z     âœ“ should fail due to non-existing workflow (26 ms)
2025-04-15T08:23:55.9954365Z     âœ“ should deactivate workflow (68 ms)
2025-04-15T08:23:55.9955033Z     âœ“ should deactivate non-owned workflow when owner (69 ms)
2025-04-15T08:23:55.9955518Z   POST /workflows
2025-04-15T08:23:55.9955991Z     âœ“ should fail due to missing API Key (11 ms)
2025-04-15T08:23:55.9956593Z     âœ“ should fail due to invalid API Key (10 ms)
2025-04-15T08:23:55.9958152Z     âœ“ should fail due to invalid body (50 ms)
2025-04-15T08:23:55.9958703Z     âœ“ should create workflow (35 ms)
2025-04-15T08:23:55.9959410Z     âœ“ should create workflow history version when licensed (22 ms)
2025-04-15T08:23:55.9960290Z     âœ“ should not create workflow history version when not licensed (20 ms)
2025-04-15T08:23:55.9961235Z     âœ“ should not add a starting node if the payload has no starting nodes (22 ms)
2025-04-15T08:23:55.9962063Z   PUT /workflows/:id
2025-04-15T08:23:55.9962565Z     âœ“ should fail due to missing API Key (15 ms)
2025-04-15T08:23:55.9963324Z     âœ“ should fail due to invalid API Key (16 ms)
2025-04-15T08:23:55.9963954Z     âœ“ should fail due to non-existing workflow (42 ms)
2025-04-15T08:23:55.9964565Z     âœ“ should fail due to invalid body (10 ms)
2025-04-15T08:23:55.9965103Z     âœ“ should update workflow (29 ms)
2025-04-15T08:23:55.9965780Z     âœ“ should create workflow history version when licensed (40 ms)
2025-04-15T08:23:55.9966577Z     âœ“ should not create workflow history when not licensed (37 ms)
2025-04-15T08:23:55.9967294Z     âœ“ should update non-owned workflow if owner (36 ms)
2025-04-15T08:23:55.9967760Z   GET /workflows/:id/tags
2025-04-15T08:23:55.9968282Z     âœ“ should fail due to missing API Key (12 ms)
2025-04-15T08:23:55.9968867Z     âœ“ should fail due to invalid API Key (10 ms)
2025-04-15T08:23:55.9969495Z     âœ“ should fail if N8N_WORKFLOW_TAGS_DISABLED (26 ms)
2025-04-15T08:23:55.9970162Z     âœ“ should fail due to non-existing workflow (14 ms)
2025-04-15T08:23:55.9970805Z     âœ“ should return all tags of owned workflow (40 ms)
2025-04-15T08:23:55.9971573Z     âœ“ should return empty array if workflow does not have tags (33 ms)
2025-04-15T08:23:55.9972124Z   PUT /workflows/:id/tags
2025-04-15T08:23:55.9972624Z     âœ“ should fail due to missing API Key (12 ms)
2025-04-15T08:23:55.9973358Z     âœ“ should fail due to invalid API Key (10 ms)
2025-04-15T08:23:55.9973977Z     âœ“ should fail if N8N_WORKFLOW_TAGS_DISABLED (25 ms)
2025-04-15T08:23:55.9974446Z     âœ“ should fail due to non-existing workflow (17 ms)
2025-04-15T08:23:55.9974908Z     âœ“ should add the tags, workflow have not got tags previously (41 ms)
2025-04-15T08:23:55.9975421Z     âœ“ should add the tags, workflow have some tags previously (45 ms)
2025-04-15T08:23:55.9976010Z     âœ“ should fail to add the tags as one does not exist, workflow should maintain previous tags (73 ms)
2025-04-15T08:23:55.9976420Z   PUT /workflows/:id/transfer
2025-04-15T08:23:55.9976751Z     âœ“ should transfer workflow to project (84 ms)
2025-04-15T08:23:55.9977126Z     âœ“ if no destination project, should reject (52 ms)
2025-04-15T08:23:55.9977336Z 
2025-04-15T08:24:00.4991335Z PASS src/events/__tests__/telemetry-event-relay.test.ts
2025-04-15T08:24:00.4991966Z   TelemetryEventRelay
2025-04-15T08:24:00.4992306Z     init
2025-04-15T08:24:00.4993393Z       âœ“ with diagnostics enabled, should init telemetry and register listeners (6 ms)
2025-04-15T08:24:00.4994525Z       âœ“ with diagnostics disabled, should neither init telemetry nor register listeners (6 ms)
2025-04-15T08:24:00.4997005Z     project events
2025-04-15T08:24:00.4997621Z       âœ“ should track on `team-project-updated` event (2 ms)
2025-04-15T08:24:00.4998771Z       âœ“ should track on `team-project-deleted` event (1 ms)
2025-04-15T08:24:00.4999478Z       âœ“ should track on `team-project-created` event (1 ms)
2025-04-15T08:24:00.4999966Z     source control events
2025-04-15T08:24:00.5000611Z       âœ“ should track on `source-control-settings-updated` event
2025-04-15T08:24:00.5001423Z       âœ“ should track on `source-control-user-started-pull-ui` event
2025-04-15T08:24:00.5002269Z       âœ“ should track on `source-control-user-finished-pull-ui` event
2025-04-15T08:24:00.5003346Z       âœ“ should track on `source-control-user-pulled-api` event (1 ms)
2025-04-15T08:24:00.5004235Z       âœ“ should track on `source-control-user-started-push-ui` event (1 ms)
2025-04-15T08:24:00.5005167Z       âœ“ should track on `source-control-user-finished-push-ui` event (1 ms)
2025-04-15T08:24:00.5005779Z     license events
2025-04-15T08:24:00.5006358Z       âœ“ should track on `license-renewal-attempted` event
2025-04-15T08:24:00.5006849Z     variable events
2025-04-15T08:24:00.5007418Z       âœ“ should track on `variable-created` event
2025-04-15T08:24:00.5007882Z     external secrets events
2025-04-15T08:24:00.5008653Z       âœ“ should track on `external-secrets-provider-settings-saved` event (1 ms)
2025-04-15T08:24:00.5009309Z     public API events
2025-04-15T08:24:00.5010141Z       âœ“ should track on `public-api-invoked` event
2025-04-15T08:24:00.5010874Z       âœ“ should track on `public-api-key-created` event
2025-04-15T08:24:00.5011612Z       âœ“ should track on `public-api-key-deleted` event (1 ms)
2025-04-15T08:24:00.5012140Z     community package events
2025-04-15T08:24:00.5013006Z       âœ“ should track on `community-package-installed` event (1 ms)
2025-04-15T08:24:00.5013796Z       âœ“ should track on `community-package-updated` event
2025-04-15T08:24:00.5014550Z       âœ“ should track on `community-package-deleted` event (1 ms)
2025-04-15T08:24:00.5015138Z     credentials events
2025-04-15T08:24:00.5015793Z       âœ“ should track on `credentials-created` event (1 ms)
2025-04-15T08:24:00.5016601Z       âœ“ should track on `credentials-shared` event (1 ms)
2025-04-15T08:24:00.5017278Z       âœ“ should track on `credentials-updated` event
2025-04-15T08:24:00.5017969Z       âœ“ should track on `credentials-deleted` event (1 ms)
2025-04-15T08:24:00.5018447Z     LDAP events
2025-04-15T08:24:00.5019078Z       âœ“ should track on `ldap-general-sync-finished` event
2025-04-15T08:24:00.5019861Z       âœ“ should track on `ldap-settings-updated` event
2025-04-15T08:24:00.5020696Z       âœ“ should track on `ldap-login-sync-failed` event (1 ms)
2025-04-15T08:24:00.5021571Z       âœ“ should track on `login-failed-due-to-ldap-disabled` event
2025-04-15T08:24:00.5022117Z     workflow events
2025-04-15T08:24:00.5022883Z       âœ“ should track on `workflow-created` event (4 ms)
2025-04-15T08:24:00.5023561Z       âœ“ should track on `workflow-deleted` event (2 ms)
2025-04-15T08:24:00.5024332Z       âœ“ should track on `workflow-post-execute` event (3 ms)
2025-04-15T08:24:00.5025083Z       âœ“ should track on `workflow-saved` event (8 ms)
2025-04-15T08:24:00.5025831Z       âœ“ should track on `workflow-sharing-updated` event
2025-04-15T08:24:00.5026329Z     user events
2025-04-15T08:24:00.5026840Z       âœ“ should track on `user-updated` event (1 ms)
2025-04-15T08:24:00.5027498Z       âœ“ should track on `user-deleted` event
2025-04-15T08:24:00.5028126Z       âœ“ should track on `user-invited` event (1 ms)
2025-04-15T08:24:00.5028760Z       âœ“ should track on `user-signed-up` event
2025-04-15T08:24:00.5029600Z       âœ“ should track on `user-submitted-personalization-survey` event (1 ms)
2025-04-15T08:24:00.5030414Z       âœ“ should track on `user-changed-role` event
2025-04-15T08:24:00.5031114Z       âœ“ should track on `user-retrieved-user` event (1 ms)
2025-04-15T08:24:00.5031817Z       âœ“ should track on `user-retrieved-all-users` event
2025-04-15T08:24:00.5032304Z     lifecycle events
2025-04-15T08:24:00.5033078Z       âœ“ should track on `server-started` event (8 ms)
2025-04-15T08:24:00.5033792Z       âœ“ should track on `session-started` event (1 ms)
2025-04-15T08:24:00.5034911Z       âœ“ should track on `instance-stopped` event
2025-04-15T08:24:00.5035679Z       âœ“ should track on `instance-owner-setup` event (1 ms)
2025-04-15T08:24:00.5036252Z     workflow execution events
2025-04-15T08:24:00.5037075Z       âœ“ should track on `first-production-workflow-succeeded` event (1 ms)
2025-04-15T08:24:00.5038012Z       âœ“ should track on `first-workflow-data-loaded` event (1 ms)
2025-04-15T08:24:00.5038609Z     email events
2025-04-15T08:24:00.5039186Z       âœ“ should track on `email-failed` event (1 ms)
2025-04-15T08:24:00.5039669Z     Community+ registered
2025-04-15T08:24:00.5040426Z       âœ“ should track `license-community-plus-registered` event (1 ms)
2025-04-15T08:24:00.5041110Z     workflow post execute events
2025-04-15T08:24:00.5041806Z       âœ“ should not track when workflow has no id (2 ms)
2025-04-15T08:24:00.5042546Z       âœ“ should track successful workflow execution (8 ms)
2025-04-15T08:24:00.5043685Z       âœ“ should call telemetry.track when manual node execution finished (5 ms)
2025-04-15T08:24:00.5044968Z       âœ“ should call telemetry.track when manual node execution finished with canceled error message (3 ms)
2025-04-15T08:24:00.5046234Z       âœ“ should call telemetry.track when manual workflow execution finished (67 ms)
2025-04-15T08:24:00.5047893Z       âœ“ should call telemetry.track when manual node execution finished with is_managed and credential_type properties (7 ms)
2025-04-15T08:24:00.5049161Z       âœ“ should call telemetry.track when user ran out of free AI credits (5 ms)
2025-04-15T08:24:00.5049655Z 
2025-04-15T08:24:03.2298907Z /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/@n8n/typeorm/driver/mysql/MysqlQueryRunner.js:165
2025-04-15T08:24:03.2305061Z                         return fail(new QueryFailedError_1.QueryFailedError(query, parameters, err));
2025-04-15T08:24:03.2307551Z                                     ^
2025-04-15T08:24:03.2309580Z 
2025-04-15T08:24:03.2311846Z QueryFailedError: Can't add new command when connection is in closed state
2025-04-15T08:24:03.2315796Z     at Query.onResult (/home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:246:33)
2025-04-15T08:24:03.2319733Z     at PoolConnection._addCommandClosedState (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:169:11)
2025-04-15T08:24:03.2324043Z     at PoolConnection.query (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:575:17)
2025-04-15T08:24:03.2335690Z     at /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:207:36
2025-04-15T08:24:03.2339242Z     at processTicksAndRejections (node:internal/process/task_queues:95:5) {
2025-04-15T08:24:03.2342069Z   query: 'DELETE FROM `test_insights_by_period` WHERE `periodStart` < DATE_SUB(CURRENT_DATE, INTERVAL 10 DAY)',
2025-04-15T08:24:03.2345043Z   parameters: [],
2025-04-15T08:24:03.2354051Z   driverError: Error: Can't add new command when connection is in closed state
2025-04-15T08:24:03.2355866Z       at PoolConnection._addCommandClosedState (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:164:17)
2025-04-15T08:24:03.2357672Z       at PoolConnection.query (/home/runner/work/n8n/n8n/node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/connection.js:575:17)
2025-04-15T08:24:03.2359892Z       at /home/runner/work/n8n/n8n/node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/driver/mysql/MysqlQueryRunner.ts:207:36
2025-04-15T08:24:03.2362132Z       at processTicksAndRejections (node:internal/process/task_queues:95:5) {
2025-04-15T08:24:03.2363135Z     fatal: true
2025-04-15T08:24:03.2363634Z   },
2025-04-15T08:24:03.2364514Z   fatal: true
2025-04-15T08:24:03.2365135Z }
2025-04-15T08:24:03.2365501Z 
2025-04-15T08:24:03.2365861Z Node.js v20.19.0
2025-04-15T08:24:03.3258730Z FAIL src/modules/insights/__tests__/insights.service.test.ts
2025-04-15T08:24:03.3263026Z   â— Test suite failed to run
2025-04-15T08:24:03.3263479Z 
2025-04-15T08:24:03.3264072Z     Jest worker encountered 4 child process exceptions, exceeding retry limit
2025-04-15T08:24:03.3281763Z 
2025-04-15T08:24:03.3283332Z       at ChildProcessWorker.initialize (../../node_modules/.pnpm/jest-worker@29.6.2/node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)
2025-04-15T08:24:03.3284802Z 
2025-04-15T08:24:05.5774142Z PASS test/integration/credentials/credentials.api.ee.test.ts (11.12 s)
2025-04-15T08:24:05.5780432Z   POST /credentials
2025-04-15T08:24:05.5782091Z     âœ“ project viewers cannot create credentials (181 ms)
2025-04-15T08:24:05.5784179Z   GET /credentials
2025-04-15T08:24:05.5784778Z     âœ“ should return all creds for owner (151 ms)
2025-04-15T08:24:05.5785530Z     âœ“ should return only relevant creds for member (102 ms)
2025-04-15T08:24:05.5787098Z     âœ“ should show credentials that the user has access to through a team project they are part of (71 ms)
2025-04-15T08:24:05.5787939Z   GET /credentials/for-workflow
2025-04-15T08:24:05.5788323Z     for team projects
2025-04-15T08:24:05.5789460Z       âœ“ it will only return the credentials in that project if "workflowId" is used as the query parameter and the actor is a "member" (110 ms)
2025-04-15T08:24:05.5795242Z       âœ“ it will only return the credentials in that project if "projectId" is used as the query parameter and the actor is a "member" (72 ms)
2025-04-15T08:24:05.5801017Z       âœ“ it will only return the credentials in that project if "workflowId" is used as the query parameter and the actor is a "owner" (73 ms)
2025-04-15T08:24:05.5803074Z       âœ“ it will only return the credentials in that project if "projectId" is used as the query parameter and the actor is a "owner" (79 ms)
2025-04-15T08:24:05.5804006Z     for personal projects
2025-04-15T08:24:05.5805046Z       âœ“ it returns only personal credentials for a members, if "projectId" is used as the query parameter (111 ms)
2025-04-15T08:24:05.5806452Z       âœ“ it returns only personal credentials for a members, if "workflowId" is used as the query parameter (125 ms)
2025-04-15T08:24:05.5808146Z       âœ“ if the actor is a global owner and the workflow has not been shared with them, it returns all credentials of all projects the workflow is part of (98 ms)
2025-04-15T08:24:05.5809990Z       âœ“ if the actor is a global owner and the workflow has been shared with them, it returns all credentials of all projects the workflow is part of (86 ms)
2025-04-15T08:24:05.5811481Z       âœ“ if the projectId is passed by a global owner it will return all credentials in that project (86 ms)
2025-04-15T08:24:05.5813397Z       âœ“ if the global owner owns the workflow it will return all credentials of all personal projects, when using "workflowId" as the query parameter (81 ms)
2025-04-15T08:24:05.5815312Z       âœ“ if the global owner owns the workflow it will return all credentials of all personal projects, when using "projectId" as the query parameter (87 ms)
2025-04-15T08:24:05.5816289Z   GET /credentials/:id
2025-04-15T08:24:05.5816841Z     âœ“ project viewers can view credentials (72 ms)
2025-04-15T08:24:05.5817455Z     âœ“ should retrieve owned cred for owner (95 ms)
2025-04-15T08:24:05.5818097Z     âœ“ should redact the data when `includeData:true` is passed (77 ms)
2025-04-15T08:24:05.5818725Z     âœ“ should retrieve non-owned cred for owner (105 ms)
2025-04-15T08:24:05.5819318Z     âœ“ should retrieve owned cred for member (145 ms)
2025-04-15T08:24:05.5819969Z     âœ“ should not retrieve non-owned cred for member (56 ms)
2025-04-15T08:24:05.5820612Z     âœ“ should return 404 if cred not found (57 ms)
2025-04-15T08:24:05.5821577Z   PATCH /credentials/:id
2025-04-15T08:24:05.5822136Z     âœ“ project viewer cannot update credentials (62 ms)
2025-04-15T08:24:05.5822604Z   PUT /credentials/:id/share
2025-04-15T08:24:05.5823688Z     âœ“ should share the credential with the provided userIds and unshare it for missing ones (100 ms)
2025-04-15T08:24:05.5824667Z     âœ“ should share the credential with the provided userIds (83 ms)
2025-04-15T08:24:05.5825425Z     âœ“ should respond 403 for non-existing credentials (47 ms)
2025-04-15T08:24:05.5826252Z     âœ“ should respond 403 for non-owned credentials for shared members (51 ms)
2025-04-15T08:24:05.5827332Z     âœ“ should respond 403 for non-owned credentials for non-shared members sharing with self (58 ms)
2025-04-15T08:24:05.5828432Z     âœ“ should respond 403 for non-owned credentials for non-shared members sharing (60 ms)
2025-04-15T08:24:05.5829368Z     âœ“ should respond 200 for non-owned credentials for owners (46 ms)
2025-04-15T08:24:05.5830033Z     âœ“ should not ignore pending sharee (66 ms)
2025-04-15T08:24:05.5830657Z     âœ“ should ignore non-existing sharee (52 ms)
2025-04-15T08:24:05.5831319Z     âœ“ should ignore sharing with owner project (62 ms)
2025-04-15T08:24:05.5832340Z     âœ“ should ignore sharing with project that already has it shared (50 ms)
2025-04-15T08:24:05.5833292Z     âœ“ should respond 400 if invalid payload is provided (42 ms)
2025-04-15T08:24:05.5833906Z     âœ“ should unshare the credential (59 ms)
2025-04-15T08:24:05.5834686Z     âœ“ should not call internal hooks listener for email sent if emailing is disabled (64 ms)
2025-04-15T08:24:05.5835790Z     âœ“ member should be able to share from personal project to team project that member has access to (61 ms)
2025-04-15T08:24:05.5836773Z     âœ“ member should be able to share from team project to personal project (61 ms)
2025-04-15T08:24:05.5837768Z     âœ“ member should be able to share from team project to team project that member has access to (55 ms)
2025-04-15T08:24:05.5838751Z     âœ“ admins should be able to share from any team project to any team project  (79 ms)
2025-04-15T08:24:05.5839743Z     âœ“ admins should be able to share from any team project to any user's personal project  (52 ms)
2025-04-15T08:24:05.5840742Z     âœ“ admins should be able to share from any personal project to any team project  (56 ms)
2025-04-15T08:24:05.5841331Z   PUT /:credentialId/transfer
2025-04-15T08:24:05.5841831Z     âœ“ cannot transfer into the same project (59 ms)
2025-04-15T08:24:05.5842419Z     âœ“ cannot transfer somebody elses credential (68 ms)
2025-04-15T08:24:05.5843376Z     âœ“ cannot transfer if you're not a member of the destination project (51 ms)
2025-04-15T08:24:05.5844170Z     âœ“ project:editors cannot transfer credentials (63 ms)
2025-04-15T08:24:05.5844868Z     âœ“ project:viewers cannot transfer credentials (46 ms)
2025-04-15T08:24:05.5845712Z     âœ“ owners can always transfer from a team project to a team project (52 ms)
2025-04-15T08:24:05.5846702Z     âœ“ owners can always transfer from a team project to a personal project (42 ms)
2025-04-15T08:24:05.5847745Z     âœ“ owners can always transfer from a personal project to a team project (59 ms)
2025-04-15T08:24:05.5848756Z     âœ“ admins can always transfer from a team project to a team project (57 ms)
2025-04-15T08:24:05.5849801Z     âœ“ admins can always transfer from a team project to a personal project (56 ms)
2025-04-15T08:24:05.5850844Z     âœ“ admins can always transfer from a personal project to a team project (61 ms)
2025-04-15T08:24:05.5851352Z 
2025-04-15T08:24:07.6846649Z PASS src/ldap.ee/__tests__/ldap.service.test.ts
2025-04-15T08:24:07.6855601Z   LdapService
2025-04-15T08:24:07.6859924Z     init()
2025-04-15T08:24:07.6860643Z       âœ“ should load the LDAP configuration (9 ms)
2025-04-15T08:24:07.6865340Z       âœ“ should set expected configuration variables from LDAP config if LDAP is enabled (3 ms)
2025-04-15T08:24:07.6867329Z       âœ“ should set expected configuration variables from LDAP config if LDAP is disabled (1 ms)
2025-04-15T08:24:07.6868494Z       âœ“ should show logger warning if authentication method is not ldap or email (2 ms)
2025-04-15T08:24:07.6870141Z       âœ“ should schedule syncing if config has enabled synchronization (2 ms)
2025-04-15T08:24:07.6871424Z       âœ“ should throw an error if config has enabled synchronization but no synchronizationInterval is set (43 ms)
2025-04-15T08:24:07.6872180Z     loadConfig()
2025-04-15T08:24:07.6873244Z       âœ“ should retrieve the LDAP configuration from the settings repository (1 ms)
2025-04-15T08:24:07.6874288Z       âœ“ should throw an expected error if the LDAP configuration is not found (1 ms)
2025-04-15T08:24:07.6875273Z       âœ“ should decipher the LDAP configuration admin password (1 ms)
2025-04-15T08:24:07.6876086Z       âœ“ should return the expected LDAP configuration (1 ms)
2025-04-15T08:24:07.6876608Z     updateConfig()
2025-04-15T08:24:07.6877311Z       âœ“ should throw expected error if the LDAP configuration is invalid (4 ms)
2025-04-15T08:24:07.6878481Z       âœ“ should throw expected error if login is enabled and the current authentication method is "saml" (2 ms)
2025-04-15T08:24:07.6879550Z       âœ“ should encrypt the binding admin password (2 ms)
2025-04-15T08:24:07.6880557Z       âœ“ should delete all ldap identities if login is disabled and ldap users exist (2 ms)
2025-04-15T08:24:07.6882644Z       âœ“ should not delete ldap identities if login is disabled and there are no ldap identities (2 ms)
2025-04-15T08:24:07.6885083Z       âœ“ should update the LDAP configuration in the settings repository (1 ms)
2025-04-15T08:24:07.6885999Z       âœ“ should update the LDAP login label in the config (2 ms)
2025-04-15T08:24:07.6886517Z     setConfig()
2025-04-15T08:24:07.6887320Z       âœ“ should stop synchronization if the timer is running and the config is disabled (1 ms)
2025-04-15T08:24:07.6888552Z       âœ“ should schedule synchronization if the timer is not running and the config is enabled (1 ms)
2025-04-15T08:24:07.6890003Z       âœ“ should throw an error if the timer is not running and the config is enabled but the synchronizationInterval is not set (2 ms)
2025-04-15T08:24:07.6892195Z       âœ“ should restart synchronization if the timer is running and the config is enabled (2 ms)
2025-04-15T08:24:07.6893144Z     searchWithAdminBinding()
2025-04-15T08:24:07.6893707Z       âœ“ should bind admin client (1 ms)
2025-04-15T08:24:07.6894430Z       âœ“ should call client search with expected parameters (1 ms)
2025-04-15T08:24:07.6895481Z       âœ“ should call client search with expected parameters when searchPageSize is 0 (1 ms)
2025-04-15T08:24:07.6896378Z       âœ“ should unbind client after search (1 ms)
2025-04-15T08:24:07.6902207Z       âœ“ should return expected search entries
2025-04-15T08:24:07.6902616Z     validUser()
2025-04-15T08:24:07.6903475Z       âœ“ should throw expected error if no configuration has been set
2025-04-15T08:24:07.6904400Z       âœ“ should bind the ldap client with the expected distinguished name and password
2025-04-15T08:24:07.6905234Z       âœ“ should throw expected error if binding fails (1 ms)
2025-04-15T08:24:07.6905856Z       âœ“ should unbind the client binding (1 ms)
2025-04-15T08:24:07.6907583Z     findAndAuthenticateLdapUser()
2025-04-15T08:24:07.6908221Z       âœ“ should search for expected admin login ID (1 ms)
2025-04-15T08:24:07.6908924Z       âœ“ should emit expected error if admin search fails (1 ms)
2025-04-15T08:24:07.6909641Z       âœ“ should return undefined if no user is found (1 ms)
2025-04-15T08:24:07.6910218Z       âœ“ should validate found user (1 ms)
2025-04-15T08:24:07.6910840Z       âœ“ should validate last user if more than one is found
2025-04-15T08:24:07.6911547Z       âœ“ should return undefined if invalid user is found (1 ms)
2025-04-15T08:24:07.6915152Z       âœ“ should resolve binary attributes for found user (1 ms)
2025-04-15T08:24:07.6916213Z       âœ“ should return found user (1 ms)
2025-04-15T08:24:07.6916631Z     testConnection()
2025-04-15T08:24:07.6917240Z       âœ“ should throw expected error if init() is not called first
2025-04-15T08:24:07.6918244Z       âœ“ should create a new client without TLS if connectionSecurity is set to "none" (1 ms)
2025-04-15T08:24:07.6919953Z       âœ“ should create a new client with TLS enabled if connectionSecurity is set to "tls" and allowing unauthorized certificates (1 ms)
2025-04-15T08:24:07.6921524Z       âœ“ should create a new client with TLS enabled if connectionSecurity is set to "tls" and not allowing unauthorized certificates
2025-04-15T08:24:07.6923450Z       âœ“ should create a new client and start TLS if connectionSecurity is set to "startTls" (1 ms)
2025-04-15T08:24:07.6924484Z       âœ“ should not create a new client if one has already been created (1 ms)
2025-04-15T08:24:07.6924997Z     runSync()
2025-04-15T08:24:07.6925515Z       âœ“ should search for users with expected parameters (1 ms)
2025-04-15T08:24:07.6926199Z       âœ“ should resolve binary attributes for users (1 ms)
2025-04-15T08:24:07.6926843Z       âœ“ should throw expected error if search fails (1 ms)
2025-04-15T08:24:07.6927598Z       âœ“ should process expected users if mode is "live" (1 ms)
2025-04-15T08:24:07.6928301Z       âœ“ should sync expected LDAP data when no errors (1 ms)
2025-04-15T08:24:07.6929103Z       âœ“ should sync expected LDAP data when users fail to process (1 ms)
2025-04-15T08:24:07.6929957Z       âœ“ should emit expected event if synchronization is enabled (6 ms)
2025-04-15T08:24:07.6931009Z       âœ“ should emit expected event if synchronization is disabled (1 ms)
2025-04-15T08:24:07.6932039Z       âœ“ should emit expected event with error message if processUsers fails (2 ms)
2025-04-15T08:24:07.6932669Z     stopSync()
2025-04-15T08:24:07.6933469Z       âœ“ should clear the scheduled timer
2025-04-15T08:24:07.6933789Z 
2025-04-15T08:24:11.1795659Z PASS test/integration/folder/folder.controller.test.ts (10.457 s)
2025-04-15T08:24:11.1802065Z   POST /projects/:projectId/folders
2025-04-15T08:24:11.1807294Z     âœ“ should not create folder when project does not exist (119 ms)
2025-04-15T08:24:11.1808230Z     âœ“ should not create folder when name is empty (41 ms)
2025-04-15T08:24:11.1809209Z     âœ“ should not create folder if user has project:viewer role in team project (45 ms)
2025-04-15T08:24:11.1810364Z     âœ“ should not allow creating folder in another user's personal project (31 ms)
2025-04-15T08:24:11.1811437Z     âœ“ should create folder if user has project:editor role in team project (41 ms)
2025-04-15T08:24:11.1812523Z     âœ“ should create folder if user has project:admin role in team project (38 ms)
2025-04-15T08:24:11.1813831Z     âœ“ should not allow creating folder with parent that exists in another project (66 ms)
2025-04-15T08:24:11.1814768Z     âœ“ should create folder in root of specified project (43 ms)
2025-04-15T08:24:11.1815685Z     âœ“ should create folder in specified project within another folder (46 ms)
2025-04-15T08:24:11.1816525Z     âœ“ should create folder in personal project (48 ms)
2025-04-15T08:24:11.1817120Z   GET /projects/:projectId/folders/:folderId/tree
2025-04-15T08:24:11.1817879Z     âœ“ should not get folder tree when project does not exist (55 ms)
2025-04-15T08:24:11.1818731Z     âœ“ should not get folder tree when folder does not exist (36 ms)
2025-04-15T08:24:11.1819633Z     âœ“ should not get folder tree if user has no access to project (39 ms)
2025-04-15T08:24:11.1820655Z     âœ“ should not allow getting folder tree from another user's personal project (32 ms)
2025-04-15T08:24:11.1821511Z     âœ“ should get nested folder structure (39 ms)
2025-04-15T08:24:11.1822063Z   PATCH /projects/:projectId/folders/:folderId
2025-04-15T08:24:11.1822983Z     âœ“ should not update folder when project does not exist (32 ms)
2025-04-15T08:24:11.1823802Z     âœ“ should not update folder when folder does not exist (31 ms)
2025-04-15T08:24:11.1824546Z     âœ“ should not update folder when name is empty (40 ms)
2025-04-15T08:24:11.1825462Z     âœ“ should not update folder if user has project:viewer role in team project (39 ms)
2025-04-15T08:24:11.1826492Z     âœ“ should not allow updating folder in another user's personal project (29 ms)
2025-04-15T08:24:11.1827487Z     âœ“ should update folder if user has project:editor role in team project (53 ms)
2025-04-15T08:24:11.1828983Z     âœ“ should update folder if user has project:admin role in team project (41 ms)
2025-04-15T08:24:11.1829834Z     âœ“ should update folder in personal project (42 ms)
2025-04-15T08:24:11.1830450Z     âœ“ should update folder tags (49 ms)
2025-04-15T08:24:11.1831159Z     âœ“ should replace existing folder tags with new ones (61 ms)
2025-04-15T08:24:11.1831863Z     âœ“ should update folder parent folder ID (55 ms)
2025-04-15T08:24:11.1832907Z     âœ“ should not update folder parent when target folder does not exist (37 ms)
2025-04-15T08:24:11.1833940Z     âœ“ should not update folder parent when target folder is in another project (44 ms)
2025-04-15T08:24:11.1834951Z     âœ“ should allow moving a folder to root level by setting parentFolderId to "0" (44 ms)
2025-04-15T08:24:11.1835973Z     âœ“ should not update folder parent if user has project:viewer role in team project (43 ms)
2025-04-15T08:24:11.1837088Z     âœ“ should update folder parent folder if user has project:editor role in team project (50 ms)
2025-04-15T08:24:11.1837972Z     âœ“ should not allow setting a folder as its own parent (50 ms)
2025-04-15T08:24:11.1838566Z   DELETE /projects/:projectId/folders/:folderId
2025-04-15T08:24:11.1839524Z     âœ“ should not delete folder when project does not exist (31 ms)
2025-04-15T08:24:11.1840273Z     âœ“ should not delete folder when folder does not exist (41 ms)
2025-04-15T08:24:11.1841136Z     âœ“ should not delete folder if user has project:viewer role in team project (38 ms)
2025-04-15T08:24:11.1842093Z     âœ“ should not allow deleting folder in another user's personal project (34 ms)
2025-04-15T08:24:11.1843385Z     âœ“ should delete folder if user has project:editor role in team project (38 ms)
2025-04-15T08:24:11.1844363Z     âœ“ should delete folder if user has project:admin role in team project (36 ms)
2025-04-15T08:24:11.1845110Z     âœ“ should delete folder in personal project (37 ms)
2025-04-15T08:24:11.1846169Z     âœ“ should delete folder, all child folders, and contained workflows when no transfer folder is specified (57 ms)
2025-04-15T08:24:11.1847343Z     âœ“ should transfer folder contents when transferToFolderId is specified (74 ms)
2025-04-15T08:24:11.1848302Z     âœ“ should not transfer folder contents when transfer folder does not exist (38 ms)
2025-04-15T08:24:11.1849523Z     âœ“ should not transfer folder contents when transfer folder is in another project (41 ms)
2025-04-15T08:24:11.1850599Z     âœ“ should not allow transferring contents to the same folder being deleted (41 ms)
2025-04-15T08:24:11.1851671Z     âœ“ should transfer folder contents to project root when transferToFolderId is "0" (65 ms)
2025-04-15T08:24:11.1852406Z   GET /projects/:projectId/folders
2025-04-15T08:24:11.1853310Z     âœ“ should not list folders when project does not exist (43 ms)
2025-04-15T08:24:11.1854181Z     âœ“ should not list folders if user has no access to project (33 ms)
2025-04-15T08:24:11.1855164Z     âœ“ should not allow listing folders from another user's personal project (25 ms)
2025-04-15T08:24:11.1856229Z     âœ“ should list folders if user has project:viewer role in team project (51 ms)
2025-04-15T08:24:11.1857076Z     âœ“ should list folders from personal project (41 ms)
2025-04-15T08:24:11.1857702Z     âœ“ should filter folders by name (36 ms)
2025-04-15T08:24:11.1858367Z     âœ“ should filter folders by parent folder ID (47 ms)
2025-04-15T08:24:11.1859174Z     âœ“ should filter root-level folders when parentFolderId=0 (36 ms)
2025-04-15T08:24:11.1859919Z     âœ“ should filter folders by tag (58 ms)
2025-04-15T08:24:11.1860693Z     âœ“ should filter folders by multiple tags (AND operator) (47 ms)
2025-04-15T08:24:11.1861569Z     âœ“ should filter folders by excludeFolderIdAndDescendants (43 ms)
2025-04-15T08:24:11.1862411Z     âœ“ should apply pagination with take parameter (71 ms)
2025-04-15T08:24:11.1863445Z     âœ“ should apply pagination with skip parameter (44 ms)
2025-04-15T08:24:11.1864226Z     âœ“ should apply combined skip and take parameters (40 ms)
2025-04-15T08:24:11.1864951Z     âœ“ should sort folders by name ascending (39 ms)
2025-04-15T08:24:11.1865988Z     âœ“ should sort folders by name descending (42 ms)
2025-04-15T08:24:11.1866644Z     âœ“ should sort folders by updatedAt (36 ms)
2025-04-15T08:24:11.1867490Z     âœ“ should select specific fields when requested (41 ms)
2025-04-15T08:24:11.1868313Z     âœ“ should combine multiple query parameters correctly (44 ms)
2025-04-15T08:24:11.1869160Z     âœ“ should filter by projectId automatically based on URL (36 ms)
2025-04-15T08:24:11.1869797Z   GET /projects/:projectId/folders/content
2025-04-15T08:24:11.1870539Z     âœ“ should not list folders when project does not exist (30 ms)
2025-04-15T08:24:11.1871495Z     âœ“ should not return folder content if user has no access to project (31 ms)
2025-04-15T08:24:11.1872576Z     âœ“ should not return folder content if folder does not belong to project (32 ms)
2025-04-15T08:24:11.1904032Z     âœ“ should return folder content if user has project:viewer role in team project (60 ms)
2025-04-15T08:24:11.1904987Z     âœ“ should return folder content (89 ms)
2025-04-15T08:24:11.1905336Z 
2025-04-15T08:24:13.2823644Z PASS src/evaluation.ee/test-runner/__tests__/test-runner.service.ee.test.ts (5.355 s)
2025-04-15T08:24:13.2830521Z   TestRunnerService
2025-04-15T08:24:13.2836097Z     âœ“ should create an instance of TestRunnerService (9 ms)
2025-04-15T08:24:13.2839564Z     âœ“ should create and run test cases from past executions (26 ms)
2025-04-15T08:24:13.2853737Z     âœ“ should run both workflow under test and evaluation workflow (18 ms)
2025-04-15T08:24:13.2854726Z     âœ“ should properly count passed and failed executions (14 ms)
2025-04-15T08:24:13.2855577Z     âœ“ should properly count failed test executions (26 ms)
2025-04-15T08:24:13.2856360Z     âœ“ should properly count failed evaluations (35 ms)
2025-04-15T08:24:13.2857270Z     âœ“ should specify correct start nodes when running workflow under test (34 ms)
2025-04-15T08:24:13.2858139Z     âœ“ should properly choose trigger and start nodes (2 ms)
2025-04-15T08:24:13.2858940Z     âœ“ should properly choose trigger and start nodes 2 (1 ms)
2025-04-15T08:24:13.2859802Z     âœ“ should properly run test when nodes were renamed (50 ms)
2025-04-15T08:24:13.2860655Z     âœ“ should properly choose trigger when it was renamed (2 ms)
2025-04-15T08:24:13.2861626Z     âœ“ should create proper execution data for queue mode in runTestCase (6 ms)
2025-04-15T08:24:13.2862639Z     âœ“ should create proper execution data for regular mode in runTestCase (5 ms)
2025-04-15T08:24:13.2863909Z     âœ“ should run workflow with metrics defined in the middle of the workflow (12 ms)
2025-04-15T08:24:13.2864959Z     âœ“ should properly override metrics from earlier nodes with later ones (10 ms)
2025-04-15T08:24:13.2865574Z     Test Run cancellation
2025-04-15T08:24:13.2866066Z       âœ“ should cancel test run (20 ms)
2025-04-15T08:24:13.2866366Z 
2025-04-15T08:24:14.6857813Z PASS test/integration/project.api.test.ts (8.808 s)
2025-04-15T08:24:14.6861217Z   GET /projects/
2025-04-15T08:24:14.6863111Z     âœ“ member should get all personal projects and team projects they are apart of (142 ms)
2025-04-15T08:24:14.6865015Z     âœ“ owner should get all projects (54 ms)
2025-04-15T08:24:14.6866548Z   GET /projects/count
2025-04-15T08:24:14.6867371Z     âœ“ should return correct number of projects (36 ms)
2025-04-15T08:24:14.6868056Z   GET /projects/my-projects
2025-04-15T08:24:14.6868843Z     âœ“ member should get all projects they are apart of (80 ms)
2025-04-15T08:24:14.6869781Z     âœ“ owner should get all projects they are apart of (64 ms)
2025-04-15T08:24:14.6880387Z   GET /projects/personal
2025-04-15T08:24:14.6881251Z     âœ“ should return the user's personal project (18 ms)
2025-04-15T08:24:14.6882288Z     âœ“ should return 404 if user doesn't have a personal project (34 ms)
2025-04-15T08:24:14.6892233Z   POST /projects/
2025-04-15T08:24:14.6893222Z     âœ“ should create a team project (26 ms)
2025-04-15T08:24:14.6894209Z     âœ“ should allow to create a team projects if below the quota (26 ms)
2025-04-15T08:24:14.6895266Z     âœ“ should fail to create a team project if at quota (22 ms)
2025-04-15T08:24:14.6896352Z     âœ“ should fail to create a team project if above the quota (19 ms)
2025-04-15T08:24:14.6897041Z   PATCH /projects/:projectId
2025-04-15T08:24:14.6897719Z     âœ“ should update a team project name (27 ms)
2025-04-15T08:24:14.6898851Z     âœ“ should not allow viewers to edit team project name (21 ms)
2025-04-15T08:24:14.6899866Z     âœ“ should not allow owners to edit personal project name (29 ms)
2025-04-15T08:24:14.6900548Z     member management
2025-04-15T08:24:14.6901251Z       âœ“ should add or remove users from a project (86 ms)
2025-04-15T08:24:14.6902441Z       âœ“ `project:viewer`s should not be able to add, update or remove users from a project (33 ms)
2025-04-15T08:24:14.6904742Z       âœ“ `project:editor`s should not be able to add, update or remove users from a project (44 ms)
2025-04-15T08:24:14.6907232Z       âœ“ should not be able to add a user with the role project:viewer if it's not licensed (28 ms)
2025-04-15T08:24:14.6908422Z       âœ“ should not be able to add a user with the role project:editor if it's not licensed (29 ms)
2025-04-15T08:24:14.6909596Z       âœ“ should not edit a relation of a project when changing a user's role to an unlicensed role (44 ms)
2025-04-15T08:24:14.6911172Z       âœ“ should  edit a relation of a project when changing a user's role to an licensed role but unlicensed roles are present (42 ms)
2025-04-15T08:24:14.6912502Z       âœ“ should not add or remove users from a personal project (28 ms)
2025-04-15T08:24:14.6913305Z   GET /project/:projectId
2025-04-15T08:24:14.6913980Z     âœ“ should get project details and relations (54 ms)
2025-04-15T08:24:14.6914500Z   DELETE /project/:projectId
2025-04-15T08:24:14.6915169Z     âœ“ allows the project:owner to delete a project (86 ms)
2025-04-15T08:24:14.6916175Z     âœ“ allows the instance owner to delete a team project their are not related to (34 ms)
2025-04-15T08:24:14.6917266Z     âœ“ does not allow instance members to delete their personal project (13 ms)
2025-04-15T08:24:14.6918265Z     âœ“ does not allow instance owners to delete their personal projects (16 ms)
2025-04-15T08:24:14.6919359Z     âœ“ does not allow users with the role project:editor to delete a project (18 ms)
2025-04-15T08:24:14.6920431Z     âœ“ does not allow users with the role project:viewer to delete a project (17 ms)
2025-04-15T08:24:14.6921690Z     âœ“ deletes all workflows and credentials it owns as well as the sharings into other projects (99 ms)
2025-04-15T08:24:14.6923248Z     âœ“ unshares all workflows and credentials that were shared with the project (80 ms)
2025-04-15T08:24:14.6924120Z     âœ“ deletes the project relations (48 ms)
2025-04-15T08:24:14.6924863Z     âœ“ should fail if the project to delete does not exist (11 ms)
2025-04-15T08:24:14.6925928Z     âœ“ should fail to delete if project to migrate to and the project to delete are the same (21 ms)
2025-04-15T08:24:14.6927627Z     âœ“ does not migrate credentials and projects if the user does not have the permissions to create workflows or credentials in the target project (27 ms)
2025-04-15T08:24:14.6929690Z     âœ“ migrates folders, workflows and credentials to another project if `migrateToProject` is passed (70 ms)
2025-04-15T08:24:14.6931093Z     âœ“ should upgrade a projects role if the workflow/credential is already shared with it (51 ms)
2025-04-15T08:24:14.6931675Z 
2025-04-15T08:24:17.9505194Z PASS src/task-runners/task-broker/__tests__/task-broker.service.test.ts
2025-04-15T08:24:17.9506074Z   TaskBroker
2025-04-15T08:24:17.9508001Z     expireTasks
2025-04-15T08:24:17.9510285Z       âœ“ should remove expired task offers and keep valid task offers (8 ms)
2025-04-15T08:24:17.9512525Z       âœ“ should not expire non-expiring task offers (6 ms)
2025-04-15T08:24:17.9530623Z     registerRunner
2025-04-15T08:24:17.9531271Z       âœ“ should add a runner to known runners (2 ms)
2025-04-15T08:24:17.9531982Z       âœ“ should send node types to runner (1 ms)
2025-04-15T08:24:17.9532485Z     registerRequester
2025-04-15T08:24:17.9533362Z       âœ“ should add a requester to known requesters (1 ms)
2025-04-15T08:24:17.9533897Z     deregisterRunner
2025-04-15T08:24:17.9534502Z       âœ“ should remove a runner from known runners
2025-04-15T08:24:17.9535236Z       âœ“ should remove any pending offers for that runner
2025-04-15T08:24:17.9536039Z       âœ“ should fail any running tasks for that runner (1 ms)
2025-04-15T08:24:17.9536901Z     deregisterRequester
2025-04-15T08:24:17.9537630Z       âœ“ should remove a requester from known requesters (1 ms)
2025-04-15T08:24:17.9538168Z     taskRequested
2025-04-15T08:24:17.9538843Z       âœ“ should match a pending offer to an incoming request (1 ms)
2025-04-15T08:24:17.9539400Z     taskOffered
2025-04-15T08:24:17.9540055Z       âœ“ should match a pending request to an incoming offer (1 ms)
2025-04-15T08:24:17.9540597Z     settleTasks
2025-04-15T08:24:17.9541298Z       âœ“ should match task offers with task requests by task type (2 ms)
2025-04-15T08:24:17.9542386Z       âœ“ should not match a request whose acceptance is in progress (2 ms)
2025-04-15T08:24:17.9543408Z       âœ“ should expire tasks before settling
2025-04-15T08:24:17.9543900Z     onRunnerMessage
2025-04-15T08:24:17.9544516Z       âœ“ should handle `runner:taskaccepted` message (3 ms)
2025-04-15T08:24:17.9545279Z       âœ“ should handle `runner:taskrejected` message (1 ms)
2025-04-15T08:24:17.9546012Z       âœ“ should handle `runner:taskdone` message (1 ms)
2025-04-15T08:24:17.9546692Z       âœ“ should handle `runner:taskerror` message (1 ms)
2025-04-15T08:24:17.9547460Z       âœ“ should handle `runner:taskdatarequest` message (1 ms)
2025-04-15T08:24:17.9548167Z       âœ“ should handle `runner:rpc` message
2025-04-15T08:24:17.9548858Z       âœ“ should handle `runner:nodetypesrequest` message
2025-04-15T08:24:17.9549753Z       âœ“ should handle `runner:taskoffer` message with expiring offer (2 ms)
2025-04-15T08:24:17.9550798Z       âœ“ should handle `runner:taskoffer` message with non-expiring offer (1 ms)
2025-04-15T08:24:17.9551443Z     onRequesterMessage
2025-04-15T08:24:17.9552150Z       âœ“ should handle `requester:nodetypesresponse` message (1 ms)
2025-04-15T08:24:17.9554017Z     task timeouts
2025-04-15T08:24:17.9554717Z       âœ“ on sending task, we should set up task timeout (2 ms)
2025-04-15T08:24:17.9555475Z       âœ“ on task completion, we should clear timeout
2025-04-15T08:24:17.9556156Z       âœ“ on task error, we should clear timeout
2025-04-15T08:24:17.9557361Z       âœ“ [internal mode] on timeout, we should emit `runner:timed-out-during-task` event and send error to requester (2 ms)
2025-04-15T08:24:17.9558836Z       âœ“ [external mode] on timeout, we should instruct the runner to cancel and send error to requester (2 ms)
2025-04-15T08:24:17.9559481Z 
2025-04-15T08:24:19.1597398Z PASS src/events/__tests__/log-streaming-event-relay.test.ts (5.625 s)
2025-04-15T08:24:19.1607927Z   LogStreamingEventRelay
2025-04-15T08:24:19.1608254Z     workflow events
2025-04-15T08:24:19.1608897Z       âœ“ should log on `workflow-created` event (7 ms)
2025-04-15T08:24:19.1609420Z       âœ“ should log on `workflow-deleted` event
2025-04-15T08:24:19.1609961Z       âœ“ should log on `workflow-saved` event (1 ms)
2025-04-15T08:24:19.1611312Z       âœ“ should log on `workflow-pre-execute` event (1 ms)
2025-04-15T08:24:19.1612437Z       âœ“ should log on `workflow-post-execute` for successful execution (1 ms)
2025-04-15T08:24:19.1613862Z       âœ“ should log on `workflow-post-execute` event for failed execution (1 ms)
2025-04-15T08:24:19.1620938Z     user events
2025-04-15T08:24:19.1717452Z       âœ“ should log on `user-updated` event
2025-04-15T08:24:19.1718266Z       âœ“ should log on `user-deleted` event (1 ms)
2025-04-15T08:24:19.1718903Z       âœ“ should log on `user-invited` event (1 ms)
2025-04-15T08:24:19.1719518Z       âœ“ should log on `user-reinvited` event (6 ms)
2025-04-15T08:24:19.1720114Z       âœ“ should log on `user-signed-up` event
2025-04-15T08:24:19.1720674Z       âœ“ should log on `user-logged-in` event (1 ms)
2025-04-15T08:24:19.1721091Z     click events
2025-04-15T08:24:19.1721651Z       âœ“ should log on `user-password-reset-request-click` event
2025-04-15T08:24:19.1722362Z       âœ“ should log on `user-invite-email-click` event
2025-04-15T08:24:19.1723302Z       âœ“ should log on `user-password-reset-email-click` event (1 ms)
2025-04-15T08:24:19.1723837Z     node events
2025-04-15T08:24:19.1724280Z       âœ“ should log on `node-pre-execute` event
2025-04-15T08:24:19.1725134Z       âœ“ should log on `node-post-execute` event
2025-04-15T08:24:19.1725555Z     credentials events
2025-04-15T08:24:19.1726036Z       âœ“ should log on `credentials-shared` event
2025-04-15T08:24:19.1726650Z       âœ“ should log on `credentials-created` event (1 ms)
2025-04-15T08:24:19.1727252Z       âœ“ should log on `credentials-deleted` event
2025-04-15T08:24:19.1727878Z       âœ“ should log on `credentials-updated` event (1 ms)
2025-04-15T08:24:19.1728294Z     auth events
2025-04-15T08:24:19.1728717Z       âœ“ should log on `user-login-failed` event
2025-04-15T08:24:19.1729140Z     community package events
2025-04-15T08:24:19.1729727Z       âœ“ should log on `community-package-updated` event (4 ms)
2025-04-15T08:24:19.1730462Z       âœ“ should log on `community-package-installed` event (1 ms)
2025-04-15T08:24:19.1731158Z       âœ“ should log on `community-package-deleted` event
2025-04-15T08:24:19.1731592Z     email events
2025-04-15T08:24:19.1732007Z       âœ“ should log on `email-failed` event
2025-04-15T08:24:19.1732418Z     public API events
2025-04-15T08:24:19.1733084Z       âœ“ should log on `public-api-key-created` event (1 ms)
2025-04-15T08:24:19.1733761Z       âœ“ should log on `public-api-key-deleted` event (1 ms)
2025-04-15T08:24:19.1734197Z     execution events
2025-04-15T08:24:19.1734778Z       âœ“ should log on `execution-started-during-bootup` event (1 ms)
2025-04-15T08:24:19.1735450Z       âœ“ should log on `execution-throttled` event
2025-04-15T08:24:19.1735858Z     AI events
2025-04-15T08:24:19.1736383Z       âœ“ should log on `ai-messages-retrieved-from-memory` event
2025-04-15T08:24:19.1737130Z       âœ“ should log on `ai-message-added-to-memory` event (1 ms)
2025-04-15T08:24:19.1737833Z       âœ“ should log on `ai-output-parsed` event (1 ms)
2025-04-15T08:24:19.1738533Z       âœ“ should log on `ai-documents-retrieved` event
2025-04-15T08:24:19.1739203Z       âœ“ should log on `ai-document-embedded` event (1 ms)
2025-04-15T08:24:19.1739808Z       âœ“ should log on `ai-query-embedded` event
2025-04-15T08:24:19.1740413Z       âœ“ should log on `ai-document-processed` event
2025-04-15T08:24:19.1741000Z       âœ“ should log on `ai-text-split` event (1 ms)
2025-04-15T08:24:19.1741555Z       âœ“ should log on `ai-tool-called` event
2025-04-15T08:24:19.1742175Z       âœ“ should log on `ai-vector-store-searched` event (1 ms)
2025-04-15T08:24:19.1747436Z       âœ“ should log on `ai-llm-generated-output` event
2025-04-15T08:24:19.1748137Z       âœ“ should log on `ai-llm-errored` event (1 ms)
2025-04-15T08:24:19.1748827Z       âœ“ should log on `ai-vector-store-populated` event (1 ms)
2025-04-15T08:24:19.1749480Z       âœ“ should log on `ai-vector-store-updated` event
2025-04-15T08:24:19.1749813Z 
2025-04-15T08:24:19.6527865Z PASS test/integration/users.api.test.ts (8.238 s)
2025-04-15T08:24:19.6529054Z   GET /users
2025-04-15T08:24:19.6529772Z     âœ“ should return all users (78 ms)
2025-04-15T08:24:19.6530207Z     list query options
2025-04-15T08:24:19.6530589Z       filter
2025-04-15T08:24:19.6531049Z         âœ“ should filter users by field: email (24 ms)
2025-04-15T08:24:19.6531728Z         âœ“ should filter users by field: firstName (16 ms)
2025-04-15T08:24:19.6532308Z         âœ“ should filter users by field: lastName (16 ms)
2025-04-15T08:24:19.6533113Z         âœ“ should filter users by computed field: isOwner (18 ms)
2025-04-15T08:24:19.6533530Z       select
2025-04-15T08:24:19.6533949Z         âœ“ should select user field: id (9 ms)
2025-04-15T08:24:19.6534505Z         âœ“ should select user field: email (7 ms)
2025-04-15T08:24:19.6535103Z         âœ“ should select user field: firstName (8 ms)
2025-04-15T08:24:19.6535702Z         âœ“ should select user field: lastName (8 ms)
2025-04-15T08:24:19.6536113Z       take
2025-04-15T08:24:19.6536610Z         âœ“ should return n users or less, without skip (27 ms)
2025-04-15T08:24:19.6537310Z         âœ“ should return n users or less, with skip (15 ms)
2025-04-15T08:24:19.6537763Z       auxiliary fields
2025-04-15T08:24:19.6538698Z         âœ“ should support options that require auxiliary fields (8 ms)
2025-04-15T08:24:19.6539557Z   GET /users/:id/password-reset-link
2025-04-15T08:24:19.6540437Z     âœ“ should allow owners to generate password reset links for admins and members (33 ms)
2025-04-15T08:24:19.6541639Z     âœ“ should allow admins to generate password reset links for admins and members, but not owners (46 ms)
2025-04-15T08:24:19.6544466Z     âœ“ should not allow members to generate password reset links for anyone (16 ms)
2025-04-15T08:24:19.6545114Z   DELETE /users/:id
2025-04-15T08:24:19.6545641Z     âœ“ should delete user and their resources (110 ms)
2025-04-15T08:24:19.6546572Z     âœ“ should delete user and team relations and transfer their personal resources to user (137 ms)
2025-04-15T08:24:19.6547603Z     âœ“ should delete user and transfer their personal resources to team project (70 ms)
2025-04-15T08:24:19.6548399Z     âœ“ should fail to delete self (13 ms)
2025-04-15T08:24:19.6548979Z     âœ“ should fail to delete the instance owner (15 ms)
2025-04-15T08:24:19.6549640Z     âœ“ should fail to delete a user that does not exist (7 ms)
2025-04-15T08:24:19.6550418Z     âœ“ should fail to transfer to a project that does not exist (15 ms)
2025-04-15T08:24:19.6551187Z     âœ“ should fail to delete if user to delete is transferee (15 ms)
2025-04-15T08:24:19.6551679Z   PATCH /users/:id/role
2025-04-15T08:24:19.6552478Z     âœ“ should clear credential external secrets usability cache when changing a user's role (59 ms)
2025-04-15T08:24:19.6553307Z     unauthenticated user
2025-04-15T08:24:19.6553748Z       âœ“ should receive 401 (3 ms)
2025-04-15T08:24:19.6554233Z     Invalid payload should return 400 when newRoleName
2025-04-15T08:24:19.6554740Z       âœ“ is missing (6 ms)
2025-04-15T08:24:19.6555114Z       âœ“ is `owner` (3 ms)
2025-04-15T08:24:19.6555476Z       âœ“ is an array (4 ms)
2025-04-15T08:24:19.6555794Z     member
2025-04-15T08:24:19.6556231Z       âœ“ should fail to demote owner to member (5 ms)
2025-04-15T08:24:19.6556816Z       âœ“ should fail to demote owner to admin (5 ms)
2025-04-15T08:24:19.6557396Z       âœ“ should fail to demote admin to member (6 ms)
2025-04-15T08:24:19.6558033Z       âœ“ should fail to promote other member to owner (7 ms)
2025-04-15T08:24:19.6558680Z       âœ“ should fail to promote other member to admin (5 ms)
2025-04-15T08:24:19.6559288Z       âœ“ should fail to promote self to admin (6 ms)
2025-04-15T08:24:19.6559860Z       âœ“ should fail to promote self to owner (5 ms)
2025-04-15T08:24:19.6560259Z     admin
2025-04-15T08:24:19.6560713Z       âœ“ should receive 404 on unknown target user (6 ms)
2025-04-15T08:24:19.6561302Z       âœ“ should fail to demote owner to admin (10 ms)
2025-04-15T08:24:19.6561882Z       âœ“ should fail to demote owner to member (6 ms)
2025-04-15T08:24:19.6562619Z       âœ“ should fail to promote member to admin if not licensed (11 ms)
2025-04-15T08:24:19.6563721Z       âœ“ should be able to demote admin to member (25 ms)
2025-04-15T08:24:19.6564383Z       âœ“ should be able to demote self to member (19 ms)
2025-04-15T08:24:19.6565131Z       âœ“ should be able to promote member to admin if licensed (20 ms)
2025-04-15T08:24:19.6565661Z     owner
2025-04-15T08:24:19.6566116Z       âœ“ should fail to demote self to admin (6 ms)
2025-04-15T08:24:19.6566728Z       âœ“ should fail to demote self to member (6 ms)
2025-04-15T08:24:19.6567470Z       âœ“ should fail to promote member to admin if not licensed (4 ms)
2025-04-15T08:24:19.6568273Z       âœ“ should be able to promote member to admin if licensed (18 ms)
2025-04-15T08:24:19.6568988Z       âœ“ should be able to demote admin to member (21 ms)
2025-04-15T08:24:19.6569324Z 
2025-04-15T08:24:24.0273956Z PASS src/execution-lifecycle/__tests__/execution-lifecycle-hooks.test.ts
2025-04-15T08:24:24.0296294Z   Execution Lifecycle Hooks
2025-04-15T08:24:24.0297138Z     getLifecycleHooksForRegularMain
2025-04-15T08:24:24.0298255Z       âœ“ should setup the correct set of hooks (2 ms)
2025-04-15T08:24:24.0299043Z       workflowExecuteBefore
2025-04-15T08:24:24.0300168Z         âœ“ should emit workflow-pre-execute events (6 ms)
2025-04-15T08:24:24.0301779Z         âœ“ should run workflow.preExecute hook (1 ms)
2025-04-15T08:24:24.0303308Z         âœ“ should send executionStarted push event (1 ms)
2025-04-15T08:24:24.0324103Z         âœ“ should run workflow.preExecute external hook (1 ms)
2025-04-15T08:24:24.0330374Z       workflowExecuteAfter
2025-04-15T08:24:24.0332228Z         âœ“ should emit workflow-post-execute events (2 ms)
2025-04-15T08:24:24.0339943Z         âœ“ should not emit workflow-post-execute events for waiting executions (1 ms)
2025-04-15T08:24:24.0340929Z         âœ“ should run workflow.postExecute hook (1 ms)
2025-04-15T08:24:24.0341635Z         âœ“ should send executionFinished push event (1 ms)
2025-04-15T08:24:24.0342326Z         âœ“ should send executionWaiting push event (1 ms)
2025-04-15T08:24:24.0343446Z         âœ“ should restore binary data IDs after workflow execution for webhooks (1 ms)
2025-04-15T08:24:24.0344147Z         saving static data
2025-04-15T08:24:24.0344910Z           âœ“ should skip saving static data for manual executions (1 ms)
2025-04-15T08:24:24.0345823Z           âœ“ should save static data for prod executions (2 ms)
2025-04-15T08:24:24.0346589Z           âœ“ should handle static data saving errors (1 ms)
2025-04-15T08:24:24.0353649Z         saving execution data
2025-04-15T08:24:24.0354360Z           âœ“ should update execution with proper data (2 ms)
2025-04-15T08:24:24.0355064Z           âœ“ should not delete unfinished executions (2 ms)
2025-04-15T08:24:24.0355713Z           âœ“ should not delete waiting executions (1 ms)
2025-04-15T08:24:24.0356631Z           âœ“ should soft delete manual executions when manual saving is disabled (9 ms)
2025-04-15T08:24:24.0357653Z           âœ“ should not soft delete manual executions with waitTill (1 ms)
2025-04-15T08:24:24.0358221Z         error workflow
2025-04-15T08:24:24.0361242Z           âœ“ should not execute error workflow for manual executions (1 ms)
2025-04-15T08:24:24.0362305Z           âœ“ should execute error workflow for failed non-manual executions (2 ms)
2025-04-15T08:24:24.0363130Z       nodeExecuteBefore
2025-04-15T08:24:24.0363767Z         âœ“ should emit node-pre-execute event
2025-04-15T08:24:24.0364504Z         âœ“ should send nodeExecuteBefore push event (1 ms)
2025-04-15T08:24:24.0365031Z       nodeExecuteAfter
2025-04-15T08:24:24.0365640Z         âœ“ should emit node-post-execute event (1 ms)
2025-04-15T08:24:24.0366430Z         âœ“ should send nodeExecuteAfter push event (3 ms)
2025-04-15T08:24:24.0367202Z         âœ“ should save execution progress when enabled (1 ms)
2025-04-15T08:24:24.0368021Z         âœ“ should not save execution progress when disabled (1 ms)
2025-04-15T08:24:24.0368671Z       statistics events
2025-04-15T08:24:24.0369619Z         âœ“ workflowExecuteAfter should emit workflowExecutionCompleted statistics event (1 ms)
2025-04-15T08:24:24.0371707Z         âœ“ nodeFetchedData should handle nodeFetchedData statistics event
2025-04-15T08:24:24.0372995Z       when pushRef isn't set
2025-04-15T08:24:24.0373679Z         âœ“ should not setup any push hooks (2 ms)
2025-04-15T08:24:24.0374272Z     getLifecycleHooksForScalingMain
2025-04-15T08:24:24.0375008Z       âœ“ should setup the correct set of hooks (1 ms)
2025-04-15T08:24:24.0375524Z       workflowExecuteBefore
2025-04-15T08:24:24.0376149Z         âœ“ should emit workflow-pre-execute events
2025-04-15T08:24:24.0376841Z         âœ“ should run workflow.preExecute hook
2025-04-15T08:24:24.0377599Z         âœ“ should run the workflow.preExecute external hook
2025-04-15T08:24:24.0378142Z       workflowExecuteAfter
2025-04-15T08:24:24.0378777Z         âœ“ should emit workflow-post-execute events
2025-04-15T08:24:24.0379740Z         âœ“ should not emit workflow-post-execute events for waiting executions (1 ms)
2025-04-15T08:24:24.0380623Z         âœ“ should run workflow.postExecute hook
2025-04-15T08:24:24.0381578Z         âœ“ should delete successful executions when success saving is disabled (1 ms)
2025-04-15T08:24:24.0382881Z         âœ“ should delete failed executions when error saving is disabled (1 ms)
2025-04-15T08:24:24.0383582Z     getLifecycleHooksForScalingWorker
2025-04-15T08:24:24.0384566Z       âœ“ should setup the correct set of hooks (1 ms)
2025-04-15T08:24:24.0385126Z       nodeExecuteBefore
2025-04-15T08:24:24.0385754Z         âœ“ should emit node-pre-execute event (1 ms)
2025-04-15T08:24:24.0386255Z       nodeExecuteAfter
2025-04-15T08:24:24.0386827Z         âœ“ should emit node-post-execute event
2025-04-15T08:24:24.0387321Z       workflowExecuteBefore
2025-04-15T08:24:24.0387970Z         âœ“ should run workflow.preExecute hook (1 ms)
2025-04-15T08:24:24.0388482Z       workflowExecuteAfter
2025-04-15T08:24:24.0389075Z         âœ“ should run workflow.postExecute hook (1 ms)
2025-04-15T08:24:24.0389558Z       statistics events
2025-04-15T08:24:24.0390431Z         âœ“ workflowExecuteAfter should emit workflowExecutionCompleted statistics event (1 ms)
2025-04-15T08:24:24.0391612Z         âœ“ nodeFetchedData should handle nodeFetchedData statistics event (1 ms)
2025-04-15T08:24:24.0392255Z       saving static data
2025-04-15T08:24:24.0393267Z         âœ“ should skip saving static data for manual executions (1 ms)
2025-04-15T08:24:24.0394143Z         âœ“ should save static data for prod executions (1 ms)
2025-04-15T08:24:24.0394927Z         âœ“ should handle static data saving errors (1 ms)
2025-04-15T08:24:24.0395441Z       error workflow
2025-04-15T08:24:24.0396164Z         âœ“ should not execute error workflow for manual executions (1 ms)
2025-04-15T08:24:24.0397138Z         âœ“ should execute error workflow for failed non-manual executions (2 ms)
2025-04-15T08:24:24.0397869Z     getLifecycleHooksForSubExecutions
2025-04-15T08:24:24.0398539Z       âœ“ should setup the correct set of hooks (2 ms)
2025-04-15T08:24:24.0399030Z       workflowExecuteBefore
2025-04-15T08:24:24.0399716Z         âœ“ should emit workflow-pre-execute events (1 ms)
2025-04-15T08:24:24.0400422Z         âœ“ should run workflow.preExecute hook (1 ms)
2025-04-15T08:24:24.0400942Z       workflowExecuteAfter
2025-04-15T08:24:24.0401595Z         âœ“ should emit workflow-post-execute events (1 ms)
2025-04-15T08:24:24.0402593Z         âœ“ should not emit workflow-post-execute events for waiting executions (1 ms)
2025-04-15T08:24:24.0403656Z         âœ“ should run workflow.postExecute hook (1 ms)
2025-04-15T08:24:24.0404173Z       nodeExecuteBefore
2025-04-15T08:24:24.0404763Z         âœ“ should emit node-pre-execute event (1 ms)
2025-04-15T08:24:24.0405275Z       nodeExecuteAfter
2025-04-15T08:24:24.0405861Z         âœ“ should emit node-post-execute event
2025-04-15T08:24:24.0406336Z       statistics events
2025-04-15T08:24:24.0407264Z         âœ“ workflowExecuteAfter should emit workflowExecutionCompleted statistics event (1 ms)
2025-04-15T08:24:24.0408404Z         âœ“ nodeFetchedData should handle nodeFetchedData statistics event
2025-04-15T08:24:24.0408900Z 
2025-04-15T08:24:25.5253810Z PASS src/scaling/__tests__/pubsub-handler.test.ts (5.61 s)
2025-04-15T08:24:25.5256694Z   PubSubHandler
2025-04-15T08:24:25.5261048Z     in webhook process
2025-04-15T08:24:25.5266051Z       âœ“ should set up handlers in webhook process (9 ms)
2025-04-15T08:24:25.5270867Z       âœ“ should reload license on `reload-license` event (8 ms)
2025-04-15T08:24:25.5275906Z       âœ“ should restart event bus on `restart-event-bus` event (1 ms)
2025-04-15T08:24:25.5280813Z       âœ“ should reload providers on `reload-external-secrets-providers` event (1 ms)
2025-04-15T08:24:25.5283517Z       âœ“ should install community package on `community-package-install` event (1 ms)
2025-04-15T08:24:25.5284941Z       âœ“ should update community package on `community-package-update` event (1 ms)
2025-04-15T08:24:25.5287097Z       âœ“ should uninstall community package on `community-package-uninstall` event (1 ms)
2025-04-15T08:24:25.5289247Z     in worker process
2025-04-15T08:24:25.5290277Z       âœ“ should set up handlers in worker process (1 ms)
2025-04-15T08:24:25.5291786Z       âœ“ should reload license on `reload-license` event (1 ms)
2025-04-15T08:24:25.5294629Z       âœ“ should restart event bus on `restart-event-bus` event (1 ms)
2025-04-15T08:24:25.5296302Z       âœ“ should reload providers on `reload-external-secrets-providers` event (1 ms)
2025-04-15T08:24:25.5299498Z       âœ“ should install community package on `community-package-install` event (1 ms)
2025-04-15T08:24:25.5304715Z       âœ“ should update community package on `community-package-update` event
2025-04-15T08:24:25.5306152Z       âœ“ should uninstall community package on `community-package-uninstall` event (1 ms)
2025-04-15T08:24:25.5307897Z       âœ“ should generate status on `get-worker-status` event (1 ms)
2025-04-15T08:24:25.5310211Z     in main process
2025-04-15T08:24:25.5313023Z       âœ“ should set up command and worker response handlers in main process (2 ms)
2025-04-15T08:24:25.5315383Z       âœ“ should reload license on `reload-license` event
2025-04-15T08:24:25.5316428Z       âœ“ should restart event bus on `restart-event-bus` event (1 ms)
2025-04-15T08:24:25.5318090Z       âœ“ should reload providers on `reload-external-secrets-providers` event
2025-04-15T08:24:25.5320538Z       âœ“ should install community package on `community-package-install` event
2025-04-15T08:24:25.5328655Z       âœ“ should update community package on `community-package-update` event (1 ms)
2025-04-15T08:24:25.5331221Z       âœ“ should uninstall community package on `community-package-uninstall` event
2025-04-15T08:24:25.5332879Z       multi-main setup
2025-04-15T08:24:25.5335302Z         âœ“ if leader, should handle `add-webhooks-triggers-and-pollers` event (4 ms)
2025-04-15T08:24:25.5338038Z         âœ“ if follower, should skip `add-webhooks-triggers-and-pollers` event (11 ms)
2025-04-15T08:24:25.5339797Z         âœ“ if leader, should handle `remove-triggers-and-pollers` event (18 ms)
2025-04-15T08:24:25.5342136Z         âœ“ if follower, should skip `remove-triggers-and-pollers` event (14 ms)
2025-04-15T08:24:25.5343604Z         âœ“ should handle `display-workflow-activation` event (3 ms)
2025-04-15T08:24:25.5346219Z         âœ“ should handle `display-workflow-deactivation` event (4 ms)
2025-04-15T08:24:25.5347569Z         âœ“ should handle `display-workflow-activation-error` event (1 ms)
2025-04-15T08:24:25.5349334Z         âœ“ should handle `relay-execution-lifecycle-event` event (1 ms)
2025-04-15T08:24:25.5351095Z         âœ“ should handle `clear-test-webhooks` event (8 ms)
2025-04-15T08:24:25.5352367Z         âœ“ should handle `response-to-get-worker-status event (7 ms)
2025-04-15T08:24:25.5353328Z 
2025-04-15T08:24:26.0856358Z PASS test/integration/execution.service.integration.test.ts (7.899 s)
2025-04-15T08:24:26.0859603Z   ExecutionService
2025-04-15T08:24:26.0859967Z     findRangeWithCount
2025-04-15T08:24:26.0860713Z       âœ“ should return execution summaries (65 ms)
2025-04-15T08:24:26.0861297Z       âœ“ should limit executions (60 ms)
2025-04-15T08:24:26.0862028Z       âœ“ should retrieve executions before `lastId`, excluding it (38 ms)
2025-04-15T08:24:26.0863099Z       âœ“ should retrieve executions after `firstId`, excluding it (22 ms)
2025-04-15T08:24:26.0864309Z       âœ“ should filter executions by `status` (32 ms)
2025-04-15T08:24:26.0864972Z       âœ“ should filter executions by `workflowId` (28 ms)
2025-04-15T08:24:26.0865743Z       âœ“ should filter executions by `startedBefore` (24 ms)
2025-04-15T08:24:26.0866523Z       âœ“ should filter executions by `startedAfter` (16 ms)
2025-04-15T08:24:26.0867268Z       âœ“ should filter executions by `metadata` (16 ms)
2025-04-15T08:24:26.0867977Z       âœ“ should filter executions by `projectId` (39 ms)
2025-04-15T08:24:26.0868817Z       âœ“ should filter executions by `projectId` and expected `status` (31 ms)
2025-04-15T08:24:26.0869806Z       âœ“ should filter executions by `projectId` and expected `waitTill` (28 ms)
2025-04-15T08:24:26.0870748Z       âœ“ should filter executions by `projectId` and expected `metadata` (31 ms)
2025-04-15T08:24:26.0871716Z       âœ“ should filter executions by `projectId` and expected `startedAfter` (27 ms)
2025-04-15T08:24:26.0872928Z       âœ“ should filter executions by `projectId` and expected `startedBefore` (23 ms)
2025-04-15T08:24:26.0873867Z       âœ“ should exclude executions by inaccessible `workflowId` (20 ms)
2025-04-15T08:24:26.0874562Z       âœ“ should support advanced filters (16 ms)
2025-04-15T08:24:26.0875321Z     findLatestCurrentAndCompleted
2025-04-15T08:24:26.0876038Z       âœ“ should return latest current and completed executions (80 ms)
2025-04-15T08:24:26.0876743Z       âœ“ should handle zero current executions (26 ms)
2025-04-15T08:24:26.0877466Z       âœ“ should handle zero completed executions (28 ms)
2025-04-15T08:24:26.0878176Z       âœ“ should handle zero executions (15 ms)
2025-04-15T08:24:26.0878960Z       âœ“ should prioritize `running` over `new` executions (36 ms)
2025-04-15T08:24:26.0879526Z     annotation
2025-04-15T08:24:26.0880146Z       âœ“ should add and retrieve annotation (36 ms)
2025-04-15T08:24:26.0880776Z       âœ“ should update annotation (23 ms)
2025-04-15T08:24:26.0881426Z       âœ“ should filter by annotation tags (33 ms)
2025-04-15T08:24:26.0882145Z       âœ“ should filter by annotation vote (28 ms)
2025-04-15T08:24:26.0882474Z 
2025-04-15T08:24:28.4767618Z PASS src/sso.ee/saml/__tests__/saml-validator.test.ts
2025-04-15T08:24:28.4772127Z   saml-validator
2025-04-15T08:24:28.4798924Z     validateMetadata
2025-04-15T08:24:28.4803869Z       âœ“ successfully validates metadata containing ws federation tags (169 ms)
2025-04-15T08:24:28.4805960Z       âœ“ rejects invalid metadata (186 ms)
2025-04-15T08:24:28.4808057Z       âœ“ rejects malformed XML metadata (178 ms)
2025-04-15T08:24:28.4809288Z       âœ“ rejects metadata missing SingleSignOnService (198 ms)
2025-04-15T08:24:28.4810337Z       âœ“ rejects metadata with invalid X.509 certificate (152 ms)
2025-04-15T08:24:28.4811079Z     validateResponse
2025-04-15T08:24:28.4811946Z       âœ“ successfully validates response (221 ms)
2025-04-15T08:24:28.4812926Z       âœ“ rejects invalid response (148 ms)
2025-04-15T08:24:28.4813797Z       âœ“ rejects expired SAML response (139 ms)
2025-04-15T08:24:28.4814486Z 
2025-04-15T08:24:32.4539879Z PASS src/concurrency/__tests__/concurrency-control.service.test.ts
2025-04-15T08:24:32.4544475Z   ConcurrencyControlService
2025-04-15T08:24:32.4545610Z     constructor
2025-04-15T08:24:32.4547303Z       âœ“ should be enabled if production cap is positive (8 ms)
2025-04-15T08:24:32.4550026Z       âœ“ should be enabled if evaluation cap is positive (1 ms)
2025-04-15T08:24:32.4552954Z       âœ“ should throw if production cap is 0 (2 ms)
2025-04-15T08:24:32.4554135Z       âœ“ should throw if evaluation cap is 0 (1 ms)
2025-04-15T08:24:32.4555350Z       âœ“ should be disabled if both production and evaluation caps are -1 (1 ms)
2025-04-15T08:24:32.4556649Z       âœ“ should be disabled if production cap is lower than -1
2025-04-15T08:24:32.4557738Z       âœ“ should be disabled if evaluation cap is lower than -1
2025-04-15T08:24:32.4558702Z       âœ“ should be disabled on queue mode (1 ms)
2025-04-15T08:24:32.4559383Z     if enabled
2025-04-15T08:24:32.4573881Z       throttle
2025-04-15T08:24:32.4579049Z         âœ“ should do nothing on cli mode (1 ms)
2025-04-15T08:24:32.4584013Z         âœ“ should do nothing on error mode (1 ms)
2025-04-15T08:24:32.4588689Z         âœ“ should do nothing on integrated mode
2025-04-15T08:24:32.4604055Z         âœ“ should do nothing on internal mode
2025-04-15T08:24:32.4612637Z         âœ“ should do nothing on manual mode (1 ms)
2025-04-15T08:24:32.4621193Z         âœ“ should do nothing on retry mode (1 ms)
2025-04-15T08:24:32.4621937Z         âœ“ should enqueue on webhook mode
2025-04-15T08:24:32.4622520Z         âœ“ should enqueue on trigger mode
2025-04-15T08:24:32.4623466Z         âœ“ should enqueue on evaluation mode (1 ms)
2025-04-15T08:24:32.4623935Z       release
2025-04-15T08:24:32.4624422Z         âœ“ should do nothing on cli mode (1 ms)
2025-04-15T08:24:32.4625049Z         âœ“ should do nothing on error mode (1 ms)
2025-04-15T08:24:32.4625724Z         âœ“ should do nothing on integrated mode
2025-04-15T08:24:32.4626421Z         âœ“ should do nothing on internal mode (1 ms)
2025-04-15T08:24:32.4627205Z         âœ“ should do nothing on manual mode (1 ms)
2025-04-15T08:24:32.4627853Z         âœ“ should do nothing on retry mode
2025-04-15T08:24:32.4628416Z         âœ“ should dequeue on webhook mode (1 ms)
2025-04-15T08:24:32.4629195Z         âœ“ should dequeue on trigger mode
2025-04-15T08:24:32.4629797Z         âœ“ should dequeue on evaluation mode (1 ms)
2025-04-15T08:24:32.4631906Z       remove
2025-04-15T08:24:32.4632403Z         âœ“ should do nothing on cli mode
2025-04-15T08:24:32.4633306Z         âœ“ should do nothing on error mode (1 ms)
2025-04-15T08:24:32.4633949Z         âœ“ should do nothing on integrated mode
2025-04-15T08:24:32.4634607Z         âœ“ should do nothing on internal mode (1 ms)
2025-04-15T08:24:32.4635246Z         âœ“ should do nothing on manual mode
2025-04-15T08:24:32.4635896Z         âœ“ should do nothing on retry mode
2025-04-15T08:24:32.4636496Z         âœ“ should remove an execution on webhook mode
2025-04-15T08:24:32.4637243Z         âœ“ should remove an execution on trigger mode (1 ms)
2025-04-15T08:24:32.4638073Z         âœ“ should remove an execution on evaluation mode (1 ms)
2025-04-15T08:24:32.4638581Z       removeAll
2025-04-15T08:24:32.4639225Z         âœ“ should remove all executions from the production queue (2 ms)
2025-04-15T08:24:32.4640137Z         âœ“ should remove all executions from the evaluation queue (1 ms)
2025-04-15T08:24:32.4640688Z       get queue
2025-04-15T08:24:32.4641203Z         âœ“ should choose the production queue
2025-04-15T08:24:32.4641879Z         âœ“ should choose the evaluation queue (1 ms)
2025-04-15T08:24:32.4642359Z     if disabled
2025-04-15T08:24:32.4642654Z       throttle
2025-04-15T08:24:32.4643264Z         âœ“ should do nothing
2025-04-15T08:24:32.4643900Z         âœ“ should do nothing for evaluation executions (1 ms)
2025-04-15T08:24:32.4644381Z       release
2025-04-15T08:24:32.4644756Z         âœ“ should do nothing
2025-04-15T08:24:32.4645363Z         âœ“ should do nothing for evaluation executions (1 ms)
2025-04-15T08:24:32.4645866Z       remove
2025-04-15T08:24:32.4646216Z         âœ“ should do nothing
2025-04-15T08:24:32.4646763Z         âœ“ should do nothing for evaluation executions
2025-04-15T08:24:32.4647211Z     telemetry
2025-04-15T08:24:32.4647494Z       on cloud
2025-04-15T08:24:32.4648158Z         âœ“ for capacity 5, should report temp cloud threshold if reached (1 ms)
2025-04-15T08:24:32.4649092Z         âœ“ for capacity 10, should report temp cloud threshold if reached (1 ms)
2025-04-15T08:24:32.4650005Z         âœ“ for capacity 20, should report temp cloud threshold if reached
2025-04-15T08:24:32.4650911Z         âœ“ for capacity 50, should report temp cloud threshold if reached (1 ms)
2025-04-15T08:24:32.4652265Z         âœ“ for capacity 100, should report temp cloud threshold if reached
2025-04-15T08:24:32.4653422Z         âœ“ for capacity 200, should report temp cloud threshold if reached (1 ms)
2025-04-15T08:24:32.4654397Z         âœ“ for capacity 4, should not report temp cloud threshold if not reached
2025-04-15T08:24:32.4655429Z         âœ“ for capacity 9, should not report temp cloud threshold if not reached (1 ms)
2025-04-15T08:24:32.4657761Z         âœ“ for capacity 19, should not report temp cloud threshold if not reached
2025-04-15T08:24:32.4658900Z         âœ“ for capacity 49, should not report temp cloud threshold if not reached (1 ms)
2025-04-15T08:24:32.4659954Z         âœ“ for capacity 99, should not report temp cloud threshold if not reached
2025-04-15T08:24:32.4660994Z         âœ“ for capacity 199, should not report temp cloud threshold if not reached (1 ms)
2025-04-15T08:24:32.4662014Z         âœ“ for capacity 6, should not report temp cloud threshold if exceeded
2025-04-15T08:24:32.4663275Z         âœ“ for capacity 11, should not report temp cloud threshold if exceeded (1 ms)
2025-04-15T08:24:32.4664276Z         âœ“ for capacity 21, should not report temp cloud threshold if exceeded
2025-04-15T08:24:32.4665139Z         âœ“ for capacity 51, should not report temp cloud threshold if exceeded
2025-04-15T08:24:32.4666044Z         âœ“ for capacity 101, should not report temp cloud threshold if exceeded
2025-04-15T08:24:32.4667030Z         âœ“ for capacity 201, should not report temp cloud threshold if exceeded
2025-04-15T08:24:32.4667480Z 
2025-04-15T08:24:32.4835173Z PASS src/databases/repositories/__tests__/folder.repository.test.ts (6.134 s)
2025-04-15T08:24:32.4837581Z   FolderRepository
2025-04-15T08:24:32.4837989Z     getMany
2025-04-15T08:24:32.4838352Z       filters
2025-04-15T08:24:32.4839141Z         âœ“ should return all folders if not filter is provided (27 ms)
2025-04-15T08:24:32.4839844Z         âœ“ should filter folders by IDs (25 ms)
2025-04-15T08:24:32.4840457Z         âœ“ should filter folders by project ID (25 ms)
2025-04-15T08:24:32.4841220Z         âœ“ should filter folders by name case-insensitively (16 ms)
2025-04-15T08:24:32.4841958Z         âœ“ should filter folders by parent folder ID (25 ms)
2025-04-15T08:24:32.4842620Z         âœ“ should filter folders by a single tag (22 ms)
2025-04-15T08:24:32.4843589Z         âœ“ should filter folders by multiple tags (AND operator) (25 ms)
2025-04-15T08:24:32.4844367Z         âœ“ should apply multiple filters together (22 ms)
2025-04-15T08:24:32.4844832Z       select
2025-04-15T08:24:32.4845438Z         âœ“ should select only id and name when specified (15 ms)
2025-04-15T08:24:32.4846180Z         âœ“ should return id, name and tags when specified (14 ms)
2025-04-15T08:24:32.4846958Z         âœ“ should return id, name and project when specified (12 ms)
2025-04-15T08:24:32.4847791Z         âœ“ should return id, name and parentFolder when specified (15 ms)
2025-04-15T08:24:32.4848655Z         âœ“ should return id, name and workflowCount when specified (17 ms)
2025-04-15T08:24:32.4849535Z         âœ“ should return id, name and subFolderCount when specified (15 ms)
2025-04-15T08:24:32.4850311Z         âœ“ should return timestamps when specified (12 ms)
2025-04-15T08:24:32.4851114Z         âœ“ should return all properties when no select is specified (13 ms)
2025-04-15T08:24:32.4851664Z       pagination
2025-04-15T08:24:32.4852226Z         âœ“ should limit results when take is specified (43 ms)
2025-04-15T08:24:32.4853163Z         âœ“ should skip results when skip is specified (19 ms)
2025-04-15T08:24:32.4853876Z         âœ“ should handle skip and take together (17 ms)
2025-04-15T08:24:32.4854604Z         âœ“ should handle take larger than remaining items (12 ms)
2025-04-15T08:24:32.4855373Z         âœ“ should handle zero take by returning all results (12 ms)
2025-04-15T08:24:32.4855873Z       sorting
2025-04-15T08:24:32.4856406Z         âœ“ should sort by default (updatedAt:desc) (12 ms)
2025-04-15T08:24:32.4857036Z         âœ“ should sort by name:asc (13 ms)
2025-04-15T08:24:32.4857591Z         âœ“ should sort by name:desc (12 ms)
2025-04-15T08:24:32.4859257Z         âœ“ should sort by name:desc when select does not include the name (14 ms)
2025-04-15T08:24:32.4859970Z         âœ“ should sort by createdAt:asc (21 ms)
2025-04-15T08:24:32.4860538Z         âœ“ should sort by createdAt:desc (16 ms)
2025-04-15T08:24:32.4861100Z         âœ“ should sort by updatedAt:asc (14 ms)
2025-04-15T08:24:32.4861906Z         âœ“ should sort by updatedAt:desc (17 ms)
2025-04-15T08:24:32.4862559Z         âœ“ should default to asc if order not specified (10 ms)
2025-04-15T08:24:32.4863072Z 
2025-04-15T08:24:34.4025645Z PASS test/integration/ldap/ldap.api.test.ts (8.577 s)
2025-04-15T08:24:34.4033985Z   âœ“ Member role should not be able to access ldap routes (95 ms)
2025-04-15T08:24:34.4034988Z   âœ“ GET /ldap/config route should retrieve current configuration (28 ms)
2025-04-15T08:24:34.4037904Z   âœ“ GET /ldap/sync should return paginated synchronizations (27 ms)
2025-04-15T08:24:34.4038978Z   PUT /ldap/config
2025-04-15T08:24:34.4039729Z     âœ“ route should validate payload (52 ms)
2025-04-15T08:24:34.4040538Z     âœ“ route should update model (23 ms)
2025-04-15T08:24:34.4042885Z     âœ“ route should fail due to trying to enable LDAP login with SSO as current authentication method (15 ms)
2025-04-15T08:24:34.4044306Z     âœ“ should apply "Convert all LDAP users to email users" strategy when LDAP login disabled (40 ms)
2025-04-15T08:24:34.4045119Z   POST /ldap/test-connection
2025-04-15T08:24:34.4045700Z     âœ“ route should success (21 ms)
2025-04-15T08:24:34.4046231Z     âœ“ route should fail (14 ms)
2025-04-15T08:24:34.4046622Z   POST /ldap/sync
2025-04-15T08:24:34.4047412Z     dry mode
2025-04-15T08:24:34.4048092Z       âœ“ should detect new user but not persist change in model (29 ms)
2025-04-15T08:24:34.4049031Z       âœ“ should detect updated user but not persist change in model (32 ms)
2025-04-15T08:24:34.4050062Z       âœ“ should detect disabled user but not persist change in model (29 ms)
2025-04-15T08:24:34.4050681Z     live mode
2025-04-15T08:24:34.4051360Z       âœ“ should detect new user and persist change in model (42 ms)
2025-04-15T08:24:34.4052260Z       âœ“ should detect updated user and persist change in model (67 ms)
2025-04-15T08:24:34.4053448Z       âœ“ should detect disabled user and persist change in model (46 ms)
2025-04-15T08:24:34.4054635Z       âœ“ should remove user instance access once the user is disabled during synchronization (38 ms)
2025-04-15T08:24:34.4055423Z   POST /login
2025-04-15T08:24:34.4056108Z     âœ“ should allow new LDAP user to login and synchronize data (50 ms)
2025-04-15T08:24:34.4057098Z     âœ“ should allow existing LDAP user to login and synchronize data (191 ms)
2025-04-15T08:24:34.4058254Z     âœ“ should allow instance owner to sign in with email/password when LDAP is enabled (161 ms)
2025-04-15T08:24:34.4059398Z     âœ“ should transform email user into LDAP user when match found (142 ms)
2025-04-15T08:24:34.4060159Z   Instance owner should able to delete LDAP users
2025-04-15T08:24:34.4061485Z     âœ“ don't transfer workflows (22 ms)
2025-04-15T08:24:34.4062177Z     âœ“ transfer workflows and credentials (18 ms)
2025-04-15T08:24:34.4062530Z 
2025-04-15T08:24:39.7377823Z PASS src/services/__tests__/community-packages.service.test.ts (5.099 s)
2025-04-15T08:24:39.7382955Z   CommunityPackagesService
2025-04-15T08:24:39.7385243Z     parseNpmPackageName()
2025-04-15T08:24:39.7387743Z       âœ“ should fail with empty package name (43 ms)
2025-04-15T08:24:39.7403572Z       âœ“ should fail with invalid package prefix name (1 ms)
2025-04-15T08:24:39.7404285Z       âœ“ should parse valid package name (1 ms)
2025-04-15T08:24:39.7404997Z       âœ“ should parse valid package name and version (1 ms)
2025-04-15T08:24:39.7405785Z       âœ“ should parse valid package name, scope and version (1 ms)
2025-04-15T08:24:39.7406319Z     executeCommand()
2025-04-15T08:24:39.7406858Z       âœ“ should call command with valid options (2 ms)
2025-04-15T08:24:39.7407485Z       âœ“ should make sure folder exists (1 ms)
2025-04-15T08:24:39.7408199Z       âœ“ should try to create folder if it does not exist (12 ms)
2025-04-15T08:24:39.7409011Z       âœ“ should throw especial error when package is not found (2 ms)
2025-04-15T08:24:39.7409582Z     crossInformationPackage()
2025-04-15T08:24:39.7410327Z       âœ“ should return same list if availableUpdates is undefined (2 ms)
2025-04-15T08:24:39.7411197Z       âœ“ should correctly match update versions for packages (1 ms)
2025-04-15T08:24:39.7412491Z       âœ“ should correctly match update versions for single package (1 ms)
2025-04-15T08:24:39.7413305Z     matchMissingPackages()
2025-04-15T08:24:39.7414013Z       âœ“ should not match failed packages that do not exist (1 ms)
2025-04-15T08:24:39.7414824Z       âœ“ should match failed packages that should be present
2025-04-15T08:24:39.7415608Z       âœ“ should match failed packages even if version is wrong
2025-04-15T08:24:39.7416163Z     checkNpmPackageStatus()
2025-04-15T08:24:39.7416723Z       âœ“ should call axios.post (1 ms)
2025-04-15T08:24:39.7417317Z       âœ“ should not fail if request fails
2025-04-15T08:24:39.7417928Z       âœ“ should warn if package is banned (1 ms)
2025-04-15T08:24:39.7418435Z     hasPackageLoadedSuccessfully()
2025-04-15T08:24:39.7419126Z       âœ“ should return true when failed package list does not exist
2025-04-15T08:24:39.7420021Z       âœ“ should return true when package is not in the list of missing packages
2025-04-15T08:24:39.7421082Z       âœ“ should return false when package is in the list of missing packages (1 ms)
2025-04-15T08:24:39.7421830Z     removePackageFromMissingList()
2025-04-15T08:24:39.7422466Z       âœ“ should do nothing if key does not exist
2025-04-15T08:24:39.7423587Z       âœ“ should remove only correct package from list
2025-04-15T08:24:39.7424277Z       âœ“ should not remove if package is not in the list (1 ms)
2025-04-15T08:24:39.7424698Z     updateNpmModule
2025-04-15T08:24:39.7425224Z       âœ“ should call `exec` with the correct command and registry (3 ms)
2025-04-15T08:24:39.7425794Z       âœ“ should throw when not licensed (1 ms)
2025-04-15T08:24:39.7426045Z 
2025-04-15T08:24:41.3137542Z PASS test/integration/public-api/executions.test.ts (8.597 s)
2025-04-15T08:24:41.3138614Z   GET /executions/:id
2025-04-15T08:24:41.3139604Z     âœ“ should fail due to missing API Key (43 ms)
2025-04-15T08:24:41.3140460Z     âœ“ should fail due to invalid API Key (14 ms)
2025-04-15T08:24:41.3141476Z     âœ“ owner should be able to get an execution owned by him (201 ms)
2025-04-15T08:24:41.3142944Z     âœ“ owner should be able to read executions of other users (32 ms)
2025-04-15T08:24:41.3144037Z     âœ“ member should be able to fetch his own executions (29 ms)
2025-04-15T08:24:41.3145230Z     âœ“ member should not be able to fetch custom data when includeData is not set (28 ms)
2025-04-15T08:24:41.3146456Z     âœ“ member should be able to fetch custom data when includeData=true (66 ms)
2025-04-15T08:24:41.3147781Z     âœ“ member should not get an execution of another user without the workflow being shared (28 ms)
2025-04-15T08:24:41.3149142Z     âœ“ member should be able to fetch executions of workflows shared with him (36 ms)
2025-04-15T08:24:41.3149995Z   DELETE /executions/:id
2025-04-15T08:24:41.3150729Z     âœ“ should fail due to missing API Key (11 ms)
2025-04-15T08:24:41.3151547Z     âœ“ should fail due to invalid API Key (10 ms)
2025-04-15T08:24:41.3152338Z     âœ“ should delete an execution (58 ms)
2025-04-15T08:24:41.3153121Z   GET /executions
2025-04-15T08:24:41.3153836Z     âœ“ should fail due to missing API Key (11 ms)
2025-04-15T08:24:41.3154800Z     âœ“ should fail due to invalid API Key (9 ms)
2025-04-15T08:24:41.3155749Z     âœ“ should retrieve all successful executions (43 ms)
2025-04-15T08:24:41.3156612Z     âœ“ should paginate two executions (55 ms)
2025-04-15T08:24:41.3157467Z     âœ“ should retrieve all error executions (35 ms)
2025-04-15T08:24:41.3158361Z     âœ“ should return all waiting executions (52 ms)
2025-04-15T08:24:41.3159384Z     âœ“ should retrieve all executions of specific workflow (53 ms)
2025-04-15T08:24:41.3160744Z     âœ“ should return executions filtered by project ID (46 ms)
2025-04-15T08:24:41.3161855Z     âœ“ owner should retrieve all executions regardless of ownership (84 ms)
2025-04-15T08:24:41.3163714Z     âœ“ member should not see executions of workflows not shared with him (74 ms)
2025-04-15T08:24:41.3165024Z     âœ“ member should also see executions of workflows shared with him (78 ms)
2025-04-15T08:24:41.3165863Z 
2025-04-15T08:24:41.3367413Z PASS test/integration/evaluation/test-definitions.api.test.ts (8.642 s)
2025-04-15T08:24:41.3372177Z   GET /evaluation/test-definitions
2025-04-15T08:24:41.3377474Z     âœ“ should retrieve empty test definitions list (83 ms)
2025-04-15T08:24:41.3379903Z     âœ“ should retrieve test definitions list (44 ms)
2025-04-15T08:24:41.3387881Z     âœ“ should retrieve test definitions list with pagination (61 ms)
2025-04-15T08:24:41.3388765Z     âœ“ should retrieve test definitions list for a workflow (56 ms)
2025-04-15T08:24:41.3389795Z     âœ“ should return error if user has no access to the workflowId specified in filter (58 ms)
2025-04-15T08:24:41.3390543Z   GET /evaluation/test-definitions/:id
2025-04-15T08:24:41.3391144Z     âœ“ should retrieve test definition (38 ms)
2025-04-15T08:24:41.3391864Z     âœ“ should return 404 for non-existent test definition (27 ms)
2025-04-15T08:24:41.3392891Z     âœ“ should retrieve test definition with evaluation workflow (40 ms)
2025-04-15T08:24:41.3394030Z     âœ“ should not retrieve test definition if user does not have access to workflow under test (38 ms)
2025-04-15T08:24:41.3394854Z   POST /evaluation/test-definitions
2025-04-15T08:24:41.3395432Z     âœ“ should create test definition (38 ms)
2025-04-15T08:24:41.3396605Z     âœ“ should create test definition with evaluation workflow (36 ms)
2025-04-15T08:24:41.3397438Z     âœ“ should create test definition with all fields (34 ms)
2025-04-15T08:24:41.3398134Z     âœ“ should return error if name is empty (37 ms)
2025-04-15T08:24:41.3398926Z     âœ“ should return error if user has no access to the workflow (31 ms)
2025-04-15T08:24:41.3399890Z     âœ“ should return error if user has no access to the evaluation workflow (36 ms)
2025-04-15T08:24:41.3400591Z   PATCH /evaluation/test-definitions/:id
2025-04-15T08:24:41.3401190Z     âœ“ should update test definition (46 ms)
2025-04-15T08:24:41.3401929Z     âœ“ should return 404 if user has no access to the workflow (33 ms)
2025-04-15T08:24:41.3402966Z     âœ“ should update test definition with evaluation workflow (46 ms)
2025-04-15T08:24:41.3403964Z     âœ“ should return error if user has no access to the evaluation workflow (50 ms)
2025-04-15T08:24:41.3404720Z     âœ“ should disallow workflowId (32 ms)
2025-04-15T08:24:41.3405299Z     âœ“ should update annotationTagId (49 ms)
2025-04-15T08:24:41.3406021Z     âœ“ should return error if annotationTagId is invalid (61 ms)
2025-04-15T08:24:41.3406809Z     âœ“ should update pinned nodes (60 ms)
2025-04-15T08:24:41.3407509Z     âœ“ should return error if pinned nodes are invalid (61 ms)
2025-04-15T08:24:41.3408376Z     âœ“ should return error if pinned nodes are not in the workflow (30 ms)
2025-04-15T08:24:41.3409039Z   DELETE /evaluation/test-definitions/:id
2025-04-15T08:24:41.3409630Z     âœ“ should delete test definition (43 ms)
2025-04-15T08:24:41.3410337Z     âœ“ should return 404 if test definition does not exist (38 ms)
2025-04-15T08:24:41.3411175Z     âœ“ should return 404 if user has no access to the workflow (39 ms)
2025-04-15T08:24:41.3411807Z   POST /evaluation/test-definitions/:id/run
2025-04-15T08:24:41.3412408Z     âœ“ should trigger the test run (34 ms)
2025-04-15T08:24:41.3412852Z 
2025-04-15T08:24:44.9062423Z PASS src/auth/__tests__/auth.service.test.ts
2025-04-15T08:24:44.9083449Z   AuthService
2025-04-15T08:24:44.9085543Z     createJWTHash
2025-04-15T08:24:44.9086786Z       âœ“ should generate unique hashes (6 ms)
2025-04-15T08:24:44.9087493Z     authMiddleware
2025-04-15T08:24:44.9088273Z       âœ“ should 401 if no cookie is set (1 ms)
2025-04-15T08:24:44.9089315Z       âœ“ should 401 and clear the cookie if the JWT is expired (4 ms)
2025-04-15T08:24:44.9090565Z       âœ“ should 401 and clear the cookie if the JWT has been invalidated (2 ms)
2025-04-15T08:24:44.9091684Z       âœ“ should refresh the cookie before it expires (3 ms)
2025-04-15T08:24:44.9092424Z     issueCookie
2025-04-15T08:24:44.9093488Z       âœ“ should issue a cookie with the correct options (2 ms)
2025-04-15T08:24:44.9094484Z       âœ“ should allow changing cookie options (1 ms)
2025-04-15T08:24:44.9095208Z     issueJWT
2025-04-15T08:24:44.9096316Z       when not setting userManagement.jwtSessionDuration
2025-04-15T08:24:44.9097313Z         âœ“ should default to expire in 7 days (2 ms)
2025-04-15T08:24:44.9098747Z       when setting userManagement.jwtSessionDuration
2025-04-15T08:24:44.9099728Z         âœ“ should apply it to tokens (2 ms)
2025-04-15T08:24:44.9100405Z     resolveJwt
2025-04-15T08:24:44.9101141Z       âœ“ should throw on invalid tokens (35 ms)
2025-04-15T08:24:44.9102043Z       âœ“ should throw on expired tokens (3 ms)
2025-04-15T08:24:44.9103169Z       âœ“ should throw on tampered tokens (2 ms)
2025-04-15T08:24:44.9104185Z       âœ“ should throw on hijacked tokens (2 ms)
2025-04-15T08:24:44.9105425Z       âœ“ should throw if no user is found (2 ms)
2025-04-15T08:24:44.9106365Z       âœ“ should throw if the user is disabled (2 ms)
2025-04-15T08:24:44.9107616Z       âœ“ should throw if user password does not match the one on the token (2 ms)
2025-04-15T08:24:44.9109093Z       âœ“ should throw if user email does not match the one on the token (1 ms)
2025-04-15T08:24:44.9110255Z       âœ“ should refresh the cookie before it expires (4 ms)
2025-04-15T08:24:44.9111507Z       âœ“ should refresh the cookie only if less than 1/4th of time is left (3 ms)
2025-04-15T08:24:44.9115471Z       âœ“ should not refresh the cookie if jwtRefreshTimeoutHours is set to -1 (2 ms)
2025-04-15T08:24:44.9116397Z     generatePasswordResetUrl
2025-04-15T08:24:44.9117163Z       âœ“ should generate a valid url (2 ms)
2025-04-15T08:24:44.9117850Z     generatePasswordResetToken
2025-04-15T08:24:44.9118665Z       âœ“ should generate valid password-reset tokens (1 ms)
2025-04-15T08:24:44.9119361Z     resolvePasswordResetToken
2025-04-15T08:24:44.9120338Z       âœ“ should not return a user if the token in invalid (1 ms)
2025-04-15T08:24:44.9121436Z       âœ“ should not return a user if the token in expired (2 ms)
2025-04-15T08:24:44.9122631Z       âœ“ should not return a user if the user does not exist in the DB (2 ms)
2025-04-15T08:24:44.9124044Z       âœ“ should not return a user if the password sha does not match (2 ms)
2025-04-15T08:24:44.9125123Z       âœ“ should not return the user if all checks pass (3 ms)
2025-04-15T08:24:44.9126275Z     invalidateToken
2025-04-15T08:24:44.9126907Z       âœ“ should invalidate the token (1 ms)
2025-04-15T08:24:44.9127367Z 
2025-04-15T08:24:45.5697671Z PASS test/integration/deduplication/deduplication-helper.test.ts (5.518 s)
2025-04-15T08:24:45.5698500Z   Deduplication.DeduplicationHelper
2025-04-15T08:24:45.5699642Z     âœ“ Deduplication (mode: entries): DeduplicationHelper should record and check data correctly (25 ms)
2025-04-15T08:24:45.5701016Z     âœ“ Deduplication (mode: entries): DeduplicationHelper different contexts should not interfere with each other (15 ms)
2025-04-15T08:24:45.5702183Z     âœ“ Deduplication (mode: entries): DeduplicationHelper check maxEntries (11 ms)
2025-04-15T08:24:45.5703236Z     âœ“ removeProcessed should throw error for latest modes (28 ms)
2025-04-15T08:24:45.5704309Z     âœ“ clearAllProcessedItems should delete all processed items for workflow scope (5 ms)
2025-04-15T08:24:45.5706104Z     âœ“ clearAllProcessedItems should delete all processed items for node scope (4 ms)
2025-04-15T08:24:45.5707449Z     âœ“ clearAllProcessedItems should not clear workflow processed items when clearing node scope (7 ms)
2025-04-15T08:24:45.5708909Z     âœ“ clearAllProcessedItems should not clear node processed items when clearing workflow scope (8 ms)
2025-04-15T08:24:45.5710236Z     âœ“ getProcessedDataCount should return correct count for different modes (4 ms)
2025-04-15T08:24:45.5711479Z     Deduplication (mode: latestIncrementalKey): DeduplicationHelper should record and check data correctly
2025-04-15T08:24:45.5712402Z       âœ“ dates (35 ms)
2025-04-15T08:24:45.5712979Z       âœ“ numbers (8 ms)
2025-04-15T08:24:45.5713204Z 
2025-04-15T08:24:49.3511505Z PASS test/integration/controllers/invitation/invitation.controller.integration.test.ts (7.775 s)
2025-04-15T08:24:49.3524994Z   InvitationController
2025-04-15T08:24:49.3528309Z     POST /invitations/:id/accept
2025-04-15T08:24:49.3529205Z       âœ“ should fill out a member shell (208 ms)
2025-04-15T08:24:49.3530182Z       âœ“ should fill out an admin shell (110 ms)
2025-04-15T08:24:49.3531397Z       âœ“ should fail with invalid payloads (33 ms)
2025-04-15T08:24:49.3534395Z       âœ“ should fail with already accepted invite (124 ms)
2025-04-15T08:24:49.3535516Z     POST /invitations
2025-04-15T08:24:49.3536401Z       âœ“ should fail with invalid payloads (55 ms)
2025-04-15T08:24:49.3537312Z       âœ“ should return 200 on empty payload (13 ms)
2025-04-15T08:24:49.3539769Z       âœ“ should return 200 if emailing is not set up (17 ms)
2025-04-15T08:24:49.3540817Z       âœ“ should create member shell (16 ms)
2025-04-15T08:24:49.3543272Z       âœ“ should create personal project for shell account (23 ms)
2025-04-15T08:24:49.3545212Z       âœ“ should create admin shell when advanced permissions is licensed (16 ms)
2025-04-15T08:24:49.3546384Z       âœ“ should reinvite member when sharing is licensed (29 ms)
2025-04-15T08:24:49.3548858Z       âœ“ should reinvite admin when advanced permissions is licensed (27 ms)
2025-04-15T08:24:49.3550383Z       âœ“ should return 403 on creating admin shell when advanced permissions is unlicensed (9 ms)
2025-04-15T08:24:49.3551966Z       âœ“ should email invites and create user shells, without inviting existing users (35 ms)
2025-04-15T08:24:49.3553641Z       âœ“ should return 200 and surface error when invite method throws error (23 ms)
2025-04-15T08:24:49.3556499Z 
2025-04-15T08:24:50.6453559Z PASS src/controllers/oauth/__tests__/oauth2-credential.controller.test.ts (5.479 s)
2025-04-15T08:24:50.6454295Z   OAuth2CredentialController
2025-04-15T08:24:50.6454639Z     getAuthUri
2025-04-15T08:24:50.6455509Z       âœ“ should throw a BadRequestError when credentialId is missing in the query (41 ms)
2025-04-15T08:24:50.6456511Z       âœ“ should throw a NotFoundError when no matching credential is found for the user (2 ms)
2025-04-15T08:24:50.6457257Z       âœ“ should return a valid auth URI (9 ms)
2025-04-15T08:24:50.6457680Z     handleCallback
2025-04-15T08:24:50.6458314Z       âœ“ should render the error page when required query params are missing (2 ms)
2025-04-15T08:24:50.6459191Z       âœ“ should render the error page when `state` query param is invalid (1 ms)
2025-04-15T08:24:50.6460043Z       âœ“ should render the error page when credential is not found in DB (1 ms)
2025-04-15T08:24:50.6461068Z       âœ“ should render the error page when csrfSecret on the saved credential does not match the state (2 ms)
2025-04-15T08:24:50.6462030Z       âœ“ should render the error page when state is older than 5 minutes (2 ms)
2025-04-15T08:24:50.6462970Z       âœ“ should render the error page when code exchange fails (92 ms)
2025-04-15T08:24:50.6463772Z       âœ“ should exchange the code for a valid token, and save it to DB (26 ms)
2025-04-15T08:24:50.6464536Z       âœ“ merges oauthTokenData if it already exists (25 ms)
2025-04-15T08:24:50.6465171Z       âœ“ overwrites oauthTokenData if it is a string (25 ms)
2025-04-15T08:24:50.6465496Z 
2025-04-15T08:24:52.2326922Z PASS src/__tests__/load-nodes-and-credentials.test.ts
2025-04-15T08:24:52.2327591Z   LoadNodesAndCredentials
2025-04-15T08:24:52.2327992Z     resolveIcon
2025-04-15T08:24:52.2334030Z       âœ“ should return undefined if the loader for the package is not found (9 ms)
2025-04-15T08:24:52.2335548Z       âœ“ should return undefined if the resolved file path is outside the loader directory (4 ms)
2025-04-15T08:24:52.2336771Z       âœ“ should return the file path if the file is within the loader directory (1 ms)
2025-04-15T08:24:52.2337884Z       âœ“ should return undefined if the URL is outside the package directory (1 ms)
2025-04-15T08:24:52.2338535Z     convertNodeToAiTool
2025-04-15T08:24:52.2339074Z       âœ“ should modify the name and displayName correctly
2025-04-15T08:24:52.2339703Z       âœ“ should update inputs and outputs (2 ms)
2025-04-15T08:24:52.2340285Z       âœ“ should remove the usableAsTool property
2025-04-15T08:24:52.2340942Z       âœ“ should add toolDescription property if it doesn't exist (1 ms)
2025-04-15T08:24:52.2341620Z       âœ“ should set codex categories correctly (1 ms)
2025-04-15T08:24:52.2342317Z       âœ“ should preserve existing properties
2025-04-15T08:24:52.2343308Z       âœ“ should handle nodes with resource property (1 ms)
2025-04-15T08:24:52.2344419Z       âœ“ should handle nodes with operation property (1 ms)
2025-04-15T08:24:52.2345198Z       âœ“ should handle nodes with both resource and operation properties (1 ms)
2025-04-15T08:24:52.2346377Z       âœ“ should handle nodes with empty properties (2 ms)
2025-04-15T08:24:52.2347190Z       âœ“ should handle nodes with existing codex property (1 ms)
2025-04-15T08:24:52.2348127Z       âœ“ should handle nodes with existing codex with tool subcategory overwrite
2025-04-15T08:24:52.2349007Z       âœ“ should handle nodes with very long names (1 ms)
2025-04-15T08:24:52.2349853Z       âœ“ should handle nodes with special characters in name and displayName
2025-04-15T08:24:52.2350440Z     resolveSchema
2025-04-15T08:24:52.2351041Z       âœ“ should return undefined if the node is not known (1 ms)
2025-04-15T08:24:52.2351894Z       âœ“ should return the correct path if the node is known (1 ms)
2025-04-15T08:24:52.2353069Z       âœ“ should return the correct path if there is no resource or operation (1 ms)
2025-04-15T08:24:52.2353756Z     createAiTools
2025-04-15T08:24:52.2354526Z       âœ“ should create AI tools for nodes marked as usableAsTool (2 ms)
2025-04-15T08:24:52.2355350Z       âœ“ should duplicate supportedNodes for AI tools (1 ms)
2025-04-15T08:24:52.2356187Z       âœ“ should not modify nodes without usableAsTool property
2025-04-15T08:24:52.2357196Z       âœ“ should handle nodes with usableAsTool as an object with replacements (1 ms)
2025-04-15T08:24:52.2357737Z 
2025-04-15T08:24:53.1470909Z PASS test/integration/variables.test.ts (7.403 s)
2025-04-15T08:24:53.1471518Z   GET /variables
2025-04-15T08:24:53.1472902Z     âœ“ should return an empty array if there is nothing in the cache (58 ms)
2025-04-15T08:24:53.1473993Z     âœ“ should return all variables for an owner (20 ms)
2025-04-15T08:24:53.1474898Z     âœ“ should return all variables for a member (18 ms)
2025-04-15T08:24:53.1475497Z     state:empty
2025-04-15T08:24:53.1476000Z       âœ“ only return empty variables (13 ms)
2025-04-15T08:24:53.1476473Z   GET /variables/:id
2025-04-15T08:24:53.1477629Z     âœ“ should return a single variable for an owner (15 ms)
2025-04-15T08:24:53.1478430Z     âœ“ should return a single variable for a member (12 ms)
2025-04-15T08:24:53.1478951Z   POST /variables
2025-04-15T08:24:53.1479613Z     âœ“ should create a new variable and return it for an owner (10 ms)
2025-04-15T08:24:53.1480562Z     âœ“ should not create a new variable and return it for a member (8 ms)
2025-04-15T08:24:53.1481662Z     âœ“ should not create a new variable and return it if the instance doesn't have a license (6 ms)
2025-04-15T08:24:53.1483144Z     âœ“ should fail to create a new variable and if one with the same key exists (77 ms)
2025-04-15T08:24:53.1484123Z     âœ“ should not fail if variable limit not reached (16 ms)
2025-04-15T08:24:53.1485406Z     âœ“ should fail if variable limit reached (36 ms)
2025-04-15T08:24:53.1486056Z     âœ“ should fail if key too long (9 ms)
2025-04-15T08:24:53.1486664Z     âœ“ should fail if value too long (7 ms)
2025-04-15T08:24:53.1487465Z     âœ“ should fail if key contain's prohibited characters (8 ms)
2025-04-15T08:24:53.1519256Z   PATCH /variables/:id
2025-04-15T08:24:53.1520025Z     âœ“ should modify existing variable if use is an owner (15 ms)
2025-04-15T08:24:53.1520924Z     âœ“ should modify existing variable if use is an owner (12 ms)
2025-04-15T08:24:53.1521830Z     âœ“ should not modify existing variable if use is a member (11 ms)
2025-04-15T08:24:53.1522998Z     âœ“ should not modify existing variable if one with the same key exists (16 ms)
2025-04-15T08:24:53.1523673Z   DELETE /variables/:id
2025-04-15T08:24:53.1524354Z     âœ“ should delete a single variable for an owner (15 ms)
2025-04-15T08:24:53.1525178Z     âœ“ should not delete a single variable for a member (14 ms)
2025-04-15T08:24:53.1525542Z 
2025-04-15T08:24:56.8512397Z PASS src/workflows/__tests__/workflow-execution.service.test.ts
2025-04-15T08:24:56.8534725Z   WorkflowExecutionService
2025-04-15T08:24:56.8536216Z     runWorkflow()
2025-04-15T08:24:56.8549452Z       âœ“ should call `WorkflowRunner.run()` (5 ms)
2025-04-15T08:24:56.8550920Z     executeManually()
2025-04-15T08:24:56.8552142Z       âœ“ should call `WorkflowRunner.run()` with correct parameters with default partial execution logic (2 ms)
2025-04-15T08:24:56.8553384Z       âœ“ removes runData if the destination node is a trigger (8 ms)
2025-04-15T08:24:56.8554296Z       âœ“ should call WorkflowRunner.run() with pinned trigger with type trigger (1 ms)
2025-04-15T08:24:56.8555262Z       âœ“ should call WorkflowRunner.run() with pinned trigger with type webhook (2 ms)
2025-04-15T08:24:56.8555983Z       âœ“ should start from pinned trigger (1 ms)
2025-04-15T08:24:56.8556675Z       âœ“ should ignore pinned trigger and start from unexecuted trigger (1 ms)
2025-04-15T08:24:56.8557254Z     selectPinnedActivatorStarter()
2025-04-15T08:24:56.8557758Z       âœ“ should return `null` if no pindata
2025-04-15T08:24:56.8558295Z       âœ“ should return `null` if no starter nodes (1 ms)
2025-04-15T08:24:56.8558852Z       âœ“ should select webhook node if only choice
2025-04-15T08:24:56.8559369Z       âœ“ should return `null` if no choice
2025-04-15T08:24:56.8559908Z       âœ“ should return ignore Respond to Webhook (1 ms)
2025-04-15T08:24:56.8560530Z       âœ“ should select execute workflow trigger if only choice
2025-04-15T08:24:56.8561236Z       âœ“ should favor webhook node over execute workflow trigger (1 ms)
2025-04-15T08:24:56.8561953Z       âœ“ should favor first webhook node over second webhook node
2025-04-15T08:24:56.8562471Z       offloading manual executions to workers
2025-04-15T08:24:56.8563426Z         âœ“ when receiving no `runData`, should set `runData` to undefined in `executionData`
2025-04-15T08:24:56.8563904Z 
2025-04-15T08:24:58.2471584Z PASS src/controllers/__tests__/me.controller.test.ts
2025-04-15T08:24:58.2472183Z   MeController
2025-04-15T08:24:58.2472519Z     updateCurrentUser
2025-04-15T08:24:58.2473708Z       âœ“ should update the user in the DB, and issue a new cookie (16 ms)
2025-04-15T08:24:58.2474763Z       âœ“ should throw BadRequestError if beforeUpdate hook throws BadRequestError (35 ms)
2025-04-15T08:24:58.2475417Z       when mfa is enabled
2025-04-15T08:24:58.2476041Z         âœ“ should throw BadRequestError if mfa code is missing (2 ms)
2025-04-15T08:24:58.2476931Z         âœ“ should throw InvalidMfaCodeError if mfa code is invalid (1 ms)
2025-04-15T08:24:58.2477736Z         âœ“ should update the user's email if mfa code is valid (2 ms)
2025-04-15T08:24:58.2478241Z     updatePassword
2025-04-15T08:24:58.2478832Z       âœ“ should throw if the user does not have a password set (2 ms)
2025-04-15T08:24:58.2479742Z       âœ“ should throw if currentPassword does not match the user's password (113 ms)
2025-04-15T08:24:58.2480688Z       âœ“ should update the password in the DB, and issue a new cookie (188 ms)
2025-04-15T08:24:58.2481868Z       should throw if newPassword is not valid
2025-04-15T08:24:58.2482372Z         âœ“ pass (92 ms)
2025-04-15T08:24:58.2482923Z         âœ“ password (94 ms)
2025-04-15T08:24:58.2483358Z         âœ“ password1 (96 ms)
2025-04-15T08:24:58.2483702Z       mfa enabled
2025-04-15T08:24:58.2484299Z         âœ“ should throw BadRequestError if mfa code is missing (133 ms)
2025-04-15T08:24:58.2485178Z         âœ“ should throw InvalidMfaCodeError if invalid mfa code is given (101 ms)
2025-04-15T08:24:58.2485956Z         âœ“ should succeed when mfa code is correct (179 ms)
2025-04-15T08:24:58.2486418Z     storeSurveyAnswers
2025-04-15T08:24:58.2487106Z       âœ“ should throw BadRequestError if answers are missing in the payload (1 ms)
2025-04-15T08:24:58.2487927Z       âœ“ should not flag XSS attempt for `<` sign in company size (9 ms)
2025-04-15T08:24:58.2488880Z       âœ“ should throw BadRequestError on XSS attempt for an array field automationGoalDevops (3 ms)
2025-04-15T08:24:58.2490024Z       âœ“ should throw BadRequestError on XSS attempt for an array field companyIndustryExtended (2 ms)
2025-04-15T08:24:58.2491256Z       âœ“ should throw BadRequestError on XSS attempt for an array field otherCompanyIndustryExtended (1 ms)
2025-04-15T08:24:58.2492661Z       âœ“ should throw BadRequestError on XSS attempt for an array field automationGoalSm (1 ms)
2025-04-15T08:24:58.2493886Z       âœ“ should throw BadRequestError on XSS attempt for an array field usageModes (1 ms)
2025-04-15T08:24:58.2494997Z       âœ“ should throw BadRequestError on XSS attempt for a string field automationGoalDevopsOther (1 ms)
2025-04-15T08:24:58.2496120Z       âœ“ should throw BadRequestError on XSS attempt for a string field companySize (1 ms)
2025-04-15T08:24:58.2497179Z       âœ“ should throw BadRequestError on XSS attempt for a string field companyType (2 ms)
2025-04-15T08:24:58.2498267Z       âœ“ should throw BadRequestError on XSS attempt for a string field automationGoalSmOther (1 ms)
2025-04-15T08:24:58.2499329Z       âœ“ should throw BadRequestError on XSS attempt for a string field roleOther (1 ms)
2025-04-15T08:24:58.2500413Z       âœ“ should throw BadRequestError on XSS attempt for a string field reportedSource (1 ms)
2025-04-15T08:24:58.2501550Z       âœ“ should throw BadRequestError on XSS attempt for a string field reportedSourceOther (10 ms)
2025-04-15T08:24:58.2502106Z 
2025-04-15T08:24:59.1104592Z PASS test/integration/mfa/mfa.api.test.ts (8.229 s)
2025-04-15T08:24:59.1105230Z   Enable MFA setup
2025-04-15T08:24:59.1105562Z     Step one
2025-04-15T08:24:59.1106405Z       âœ“ GET /qr should fail due to unauthenticated user (65 ms)
2025-04-15T08:24:59.1107407Z       âœ“ GET /qr should reuse secret and recovery codes until setup is complete (85 ms)
2025-04-15T08:24:59.1108444Z       âœ“ GET /qr should return qr, secret and recovery codes (27 ms)
2025-04-15T08:24:59.1108983Z     Step two
2025-04-15T08:24:59.1109615Z       âœ“ POST /verify should fail due to unauthenticated user (22 ms)
2025-04-15T08:24:59.1110436Z       âœ“ POST /verify should fail due to invalid MFA code (39 ms)
2025-04-15T08:24:59.1111336Z       âœ“ POST /verify should fail due to missing mfaCode parameter (27 ms)
2025-04-15T08:24:59.1112125Z       âœ“ POST /verify should validate MFA code (33 ms)
2025-04-15T08:24:59.1112596Z     Step three
2025-04-15T08:24:59.1113466Z       âœ“ POST /enable should fail due to unauthenticated user (10 ms)
2025-04-15T08:24:59.1114329Z       âœ“ POST /verify should fail due to missing mfaCode parameter (16 ms)
2025-04-15T08:24:59.1115141Z       âœ“ POST /enable should fail due to invalid MFA code (36 ms)
2025-04-15T08:24:59.1116033Z       âœ“ POST /enable should fail due to empty secret and recovery codes (14 ms)
2025-04-15T08:24:59.1116862Z       âœ“ POST /enable should enable MFA in account (43 ms)
2025-04-15T08:24:59.1117717Z       âœ“ POST /enable should not enable MFA if pre check fails (40 ms)
2025-04-15T08:24:59.1118262Z   Disable MFA setup
2025-04-15T08:24:59.1118849Z     âœ“ POST /disable should disable login with MFA (42 ms)
2025-04-15T08:24:59.1119716Z     âœ“ POST /disable should fail if invalid MFA recovery code is given (26 ms)
2025-04-15T08:24:59.1121173Z     âœ“ POST /disable should fail if invalid MFA code is given (28 ms)
2025-04-15T08:24:59.1122152Z     âœ“ POST /disable should fail if neither MFA code nor recovery code is sent (30 ms)
2025-04-15T08:24:59.1123115Z   Change password with MFA enabled
2025-04-15T08:24:59.1123939Z     âœ“ POST /change-password should fail due to missing MFA code (26 ms)
2025-04-15T08:24:59.1124928Z     âœ“ POST /change-password should fail due to invalid MFA code (25 ms)
2025-04-15T08:24:59.1125791Z     âœ“ POST /change-password should update password (227 ms)
2025-04-15T08:24:59.1126337Z   MFA before enable checks
2025-04-15T08:24:59.1127141Z     âœ“ POST /can-enable should throw error if mfa.beforeSetup returns error (11 ms)
2025-04-15T08:24:59.1128189Z     âœ“ POST /can-enable should not throw error if mfa.beforeSetup does not exist (13 ms)
2025-04-15T08:24:59.1128817Z   Login
2025-04-15T08:24:59.1129514Z     âœ“ POST /login with email/password should succeed when mfa is disabled (21 ms)
2025-04-15T08:24:59.1130689Z     âœ“ GET /login should not include mfaSecret and mfaRecoveryCodes property in response (11 ms)
2025-04-15T08:24:59.1131766Z     âœ“ POST /login with email/password should fail when mfa is enabled (24 ms)
2025-04-15T08:24:59.1132657Z     Login with MFA token
2025-04-15T08:24:59.1133686Z       âœ“ POST /login should fail due to invalid MFA token (23 ms)
2025-04-15T08:24:59.1134483Z       âœ“ POST /login should fail due two MFA step needed (21 ms)
2025-04-15T08:24:59.1135235Z       âœ“ POST /login should succeed with MFA token (23 ms)
2025-04-15T08:24:59.1135741Z     Login with recovery code
2025-04-15T08:24:59.1136512Z       âœ“ POST /login should fail due to invalid MFA recovery code (26 ms)
2025-04-15T08:24:59.1137366Z       âœ“ POST /login should succeed with MFA recovery code (31 ms)
2025-04-15T08:24:59.1137787Z 
2025-04-15T08:25:00.1141513Z PASS src/__tests__/manual-execution.service.test.ts
2025-04-15T08:25:00.1146492Z   ManualExecutionService
2025-04-15T08:25:00.1150971Z     getExecutionStartNode
2025-04-15T08:25:00.1155868Z       âœ“ Should return undefined (5 ms)
2025-04-15T08:25:00.1160516Z       âœ“ Should return startNode (1 ms)
2025-04-15T08:25:00.1165472Z       âœ“ Should return triggerToStartFrom trigger node
2025-04-15T08:25:00.1193443Z     runManually
2025-04-15T08:25:00.1194848Z       âœ“ should correctly process triggerToStartFrom data when data.triggerToStartFrom.data is present (5 ms)
2025-04-15T08:25:00.1196497Z       âœ“ should correctly include destinationNode in executionData when provided (1 ms)
2025-04-15T08:25:00.1197974Z       âœ“ should call workflowExecute.run for full execution when no runData or startNodes (1 ms)
2025-04-15T08:25:00.1199316Z       âœ“ should use execution start node when available for full execution (2 ms)
2025-04-15T08:25:00.1200845Z       âœ“ should handle partial execution with provided runData, startNodes and no destinationNode (1 ms)
2025-04-15T08:25:00.1202261Z       âœ“ should handle partial execution with partialExecutionVersion=2 (2 ms)
2025-04-15T08:25:00.1203717Z       âœ“ should validate nodes exist before execution (1 ms)
2025-04-15T08:25:00.1204797Z       âœ“ should handle pinData correctly when provided (2 ms)
2025-04-15T08:25:00.1205408Z 
2025-04-15T08:25:04.0654413Z PASS src/webhooks/__tests__/webhook-helpers.test.ts
2025-04-15T08:25:04.0690694Z   autoDetectResponseMode
2025-04-15T08:25:04.0709042Z     âœ“ should return undefined if start node is WAIT_NODE_TYPE with resume not equal to form (7 ms)
2025-04-15T08:25:04.0710582Z     âœ“ should return responseNode when start node is FORM_NODE_TYPE and method is POST (2 ms)
2025-04-15T08:25:04.0711920Z     âœ“ should return undefined when start node is FORM_NODE_TYPE with no other form child nodes (1 ms)
2025-04-15T08:25:04.0713483Z     âœ“ should return undefined for non-matching node type and method (1 ms)
2025-04-15T08:25:04.0714305Z   handleFormRedirectionCase
2025-04-15T08:25:04.0715312Z     âœ“ should return data unchanged if start node is WAIT_NODE_TYPE with resume not equal to form (1 ms)
2025-04-15T08:25:04.0717186Z     âœ“ should modify data if start node type matches and responseCode is a redirect (1 ms)
2025-04-15T08:25:04.0718381Z     âœ“ should not modify data if location header is missing (1 ms)
2025-04-15T08:25:04.0719052Z   getResponseOnReceived
2025-04-15T08:25:04.0731366Z     âœ“ should return response with no data when responseData is "noData" (1 ms)
2025-04-15T08:25:04.0733549Z     âœ“ should return response with responseData when it is defined (4 ms)
2025-04-15T08:25:04.0735879Z     âœ“ should return response with webhookResponse when responseData is falsy but webhookResponse exists (1 ms)
2025-04-15T08:25:04.0738232Z     âœ“ should return default response message when responseData and webhookResponse are falsy (1 ms)
2025-04-15T08:25:04.0740062Z   setupResponseNodePromise
2025-04-15T08:25:04.0742256Z     âœ“ should handle regular response object (12 ms)
2025-04-15T08:25:04.0744391Z     âœ“ should handle binary data with ID (6 ms)
2025-04-15T08:25:04.0745984Z     âœ“ should handle buffer response (2 ms)
2025-04-15T08:25:04.0747629Z     âœ“ should handle errors properly (8 ms)
2025-04-15T08:25:04.0749076Z   prepareExecutionData
2025-04-15T08:25:04.0750778Z     âœ“ should create new execution data when not provided (8 ms)
2025-04-15T08:25:04.0753214Z     âœ“ should update existing runExecutionData when executionId is defined (1 ms)
2025-04-15T08:25:04.0755325Z     âœ“ should set destination node when provided (1 ms)
2025-04-15T08:25:04.0757036Z     âœ“ should update execution data with execution data merge
2025-04-15T08:25:04.0758763Z     âœ“ should set pinData when execution mode is manual (7 ms)
2025-04-15T08:25:04.0760682Z     âœ“ should not set pinData when execution mode is not manual or evaluation (1 ms)
2025-04-15T08:25:04.0762159Z 
2025-04-15T08:25:06.4904484Z PASS test/integration/me.api.test.ts (8.008 s)
2025-04-15T08:25:06.4905069Z   Owner shell
2025-04-15T08:25:06.4905894Z     âœ“ PATCH /me should succeed with valid inputs (110 ms)
2025-04-15T08:25:06.4906682Z     âœ“ PATCH /me should fail with invalid inputs (110 ms)
2025-04-15T08:25:06.4907474Z     âœ“ PATCH /me/password should fail for shell (151 ms)
2025-04-15T08:25:06.4908299Z     âœ“ POST /me/survey should succeed with valid inputs (47 ms)
2025-04-15T08:25:06.4908840Z   Member
2025-04-15T08:25:06.4909448Z     âœ“ PATCH /me should succeed with valid inputs (61 ms)
2025-04-15T08:25:06.4910192Z     âœ“ PATCH /me should fail with invalid inputs (104 ms)
2025-04-15T08:25:06.4910986Z     âœ“ PATCH /me/password should succeed with valid inputs (163 ms)
2025-04-15T08:25:06.4911838Z     âœ“ PATCH /me/password should fail with invalid inputs (92 ms)
2025-04-15T08:25:06.4913067Z     âœ“ POST /me/survey should succeed with valid inputs (56 ms)
2025-04-15T08:25:06.4913685Z   Owner
2025-04-15T08:25:06.4914289Z     âœ“ PATCH /me should succeed with valid inputs (38 ms)
2025-04-15T08:25:06.4914693Z 
2025-04-15T08:25:08.4562246Z (node:2876) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
2025-04-15T08:25:08.4564903Z (Use `node --trace-warnings ...` to show where the warning was created)
2025-04-15T08:25:08.6653144Z PASS test/integration/commands/ldap/reset.test.ts (8.312 s)
2025-04-15T08:25:08.6654795Z   âœ“ fails if neither `--userId` nor `--projectId` nor `--deleteWorkflowsAndCredentials` is passed (49 ms)
2025-04-15T08:25:08.6656343Z   âœ“ fails if more than one of `--userId`, `--projectId`, `--deleteWorkflowsAndCredentials` are passed (6 ms)
2025-04-15T08:25:08.6657748Z   âœ“ fails if more than one of `--userId`, `--projectId`, `--deleteWorkflowsAndCredentials` are passed (4 ms)
2025-04-15T08:25:08.6659152Z   âœ“ fails if more than one of `--userId`, `--projectId`, `--deleteWorkflowsAndCredentials` are passed (5 ms)
2025-04-15T08:25:08.6660545Z   âœ“ fails if more than one of `--userId`, `--projectId`, `--deleteWorkflowsAndCredentials` are passed (4 ms)
2025-04-15T08:25:08.6661493Z   --deleteWorkflowsAndCredentials
2025-04-15T08:25:08.6662568Z     âœ“ deletes personal projects, workflows and credentials owned by LDAP managed users (136 ms)
2025-04-15T08:25:08.6664178Z     âœ“ deletes the LDAP sync history (19 ms)
2025-04-15T08:25:08.6664863Z     âœ“ resets LDAP settings (20 ms)
2025-04-15T08:25:08.6665452Z   --userId
2025-04-15T08:25:08.6666104Z     âœ“ fails if the user does not exist (9 ms)
2025-04-15T08:25:08.6666962Z     âœ“ fails if the user to migrate to is also an LDAP user (17 ms)
2025-04-15T08:25:08.6667997Z     âœ“ transfers all workflows and credentials to the user's personal project (89 ms)
2025-04-15T08:25:08.6668727Z   --projectId
2025-04-15T08:25:08.6669297Z     âœ“ fails if the project does not exist (7 ms)
2025-04-15T08:25:08.6670089Z     âœ“ fails if the user to migrate to is also an LDAP user (14 ms)
2025-04-15T08:25:08.6671026Z     âœ“ transfers all workflows and credentials to a personal project (72 ms)
2025-04-15T08:25:08.6671999Z     âœ“ transfers all workflows and credentials to a team project (82 ms)
2025-04-15T08:25:08.6672603Z 
2025-04-15T08:25:11.7258411Z PASS src/webhooks/__tests__/webhook.service.test.ts
2025-04-15T08:25:11.7261460Z   WebhookService
2025-04-15T08:25:11.7285846Z     findWebhook() - static case [cache enabled]
2025-04-15T08:25:11.7289938Z       âœ“ should return the webhook if found (6 ms)
2025-04-15T08:25:11.7291951Z       âœ“ should return null if not found (1 ms)
2025-04-15T08:25:11.7293744Z     findWebhook() - dynamic case [cache enabled]
2025-04-15T08:25:11.7295436Z       âœ“ should return the webhook if found (2 ms)
2025-04-15T08:25:11.7297242Z       âœ“ should handle subset dynamic path case (1 ms)
2025-04-15T08:25:11.7298977Z       âœ“ should handle single-segment dynamic path case (1 ms)
2025-04-15T08:25:11.7315354Z       âœ“ should return null if not found (1 ms)
2025-04-15T08:25:11.7316440Z     findWebhook() - static case [cache disabled]
2025-04-15T08:25:11.7317144Z       âœ“ should return the webhook if found (1 ms)
2025-04-15T08:25:11.7317790Z       âœ“ should return null if not found (1 ms)
2025-04-15T08:25:11.7318346Z     findWebhook() - dynamic case [cache disabled]
2025-04-15T08:25:11.7319022Z       âœ“ should return the webhook if found (1 ms)
2025-04-15T08:25:11.7319679Z       âœ“ should handle subset dynamic path case (1 ms)
2025-04-15T08:25:11.7320440Z       âœ“ should handle single-segment dynamic path case (1 ms)
2025-04-15T08:25:11.7321089Z       âœ“ should return null if not found (1 ms)
2025-04-15T08:25:11.7321499Z     getWebhookMethods()
2025-04-15T08:25:11.7322629Z       âœ“ should return all methods for webhook (1 ms)
2025-04-15T08:25:11.7323453Z       âœ“ should return empty array if no webhooks found (1 ms)
2025-04-15T08:25:11.7323951Z     deleteWorkflowWebhooks()
2025-04-15T08:25:11.7324528Z       âœ“ should delete all webhooks of the workflow (1 ms)
2025-04-15T08:25:11.7325210Z       âœ“ should not delete any webhooks if none found (1 ms)
2025-04-15T08:25:11.7325696Z     createWebhook()
2025-04-15T08:25:11.7326630Z       âœ“ should store webhook in DB (1 ms)
2025-04-15T08:25:11.7327701Z     getNodeWebhooks()
2025-04-15T08:25:11.7328280Z       âœ“ should return empty array if node is disabled (1 ms)
2025-04-15T08:25:11.7330993Z       âœ“ should return webhooks for node with webhook definitions (2 ms)
2025-04-15T08:25:11.7331611Z     createWebhookIfNotExists()
2025-04-15T08:25:11.7332220Z       âœ“ should create webhook if it does not exist (2 ms)
2025-04-15T08:25:11.7333100Z       âœ“ should not create webhook if it already exists (1 ms)
2025-04-15T08:25:11.7333859Z       âœ“ should handle case when webhook methods are not defined
2025-04-15T08:25:11.7334361Z     deleteWebhook()
2025-04-15T08:25:11.7335595Z       âœ“ should call runWebhookMethod with delete (1 ms)
2025-04-15T08:25:11.7336062Z     runWebhook()
2025-04-15T08:25:11.7336609Z       âœ“ should throw error if node does not have webhooks (25 ms)
2025-04-15T08:25:11.7337314Z       âœ“ should execute webhook and return response data (2 ms)
2025-04-15T08:25:11.7337659Z 
2025-04-15T08:25:11.7894177Z PASS test/integration/auth.api.test.ts (7.51 s)
2025-04-15T08:25:11.7895200Z   POST /login
2025-04-15T08:25:11.7896112Z     âœ“ should log user in (84 ms)
2025-04-15T08:25:11.7898942Z     âœ“ should log user with MFA enabled (42 ms)
2025-04-15T08:25:11.7900119Z     âœ“ should throw AuthError for non-owner if not within users limit quota (64 ms)
2025-04-15T08:25:11.7901711Z     âœ“ should not throw AuthError for owner if not within users limit quota (29 ms)
2025-04-15T08:25:11.7903777Z     âœ“ should fail with invalid email in the payload is the current authentication method is "email" (17 ms)
2025-04-15T08:25:11.7904825Z   GET /login
2025-04-15T08:25:11.7905564Z     âœ“ should return 401 Unauthorized if no cookie (9 ms)
2025-04-15T08:25:11.7906716Z     âœ“ should return 401 Unauthorized if invalid cookie (6 ms)
2025-04-15T08:25:11.7908476Z     âœ“ should return logged-in owner shell (14 ms)
2025-04-15T08:25:11.7909570Z     âœ“ should return logged-in member shell (18 ms)
2025-04-15T08:25:11.7911032Z     âœ“ should return logged-in owner (21 ms)
2025-04-15T08:25:11.7912078Z     âœ“ should return logged-in member (26 ms)
2025-04-15T08:25:11.7913500Z   GET /resolve-signup-token
2025-04-15T08:25:11.7914501Z     âœ“ should validate invite token (27 ms)
2025-04-15T08:25:11.7916008Z     âœ“ should return 403 if user quota reached (21 ms)
2025-04-15T08:25:11.7917115Z     âœ“ should fail with invalid inputs (48 ms)
2025-04-15T08:25:11.7918661Z   POST /logout
2025-04-15T08:25:11.7920724Z     âœ“ should log user out (27 ms)
2025-04-15T08:25:11.7921031Z 
2025-04-15T08:25:13.4438834Z PASS test/integration/environments/source-control-import.service.test.ts (6.701 s)
2025-04-15T08:25:13.4440183Z   SourceControlImportService
2025-04-15T08:25:13.4474108Z     importCredentialsFromWorkFolder()
2025-04-15T08:25:13.4475408Z       if user email specified by `ownedBy` exists at target instance
2025-04-15T08:25:13.4476868Z         âœ“ should assign credential ownership to original user (66 ms)
2025-04-15T08:25:13.4478127Z       if user email specified by `ownedBy` is `null`
2025-04-15T08:25:13.4479303Z         âœ“ should assign credential ownership to importing user (25 ms)
2025-04-15T08:25:13.4482437Z       if user email specified by `ownedBy` does not exist at target instance
2025-04-15T08:25:13.4487348Z         âœ“ should assign credential ownership to importing user (15 ms)
2025-04-15T08:25:13.4488211Z     if owner specified by `ownedBy` does not exist at target instance
2025-04-15T08:25:13.4489673Z       âœ“ should assign the credential ownership to the importing user if it was owned by a personal project in the source instance (15 ms)
2025-04-15T08:25:13.4491368Z       âœ“ should create a new team project if the credential was owned by a team project in the source instance (21 ms)
2025-04-15T08:25:13.4492391Z     if owner specified by `ownedBy` does exist at target instance
2025-04-15T08:25:13.4493822Z       âœ“ should use the existing team project if credential owning project is found (15 ms)
2025-04-15T08:25:13.4495973Z       âœ“ should not change the owner if the credential is owned by somebody else on the target instance (22 ms)
2025-04-15T08:25:13.4496638Z 
2025-04-15T08:25:15.0244082Z PASS src/executions/pre-execution-checks/__tests__/subworkflow-policy-checker.test.ts
2025-04-15T08:25:15.0244958Z   SubworkflowPolicyChecker
2025-04-15T08:25:15.0249603Z     no caller policy
2025-04-15T08:25:15.0252501Z       âœ“ should fall back to `N8N_WORKFLOW_CALLER_POLICY_DEFAULT_OPTION` (18 ms)
2025-04-15T08:25:15.0255685Z     `workflows-from-list` caller policy
2025-04-15T08:25:15.0256493Z       âœ“ should allow if caller list contains parent workflow ID (2 ms)
2025-04-15T08:25:15.0257259Z       âœ“ should deny if caller list does not contain parent workflow ID (8 ms)
2025-04-15T08:25:15.0257779Z     `any` caller policy
2025-04-15T08:25:15.0258346Z       âœ“ should not throw on a regular subworkflow call (1 ms)
2025-04-15T08:25:15.0258913Z     `workflows-from-same-owner` caller policy
2025-04-15T08:25:15.0259683Z       âœ“ should deny if the two workflows are owned by different projects (2 ms)
2025-04-15T08:25:15.0260566Z       âœ“ should allow if both workflows are owned by the same project (1 ms)
2025-04-15T08:25:15.0261495Z     error details
2025-04-15T08:25:15.0262040Z       âœ“ should contain description for accessible case (1 ms)
2025-04-15T08:25:15.0263100Z       âœ“ should contain description for inaccessible personal project case (1 ms)
2025-04-15T08:25:15.0264067Z       âœ“ should contain description for inaccessible team project case (1 ms)
2025-04-15T08:25:15.0265008Z       âœ“ should contain description for default (e.g. error workflow) case (1 ms)
2025-04-15T08:25:15.0265471Z 
2025-04-15T08:25:17.4669014Z PASS src/__tests__/active-executions.test.ts
2025-04-15T08:25:17.4669609Z   ActiveExecutions
2025-04-15T08:25:17.4670480Z     âœ“ Should initialize activeExecutions with empty list (7 ms)
2025-04-15T08:25:17.4671316Z     âœ“ Should add execution to active execution list (11 ms)
2025-04-15T08:25:17.4672526Z     âœ“ Should update execution if add is called with execution ID (2 ms)
2025-04-15T08:25:17.4673836Z     âœ“ Should attach and resolve response promise to existing execution (2 ms)
2025-04-15T08:25:17.4675219Z     âœ“ Should copy over startedAt and responsePromise when resuming a waiting execution (2 ms)
2025-04-15T08:25:17.4676198Z     attachWorkflowExecution
2025-04-15T08:25:17.4677066Z       âœ“ Should fail attaching execution to invalid executionId (28 ms)
2025-04-15T08:25:17.4678472Z       âœ“ Should successfully attach execution to valid executionId (1 ms)
2025-04-15T08:25:17.4679283Z     finalizeExecution
2025-04-15T08:25:17.4679959Z       âœ“ Should not remove a waiting execution (2 ms)
2025-04-15T08:25:17.4680719Z       âœ“ Should remove an existing execution (2 ms)
2025-04-15T08:25:17.4681757Z       âœ“ Should not try to resolve a post-execute promise for an inactive execution (1 ms)
2025-04-15T08:25:17.4682990Z       âœ“ Should resolve post execute promise on removal (5 ms)
2025-04-15T08:25:17.4683627Z     getPostExecutePromise
2025-04-15T08:25:17.4684524Z       âœ“ Should throw error when trying to create a promise with invalid execution (1 ms)
2025-04-15T08:25:17.4685238Z     stopExecution
2025-04-15T08:25:17.4713698Z       âœ“ Should cancel ongoing executions (6 ms)
2025-04-15T08:25:17.4714501Z       âœ“ Should cancel waiting executions (1 ms)
2025-04-15T08:25:17.4715053Z     shutdown
2025-04-15T08:25:17.4715934Z       âœ“ Should cancel only executions with response-promises by default (8 ms)
2025-04-15T08:25:17.4717093Z       âœ“ Should cancel all executions when cancelAll is true (5 ms)
2025-04-15T08:25:17.4717568Z 
2025-04-15T08:25:20.2890308Z PASS test/integration/public-api/credentials.test.ts (8.303 s)
2025-04-15T08:25:20.2891483Z   POST /credentials
2025-04-15T08:25:20.2892251Z     âœ“ should create credentials (247 ms)
2025-04-15T08:25:20.2896048Z     âœ“ should fail with invalid inputs (47 ms)
2025-04-15T08:25:20.2899994Z   DELETE /credentials/:id
2025-04-15T08:25:20.2911839Z     âœ“ should delete owned cred for owner (28 ms)
2025-04-15T08:25:20.2916748Z     âœ“ should delete non-owned cred for owner (18 ms)
2025-04-15T08:25:20.2921176Z     âœ“ should delete owned cred for member (25 ms)
2025-04-15T08:25:20.2926222Z     âœ“ should delete owned cred for member but leave others untouched (57 ms)
2025-04-15T08:25:20.2930972Z     âœ“ should not delete non-owned cred for member (16 ms)
2025-04-15T08:25:20.2935677Z     âœ“ should fail if cred not found (9 ms)
2025-04-15T08:25:20.2939698Z   GET /credentials/schema/:credentialType
2025-04-15T08:25:20.2946791Z     âœ“ should fail due to not found type (17 ms)
2025-04-15T08:25:20.2948696Z     âœ“ should retrieve credential type (10 ms)
2025-04-15T08:25:20.2950364Z   PUT /credentials/:id/transfer
2025-04-15T08:25:20.2952124Z     âœ“ should transfer credential to project (54 ms)
2025-04-15T08:25:20.2975010Z     âœ“ should transfer the right credential, not the first one it finds (35 ms)
2025-04-15T08:25:20.2975788Z     âœ“ if no destination project, should reject (15 ms)
2025-04-15T08:25:20.2976102Z 
2025-04-15T08:25:22.8997911Z PASS test/integration/eventbus.ee.test.ts (7.614 s)
2025-04-15T08:25:22.8999142Z   âœ“ should have a running logwriter process (5 ms)
2025-04-15T08:25:22.9000475Z   âœ“ should have logwriter log messages (33 ms)
2025-04-15T08:25:22.9001841Z   âœ“ should anonymize audit message to syslog  (10 ms)
2025-04-15T08:25:22.9002449Z   âœ“ should send message to webhook  (6 ms)
2025-04-15T08:25:22.9003201Z   âœ“ should send message to sentry  (7 ms)
2025-04-15T08:25:22.9003910Z   âœ“ DELETE /eventbus/destination delete all destinations by id (20 ms)
2025-04-15T08:25:22.9004515Z   GET /eventbus/destination
2025-04-15T08:25:22.9005108Z     âœ“ should fail due to missing authentication (23 ms)
2025-04-15T08:25:22.9005845Z     âœ“ all returned destinations should exist in eventbus (13 ms)
2025-04-15T08:25:22.9006386Z   POST /eventbus/destination
2025-04-15T08:25:22.9006918Z     âœ“ create syslog destination (9 ms)
2025-04-15T08:25:22.9007267Z     âœ“ create sentry destination (7 ms)
2025-04-15T08:25:22.9007590Z     âœ“ create webhook destination (8 ms)
2025-04-15T08:25:22.9007770Z 
2025-04-15T08:25:24.0398695Z PASS src/telemetry/__tests__/telemetry.test.ts
2025-04-15T08:25:24.0399254Z   Telemetry
2025-04-15T08:25:24.0399567Z     trackWorkflowExecution
2025-04-15T08:25:24.0400398Z       âœ“ should count executions correctly (9 ms)
2025-04-15T08:25:24.0401265Z       âœ“ should fire "Workflow execution errored" event for failed executions (14 ms)
2025-04-15T08:25:24.0402503Z       âœ“ should track production executions count correctly (8 ms)
2025-04-15T08:25:24.0433183Z     Rudderstack
2025-04-15T08:25:24.0434327Z       âœ“ should call rudderStack.identify() with a fake IP address to instruct Rudderstack to not use the user's IP address (2 ms)
2025-04-15T08:25:24.0435901Z       âœ“ should call rudderStack.track() with a fake IP address to instruct Rudderstack to not use the user's IP address (4 ms)
2025-04-15T08:25:24.0436590Z 
2025-04-15T08:25:25.4673845Z PASS test/integration/external-secrets/external-secrets.api.test.ts (7.751 s)
2025-04-15T08:25:25.4674676Z   GET /external-secrets/providers
2025-04-15T08:25:25.4675464Z     âœ“ can retrieve providers as owner (47 ms)
2025-04-15T08:25:25.4676142Z     âœ“ can not retrieve providers as non-owner (11 ms)
2025-04-15T08:25:25.4676815Z     âœ“ does obscure passwords (12 ms)
2025-04-15T08:25:25.4677324Z   GET /external-secrets/providers/:provider
2025-04-15T08:25:25.4677935Z     âœ“ can retrieve provider as owner (11 ms)
2025-04-15T08:25:25.4678598Z     âœ“ can not retrieve provider as non-owner (10 ms)
2025-04-15T08:25:25.4679194Z     âœ“ does obscure passwords (11 ms)
2025-04-15T08:25:25.4679700Z   POST /external-secrets/providers/:provider
2025-04-15T08:25:25.4680300Z     âœ“ can update provider settings (18 ms)
2025-04-15T08:25:25.4680994Z     âœ“ can update provider settings with blanking value (20 ms)
2025-04-15T08:25:25.4681651Z   POST /external-secrets/providers/:provider/connect
2025-04-15T08:25:25.4682320Z     âœ“ can change provider connected state (17 ms)
2025-04-15T08:25:25.4683154Z   POST /external-secrets/providers/:provider/test
2025-04-15T08:25:25.4683716Z     âœ“ can test provider (8 ms)
2025-04-15T08:25:25.4684187Z     âœ“ can test provider fail (9 ms)
2025-04-15T08:25:25.4684729Z   POST /external-secrets/providers/:provider/update
2025-04-15T08:25:25.4685358Z     âœ“ can update provider (9 ms)
2025-04-15T08:25:25.4685919Z     âœ“ can not update errored provider (21 ms)
2025-04-15T08:25:25.4686616Z     âœ“ can not update provider without a valid license (9 ms)
2025-04-15T08:25:25.4687192Z   GET /external-secrets/secrets
2025-04-15T08:25:25.4687724Z     âœ“ can get secret names as owner (9 ms)
2025-04-15T08:25:25.4688342Z     âœ“ can not get secret names as non-owner (9 ms)
2025-04-15T08:25:25.4688686Z 
2025-04-15T08:25:30.5883417Z PASS test/integration/active-workflow-manager.test.ts (7.436 s)
2025-04-15T08:25:30.5884079Z   init()
2025-04-15T08:25:30.5884820Z     âœ“ should load workflows into memory (112 ms)
2025-04-15T08:25:30.5885470Z     âœ“ should call external hook (18 ms)
2025-04-15T08:25:30.5886168Z     âœ“ should check that workflow can be activated (33 ms)
2025-04-15T08:25:30.5886691Z   isActive()
2025-04-15T08:25:30.5887299Z     âœ“ should return `true` for active workflow in storage (22 ms)
2025-04-15T08:25:30.5888189Z     âœ“ should return `false` for inactive workflow in storage (14 ms)
2025-04-15T08:25:30.5889209Z   add()
2025-04-15T08:25:30.5889994Z     âœ“ should count workflow triggers correctly when node has multiple webhooks (15 ms)
2025-04-15T08:25:30.5890665Z     in single-main mode
2025-04-15T08:25:30.5891611Z       âœ“ should add webhooks, triggers and pollers for workflow in 'activate' activation mode (19 ms)
2025-04-15T08:25:30.5893130Z       âœ“ should add webhooks, triggers and pollers for workflow in 'update' activation mode (20 ms)
2025-04-15T08:25:30.5893863Z   removeAll()
2025-04-15T08:25:30.5894499Z     âœ“ should remove all active workflows from memory (30 ms)
2025-04-15T08:25:30.5895004Z   remove()
2025-04-15T08:25:30.5895287Z     in single-main mode
2025-04-15T08:25:30.5895975Z       âœ“ should remove all webhooks of a workflow from database (21 ms)
2025-04-15T08:25:30.5896902Z       âœ“ should remove all webhooks of a workflow from external service (16 ms)
2025-04-15T08:25:30.5897732Z       âœ“ should stop running triggers and pollers (16 ms)
2025-04-15T08:25:30.5898237Z   executeErrorWorkflow()
2025-04-15T08:25:30.5898882Z     âœ“ should be called on failure to activate due to 401 (21 ms)
2025-04-15T08:25:30.5899384Z   addWebhooks()
2025-04-15T08:25:30.5900219Z     âœ“ should call `WebhookService.storeWebhook()` (23 ms)
2025-04-15T08:25:30.5900625Z 
2025-04-15T08:25:32.1589658Z PASS test/integration/evaluation/test-runs.api.test.ts (7.878 s)
2025-04-15T08:25:32.1596786Z   GET /evaluation/test-definitions/:testDefinitionId/runs
2025-04-15T08:25:32.1597936Z     âœ“ should retrieve empty list of runs for a test definition (65 ms)
2025-04-15T08:25:32.1598872Z     âœ“ should return 404 if test definition does not exist (52 ms)
2025-04-15T08:25:32.1599809Z     âœ“ should return 404 if user does not have access to test definition (31 ms)
2025-04-15T08:25:32.1600751Z     âœ“ should retrieve list of runs for a test definition (36 ms)
2025-04-15T08:25:32.1601698Z     âœ“ should retrieve list of runs for a test definition with pagination (51 ms)
2025-04-15T08:25:32.1602584Z   GET /evaluation/test-definitions/:testDefinitionId/runs/:id
2025-04-15T08:25:32.1603694Z     âœ“ should retrieve test run for a test definition (32 ms)
2025-04-15T08:25:32.1604574Z     âœ“ should return 404 if test run does not exist (27 ms)
2025-04-15T08:25:32.1605525Z     âœ“ should return 404 if user does not have access to test definition (34 ms)
2025-04-15T08:25:32.1606644Z     âœ“ should retrieve test run for a test definition of a shared workflow (68 ms)
2025-04-15T08:25:32.1607544Z   DELETE /evaluation/test-definitions/:testDefinitionId/runs/:id
2025-04-15T08:25:32.1608445Z     âœ“ should delete test run for a test definition (33 ms)
2025-04-15T08:25:32.1609248Z     âœ“ should return 404 if test run does not exist (29 ms)
2025-04-15T08:25:32.1610214Z     âœ“ should return 404 if user does not have access to test definition (25 ms)
2025-04-15T08:25:32.1611112Z   POST /evaluation/test-definitions/:testDefinitionId/runs/:id/cancel
2025-04-15T08:25:32.1611872Z     âœ“ should cancel test run (40 ms)
2025-04-15T08:25:32.1612555Z     âœ“ should return 404 if test run does not exist (33 ms)
2025-04-15T08:25:32.1613589Z     âœ“ should return 404 if test definition does not exist (31 ms)
2025-04-15T08:25:32.1614655Z     âœ“ should return 404 if user does not have access to test definition (32 ms)
2025-04-15T08:25:32.1615171Z 
2025-04-15T08:25:33.0740943Z PASS test/integration/prometheus-metrics.test.ts (7.341 s)
2025-04-15T08:25:33.0744802Z   PrometheusMetricsService
2025-04-15T08:25:33.0745582Z     âœ“ should return n8n version (32 ms)
2025-04-15T08:25:33.0746275Z     âœ“ should return default metrics if enabled (14 ms)
2025-04-15T08:25:33.0752270Z     âœ“ should not return default metrics if disabled (4 ms)
2025-04-15T08:25:33.0753284Z     âœ“ should return cache metrics if enabled (4 ms)
2025-04-15T08:25:33.0753995Z     âœ“ should not return cache metrics if disabled (4 ms)
2025-04-15T08:25:33.0754723Z     âœ“ should return route metrics if enabled (15 ms)
2025-04-15T08:25:33.0755541Z     âœ“ should include last activity metric with route metrics (30 ms)
2025-04-15T08:25:33.0756994Z     âœ“ should return labels in route metrics if enabled (8 ms)
2025-04-15T08:25:33.0757731Z     âœ“ should return queue metrics if enabled (4 ms)
2025-04-15T08:25:33.0758618Z     âœ“ should set queue metrics in response to `job-counts-updated` event (3 ms)
2025-04-15T08:25:33.0759503Z     âœ“ should return active workflow count (20 ms)
2025-04-15T08:25:33.0759871Z 
2025-04-15T08:25:38.0236068Z PASS src/commands/__tests__/community-node.test.ts (5.631 s)
2025-04-15T08:25:38.0237311Z   uninstallCredential
2025-04-15T08:25:38.0238247Z     âœ“ should delete a credential (10 ms)
2025-04-15T08:25:38.0238872Z     âœ“ should return if the user is not found (1 ms)
2025-04-15T08:25:38.0239549Z     âœ“ should return if the credential is not found (2 ms)
2025-04-15T08:25:38.0240193Z     âœ“ should delete multiple credentials (2 ms)
2025-04-15T08:25:38.0240644Z   uninstallPackage
2025-04-15T08:25:38.0241104Z     âœ“ should uninstall the package (3 ms)
2025-04-15T08:25:38.0241840Z     âœ“ should uninstall all nodes from a package (2 ms)
2025-04-15T08:25:38.0242549Z     âœ“ should return if a package is not found (1 ms)
2025-04-15T08:25:38.0243642Z     âœ“ should return if nodes are not found (1 ms)
2025-04-15T08:25:38.0243991Z 
2025-04-15T08:25:38.9960595Z PASS test/integration/public-api/projects.test.ts (8.218 s)
2025-04-15T08:25:38.9966025Z   Projects in Public API
2025-04-15T08:25:38.9966398Z     GET /projects
2025-04-15T08:25:38.9967240Z       âœ“ if licensed, should return all projects with pagination (215 ms)
2025-04-15T08:25:38.9967982Z       âœ“ if not authenticated, should reject (12 ms)
2025-04-15T08:25:38.9968575Z       âœ“ if not licensed, should reject (21 ms)
2025-04-15T08:25:38.9969150Z       âœ“ if missing scope, should reject (20 ms)
2025-04-15T08:25:38.9969596Z     POST /projects
2025-04-15T08:25:38.9970182Z       âœ“ if licensed, should create a new project (29 ms)
2025-04-15T08:25:38.9970845Z       âœ“ if not authenticated, should reject (6 ms)
2025-04-15T08:25:38.9971481Z       âœ“ if not licensed, should reject (17 ms)
2025-04-15T08:25:38.9972092Z       âœ“ if missing scope, should reject (18 ms)
2025-04-15T08:25:38.9972613Z     DELETE /projects/:id
2025-04-15T08:25:38.9973309Z       âœ“ if licensed, should delete a project (82 ms)
2025-04-15T08:25:38.9973904Z       âœ“ if not authenticated, should reject (8 ms)
2025-04-15T08:25:38.9974445Z       âœ“ if not licensed, should reject (18 ms)
2025-04-15T08:25:38.9974962Z       âœ“ if missing scope, should reject (18 ms)
2025-04-15T08:25:38.9975375Z     PUT /projects/:id
2025-04-15T08:25:38.9975841Z       âœ“ if licensed, should update a project (32 ms)
2025-04-15T08:25:38.9976441Z       âœ“ if not authenticated, should reject (6 ms)
2025-04-15T08:25:38.9976980Z       âœ“ if not licensed, should reject (15 ms)
2025-04-15T08:25:38.9977514Z       âœ“ if missing scope, should reject (16 ms)
2025-04-15T08:25:38.9977800Z 
2025-04-15T08:25:40.2865922Z PASS src/executions/__tests__/execution-recovery.service.test.ts (6.982 s)
2025-04-15T08:25:40.2870897Z   ExecutionRecoveryService
2025-04-15T08:25:40.2873205Z     recoverFromLogs
2025-04-15T08:25:40.2873558Z       if follower
2025-04-15T08:25:40.2874189Z         âœ“ should do nothing (29 ms)
2025-04-15T08:25:40.2874654Z       if leader, with 0 messages
2025-04-15T08:25:40.2875316Z         âœ“ should return `null` if no execution found (6 ms)
2025-04-15T08:25:40.2876016Z         âœ“ should update `status` and `stoppedAt` (40 ms)
2025-04-15T08:25:40.2876511Z       if leader, with 1+ messages
2025-04-15T08:25:40.2877224Z         âœ“ for successful dataful execution, should return `null` (15 ms)
2025-04-15T08:25:40.2877979Z         âœ“ should return `null` if no execution found (5 ms)
2025-04-15T08:25:40.2878983Z         âœ“ for successful dataless execution, should update `status`, `stoppedAt` and `data` (55 ms)
2025-04-15T08:25:40.2880333Z         âœ“ for running execution, should update `status`, `stoppedAt` and `data` if last node did not finish (18 ms)
2025-04-15T08:25:40.2881523Z         âœ“ should update `status`, `stoppedAt` and `data` if last node finished (17 ms)
2025-04-15T08:25:40.2882445Z 
2025-04-15T08:25:44.4734562Z PASS src/controllers/oauth/__tests__/oauth1-credential.controller.test.ts (5.246 s)
2025-04-15T08:25:44.4735632Z   OAuth1CredentialController
2025-04-15T08:25:44.4736189Z     getAuthUri
2025-04-15T08:25:44.4737228Z       âœ“ should throw a BadRequestError when credentialId is missing in the query (32 ms)
2025-04-15T08:25:44.4738408Z       âœ“ should throw a NotFoundError when no matching credential is found for the user (2 ms)
2025-04-15T08:25:44.4739333Z       âœ“ should return a valid auth URI (87 ms)
2025-04-15T08:25:44.4739853Z     handleCallback
2025-04-15T08:25:44.4740738Z       âœ“ should render the error page when required query params are missing (1 ms)
2025-04-15T08:25:44.4741781Z       âœ“ should render the error page when `state` query param is invalid (4 ms)
2025-04-15T08:25:44.4742995Z       âœ“ should render the error page when credential is not found in DB (3 ms)
2025-04-15T08:25:44.4744224Z       âœ“ should render the error page when state differs from the stored state in the credential (1 ms)
2025-04-15T08:25:44.4745366Z       âœ“ should render the error page when state is older than 5 minutes (1 ms)
2025-04-15T08:25:44.4746727Z       âœ“ should exchange the code for a valid token, and save it to DB (36 ms)
2025-04-15T08:25:44.4747319Z 
2025-04-15T08:25:45.3350981Z PASS src/scaling/__tests__/scaling.service.test.ts
2025-04-15T08:25:45.3352146Z   ScalingService
2025-04-15T08:25:45.3352901Z     setupQueue
2025-04-15T08:25:45.3353434Z       if leader main
2025-04-15T08:25:45.3354504Z         âœ“ should set up queue + listeners + queue recovery (10 ms)
2025-04-15T08:25:45.3355261Z       if follower main
2025-04-15T08:25:45.3355968Z         âœ“ should set up queue + listeners (2 ms)
2025-04-15T08:25:45.3356563Z       if worker
2025-04-15T08:25:45.3357224Z         âœ“ should set up queue + listeners (1 ms)
2025-04-15T08:25:45.3357807Z       webhook
2025-04-15T08:25:45.3358460Z         âœ“ should set up a queue + listeners (2 ms)
2025-04-15T08:25:45.3359110Z     setupWorker
2025-04-15T08:25:45.3359912Z       âœ“ should set up a worker with concurrency (2 ms)
2025-04-15T08:25:45.3360897Z       âœ“ should throw if called on a non-worker instance (27 ms)
2025-04-15T08:25:45.3361876Z       âœ“ should throw if called before queue is ready (3 ms)
2025-04-15T08:25:45.3362512Z     stop
2025-04-15T08:25:45.3363120Z       if main
2025-04-15T08:25:45.3363932Z         âœ“ should pause queue, stop queue recovery and queue metrics (2 ms)
2025-04-15T08:25:45.3364806Z       if worker
2025-04-15T08:25:45.3365638Z         âœ“ should pause queue and wait for running jobs to finish (2 ms)
2025-04-15T08:25:45.3366359Z     pingQueue
2025-04-15T08:25:45.3369768Z       âœ“ should ping the queue (1 ms)
2025-04-15T08:25:45.3371688Z     addJob
2025-04-15T08:25:45.3372434Z       âœ“ should add a job (2 ms)
2025-04-15T08:25:45.3373046Z     getJob
2025-04-15T08:25:45.3373502Z       âœ“ should get a job (2 ms)
2025-04-15T08:25:45.3373904Z     findJobsByStatus
2025-04-15T08:25:45.3374454Z       âœ“ should find jobs by status (1 ms)
2025-04-15T08:25:45.3375144Z       âœ“ should filter out `null` in Redis response (1 ms)
2025-04-15T08:25:45.3375629Z     stopJob
2025-04-15T08:25:45.3376092Z       âœ“ should stop an active job (3 ms)
2025-04-15T08:25:45.3376715Z       âœ“ should stop an inactive job (1 ms)
2025-04-15T08:25:45.3377349Z       âœ“ should report failure to stop a job (2 ms)
2025-04-15T08:25:45.3377692Z 
2025-04-15T08:25:46.0618949Z PASS test/integration/api-keys.api.test.ts (7.74 s)
2025-04-15T08:25:46.0623928Z   When public API is disabled
2025-04-15T08:25:46.0629183Z     âœ“ POST /api-keys should 404 (80 ms)
2025-04-15T08:25:46.0633842Z     âœ“ GET /api-keys should 404 (27 ms)
2025-04-15T08:25:46.0638220Z     âœ“ DELETE /api-key/:id should 404 (28 ms)
2025-04-15T08:25:46.0642374Z   Owner shell
2025-04-15T08:25:46.0647108Z     âœ“ POST /api-keys should create an api key with no expiration (29 ms)
2025-04-15T08:25:46.0651829Z     âœ“ POST /api-keys should create an api key with expiration (25 ms)
2025-04-15T08:25:46.0657252Z     âœ“ GET /api-keys should fetch the api key redacted (40 ms)
2025-04-15T08:25:46.0661782Z     âœ“ DELETE /api-keys/:id should delete the api key (46 ms)
2025-04-15T08:25:46.0665921Z   Member
2025-04-15T08:25:46.0667905Z     âœ“ POST /api-keys should create an api key with no expiration (40 ms)
2025-04-15T08:25:46.0669590Z     âœ“ POST /api-keys should create an api key with expiration (24 ms)
2025-04-15T08:25:46.0671989Z     âœ“ POST /api-keys should fail if max number of API keys reached (26 ms)
2025-04-15T08:25:46.0673398Z     âœ“ GET /api-keys should fetch the api key redacted (34 ms)
2025-04-15T08:25:46.0675567Z     âœ“ DELETE /api-keys/:id should delete the api key (32 ms)
2025-04-15T08:25:46.0678170Z 
2025-04-15T08:25:48.1474853Z PASS src/task-runners/task-managers/__tests__/data-request-response-stripper.test.ts
2025-04-15T08:25:48.1495745Z   DataRequestResponseStripper
2025-04-15T08:25:48.1500118Z     all data
2025-04-15T08:25:48.1501584Z       âœ“ should build the runExecutionData as is when everything is requested (8 ms)
2025-04-15T08:25:48.1502598Z     envProviderState
2025-04-15T08:25:48.1503757Z       âœ“ should filter out envProviderState when it's not requested (1 ms)
2025-04-15T08:25:48.1504433Z     input data
2025-04-15T08:25:48.1505415Z       âœ“ drops input data from result (1 ms)
2025-04-15T08:25:48.1506144Z       âœ“ returns only chunked data (1 ms)
2025-04-15T08:25:48.1506691Z     nodes
2025-04-15T08:25:48.1507496Z       âœ“ should return empty run data when only Code node is requested (1 ms)
2025-04-15T08:25:48.1508606Z       âœ“ should return empty run data when only Code node is requested (1 ms)
2025-04-15T08:25:48.1509943Z       âœ“ should return only DebugHelper's data when only DebugHelper node is requested (2 ms)
2025-04-15T08:25:48.1510958Z       âœ“ should return DebugHelper's data when only prevNode node is requested (1 ms)
2025-04-15T08:25:48.1511534Z     passthrough properties
2025-04-15T08:25:48.1511985Z       âœ“ it doesn't change workflow
2025-04-15T08:25:48.1512530Z       âœ“ it doesn't change connectionInputSource (1 ms)
2025-04-15T08:25:48.1513325Z       âœ“ it doesn't change node (1 ms)
2025-04-15T08:25:48.1513806Z       âœ“ it doesn't change runIndex
2025-04-15T08:25:48.1514299Z       âœ“ it doesn't change itemIndex (1 ms)
2025-04-15T08:25:48.1514843Z       âœ“ it doesn't change activeNodeName
2025-04-15T08:25:48.1515378Z       âœ“ it doesn't change siblingParameters
2025-04-15T08:25:48.1515868Z       âœ“ it doesn't change mode
2025-04-15T08:25:48.1516353Z       âœ“ it doesn't change defaultReturnRunIndex
2025-04-15T08:25:48.1516894Z       âœ“ it doesn't change selfData (1 ms)
2025-04-15T08:25:48.1517415Z       âœ“ it doesn't change contextNodeName
2025-04-15T08:25:48.1517902Z       âœ“ it doesn't change additionalData
2025-04-15T08:25:48.1518169Z 
2025-04-15T08:25:53.4671529Z PASS test/integration/public-api/tags.test.ts (8.739 s)
2025-04-15T08:25:53.4679398Z   GET /tags
2025-04-15T08:25:53.4683927Z     âœ“ should fail due to missing API Key (38 ms)
2025-04-15T08:25:53.4686982Z     âœ“ should fail due to invalid API Key (9 ms)
2025-04-15T08:25:53.4694741Z     âœ“ should return all tags (253 ms)
2025-04-15T08:25:53.4697012Z     âœ“ should return all tags with pagination (29 ms)
2025-04-15T08:25:53.4719294Z   GET /tags/:id
2025-04-15T08:25:53.4720704Z     âœ“ should fail due to missing API Key (8 ms)
2025-04-15T08:25:53.4722553Z     âœ“ should fail due to invalid API Key (8 ms)
2025-04-15T08:25:53.4726974Z     âœ“ should fail due to non-existing tag (20 ms)
2025-04-15T08:25:53.4729779Z     âœ“ should retrieve tag (14 ms)
2025-04-15T08:25:53.4731748Z   DELETE /tags/:id
2025-04-15T08:25:53.4732198Z     âœ“ should fail due to missing API Key (6 ms)
2025-04-15T08:25:53.4734213Z     âœ“ should fail due to invalid API Key (6 ms)
2025-04-15T08:25:53.4735916Z     âœ“ should fail due to non-existing tag (19 ms)
2025-04-15T08:25:53.4737703Z     âœ“ owner should delete the tag (14 ms)
2025-04-15T08:25:53.4738279Z     âœ“ non-owner should not delete tag (11 ms)
2025-04-15T08:25:53.4738700Z   POST /tags
2025-04-15T08:25:53.4739155Z     âœ“ should fail due to missing API Key (5 ms)
2025-04-15T08:25:53.4740103Z     âœ“ should fail due to invalid API Key (4 ms)
2025-04-15T08:25:53.4740689Z     âœ“ should fail due to invalid body (23 ms)
2025-04-15T08:25:53.4741219Z     âœ“ should create tag (13 ms)
2025-04-15T08:25:53.4741868Z     âœ“ should not create tag if tag with same name exists (11 ms)
2025-04-15T08:25:53.4742391Z   PUT /tags/:id
2025-04-15T08:25:53.4742972Z     âœ“ should fail due to missing API Key (5 ms)
2025-04-15T08:25:53.4745600Z     âœ“ should fail due to invalid API Key (4 ms)
2025-04-15T08:25:53.4746197Z     âœ“ should fail due to non-existing tag (12 ms)
2025-04-15T08:25:53.4746797Z     âœ“ should fail due to invalid body (5 ms)
2025-04-15T08:25:53.4747310Z     âœ“ should update tag (15 ms)
2025-04-15T08:25:53.4747985Z     âœ“ should fail if there is already a tag with a the new name (20 ms)
2025-04-15T08:25:53.4748400Z 
2025-04-15T08:25:54.7860760Z PASS test/integration/password-reset.api.test.ts (8.482 s)
2025-04-15T08:25:54.7861442Z   POST /forgot-password
2025-04-15T08:25:54.7862336Z     âœ“ should send password reset email (94 ms)
2025-04-15T08:25:54.7864137Z     âœ“ should fail if emailing is not set up (58 ms)
2025-04-15T08:25:54.7866053Z     âœ“ should fail if SAML is authentication method (41 ms)
2025-04-15T08:25:54.7867493Z     âœ“ should succeed if SAML is authentication method and requestor is owner (41 ms)
2025-04-15T08:25:54.7868360Z     âœ“ should fail with invalid inputs (40 ms)
2025-04-15T08:25:54.7868999Z     âœ“ should fail if user is not found (25 ms)
2025-04-15T08:25:54.7869478Z   GET /resolve-password-token
2025-04-15T08:25:54.7870057Z     âœ“ should succeed with valid inputs (23 ms)
2025-04-15T08:25:54.7870683Z     âœ“ should fail with invalid inputs (29 ms)
2025-04-15T08:25:54.7871290Z     âœ“ should fail if user is not found (22 ms)
2025-04-15T08:25:54.7871906Z     âœ“ should fail if token is expired (22 ms)
2025-04-15T08:25:54.7872554Z     âœ“ should fail after password has changed (23 ms)
2025-04-15T08:25:54.7873579Z   POST /change-password
2025-04-15T08:25:54.7874171Z     âœ“ should succeed with valid inputs (238 ms)
2025-04-15T08:25:54.7874778Z     âœ“ should fail with invalid inputs (46 ms)
2025-04-15T08:25:54.7875648Z     âœ“ should fail when token has expired (28 ms)
2025-04-15T08:25:54.7876754Z     âœ“ owner should be able to reset its password when quota:users = 1 (231 ms)
2025-04-15T08:25:54.7877731Z     âœ“ member should not be able to reset its password when quota:users = 1 (122 ms)
2025-04-15T08:25:54.7878198Z 
2025-04-15T08:25:57.2540861Z PASS test/integration/saml/saml.api.test.ts (8.849 s)
2025-04-15T08:25:57.2541525Z   Instance owner
2025-04-15T08:25:57.2544868Z     PATCH /me
2025-04-15T08:25:57.2545629Z       âœ“ should succeed with valid inputs (71 ms)
2025-04-15T08:25:57.2546593Z       âœ“ should throw BadRequestError if email is changed when SAML is enabled (31 ms)
2025-04-15T08:25:57.2547296Z     PATCH /password
2025-04-15T08:25:57.2548185Z       âœ“ should throw BadRequestError if password is changed when SAML is enabled (16 ms)
2025-04-15T08:25:57.2549393Z     POST /sso/saml/config
2025-04-15T08:25:57.2550073Z       âœ“ should post saml config (349 ms)
2025-04-15T08:25:57.2560467Z       âœ“ should return 400 on invalid config (26 ms)
2025-04-15T08:25:57.2564792Z     POST /sso/saml/config/toggle
2025-04-15T08:25:57.2570644Z       âœ“ should toggle saml as default authentication method (71 ms)
2025-04-15T08:25:57.2572105Z       âœ“ should fail enable saml if default authentication is not email (50 ms)
2025-04-15T08:25:57.2574448Z   Check endpoint permissions
2025-04-15T08:25:57.2575262Z     Owner
2025-04-15T08:25:57.2577798Z       âœ“ should be able to access GET /sso/saml/metadata (18 ms)
2025-04-15T08:25:57.2578691Z       âœ“ should be able to access GET /sso/saml/config (13 ms)
2025-04-15T08:25:57.2579537Z       âœ“ should be able to access POST /sso/saml/config (29 ms)
2025-04-15T08:25:57.2580413Z       âœ“ should be able to access POST /sso/saml/config/toggle (13 ms)
2025-04-15T08:25:57.2581210Z       âœ“ should be able to access GET /sso/saml/acs (15 ms)
2025-04-15T08:25:57.2582034Z       âœ“ should be able to access POST /sso/saml/acs (10 ms)
2025-04-15T08:25:57.2583014Z       âœ“ should be able to access GET /sso/saml/initsso (16 ms)
2025-04-15T08:25:57.2583857Z       âœ“ should be able to access GET /sso/saml/config/test (11 ms)
2025-04-15T08:25:57.2584711Z     Authenticated Member
2025-04-15T08:25:57.2585437Z       âœ“ should be able to access GET /sso/saml/metadata (6 ms)
2025-04-15T08:25:57.2586234Z       âœ“ should be able to access GET /sso/saml/config (10 ms)
2025-04-15T08:25:57.2587037Z       âœ“ should NOT be able to access POST /sso/saml/config (10 ms)
2025-04-15T08:25:57.2587879Z       âœ“ should NOT be able to access POST /sso/saml/config/toggle (9 ms)
2025-04-15T08:25:57.2588673Z       âœ“ should be able to access GET /sso/saml/acs (6 ms)
2025-04-15T08:25:57.2589402Z       âœ“ should be able to access POST /sso/saml/acs (7 ms)
2025-04-15T08:25:57.2590143Z       âœ“ should be able to access GET /sso/saml/initsso (16 ms)
2025-04-15T08:25:57.2590933Z       âœ“ should NOT be able to access GET /sso/saml/config/test (9 ms)
2025-04-15T08:25:57.2591509Z     Non-Authenticated User
2025-04-15T08:25:57.2592094Z       âœ“ should be able to access /sso/saml/metadata (6 ms)
2025-04-15T08:25:57.2593113Z       âœ“ should NOT be able to access GET /sso/saml/config (6 ms)
2025-04-15T08:25:57.2593908Z       âœ“ should NOT be able to access POST /sso/saml/config (5 ms)
2025-04-15T08:25:57.2594737Z       âœ“ should NOT be able to access POST /sso/saml/config/toggle (5 ms)
2025-04-15T08:25:57.2595523Z       âœ“ should be able to access GET /sso/saml/acs (7 ms)
2025-04-15T08:25:57.2596222Z       âœ“ should be able to access POST /sso/saml/acs (6 ms)
2025-04-15T08:25:57.2597024Z       âœ“ should be able to access GET /sso/saml/initsso (7 ms)
2025-04-15T08:25:57.2598002Z       âœ“ should NOT be able to access GET /sso/saml/config/test (12 ms)
2025-04-15T08:25:57.2598742Z 
2025-04-15T08:25:58.2215171Z PASS src/executions/__tests__/execution.service.test.ts
2025-04-15T08:25:58.2230848Z   ExecutionService
2025-04-15T08:25:58.2231880Z     retry
2025-04-15T08:25:58.2233248Z       âœ“ should error on retrying a execution that was aborted before starting (33 ms)
2025-04-15T08:25:58.2234098Z     stop
2025-04-15T08:25:58.2234863Z       âœ“ should throw when stopping a missing execution (1 ms)
2025-04-15T08:25:58.2235908Z       âœ“ should throw when stopping a not-in-progress execution (1 ms)
2025-04-15T08:25:58.2236609Z       regular mode
2025-04-15T08:25:58.2237363Z         âœ“ should stop a `running` execution in regular mode (3 ms)
2025-04-15T08:25:58.2238344Z         âœ“ should stop a `waiting` execution in regular mode (2 ms)
2025-04-15T08:25:58.2246600Z         âœ“ should stop a concurrency-controlled `new` execution in regular mode (1 ms)
2025-04-15T08:25:58.2250809Z       scaling mode
2025-04-15T08:25:58.2255158Z         manual execution
2025-04-15T08:25:58.2259375Z           âœ“ should stop a `running` execution in scaling mode (2 ms)
2025-04-15T08:25:58.2263726Z         production execution
2025-04-15T08:25:58.2268073Z           âœ“ should stop a `running` execution in scaling mode (2 ms)
2025-04-15T08:25:58.2273198Z           âœ“ should stop a `waiting` execution in scaling mode (1 ms)
2025-04-15T08:25:58.2277106Z 
2025-04-15T08:26:01.1102100Z PASS src/__tests__/node-types.test.ts
2025-04-15T08:26:01.1114398Z   NodeTypes
2025-04-15T08:26:01.1114700Z     getByName
2025-04-15T08:26:01.1123664Z       âœ“ should return node type when it exists (6 ms)
2025-04-15T08:26:01.1124156Z     getByNameAndVersion
2025-04-15T08:26:01.1124785Z       âœ“ should throw an error if the package does not exist (20 ms)
2025-04-15T08:26:01.1125593Z       âœ“ should throw an error if the node-type does not exist (2 ms)
2025-04-15T08:26:01.1126376Z       âœ“ should return a regular node-type without version (1 ms)
2025-04-15T08:26:01.1127090Z       âœ“ should return a regular node-type with version
2025-04-15T08:26:01.1128080Z       âœ“ should throw when a node-type is requested as tool, but does not support being used as one (2 ms)
2025-04-15T08:26:01.1129314Z       âœ“ should throw when a node-type is requested as tool, but the original node is already a tool (1 ms)
2025-04-15T08:26:01.1130328Z       âœ“ should return the tool node-type when requested as tool (11 ms)
2025-04-15T08:26:01.1131659Z       âœ“ should return a tool node-type from a community node,  when requested as tool (2 ms)
2025-04-15T08:26:01.1132661Z       âœ“ should return a declarative node-type with an `.execute` method (2 ms)
2025-04-15T08:26:01.1133848Z       âœ“ should return a declarative node-type as a tool with an `.execute` method (4 ms)
2025-04-15T08:26:01.1134473Z     getWithSourcePath
2025-04-15T08:26:01.1135141Z       âœ“ should return description and source path for existing node (1 ms)
2025-04-15T08:26:01.1135892Z       âœ“ should throw error for non-existent node (2 ms)
2025-04-15T08:26:01.1136339Z     getKnownTypes
2025-04-15T08:26:01.1136775Z       âœ“ should return known node types
2025-04-15T08:26:01.1137195Z     getNodeTypeDescriptions
2025-04-15T08:26:01.1137749Z       âœ“ should return descriptions for valid node types
2025-04-15T08:26:01.1138390Z       âœ“ should throw error for invalid node type (1 ms)
2025-04-15T08:26:01.1138711Z 
2025-04-15T08:26:02.9594267Z PASS test/integration/pruning.service.test.ts (7.951 s)
2025-04-15T08:26:02.9596112Z   softDeleteOnPruningCycle()
2025-04-15T08:26:02.9596675Z     when EXECUTIONS_DATA_PRUNE_MAX_COUNT is set
2025-04-15T08:26:02.9597695Z       âœ“ should mark as deleted based on EXECUTIONS_DATA_PRUNE_MAX_COUNT (39 ms)
2025-04-15T08:26:02.9598527Z       âœ“ should not re-mark already marked executions (21 ms)
2025-04-15T08:26:02.9599183Z       âœ“ should prune unknown executions (19 ms)
2025-04-15T08:26:02.9599782Z       âœ“ should prune canceled executions (20 ms)
2025-04-15T08:26:02.9600372Z       âœ“ should prune crashed executions (14 ms)
2025-04-15T08:26:02.9600900Z       âœ“ should prune error executions (13 ms)
2025-04-15T08:26:02.9601384Z       âœ“ should prune success executions (13 ms)
2025-04-15T08:26:02.9601870Z       âœ“ should not prune new executions (17 ms)
2025-04-15T08:26:02.9602418Z       âœ“ should not prune running executions (14 ms)
2025-04-15T08:26:02.9603218Z       âœ“ should not prune waiting executions (13 ms)
2025-04-15T08:26:02.9603837Z       âœ“ should not prune annotated executions (34 ms)
2025-04-15T08:26:02.9604353Z     when EXECUTIONS_DATA_MAX_AGE is set
2025-04-15T08:26:02.9605043Z       âœ“ should mark as deleted based on EXECUTIONS_DATA_MAX_AGE (17 ms)
2025-04-15T08:26:02.9605797Z       âœ“ should not re-mark already marked executions (13 ms)
2025-04-15T08:26:02.9606423Z       âœ“ should prune unknown executions (8 ms)
2025-04-15T08:26:02.9606995Z       âœ“ should prune canceled executions (7 ms)
2025-04-15T08:26:02.9607552Z       âœ“ should prune crashed executions (9 ms)
2025-04-15T08:26:02.9608103Z       âœ“ should prune error executions (7 ms)
2025-04-15T08:26:02.9608657Z       âœ“ should prune success executions (7 ms)
2025-04-15T08:26:02.9609216Z       âœ“ should not prune new executions (16 ms)
2025-04-15T08:26:02.9609804Z       âœ“ should not prune running executions (12 ms)
2025-04-15T08:26:02.9610808Z       âœ“ should not prune waiting executions (12 ms)
2025-04-15T08:26:02.9611429Z       âœ“ should not prune annotated executions (26 ms)
2025-04-15T08:26:02.9611768Z 
2025-04-15T08:26:04.5984190Z PASS src/__tests__/license.test.ts
2025-04-15T08:26:04.5985071Z   License
2025-04-15T08:26:04.5985969Z     âœ“ initializes license manager (8 ms)
2025-04-15T08:26:04.5986897Z     âœ“ initializes license manager for worker (3 ms)
2025-04-15T08:26:04.5987835Z     âœ“ attempts to activate license with provided key (1 ms)
2025-04-15T08:26:04.5988718Z     âœ“ renews license (2 ms)
2025-04-15T08:26:04.5990695Z     âœ“ check if feature is enabled (1 ms)
2025-04-15T08:26:04.5991447Z     âœ“ check if sharing feature is enabled (2 ms)
2025-04-15T08:26:04.5992197Z     âœ“ check fetching entitlements (2 ms)
2025-04-15T08:26:04.5993232Z     âœ“ check fetching feature values (1 ms)
2025-04-15T08:26:04.5994316Z     âœ“ check management jwt (2 ms)
2025-04-15T08:26:04.6008391Z     âœ“ getMainPlan() returns the latest main entitlement (1 ms)
2025-04-15T08:26:04.6009282Z     âœ“ getMainPlan() returns undefined if there is no main plan (2 ms)
2025-04-15T08:26:04.6009816Z     init
2025-04-15T08:26:04.6010559Z       âœ“ when leader main with N8N_LICENSE_AUTO_RENEW_ENABLED=true, should enable renewal (9 ms)
2025-04-15T08:26:04.6012025Z       âœ“ when leader main with N8N_LICENSE_AUTO_RENEW_ENABLED=false, should disable renewal (2 ms)
2025-04-15T08:26:04.6013396Z       âœ“ when follower main with N8N_LICENSE_AUTO_RENEW_ENABLED=true, should disable renewal (2 ms)
2025-04-15T08:26:04.6014577Z       âœ“ when follower main with N8N_LICENSE_AUTO_RENEW_ENABLED=false, should disable renewal (2 ms)
2025-04-15T08:26:04.6015778Z       âœ“ when CLI command with N8N_LICENSE_AUTO_RENEW_ENABLED=true, should enable renewal (2 ms)
2025-04-15T08:26:04.6016325Z 
2025-04-15T08:26:05.7907690Z PASS test/integration/commands/import.cmd.test.ts (8.316 s)
2025-04-15T08:26:05.7914967Z   âœ“ import:workflow should import active workflow and deactivate it (99 ms)
2025-04-15T08:26:05.7944008Z   âœ“ import:workflow should import active workflow from combined file and deactivate it (42 ms)
2025-04-15T08:26:05.7945490Z   âœ“ import:workflow can import a single workflow object (30 ms)
2025-04-15T08:26:05.7947251Z   âœ“ `import:workflow --userId ...` should fail if the workflow exists already and is owned by somebody else (87 ms)
2025-04-15T08:26:05.7974141Z   âœ“ only update the workflow, don't create or update the owner if `--userId` is not passed (52 ms)
2025-04-15T08:26:05.7975972Z   âœ“ `import:workflow --projectId ...` should fail if the credential already exists and is owned by another project (49 ms)
2025-04-15T08:26:05.7977828Z   âœ“ `import:workflow --projectId ... --userId ...` fails explaining that only one of the options can be used at a time (6 ms)
2025-04-15T08:26:05.7978860Z 
2025-04-15T08:26:07.6319728Z PASS src/middlewares/list-query/__tests__/list-query.test.ts
2025-04-15T08:26:07.6325935Z   List query middleware
2025-04-15T08:26:07.6336249Z     Query filter
2025-04-15T08:26:07.6340797Z       âœ“ should not set filter on request if none sent (7 ms)
2025-04-15T08:26:07.6345546Z       âœ“ should parse valid filter (6 ms)
2025-04-15T08:26:07.6349759Z       âœ“ should ignore invalid filter (2 ms)
2025-04-15T08:26:07.6355034Z       âœ“ should throw on invalid JSON (35 ms)
2025-04-15T08:26:07.6358371Z       âœ“ should throw on valid filter with invalid type (2 ms)
2025-04-15T08:26:07.6366015Z     Query select
2025-04-15T08:26:07.6366597Z       âœ“ should not set select on request if none sent (1 ms)
2025-04-15T08:26:07.6367223Z       âœ“ should parse valid select (1 ms)
2025-04-15T08:26:07.6367710Z       âœ“ ignore invalid select
2025-04-15T08:26:07.6368210Z       âœ“ throw on invalid JSON (1 ms)
2025-04-15T08:26:07.6368836Z       âœ“ throw on non-string-array JSON for select (1 ms)
2025-04-15T08:26:07.6369284Z     Query pagination
2025-04-15T08:26:07.6369864Z       âœ“ should not set pagination options on request if none sent (1 ms)
2025-04-15T08:26:07.6370499Z       âœ“ should parse valid pagination (1 ms)
2025-04-15T08:26:07.6371564Z       âœ“ should throw on skip without take (6 ms)
2025-04-15T08:26:07.6372077Z       âœ“ should default skip to 0 (1 ms)
2025-04-15T08:26:07.6372498Z       âœ“ should cap take at 50
2025-04-15T08:26:07.6373255Z       âœ“ should throw on non-numeric-integer take (2 ms)
2025-04-15T08:26:07.6373874Z       âœ“ should throw on non-numeric-integer skip (1 ms)
2025-04-15T08:26:07.6374295Z     Query sort by
2025-04-15T08:26:07.6374826Z       âœ“ should succeed validation when sorting by name asc (1 ms)
2025-04-15T08:26:07.6375540Z       âœ“ should succeed validation when sorting by name desc (1 ms)
2025-04-15T08:26:07.6376291Z       âœ“ should succeed validation when sorting by createdAt asc (1 ms)
2025-04-15T08:26:07.6377023Z       âœ“ should succeed validation when sorting by createdAt desc
2025-04-15T08:26:07.6377760Z       âœ“ should succeed validation when sorting by updatedAt asc (2 ms)
2025-04-15T08:26:07.6378487Z       âœ“ should succeed validation when sorting by updatedAt desc
2025-04-15T08:26:07.6379231Z       âœ“ should fail validation when sorting by invalid column (2 ms)
2025-04-15T08:26:07.6380063Z       âœ“ should fail validation when sorting by valid column without order (1 ms)
2025-04-15T08:26:07.6381235Z       âœ“ should fail validation when sorting by valid column with invalid order (1 ms)
2025-04-15T08:26:07.6382128Z       âœ“ should not pass sortBy to listQueryOptions if not provided (1 ms)
2025-04-15T08:26:07.6382630Z     Combinations
2025-04-15T08:26:07.6383217Z       âœ“ should combine filter with select (1 ms)
2025-04-15T08:26:07.6383824Z       âœ“ should combine filter with pagination options (1 ms)
2025-04-15T08:26:07.6384436Z       âœ“ should combine select with pagination options
2025-04-15T08:26:07.6384746Z 
2025-04-15T08:26:07.9444762Z PASS src/environments.ee/source-control/__tests__/source-control.service.test.ts
2025-04-15T08:26:07.9445534Z   SourceControlService
2025-04-15T08:26:07.9445868Z     pushWorkfolder
2025-04-15T08:26:07.9446773Z       âœ“ should throw an error if a file is given that is not in the workfolder (45 ms)
2025-04-15T08:26:07.9447388Z     pullWorkfolder
2025-04-15T08:26:07.9447887Z       âœ“ does not filter locally created credentials (2 ms)
2025-04-15T08:26:07.9448526Z       âœ“ does not filter remotely deleted credentials (1 ms)
2025-04-15T08:26:07.9449324Z       âœ“ should throw an error if a file is given that is not in the workfolder (1 ms)
2025-04-15T08:26:07.9449852Z     getStatus
2025-04-15T08:26:07.9450327Z       âœ“ conflict depends on the value of `direction` (5 ms)
2025-04-15T08:26:07.9450656Z 
2025-04-15T08:26:09.4087899Z PASS src/environments.ee/source-control/__tests__/source-control-export.service.test.ts
2025-04-15T08:26:09.4089205Z   SourceControlExportService
2025-04-15T08:26:09.4099434Z     exportCredentialsToWorkFolder
2025-04-15T08:26:09.4100627Z       âœ“ should export credentials to work folder (13 ms)
2025-04-15T08:26:09.4101329Z       âœ“ should handle team project credentials (2 ms)
2025-04-15T08:26:09.4101961Z       âœ“ should handle missing credentials (10 ms)
2025-04-15T08:26:09.4102464Z     exportTagsToWorkFolder
2025-04-15T08:26:09.4103237Z       âœ“ should export tags to work folder (2 ms)
2025-04-15T08:26:09.4103823Z       âœ“ should not export empty tags (1 ms)
2025-04-15T08:26:09.4104270Z     exportFoldersToWorkFolder
2025-04-15T08:26:09.4104860Z       âœ“ should export folders to work folder (2 ms)
2025-04-15T08:26:09.4105488Z       âœ“ should not export empty folders (1 ms)
2025-04-15T08:26:09.4105995Z     exportVariablesToWorkFolder
2025-04-15T08:26:09.4106602Z       âœ“ should export variables to work folder (1 ms)
2025-04-15T08:26:09.4107265Z       âœ“ should not export empty variables (1 ms)
2025-04-15T08:26:09.4107777Z     exportWorkflowsToWorkFolder
2025-04-15T08:26:09.4108382Z       âœ“ should export workflows to work folder (7 ms)
2025-04-15T08:26:09.4109117Z       âœ“ should throw an error if workflow has no owner (37 ms)
2025-04-15T08:26:09.4109588Z 
2025-04-15T08:26:12.9487460Z PASS src/metrics/__tests__/prometheus-metrics.service.test.ts (5.04 s)
2025-04-15T08:26:12.9488786Z   PrometheusMetricsService
2025-04-15T08:26:12.9489187Z     constructor
2025-04-15T08:26:12.9489992Z       âœ“ should enable metrics based on global config (10 ms)
2025-04-15T08:26:12.9490508Z     init
2025-04-15T08:26:12.9491048Z       âœ“ should set up `n8n_version_info` (1 ms)
2025-04-15T08:26:12.9491880Z       âœ“ should set up default metrics collection with `prom-client` (2 ms)
2025-04-15T08:26:12.9492657Z       âœ“ should set up `n8n_cache_hits_total` (2 ms)
2025-04-15T08:26:12.9493603Z       âœ“ should set up `n8n_cache_misses_total` (2 ms)
2025-04-15T08:26:12.9494314Z       âœ“ should set up `n8n_cache_updates_total` (2 ms)
2025-04-15T08:26:12.9495145Z       âœ“ should set up route metrics with `express-prom-bundle` (3 ms)
2025-04-15T08:26:12.9495877Z       âœ“ should set up event bus metrics (1 ms)
2025-04-15T08:26:12.9496546Z       âœ“ should set up queue metrics if enabled (8 ms)
2025-04-15T08:26:12.9497296Z       âœ“ should not set up queue metrics if enabled but not on scaling mode (2 ms)
2025-04-15T08:26:12.9498256Z       âœ“ should not set up queue metrics if enabled and on scaling mode but instance is not main (1 ms)
2025-04-15T08:26:12.9498991Z       âœ“ should setup active workflow count metric (2 ms)
2025-04-15T08:26:12.9499282Z 
2025-04-15T08:26:14.2965597Z PASS src/__tests__/workflow-execute-additional-data.test.ts
2025-04-15T08:26:14.2966841Z   WorkflowExecuteAdditionalData
2025-04-15T08:26:14.2967853Z     âœ“ logAiEvent should call MessageEventBus (8 ms)
2025-04-15T08:26:14.2968580Z     executeWorkflow
2025-04-15T08:26:14.2969393Z       âœ“ should execute workflow, return data and execution id (6 ms)
2025-04-15T08:26:14.2970305Z       âœ“ should execute workflow, skip waiting (2 ms)
2025-04-15T08:26:14.2971171Z       âœ“ should set sub workflow execution as running (2 ms)
2025-04-15T08:26:14.2972207Z       âœ“ should return waitTill property when workflow execution is waiting (3 ms)
2025-04-15T08:26:14.2973276Z     getRunData
2025-04-15T08:26:14.2973948Z       âœ“ should throw error to add trigger ndoe (22 ms)
2025-04-15T08:26:14.2974688Z       âœ“ should return default data (2 ms)
2025-04-15T08:26:14.2975487Z       âœ“ should return run data with input data and metadata (2 ms)
2025-04-15T08:26:14.2976071Z 
2025-04-15T08:26:15.5681107Z PASS test/integration/community-packages.api.test.ts (7.413 s)
2025-04-15T08:26:15.5681831Z   GET /community-packages
2025-04-15T08:26:15.5687082Z     âœ“ should respond 200 if no nodes are installed (57 ms)
2025-04-15T08:26:15.5689115Z     âœ“ should return list of one installed package and node (12 ms)
2025-04-15T08:26:15.5691959Z     âœ“ should return list of multiple installed packages and nodes (12 ms)
2025-04-15T08:26:15.5694584Z     âœ“ should not check for updates if no packages installed (26 ms)
2025-04-15T08:26:15.5695454Z     âœ“ should check for updates if packages installed (11 ms)
2025-04-15T08:26:15.5696258Z     âœ“ should report package updates if available (9 ms)
2025-04-15T08:26:15.5696809Z   POST /community-packages
2025-04-15T08:26:15.5697477Z     âœ“ should reject if package name is missing (9 ms)
2025-04-15T08:26:15.5698247Z     âœ“ should reject if package is duplicate (9 ms)
2025-04-15T08:26:15.5699098Z     âœ“ should allow installing packages that could not be loaded (8 ms)
2025-04-15T08:26:15.5699901Z     âœ“ should not install a banned package (8 ms)
2025-04-15T08:26:15.5700427Z   DELETE /community-packages
2025-04-15T08:26:15.5701098Z     âœ“ should not delete if package name is empty (14 ms)
2025-04-15T08:26:15.5701867Z     âœ“ should reject if package is not installed (9 ms)
2025-04-15T08:26:15.5702550Z     âœ“ should uninstall package (8 ms)
2025-04-15T08:26:15.5703324Z   PATCH /community-packages
2025-04-15T08:26:15.5703973Z     âœ“ should reject if package name is empty (8 ms)
2025-04-15T08:26:15.5704733Z     âœ“ should reject if package is not installed (7 ms)
2025-04-15T08:26:15.5705376Z     âœ“ should update a package (24 ms)
2025-04-15T08:26:15.5705687Z 
2025-04-15T08:26:18.9329730Z PASS src/services/__tests__/workflow-statistics.service.test.ts
2025-04-15T08:26:18.9332225Z   WorkflowStatisticsService
2025-04-15T08:26:18.9334644Z     workflowExecutionCompleted
2025-04-15T08:26:18.9335616Z       âœ“ should create metrics for production successes (9 ms)
2025-04-15T08:26:18.9336519Z       âœ“ should only create metrics for production successes (1 ms)
2025-04-15T08:26:18.9337406Z       âœ“ should not send metrics for updated entries (1 ms)
2025-04-15T08:26:18.9337937Z     nodeFetchedData
2025-04-15T08:26:18.9338582Z       âœ“ should create metrics when the db is updated (1 ms)
2025-04-15T08:26:18.9339540Z       âœ“ should emit event with no `userId` if workflow is owned by team project (1 ms)
2025-04-15T08:26:18.9340627Z       âœ“ should create metrics with credentials when the db is updated (2 ms)
2025-04-15T08:26:18.9341679Z       âœ“ should not send metrics for entries that already have the flag set (2 ms)
2025-04-15T08:26:18.9342203Z 
2025-04-15T08:26:21.6592141Z PASS test/integration/workflow-history.api.test.ts (8.453 s)
2025-04-15T08:26:21.6593217Z   GET /workflow-history/:workflowId
2025-04-15T08:26:21.6594739Z     âœ“ should not work when license is not available (34 ms)
2025-04-15T08:26:21.6595587Z     âœ“ should not return anything on an invalid workflow ID (48 ms)
2025-04-15T08:26:21.6596526Z     âœ“ should not return anything if not shared with user (27 ms)
2025-04-15T08:26:21.6597993Z     âœ“ should return any empty list if no versions (32 ms)
2025-04-15T08:26:21.6598787Z     âœ“ should return versions for workflow (52 ms)
2025-04-15T08:26:21.6611564Z     âœ“ should return versions only for workflow id provided (64 ms)
2025-04-15T08:26:21.6618118Z     âœ“ should work with take parameter (38 ms)
2025-04-15T08:26:21.6618785Z     âœ“ should work with skip parameter (36 ms)
2025-04-15T08:26:21.6619459Z   GET /workflow-history/workflow/:workflowId/version/:versionId
2025-04-15T08:26:21.6620293Z     âœ“ should not work when license is not available (8 ms)
2025-04-15T08:26:21.6621117Z     âœ“ should not return anything on an invalid workflow ID (18 ms)
2025-04-15T08:26:21.6621984Z     âœ“ should not return anything on an invalid version ID (24 ms)
2025-04-15T08:26:21.6622902Z     âœ“ should return version (31 ms)
2025-04-15T08:26:21.6623631Z     âœ“ should not return anything if not shared with user (31 ms)
2025-04-15T08:26:21.6624788Z     âœ“ should not return anything if not shared with user and using workflow owned by unshared user (32 ms)
2025-04-15T08:26:21.6625440Z 
2025-04-15T08:26:22.9789438Z PASS test/integration/commands/credentials.cmd.test.ts (8.411 s)
2025-04-15T08:26:22.9791214Z   âœ“ import:credentials should import a credential (77 ms)
2025-04-15T08:26:22.9820988Z   âœ“ import:credentials should import a credential from separated files (38 ms)
2025-04-15T08:26:22.9822931Z   âœ“ `import:credentials --userId ...` should fail if the credential exists already and is owned by somebody else (91 ms)
2025-04-15T08:26:22.9824931Z   âœ“ only update credential, don't create or update owner if neither `--userId` nor `--projectId` is passed (48 ms)
2025-04-15T08:26:22.9826747Z   âœ“ `import:credential --projectId ...` should fail if the credential already exists and is owned by another project (53 ms)
2025-04-15T08:26:22.9828643Z   âœ“ `import:credential --projectId ... --userId ...` fails explaining that only one of the options can be used at a time (9 ms)
2025-04-15T08:26:22.9829761Z 
2025-04-15T08:26:23.5943662Z PASS src/__tests__/wait-tracker.test.ts
2025-04-15T08:26:23.5985696Z   WaitTracker
2025-04-15T08:26:23.5989409Z     init()
2025-04-15T08:26:23.5990283Z       âœ“ should query DB for waiting executions if leader (9 ms)
2025-04-15T08:26:23.5990985Z       âœ“ if follower, should do nothing (2 ms)
2025-04-15T08:26:23.5991638Z       âœ“ if no executions to start, should do nothing (2 ms)
2025-04-15T08:26:23.5992119Z       if execution to start
2025-04-15T08:26:23.5992979Z         âœ“ if not enough time passed, should not start execution (3 ms)
2025-04-15T08:26:23.5993755Z         âœ“ if enough time passed, should start execution (7 ms)
2025-04-15T08:26:23.5994245Z     startExecution()
2025-04-15T08:26:23.5994767Z       âœ“ should query for execution to start (3 ms)
2025-04-15T08:26:23.5996045Z       âœ“ should also resume parent execution once sub-workflow finishes (7 ms)
2025-04-15T08:26:23.5996594Z     single-main setup
2025-04-15T08:26:23.5996989Z       âœ“ should start tracking (2 ms)
2025-04-15T08:26:23.5997345Z     multi-main setup
2025-04-15T08:26:23.5997747Z       âœ“ should start tracking if leader (1 ms)
2025-04-15T08:26:23.5998296Z       âœ“ should not start tracking if follower (1 ms)
2025-04-15T08:26:23.5998607Z 
2025-04-15T08:26:25.0318136Z PASS src/services/__tests__/ownership.service.test.ts
2025-04-15T08:26:25.0319273Z   OwnershipService
2025-04-15T08:26:25.0319910Z     getWorkflowProjectCached()
2025-04-15T08:26:25.0321134Z       âœ“ should retrieve a workflow owner project (7 ms)
2025-04-15T08:26:25.0322197Z       âœ“ should throw if no workflow owner project found (15 ms)
2025-04-15T08:26:25.0323256Z     getPersonalProjectOwnerCached()
2025-04-15T08:26:25.0324074Z       âœ“ should retrieve a project owner (1 ms)
2025-04-15T08:26:25.0325083Z       âœ“ should not throw if no project owner found, should return null instead
2025-04-15T08:26:25.0326310Z       âœ“ should not use the repository if the owner was found in the cache (2 ms)
2025-04-15T08:26:25.0327120Z     getProjectOwnerCached()
2025-04-15T08:26:25.0328279Z       âœ“ should retrieve a project owner
2025-04-15T08:26:25.0329581Z       âœ“ should not throw if no project owner found, should return null instead (1 ms)
2025-04-15T08:26:25.0330489Z     addOwnedByAndSharedWith()
2025-04-15T08:26:25.0331389Z       âœ“ should add `ownedBy` and `sharedWith` to credential (2 ms)
2025-04-15T08:26:25.0332519Z       âœ“ should add `ownedBy` and `sharedWith` to workflow (1 ms)
2025-04-15T08:26:25.0333864Z       âœ“ should produce an empty sharedWith if no sharee (1 ms)
2025-04-15T08:26:25.0334798Z     getInstanceOwner()
2025-04-15T08:26:25.0335495Z       âœ“ should find owner using global owner role ID
2025-04-15T08:26:25.0335837Z 
2025-04-15T08:26:26.9994045Z PASS src/services/cache/__tests__/cache.service.test.ts
2025-04-15T08:26:26.9999066Z   memory
2025-04-15T08:26:27.0038004Z     init
2025-04-15T08:26:27.0038698Z       âœ“ should select backend based on config (7 ms)
2025-04-15T08:26:27.0039287Z       âœ“ should honor max size when enough (2 ms)
2025-04-15T08:26:27.0039885Z       âœ“ should honor max size when not enough (2 ms)
2025-04-15T08:26:27.0040284Z     set
2025-04-15T08:26:27.0040661Z       âœ“ should set a string value (4 ms)
2025-04-15T08:26:27.0041147Z       âœ“ should set a number value (1 ms)
2025-04-15T08:26:27.0041634Z       âœ“ should set an object value (3 ms)
2025-04-15T08:26:27.0042229Z       âœ“ should not cache `null` or `undefined` values (1 ms)
2025-04-15T08:26:27.0043023Z       âœ“ should disregard zero-length keys (1 ms)
2025-04-15T08:26:27.0043595Z       âœ“ should honor ttl (202 ms)
2025-04-15T08:26:27.0043978Z     get
2025-04-15T08:26:27.0044463Z       âœ“ should fall back to fallback value (1 ms)
2025-04-15T08:26:27.0045047Z       âœ“ should refresh value (2 ms)
2025-04-15T08:26:27.0045652Z       âœ“ should handle non-ASCII key (1 ms)
2025-04-15T08:26:27.0046125Z     delete
2025-04-15T08:26:27.0046591Z       âœ“ should delete a key (1 ms)
2025-04-15T08:26:27.0047148Z       âœ“ should handle non-ASCII key (2 ms)
2025-04-15T08:26:27.0047624Z     setMany
2025-04-15T08:26:27.0048198Z       âœ“ should set multiple string values (2 ms)
2025-04-15T08:26:27.0048852Z       âœ“ should set multiple number values (1 ms)
2025-04-15T08:26:27.0049492Z       âœ“ should disregard zero-length keys (1 ms)
2025-04-15T08:26:27.0049947Z     getMany
2025-04-15T08:26:27.0050520Z       âœ“ should return undefined on missing result (1 ms)
2025-04-15T08:26:27.0051029Z     setHash
2025-04-15T08:26:27.0051546Z       âœ“ should set a hash if non-existing (1 ms)
2025-04-15T08:26:27.0052216Z       âœ“ should add to a hash value if existing (1 ms)
2025-04-15T08:26:27.0052935Z     deleteFromHash
2025-04-15T08:26:27.0053487Z       âœ“ should delete a hash field (1 ms)
2025-04-15T08:26:27.0053949Z     getHashValue
2025-04-15T08:26:27.0054475Z       âœ“ should return a hash field value
2025-04-15T08:26:27.0055428Z   redis
2025-04-15T08:26:27.0055723Z     init
2025-04-15T08:26:27.0056265Z       âœ“ should select backend based on config (2 ms)
2025-04-15T08:26:27.0057067Z       âœ“ with auto backend and queue mode, should select redis (2 ms)
2025-04-15T08:26:27.0057630Z     set
2025-04-15T08:26:27.0058089Z       âœ“ should set a string value (1 ms)
2025-04-15T08:26:27.0058720Z       âœ“ should set a number value (1 ms)
2025-04-15T08:26:27.0059345Z       âœ“ should set an object value (1 ms)
2025-04-15T08:26:27.0060040Z       âœ“ should not cache `null` or `undefined` values
2025-04-15T08:26:27.0060731Z       âœ“ should disregard zero-length keys (1 ms)
2025-04-15T08:26:27.0061319Z       âœ“ should honor ttl (202 ms)
2025-04-15T08:26:27.0061694Z     get
2025-04-15T08:26:27.0062174Z       âœ“ should fall back to fallback value (1 ms)
2025-04-15T08:26:27.0062925Z       âœ“ should refresh value
2025-04-15T08:26:27.0063525Z       âœ“ should handle non-ASCII key (1 ms)
2025-04-15T08:26:27.0063973Z     delete
2025-04-15T08:26:27.0064439Z       âœ“ should delete a key (1 ms)
2025-04-15T08:26:27.0065050Z       âœ“ should handle non-ASCII key (1 ms)
2025-04-15T08:26:27.0065499Z     setMany
2025-04-15T08:26:27.0066015Z       âœ“ should set multiple string values (2 ms)
2025-04-15T08:26:27.0066983Z       âœ“ should set multiple number values (1 ms)
2025-04-15T08:26:27.0067731Z       âœ“ should disregard zero-length keys (1 ms)
2025-04-15T08:26:27.0068199Z     getMany
2025-04-15T08:26:27.0068739Z       âœ“ should return undefined on missing result (1 ms)
2025-04-15T08:26:27.0069248Z     setHash
2025-04-15T08:26:27.0069765Z       âœ“ should set a hash if non-existing (1 ms)
2025-04-15T08:26:27.0070447Z       âœ“ should add to a hash value if existing (1 ms)
2025-04-15T08:26:27.0070932Z     deleteFromHash
2025-04-15T08:26:27.0071421Z       âœ“ should delete a hash field (1 ms)
2025-04-15T08:26:27.0071877Z     getHashValue
2025-04-15T08:26:27.0072386Z       âœ“ should return a hash field value
2025-04-15T08:26:27.0072924Z 
2025-04-15T08:26:31.2581372Z PASS test/integration/executions/pre-execution-checks/credentials-permission-checker.test.ts (6.003 s)
2025-04-15T08:26:31.2586283Z   check()
2025-04-15T08:26:31.2590582Z     âœ“ should allow if workflow has no creds (24 ms)
2025-04-15T08:26:31.2591854Z     âœ“ should allow if workflow creds are valid subset (35 ms)
2025-04-15T08:26:31.2595060Z     âœ“ should deny if workflow creds are not valid subset (39 ms)
2025-04-15T08:26:31.2596397Z     âœ“ should allow all credentials if current user is instance owner (22 ms)
2025-04-15T08:26:31.2597462Z 
2025-04-15T08:26:31.6041914Z PASS test/integration/public-api/users.ee.test.ts (8.308 s)
2025-04-15T08:26:31.6044577Z   With license unlimited quota:users
2025-04-15T08:26:31.6045047Z     GET /users
2025-04-15T08:26:31.6045803Z       âœ“ should fail due to missing API Key (469 ms)
2025-04-15T08:26:31.6046515Z       âœ“ should fail due to invalid API Key (13 ms)
2025-04-15T08:26:31.6047426Z       âœ“ should fail due to member trying to access owner only endpoint (161 ms)
2025-04-15T08:26:31.6048279Z       âœ“ should return all users (32 ms)
2025-04-15T08:26:31.6048986Z       âœ“ should return users filtered by project ID (49 ms)
2025-04-15T08:26:31.6049506Z     GET /users/:id
2025-04-15T08:26:31.6050088Z       âœ“ should fail due to missing API Key (20 ms)
2025-04-15T08:26:31.6050799Z       âœ“ should fail due to invalid API Key (18 ms)
2025-04-15T08:26:31.6051651Z       âœ“ should fail due to member trying to access owner only endpoint (25 ms)
2025-04-15T08:26:31.6052478Z       âœ“ should return 404 for non-existing id  (24 ms)
2025-04-15T08:26:31.6053351Z       âœ“ should return a pending user (24 ms)
2025-04-15T08:26:31.6053835Z     GET /users/:email
2025-04-15T08:26:31.6054448Z       âœ“ with non-existing email should return 404 (23 ms)
2025-04-15T08:26:31.6055088Z       âœ“ should return a user (22 ms)
2025-04-15T08:26:31.6055580Z   With license without quota:users
2025-04-15T08:26:31.6056222Z     âœ“ GET /users should fail due to invalid license (22 ms)
2025-04-15T08:26:31.6057007Z     âœ“ GET /users/:id should fail due to invalid license (17 ms)
2025-04-15T08:26:31.6057892Z 
2025-04-15T08:26:34.9453025Z PASS src/controllers/__tests__/binary-data.controller.test.ts
2025-04-15T08:26:34.9453685Z   BinaryDataController
2025-04-15T08:26:34.9454019Z     get
2025-04-15T08:26:34.9454799Z       âœ“ should return 400 if binary data mode is missing (7 ms)
2025-04-15T08:26:34.9455552Z       âœ“ should return 400 if binary data mode is invalid (1 ms)
2025-04-15T08:26:34.9456215Z       âœ“ should return 404 if file is not found (2 ms)
2025-04-15T08:26:34.9457042Z       âœ“ should set Content-Type and Content-Length from query if provided (1 ms)
2025-04-15T08:26:34.9458057Z       âœ“ should set Content-Type and Content-Length from metadata if not provided (2 ms)
2025-04-15T08:26:34.9458950Z       âœ“ should set Content-Disposition for download action (1 ms)
2025-04-15T08:26:34.9459725Z       âœ“ should set Content-Security-Policy for HTML in view mode
2025-04-15T08:26:34.9460554Z       âœ“ should not set Content-Security-Policy for HTML in download mode
2025-04-15T08:26:34.9461316Z       âœ“ should return the file stream on success (1 ms)
2025-04-15T08:26:34.9461753Z     getSigned
2025-04-15T08:26:34.9462282Z       âœ“ should return 400 if binary data mode is missing (1 ms)
2025-04-15T08:26:34.9474672Z       âœ“ should return 400 if binary data mode is invalid (2 ms)
2025-04-15T08:26:34.9475464Z       âœ“ should return 400 if token is invalid (10 ms)
2025-04-15T08:26:34.9476109Z       âœ“ should return 404 if file is not found (1 ms)
2025-04-15T08:26:34.9476841Z       âœ“ should return the file stream on a valid signed token (1 ms)
2025-04-15T08:26:34.9477250Z 
2025-04-15T08:26:35.1973482Z PASS src/environments.ee/source-control/__tests__/source-control-helper.ee.test.ts (7.971 s)
2025-04-15T08:26:35.1980409Z   Source Control
2025-04-15T08:26:35.1981248Z     âœ“ should generate an SSH key pair (104 ms)
2025-04-15T08:26:35.1981934Z     âœ“ should generate an RSA key pair (4834 ms)
2025-04-15T08:26:35.1983092Z     âœ“ should check for git and ssh folders and create them if required (2 ms)
2025-04-15T08:26:35.1984085Z     âœ“ should get repo type from url (1 ms)
2025-04-15T08:26:35.1984836Z     âœ“ should get tracking information from pre-push results (2 ms)
2025-04-15T08:26:35.1985746Z     âœ“ should get tracking information from post-push results (1 ms)
2025-04-15T08:26:35.1986567Z     âœ“ should get tracking information from pull results
2025-04-15T08:26:35.1986960Z 
2025-04-15T08:26:38.2259818Z PASS test/integration/workflows/workflow.service.ee.test.ts (6.744 s)
2025-04-15T08:26:38.2263793Z   EnterpriseWorkflowService
2025-04-15T08:26:38.2266608Z     validateWorkflowCredentialUsage
2025-04-15T08:26:38.2269952Z       âœ“ Should throw error saving a workflow using credential without access (38 ms)
2025-04-15T08:26:38.2293022Z       âœ“ Should not throw error when saving a workflow using credential with access (2 ms)
2025-04-15T08:26:38.2294375Z       âœ“ Should not throw error when saving a workflow removing node without credential access (2 ms)
2025-04-15T08:26:38.2295529Z       âœ“ Should save fine when not making changes to workflow without access (3 ms)
2025-04-15T08:26:38.2296668Z       âœ“ Should throw error saving a workflow adding node without credential access (2 ms)
2025-04-15T08:26:38.2297362Z     getNodesWithInaccessibleCreds
2025-04-15T08:26:38.2298217Z       âœ“ Should return an empty list for a workflow without nodes (2 ms)
2025-04-15T08:26:38.2299285Z       âœ“ Should return an empty list for a workflow with nodes without credentials (2 ms)
2025-04-15T08:26:38.2300355Z       âœ“ Should return an element for a node with a credential without access (2 ms)
2025-04-15T08:26:38.2301416Z       âœ“ Should return an empty list for a node with a credential with access (2 ms)
2025-04-15T08:26:38.2302426Z       âœ“ Should return an element for a node with two credentials and mixed access (2 ms)
2025-04-15T08:26:38.2303720Z       âœ“ Should return one node for a workflow with two nodes and two credentials (1 ms)
2025-04-15T08:26:38.2304845Z       âœ“ Should return one element for a workflows with two nodes and one credential (2 ms)
2025-04-15T08:26:38.2306634Z       âœ“ Should return one element for a workflows with two nodes and partial credential access (2 ms)
2025-04-15T08:26:38.2308019Z       âœ“ Should return two elements for a workflows with two nodes and partial credential access (1 ms)
2025-04-15T08:26:38.2309331Z       âœ“ Should return two elements for a workflows with two nodes and no credential access (1 ms)
2025-04-15T08:26:38.2309934Z 
2025-04-15T08:26:39.8506495Z PASS src/environments.ee/source-control/__tests__/source-control-import.service.ee.test.ts
2025-04-15T08:26:39.8508659Z   SourceControlImportService
2025-04-15T08:26:39.8513213Z     getRemoteVersionIdsFromFiles
2025-04-15T08:26:39.8518088Z       âœ“ should parse workflow files correctly (9 ms)
2025-04-15T08:26:39.8522934Z       âœ“ should filter out files without valid workflow data
2025-04-15T08:26:39.8527426Z     getRemoteCredentialsFromFiles
2025-04-15T08:26:39.8532068Z       âœ“ should parse credential files correctly (1 ms)
2025-04-15T08:26:39.8536974Z       âœ“ should filter out files without valid credential data
2025-04-15T08:26:39.8541474Z     getRemoteVariablesFromFile
2025-04-15T08:26:39.8546233Z       âœ“ should parse variables file correctly (1 ms)
2025-04-15T08:26:39.8551371Z       âœ“ should return empty array if no variables file found (1 ms)
2025-04-15T08:26:39.8555996Z     getRemoteTagsAndMappingsFromFile
2025-04-15T08:26:39.8560550Z       âœ“ should parse tags and mappings file correctly (1 ms)
2025-04-15T08:26:39.8565579Z       âœ“ should return empty tags and mappings if no file found (1 ms)
2025-04-15T08:26:39.8570220Z     getRemoteFoldersAndMappingsFromFile
2025-04-15T08:26:39.8575468Z       âœ“ should parse folders and mappings file correctly (1 ms)
2025-04-15T08:26:39.8580388Z       âœ“ should return empty folders and mappings if no file found (1 ms)
2025-04-15T08:26:39.8584465Z     getLocalVersionIdsFromDb
2025-04-15T08:26:39.8587280Z       âœ“ should replace invalid updatedAt with current timestamp (5 ms)
2025-04-15T08:26:39.8593579Z     getLocalFoldersAndMappingsFromDb
2025-04-15T08:26:39.8594259Z       âœ“ should return data from DB (2 ms)
2025-04-15T08:26:39.8594579Z 
2025-04-15T08:26:40.1034635Z PASS src/controllers/__tests__/dynamic-node-parameters.controller.test.ts
2025-04-15T08:26:40.1035907Z   DynamicNodeParametersController
2025-04-15T08:26:40.1038396Z     getOptions
2025-04-15T08:26:40.1039346Z       âœ“ should call getOptionsViaMethodName when methodName is provided (9 ms)
2025-04-15T08:26:40.1040409Z       âœ“ should call getOptionsViaLoadOptions when loadOptions is provided (1 ms)
2025-04-15T08:26:40.1041471Z       âœ“ should return empty array when no method or load options are provided (1 ms)
2025-04-15T08:26:40.1042130Z     getResourceLocatorResults
2025-04-15T08:26:40.1043166Z       âœ“ should call getResourceLocatorResults with correct parameters (2 ms)
2025-04-15T08:26:40.1043814Z     getResourceMappingFields
2025-04-15T08:26:40.1044551Z       âœ“ should call getResourceMappingFields with correct parameters (1 ms)
2025-04-15T08:26:40.1045194Z     getLocalResourceMappingFields
2025-04-15T08:26:40.1045940Z       âœ“ should call getLocalResourceMappingFields with correct parameters (3 ms)
2025-04-15T08:26:40.1046516Z     getActionResult
2025-04-15T08:26:40.1047106Z       âœ“ should call getActionResult with correct parameters (1 ms)
2025-04-15T08:26:40.1047481Z 
2025-04-15T08:26:58.2471884Z PASS test/integration/security-audit/instance-risk-reporter.test.ts (18.136 s)
2025-04-15T08:26:58.2478905Z   âœ“ should report webhook lacking authentication (518 ms)
2025-04-15T08:26:58.2483770Z   âœ“ should not report webhooks having basic or header auth (17 ms)
2025-04-15T08:26:58.2488030Z   âœ“ should not report webhooks validated by direct children (40 ms)
2025-04-15T08:26:58.2492200Z   âœ“ should not report non-webhook node (15 ms)
2025-04-15T08:26:58.2500987Z   âœ“ should report outdated instance when outdated (8 ms)
2025-04-15T08:26:58.2503215Z   âœ“ should not report outdated instance when up to date (90 ms)
2025-04-15T08:26:58.2510805Z   âœ“ should report security settings (9 ms)
2025-04-15T08:26:58.2511531Z 
2025-04-15T08:26:58.2687141Z PASS test/integration/public-api/users.test.ts (19.787 s)
2025-04-15T08:26:58.2687718Z   Users in Public API
2025-04-15T08:26:58.2688056Z     POST /users
2025-04-15T08:26:58.2690746Z       âœ“ if not authenticated, should reject (31 ms)
2025-04-15T08:26:58.2694660Z       âœ“ if missing scope, should reject (173 ms)
2025-04-15T08:26:58.2695234Z       âœ“ should create a user (79 ms)
2025-04-15T08:26:58.2695606Z     DELETE /users/:id
2025-04-15T08:26:58.2696090Z       âœ“ if not authenticated, should reject (15 ms)
2025-04-15T08:26:58.2698870Z       âœ“ if missing scope, should reject (79 ms)
2025-04-15T08:26:58.2699537Z       âœ“ should delete a user (99 ms)
2025-04-15T08:26:58.2699916Z     PATCH /users/:id/role
2025-04-15T08:26:58.2700416Z       âœ“ if not authenticated, should reject (13 ms)
2025-04-15T08:26:58.2700973Z       âœ“ if not licensed, should reject (36 ms)
2025-04-15T08:26:58.2701531Z       âœ“ if missing scope, should reject (26 ms)
2025-04-15T08:26:58.2702148Z       âœ“ should return a 400 on invalid payload (27 ms)
2025-04-15T08:26:58.2702871Z       âœ“ should change a user's role (36 ms)
2025-04-15T08:26:58.2703167Z 
2025-04-15T08:26:58.7293272Z PASS test/integration/webhooks.api.test.ts (18.272 s)
2025-04-15T08:26:58.7294292Z   Webhook API
2025-04-15T08:26:58.7294652Z     Content-Type support
2025-04-15T08:26:58.7295374Z       âœ“ should handle JSON (43 ms)
2025-04-15T08:26:58.7295921Z       âœ“ should handle XML (16 ms)
2025-04-15T08:26:58.7296499Z       âœ“ should handle form-urlencoded (11 ms)
2025-04-15T08:26:58.7297083Z       âœ“ should handle plain text (10 ms)
2025-04-15T08:26:58.7297712Z       âœ“ should handle multipart/form-data (25 ms)
2025-04-15T08:26:58.7298194Z     Params support
2025-04-15T08:26:58.7298674Z       âœ“ should handle params (42 ms)
2025-04-15T08:26:58.7298977Z 
2025-04-15T08:27:01.1051551Z PASS src/webhooks/__tests__/webhook-request-handler.test.ts
2025-04-15T08:27:01.1053090Z   WebhookRequestHandler
2025-04-15T08:27:01.1059853Z     âœ“ should throw for unsupported methods (18 ms)
2025-04-15T08:27:01.1060331Z     preflight requests
2025-04-15T08:27:01.1060940Z       âœ“ should handle missing header for requested method (1 ms)
2025-04-15T08:27:01.1061670Z       âœ“ should handle default origin and max-age (2 ms)
2025-04-15T08:27:01.1062267Z       âœ“ should handle wildcard origin (1 ms)
2025-04-15T08:27:01.1062972Z       âœ“ should handle custom origin (1 ms)
2025-04-15T08:27:01.1063385Z     webhook requests
2025-04-15T08:27:01.1064119Z       âœ“ should delegate the request to the webhook manager and send the response (1 ms)
2025-04-15T08:27:01.1065042Z       âœ“ should send an error response if webhook execution throws (2 ms)
2025-04-15T08:27:01.1065717Z       âœ“ should handle 'DELETE' method (1 ms)
2025-04-15T08:27:01.1066263Z       âœ“ should handle 'GET' method (1 ms)
2025-04-15T08:27:01.1066809Z       âœ“ should handle 'HEAD' method (1 ms)
2025-04-15T08:27:01.1067365Z       âœ“ should handle 'PATCH' method (1 ms)
2025-04-15T08:27:01.1067949Z       âœ“ should handle 'POST' method (1 ms)
2025-04-15T08:27:01.1068477Z       âœ“ should handle 'PUT' method (1 ms)
2025-04-15T08:27:01.1068749Z 
2025-04-15T08:27:03.6485619Z PASS src/webhooks/__tests__/test-webhooks.test.ts (5.042 s)
2025-04-15T08:27:03.6489548Z   TestWebhooks
2025-04-15T08:27:03.6494080Z     needsWebhook()
2025-04-15T08:27:03.6498777Z       âœ“ if webhook is needed, should register then create webhook and return true (7 ms)
2025-04-15T08:27:03.6502560Z       âœ“ if webhook activation fails, should deactivate workflow webhooks (16 ms)
2025-04-15T08:27:03.6510359Z       âœ“ if no webhook is found to start workflow, should return false (1 ms)
2025-04-15T08:27:03.6517415Z       âœ“ returns false if a triggerToStartFrom with triggerData is given
2025-04-15T08:27:03.6518732Z       âœ“ returns true, registers and then creates webhook if triggerToStartFrom is given with no triggerData (2 ms)
2025-04-15T08:27:03.6519582Z     executeWebhook()
2025-04-15T08:27:03.6520222Z       âœ“ if webhook is not registered, should throw (11 ms)
2025-04-15T08:27:03.6521670Z       âœ“ if webhook is registered but missing from workflow, should throw (5 ms)
2025-04-15T08:27:03.6522316Z     deactivateWebhooks()
2025-04-15T08:27:03.6553343Z       âœ“ should add additional data to workflow (2 ms)
2025-04-15T08:27:03.6553798Z 
2025-04-15T08:27:20.2343339Z PASS src/__tests__/workflow-runner.test.ts (21.28 s)
2025-04-15T08:27:20.2348700Z   processError
2025-04-15T08:27:20.2350921Z     âœ“ processError should return early in Bull stalled edge case (75 ms)
2025-04-15T08:27:20.2352051Z     âœ“ processError should return early if the error is `ExecutionNotFoundError` (49 ms)
2025-04-15T08:27:20.2353138Z     âœ“ processError should process error (85 ms)
2025-04-15T08:27:20.2353591Z   run
2025-04-15T08:27:20.2354639Z     âœ“ uses recreateNodeExecutionStack to create a partial execution if a triggerToStartFrom with data is sent (29 ms)
2025-04-15T08:27:20.2356331Z     âœ“ does not use recreateNodeExecutionStack to create a partial execution if a triggerToStartFrom without data is sent (6 ms)
2025-04-15T08:27:20.2357151Z 
2025-04-15T08:27:20.7704141Z PASS test/integration/import.service.test.ts (19.462 s)
2025-04-15T08:27:20.7704831Z   ImportService
2025-04-15T08:27:20.7706065Z     âœ“ should import credless and tagless workflow (54 ms)
2025-04-15T08:27:20.7706902Z     âœ“ should make user owner of imported workflow (14 ms)
2025-04-15T08:27:20.7707647Z     âœ“ should not change the owner if it already exists (67 ms)
2025-04-15T08:27:20.7708454Z     âœ“ should deactivate imported workflow if active (13 ms)
2025-04-15T08:27:20.7711811Z     âœ“ should leave intact new-format credentials (16 ms)
2025-04-15T08:27:20.7721256Z     âœ“ should set tag by identical match (22 ms)
2025-04-15T08:27:20.7731104Z     âœ“ should set tag by name match (17 ms)
2025-04-15T08:27:20.7741292Z     âœ“ should set tag by creating if no match (20 ms)
2025-04-15T08:27:20.7752165Z 
2025-04-15T08:27:23.3479540Z PASS test/integration/security-audit/credentials-risk-reporter.test.ts (19.395 s)
2025-04-15T08:27:23.3485997Z   âœ“ should report credentials not in any use (118 ms)
2025-04-15T08:27:23.3488834Z   âœ“ should report credentials not in active use (13 ms)
2025-04-15T08:27:23.3496435Z   âœ“ should report credential in not recently executed workflow (49 ms)
2025-04-15T08:27:23.3497453Z   âœ“ should not report credentials in recently executed workflow (27 ms)
2025-04-15T08:27:23.3497945Z 
2025-04-15T08:27:24.7741937Z PASS src/webhooks/__tests__/waiting-forms.test.ts
2025-04-15T08:27:24.7748838Z   WaitingForms
2025-04-15T08:27:24.7749185Z     findCompletionPage
2025-04-15T08:27:24.7750230Z       âœ“ should return lastNodeExecuted if it is a non-disabled form completion node (20 ms)
2025-04-15T08:27:24.7751216Z       âœ“ should return undefined if lastNodeExecuted is disabled (1 ms)
2025-04-15T08:27:24.7752066Z       âœ“ should return undefined if lastNodeExecuted is not a form node
2025-04-15T08:27:24.7756841Z       âœ“ should return undefined if lastNodeExecuted operation is not completion (4 ms)
2025-04-15T08:27:24.7758099Z       âœ“ should find first valid completion form in parent nodes if lastNodeExecuted is not valid (2 ms)
2025-04-15T08:27:24.7759291Z       âœ“ should return undefined if no valid completion form is found in parent nodes (1 ms)
2025-04-15T08:27:24.7760236Z       âœ“ should skip parent nodes without runData (1 ms)
2025-04-15T08:27:24.7761076Z       âœ“ should mark as test form webhook when execution mode is manual (3 ms)
2025-04-15T08:27:24.7762105Z       âœ“ should return status of execution if suffix is WAITING_FORMS_EXECUTION_STATUS (2 ms)
2025-04-15T08:27:24.7762650Z 
2025-04-15T08:27:26.7189575Z PASS src/push/__tests__/index.test.ts
2025-04-15T08:27:26.7246850Z   Push
2025-04-15T08:27:26.7250374Z     setupPushServer
2025-04-15T08:27:26.7250753Z       sse backend
2025-04-15T08:27:26.7253471Z         âœ“ should not create a WebSocket server (8 ms)
2025-04-15T08:27:26.7254003Z       websocket backend
2025-04-15T08:27:26.7255617Z         âœ“ should not upgrade non-push urls (3 ms)
2025-04-15T08:27:26.7257212Z         âœ“ should upgrade push url, and route it to express (4 ms)
2025-04-15T08:27:26.7260080Z     handleRequest
2025-04-15T08:27:26.7261135Z       sse backend
2025-04-15T08:27:26.7261749Z         âœ“ should throw if pushRef is invalid (2 ms)
2025-04-15T08:27:26.7264347Z         âœ“ should add the connection if pushRef is valid (2 ms)
2025-04-15T08:27:26.7265721Z         should throw on invalid origin
2025-04-15T08:27:26.7267223Z           âœ“ https://subdomain.example.com (24 ms)
2025-04-15T08:27:26.7268686Z           âœ“ https://123example.com (2 ms)
2025-04-15T08:27:26.7269855Z           âœ“ undefined (2 ms)
2025-04-15T08:27:26.7270244Z       websocket backend
2025-04-15T08:27:26.7270813Z         âœ“ should throw if pushRef is invalid (1 ms)
2025-04-15T08:27:26.7271541Z         âœ“ should add the connection if pushRef is valid (1 ms)
2025-04-15T08:27:26.7272373Z         âœ“ should respond with 401 if request is not WebSocket (1 ms)
2025-04-15T08:27:26.7273183Z         should throw on invalid origin
2025-04-15T08:27:26.7273841Z           âœ“ https://subdomain.example.com (2 ms)
2025-04-15T08:27:26.7274506Z           âœ“ https://123example.com (8 ms)
2025-04-15T08:27:26.7275019Z           âœ“ undefined (2 ms)
2025-04-15T08:27:26.7275273Z 
2025-04-15T08:27:30.0854681Z PASS src/services/pruning/__tests__/pruning.service.test.ts
2025-04-15T08:27:30.0873772Z   PruningService
2025-04-15T08:27:30.0874580Z     init
2025-04-15T08:27:30.0880333Z       âœ“ should start pruning on main instance that is the leader (8 ms)
2025-04-15T08:27:30.0881345Z       âœ“ should not start pruning on main instance that is a follower (1 ms)
2025-04-15T08:27:30.0882351Z       âœ“ should register leadership events if main on multi-main setup (3 ms)
2025-04-15T08:27:30.0883288Z     isEnabled
2025-04-15T08:27:30.0883950Z       âœ“ should return `true` based on config if leader main (1 ms)
2025-04-15T08:27:30.0884757Z       âœ“ should return `false` based on config if leader main
2025-04-15T08:27:30.0885564Z       âœ“ should return `false` if non-main even if config is enabled
2025-04-15T08:27:30.0886524Z       âœ“ should return `false` if follower main even if config is enabled (1 ms)
2025-04-15T08:27:30.0887150Z     startPruning
2025-04-15T08:27:30.0887787Z       âœ“ should not start pruning if service is disabled (1 ms)
2025-04-15T08:27:30.0888737Z       âœ“ should start pruning if service is enabled and DB is migrated (1 ms)
2025-04-15T08:27:30.0889212Z 
2025-04-15T08:27:31.2019343Z PASS test/integration/task-runners/js-task-runner-execution.integration.test.ts (6.126 s)
2025-04-15T08:27:31.2025325Z   JS TaskRunner execution on internal mode
2025-04-15T08:27:31.2029548Z     Basic code execution
2025-04-15T08:27:31.2030369Z       âœ“ should execute a simple JS task (1270 ms)
2025-04-15T08:27:31.2030885Z     Internal and external libs
2025-04-15T08:27:31.2031622Z       âœ“ should allow importing allowed internal module (1394 ms)
2025-04-15T08:27:31.2032477Z       âœ“ should not allow importing disallowed internal module (9 ms)
2025-04-15T08:27:31.2036763Z       âœ“ should allow importing allowed external module (10 ms)
2025-04-15T08:27:31.2037688Z       âœ“ should not allow importing disallowed external module (6 ms)
2025-04-15T08:27:31.2038120Z 
2025-04-15T08:27:34.3399154Z PASS src/__tests__/credentials-helper.test.ts
2025-04-15T08:27:34.3423170Z   CredentialsHelper
2025-04-15T08:27:34.3423553Z     authenticate
2025-04-15T08:27:34.3424219Z       âœ“ basicAuth, default property names (24 ms)
2025-04-15T08:27:34.3424758Z       âœ“ headerAuth (2 ms)
2025-04-15T08:27:34.3425257Z       âœ“ headerAuth, key and value expressions (1 ms)
2025-04-15T08:27:34.3425724Z       âœ“ queryAuth (2 ms)
2025-04-15T08:27:34.3426091Z       âœ“ custom authentication
2025-04-15T08:27:34.3426311Z 
2025-04-15T08:27:37.6974268Z PASS src/commands/db/__tests__/revert.test.ts
2025-04-15T08:27:37.6977070Z   âœ“ don't revert migrations if there is no migration (8 ms)
2025-04-15T08:27:37.6978265Z   âœ“ don't revert the last migration if it had no down migration (1 ms)
2025-04-15T08:27:37.6981073Z   âœ“ print migration name instead of class name in error message if the migration has a name (1 ms)
2025-04-15T08:27:37.6982653Z   âœ“ don't revert the last migration if we cannot find the migration in the code (5 ms)
2025-04-15T08:27:37.6983650Z   âœ“ revert the last migration if it has a down migration (1 ms)
2025-04-15T08:27:37.6984483Z   âœ“ don't use transaction if the last migration has transaction = false
2025-04-15T08:27:37.6984914Z 
2025-04-15T08:27:40.7847796Z PASS src/services/__tests__/public-api-key.service.test.ts (19.776 s)
2025-04-15T08:27:40.7849984Z   PublicApiKeyService
2025-04-15T08:27:40.7851715Z     getAuthMiddleware
2025-04-15T08:27:40.7856436Z       âœ“ should return false if api key is invalid (14 ms)
2025-04-15T08:27:40.7861020Z       âœ“ should return false if valid api key is not in database (5 ms)
2025-04-15T08:27:40.7866233Z       âœ“ should return true if valid api key exist in the database (38 ms)
2025-04-15T08:27:40.7869803Z       âœ“ should return false if expired JWT is used (39 ms)
2025-04-15T08:27:40.7872242Z       âœ“ should work with non JWT (legacy) api keys (15 ms)
2025-04-15T08:27:40.7879268Z     redactApiKey
2025-04-15T08:27:40.7879806Z       âœ“ should redact api key (1 ms)
2025-04-15T08:27:40.7880112Z 
2025-04-15T08:27:42.6054966Z PASS src/scaling/__tests__/worker-server.test.ts
2025-04-15T08:27:42.6055889Z   WorkerServer
2025-04-15T08:27:42.6056201Z     constructor
2025-04-15T08:27:42.6056931Z       âœ“ should throw if non-worker instance type (22 ms)
2025-04-15T08:27:42.6057530Z       âœ“ should exit if port taken (2 ms)
2025-04-15T08:27:42.6057918Z     init
2025-04-15T08:27:42.6058435Z       âœ“ should mount all endpoints when all are enabled (2 ms)
2025-04-15T08:27:42.6059356Z       âœ“ should mount only health and overwrites endpoints if only those are enabled (1 ms)
2025-04-15T08:27:42.6060187Z       âœ“ should throw if no endpoints are enabled (2 ms)
2025-04-15T08:27:42.6060808Z       âœ“ should call `worker.ready` external hook
2025-04-15T08:27:42.6061114Z 
2025-04-15T08:27:45.3845329Z PASS src/deprecation/__tests__/deprecation.service.test.ts
2025-04-15T08:27:45.3846527Z   DeprecationService
2025-04-15T08:27:45.3847814Z     âœ“ should detect when N8N_BINARY_DATA_TTL is `1` (1 ms)
2025-04-15T08:27:45.3848661Z     âœ“ should detect when N8N_PERSISTED_BINARY_DATA_TTL is `1` (1 ms)
2025-04-15T08:27:45.3850319Z     âœ“ should detect when EXECUTIONS_DATA_PRUNE_TIMEOUT is `1` (1 ms)
2025-04-15T08:27:45.3881872Z     âœ“ should detect when N8N_CONFIG_FILES is `1` (1 ms)
2025-04-15T08:27:45.3883118Z     âœ“ should detect when N8N_SKIP_WEBHOOK_DEREGISTRATION_SHUTDOWN is `1` (1 ms)
2025-04-15T08:27:45.3884029Z     âœ“ should detect when N8N_PARTIAL_EXECUTION_VERSION_DEFAULT is `1`
2025-04-15T08:27:45.3884729Z     âœ“ should detect when N8N_PARTIAL_EXECUTION_VERSION_DEFAULT is `2` (1 ms)
2025-04-15T08:27:45.3885346Z     âœ“ should detect when N8N_PARTIAL_EXECUTION_VERSION_DEFAULT is `undefined` (1 ms)
2025-04-15T08:27:45.3885858Z     âœ“ should handle N8N_BINARY_DATA_MODE as default (1 ms)
2025-04-15T08:27:45.3886254Z     âœ“ should handle N8N_BINARY_DATA_MODE as filesystem
2025-04-15T08:27:45.3886652Z     âœ“ should handle N8N_BINARY_DATA_MODE as s3
2025-04-15T08:27:45.3886989Z     âœ“ should handle DB_TYPE as sqlite (1 ms)
2025-04-15T08:27:45.3887312Z     âœ“ should handle DB_TYPE as postgresdb
2025-04-15T08:27:45.3887662Z     âœ“ should handle DB_TYPE as mysqldb (1 ms)
2025-04-15T08:27:45.3887986Z     âœ“ should handle DB_TYPE as mariadb (1 ms)
2025-04-15T08:27:45.3888268Z     N8N_PARTIAL_EXECUTION_VERSION_DEFAULT
2025-04-15T08:27:45.3888714Z       âœ“ supports multiple warnings for the same environment variable (10 ms)
2025-04-15T08:27:45.3889067Z     N8N_RUNNERS_ENABLED
2025-04-15T08:27:45.3889332Z       âœ“ should handle value: false
2025-04-15T08:27:45.3889633Z       âœ“ should handle value:  (1 ms)
2025-04-15T08:27:45.3889916Z       âœ“ should handle value: true
2025-04-15T08:27:45.3890208Z       âœ“ should handle value: undefined
2025-04-15T08:27:45.3890505Z     OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS
2025-04-15T08:27:45.3890780Z       when executions.mode is queue
2025-04-15T08:27:45.3891233Z         âœ“ should warn when OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS is false (1 ms)
2025-04-15T08:27:45.3892117Z         âœ“ should warn when OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS is empty
2025-04-15T08:27:45.3892620Z         âœ“ should not warn when OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS is true
2025-04-15T08:27:45.3895872Z         âœ“ should warn when OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS is undefined (1 ms)
2025-04-15T08:27:45.3896542Z       when executions.mode is not queue
2025-04-15T08:27:45.3897042Z         âœ“ should not warn
2025-04-15T08:27:45.3897471Z 
2025-04-15T08:27:49.5172407Z PASS src/__tests__/active-workflow-manager.test.ts
2025-04-15T08:27:49.5176607Z   ActiveWorkflowManager
2025-04-15T08:27:49.5177049Z     checkIfWorkflowCanBeActivated
2025-04-15T08:27:49.5179013Z       âœ“ should skip disabled nodes (6 ms)
2025-04-15T08:27:49.5185324Z       âœ“ should skip nodes marked as ignored (1 ms)
2025-04-15T08:27:49.5185910Z       âœ“ should skip unknown nodes (1 ms)
2025-04-15T08:27:49.5186484Z       âœ“ should skip nodes with no trigger method (1 ms)
2025-04-15T08:27:49.5187133Z       âœ“ should activate if poll method exists (7 ms)
2025-04-15T08:27:49.5187746Z       âœ“ should activate if trigger method exists (2 ms)
2025-04-15T08:27:49.5188355Z       âœ“ should activate if webhook method exists (1 ms)
2025-04-15T08:27:49.5189187Z     shouldAddWebhooks
2025-04-15T08:27:49.5189506Z       if leader
2025-04-15T08:27:49.5189920Z         âœ“ should return `true` for `init`
2025-04-15T08:27:49.5190531Z         âœ“ should return `false` for `leadershipChange` (1 ms)
2025-04-15T08:27:49.5191211Z         âœ“ should return `true` for `update` or `activate` (1 ms)
2025-04-15T08:27:49.5191669Z       if follower
2025-04-15T08:27:49.5192143Z         âœ“ should return `false` for `update` or `activate`
2025-04-15T08:27:49.5192580Z       add
2025-04-15T08:27:49.5193372Z         âœ“ should skip inactive workflow in `init` activation mode (1 ms)
2025-04-15T08:27:49.5194274Z         âœ“ should skip inactive workflow in `leadershipChange` activation mode (1 ms)
2025-04-15T08:27:49.5194762Z 
2025-04-15T08:27:51.8483752Z PASS test/integration/controllers/dynamic-node-parameters.controller.test.ts (21.522 s)
2025-04-15T08:27:51.8488813Z   DynamicNodeParametersController
2025-04-15T08:27:51.8493558Z     POST /dynamic-node-parameters/options
2025-04-15T08:27:51.8518773Z       âœ“ should take params via body (50 ms)
2025-04-15T08:27:51.8520797Z       âœ“ should take params with loadOptions (12 ms)
2025-04-15T08:27:51.8526634Z       âœ“ should return empty array when no method or loadOptions provided (10 ms)
2025-04-15T08:27:51.8528071Z     POST /dynamic-node-parameters/resource-locator-results
2025-04-15T08:27:51.8529420Z       âœ“ should return resource locator results (8 ms)
2025-04-15T08:27:51.8530578Z       âœ“ should handle resource locator results without pagination (8 ms)
2025-04-15T08:27:51.8531815Z       âœ“ should return a 400 if methodName is not defined (9 ms)
2025-04-15T08:27:51.8532890Z     POST /dynamic-node-parameters/resource-mapper-fields
2025-04-15T08:27:51.8533951Z       âœ“ should return resource mapper fields (8 ms)
2025-04-15T08:27:51.8535133Z       âœ“ should return a 400 if methodName is not defined (8 ms)
2025-04-15T08:27:51.8535957Z     POST /dynamic-node-parameters/local-resource-mapper-fields
2025-04-15T08:27:51.8536843Z       âœ“ should return local resource mapper fields (9 ms)
2025-04-15T08:27:51.8537641Z       âœ“ should return a 400 if methodName is not defined (8 ms)
2025-04-15T08:27:51.8538324Z     POST /dynamic-node-parameters/action-result
2025-04-15T08:27:51.8539086Z       âœ“ should return action result with handler (8 ms)
2025-04-15T08:27:51.8539865Z       âœ“ should return a 400 if handler is not defined (7 ms)
2025-04-15T08:27:51.8540248Z 
2025-04-15T08:27:54.4148124Z PASS src/executions/__tests__/executions.controller.test.ts
2025-04-15T08:27:54.4159665Z   ExecutionsController
2025-04-15T08:27:54.4164469Z     getOne
2025-04-15T08:27:54.4198271Z       âœ“ should 400 when execution is not a number (25 ms)
2025-04-15T08:27:54.4199001Z     getMany
2025-04-15T08:27:54.4200063Z       if either status or range provided
2025-04-15T08:27:54.4200763Z         âœ“ should fetch executions per query (4 ms)
2025-04-15T08:27:54.4201467Z         âœ“ should fetch executions per query (2 ms)
2025-04-15T08:27:54.4202485Z         âœ“ should fetch executions per query (2 ms)
2025-04-15T08:27:54.4203505Z         âœ“ should fetch executions per query (1 ms)
2025-04-15T08:27:54.4204058Z       if neither status nor range provided
2025-04-15T08:27:54.4204691Z         âœ“ should fetch executions per query (1 ms)
2025-04-15T08:27:54.4205326Z         âœ“ should fetch executions per query (1 ms)
2025-04-15T08:27:54.4205865Z       if both status and range provided
2025-04-15T08:27:54.4206516Z         âœ“ should fetch executions per query (2 ms)
2025-04-15T08:27:54.4207210Z     stop
2025-04-15T08:27:54.4208059Z       âœ“ should 404 when execution is inaccessible for user (1 ms)
2025-04-15T08:27:54.4209062Z       âœ“ should call ask for an execution to be stopped
2025-04-15T08:27:54.4209557Z 
2025-04-15T08:27:56.7361667Z PASS src/metrics/__tests__/prometheus-metrics.service.unmocked.test.ts
2025-04-15T08:27:56.7393451Z   workflow_success_total
2025-04-15T08:27:56.7395490Z     âœ“ support workflow id labels (67 ms)
2025-04-15T08:27:56.7397156Z     âœ“ support a custom prefix (3 ms)
2025-04-15T08:27:56.7398680Z   Active workflow count
2025-04-15T08:27:56.7400244Z     âœ“ should prioritize cached value (7 ms)
2025-04-15T08:27:56.7402019Z     âœ“ should query value from database if cache misses (2 ms)
2025-04-15T08:27:56.7403695Z 
2025-04-15T08:27:59.1732441Z PASS src/shutdown/__tests__/shutdown.service.test.ts
2025-04-15T08:27:59.1767822Z   ShutdownService
2025-04-15T08:27:59.1776423Z     shutdown
2025-04-15T08:27:59.1777056Z       âœ“ should signal shutdown (5 ms)
2025-04-15T08:27:59.1777679Z       âœ“ should signal shutdown in the priority order (2 ms)
2025-04-15T08:27:59.1778461Z       âœ“ should throw error if shutdown is already in progress (12 ms)
2025-04-15T08:27:59.1779273Z       âœ“ should report error if component shutdown fails (2 ms)
2025-04-15T08:27:59.1779850Z     waitForShutdown
2025-04-15T08:27:59.1780306Z       âœ“ should wait for shutdown (1 ms)
2025-04-15T08:27:59.1781026Z       âœ“ should throw error if app is not shutting down (1 ms)
2025-04-15T08:27:59.1781518Z     isShuttingDown
2025-04-15T08:27:59.1782030Z       âœ“ should return true if app is shutting down
2025-04-15T08:27:59.1782856Z       âœ“ should return false if app is not shutting down (1 ms)
2025-04-15T08:27:59.1783329Z     validate
2025-04-15T08:27:59.1784046Z       âœ“ should throw error if component is not registered with the DI container (1 ms)
2025-04-15T08:27:59.1785057Z       âœ“ should throw error if component is missing the shutdown method (2 ms)
2025-04-15T08:27:59.1785528Z 
2025-04-15T08:28:01.8426454Z PASS test/integration/collaboration/collaboration.service.test.ts (20.854 s)
2025-04-15T08:28:01.8429348Z   CollaborationService
2025-04-15T08:28:01.8429760Z     workflow opened message
2025-04-15T08:28:01.8430755Z       âœ“ should emit collaboratorsChanged after workflowOpened (38 ms)
2025-04-15T08:28:01.8432510Z       âœ“ should not emit collaboratorsChanged if user don't have access to the workflow (5 ms)
2025-04-15T08:28:01.8433476Z     workflow closed message
2025-04-15T08:28:01.8436721Z       âœ“ should not emit collaboratorsChanged after workflowClosed when there are no active users (15 ms)
2025-04-15T08:28:01.8446454Z       âœ“ should emit collaboratorsChanged after workflowClosed when there are active users (26 ms)
2025-04-15T08:28:01.8447778Z       âœ“ should not emit collaboratorsChanged if user don't have access to the workflow (12 ms)
2025-04-15T08:28:01.8448381Z 
2025-04-15T08:28:02.1319883Z PASS src/services/__tests__/hooks.service.test.ts
2025-04-15T08:28:02.1320481Z   HooksService
2025-04-15T08:28:02.1321999Z     âœ“ hooksService.inviteUsers should call userService.inviteUsers (6 ms)
2025-04-15T08:28:02.1323350Z     âœ“ hooksService.issueCookie should call authService.issueCookie (1 ms)
2025-04-15T08:28:02.1324456Z     âœ“ hooksService.findOneUser should call authUserRepository.findOne (1 ms)
2025-04-15T08:28:02.1325420Z     âœ“ hooksService.saveUser should call userRepository.save
2025-04-15T08:28:02.1326385Z     âœ“ hooksService.updateSettings should call settingRepository.update (1 ms)
2025-04-15T08:28:02.1327857Z     âœ“ hooksService.workflowsCount should call workflowRepository.count
2025-04-15T08:28:02.1328957Z     âœ“ hooksService.credentialsCount should call credentialRepository.count
2025-04-15T08:28:02.1330005Z     âœ“ hooksService.settingsCount should call settingsRepository.count
2025-04-15T08:28:02.1331027Z     âœ“ hooksService.authMiddleware should call authService.authMiddleware
2025-04-15T08:28:02.1332060Z     âœ“ hooksService.dbCollections should return valid repositories (2 ms)
2025-04-15T08:28:02.1333083Z     âœ“ hooksService.getRudderStackClient (1 ms)
2025-04-15T08:28:04.7993821Z 
2025-04-15T08:28:04.7994646Z PASS src/execution-lifecycle/__tests__/restore-binary-data-id.test.ts
2025-04-15T08:28:04.7995351Z   on filesystem-v2 mode
2025-04-15T08:28:04.7996254Z     âœ“ should restore if binary data ID is missing execution ID (8 ms)
2025-04-15T08:28:04.7997219Z     âœ“ should do nothing if binary data ID is not missing execution ID (1 ms)
2025-04-15T08:28:04.7998007Z     âœ“ should do nothing if no binary data ID (1 ms)
2025-04-15T08:28:04.7998672Z     âœ“ should do nothing on itemless case (1 ms)
2025-04-15T08:28:04.7999322Z     âœ“ should do nothing if data is undefined (1 ms)
2025-04-15T08:28:04.8000141Z     âœ“ should do nothing if workflow execution mode is not `webhook` (1 ms)
2025-04-15T08:28:04.8000911Z     âœ“ should ignore error thrown on renaming (2 ms)
2025-04-15T08:28:04.8001369Z   on s3 mode
2025-04-15T08:28:04.8001990Z     âœ“ should restore if binary data ID is missing execution ID (1 ms)
2025-04-15T08:28:04.8003125Z     âœ“ should do nothing if binary data ID is not missing execution ID
2025-04-15T08:28:04.8003874Z     âœ“ should do nothing if no binary data ID
2025-04-15T08:28:04.8004482Z     âœ“ should do nothing on itemless case (1 ms)
2025-04-15T08:28:04.8005122Z     âœ“ should do nothing if data is undefined (2 ms)
2025-04-15T08:28:04.8005905Z     âœ“ should do nothing if workflow execution mode is not `webhook`
2025-04-15T08:28:04.8006643Z     âœ“ should ignore error thrown on renaming (1 ms)
2025-04-15T08:28:04.8007098Z   on default mode
2025-04-15T08:28:04.8007540Z     âœ“ should do nothing (1 ms)
2025-04-15T08:28:04.8007799Z 
2025-04-15T08:28:08.9059529Z PASS src/executions/__tests__/parse-range-query.middleware.test.ts
2025-04-15T08:28:08.9068190Z   `parseRangeQuery` middleware
2025-04-15T08:28:08.9068599Z     errors
2025-04-15T08:28:08.9069281Z       âœ“ should fail on invalid JSON (22 ms)
2025-04-15T08:28:08.9069895Z       âœ“ should fail on invalid schema (7 ms)
2025-04-15T08:28:08.9070325Z     filter
2025-04-15T08:28:08.9070835Z       âœ“ should parse status and mode fields (2 ms)
2025-04-15T08:28:08.9071468Z       âœ“ should parse date-related fields (6 ms)
2025-04-15T08:28:08.9072102Z       âœ“ should parse ID-related fields (2 ms)
2025-04-15T08:28:08.9073139Z       âœ“ should parse `projectId` field (1 ms)
2025-04-15T08:28:08.9074305Z       âœ“ should delete invalid fields (2 ms)
2025-04-15T08:28:08.9074725Z     range
2025-04-15T08:28:08.9075197Z       âœ“ should parse first and last IDs (1 ms)
2025-04-15T08:28:08.9075802Z       âœ“ should parse limit (1 ms)
2025-04-15T08:28:08.9076462Z       âœ“ should default limit to 20 if absent (1 ms)
2025-04-15T08:28:08.9076810Z 
2025-04-15T08:28:15.2439783Z PASS test/integration/services/project.service.test.ts (20.571 s)
2025-04-15T08:28:15.2440842Z   ProjectService
2025-04-15T08:28:15.2442526Z     addUser
2025-04-15T08:28:15.2445810Z       âœ“ creates a relation between the user and the project using the role project:viewer (35 ms)
2025-04-15T08:28:15.2459694Z       âœ“ creates a relation between the user and the project using the role project:admin (15 ms)
2025-04-15T08:28:15.2460786Z       âœ“ creates a relation between the user and the project using the role project:editor (14 ms)
2025-04-15T08:28:15.2461905Z       âœ“ creates a relation between the user and the project using the role project:personalOwner (13 ms)
2025-04-15T08:28:15.2463472Z       âœ“ changes the role the user has in the project if the user is already part of the project, instead of creating a new relationship (24 ms)
2025-04-15T08:28:15.2464661Z     getProjectWithScope
2025-04-15T08:28:15.2465562Z       âœ“ should return the project if the user has the role project:admin and wants the scope workflow:list (18 ms)
2025-04-15T08:28:15.2466797Z       âœ“ should return the project if the user has the role project:admin and wants the scope workflow:create (14 ms)
2025-04-15T08:28:15.2468041Z       âœ“ should return the project if the user has the role project:viewer and wants the scope workflow:create (13 ms)
2025-04-15T08:28:15.2469310Z       âœ“ should return the project if the user has the role project:viewer and wants the scope credential:create (12 ms)
2025-04-15T08:28:15.2470306Z       âœ“ should not return the project if the user is not part of it (9 ms)
2025-04-15T08:28:15.2470711Z 
2025-04-15T08:28:17.3376527Z PASS src/__tests__/credentials-overwrites.test.ts
2025-04-15T08:28:17.3377119Z   CredentialsOverwrites
2025-04-15T08:28:17.3377450Z     constructor
2025-04-15T08:28:17.3378237Z       âœ“ should parse and set overwrite data from config (10 ms)
2025-04-15T08:28:17.3382482Z     setData
2025-04-15T08:28:17.3383370Z       âœ“ should reset resolvedTypes when setting new data (1 ms)
2025-04-15T08:28:17.3383897Z     applyOverwrite
2025-04-15T08:28:17.3384446Z       âœ“ should apply overwrites only for empty fields (1 ms)
2025-04-15T08:28:17.3385164Z       âœ“ should return original data if no overwrites exist (1 ms)
2025-04-15T08:28:17.3385643Z     getOverwrites
2025-04-15T08:28:17.3386270Z       âœ“ should return undefined for unrecognized credential type (1 ms)
2025-04-15T08:28:17.3386937Z       âœ“ should cache resolved types (1 ms)
2025-04-15T08:28:17.3387516Z       âœ“ should merge overwrites from parent types (2 ms)
2025-04-15T08:28:17.3387846Z 
2025-04-15T08:28:20.4322282Z PASS src/controllers/__tests__/owner.controller.test.ts
2025-04-15T08:28:20.4330180Z   OwnerController
2025-04-15T08:28:20.4330546Z     setupOwner
2025-04-15T08:28:20.4331546Z       âœ“ should throw a BadRequestError if the instance owner is already setup (29 ms)
2025-04-15T08:28:20.4332507Z       âœ“ should setup the instance owner successfully (5 ms)
2025-04-15T08:28:20.4333239Z     dismissBanner
2025-04-15T08:28:20.4333929Z       âœ“ should not call dismissBanner if no banner is provided (1 ms)
2025-04-15T08:28:20.4334783Z       âœ“ should call dismissBanner with the correct banner name
2025-04-15T08:28:20.4335184Z 
2025-04-15T08:28:22.8392305Z PASS test/integration/credentials-helper.test.ts (20.759 s)
2025-04-15T08:28:22.8398896Z   CredentialsHelper
2025-04-15T08:28:22.8399565Z     credentialOwnedBySuperUsers
2025-04-15T08:28:22.8400405Z       âœ“ owners are super users (31 ms)
2025-04-15T08:28:22.8400984Z       âœ“ admins are super users (13 ms)
2025-04-15T08:28:22.8401565Z       âœ“ owners need to own the credential (11 ms)
2025-04-15T08:28:22.8402077Z       âœ“ admins need to own the credential (12 ms)
2025-04-15T08:28:22.8403243Z       âœ“ members are no super users (10 ms)
2025-04-15T08:28:22.8404166Z       âœ“ credential in team project with instance owner as an admin can use external secrets (21 ms)
2025-04-15T08:28:22.8405358Z       âœ“ credential in team project with instance admin as an admin can use external secrets (16 ms)
2025-04-15T08:28:22.8406542Z       âœ“ credential in team project with instance owner as an editor cannot use external secrets (15 ms)
2025-04-15T08:28:22.8407744Z       âœ“ credential in team project with instance admin as an editor cannot use external secrets (13 ms)
2025-04-15T08:28:22.8409087Z       âœ“ credential in team project with no instance admin or owner as part of the project cannot use external secrets (10 ms)
2025-04-15T08:28:22.8409756Z 
2025-04-15T08:28:23.5531481Z PASS src/execution-lifecycle/__tests__/save-execution-progress.test.ts
2025-04-15T08:28:23.5543336Z   saveExecutionProgress
2025-04-15T08:28:23.5544449Z     âœ“ should not try to update non-existent executions (7 ms)
2025-04-15T08:28:23.5545579Z     âœ“ should handle DB errors on execution lookup (2 ms)
2025-04-15T08:28:23.5546618Z     âœ“ should handle DB errors when updating the execution (1 ms)
2025-04-15T08:28:23.5547791Z     âœ“ should not try to update finished executions
2025-04-15T08:28:23.5548704Z     âœ“ should populate `.data` when it is missing (2 ms)
2025-04-15T08:28:23.5549774Z     âœ“ should augment `.data` if it already exists (1 ms)
2025-04-15T08:28:23.5550714Z     âœ“ should set last executed node correctly
2025-04-15T08:28:23.5551231Z 
2025-04-15T08:28:30.5023780Z PASS test/integration/security-audit/database-risk-reporter.test.ts (21.36 s)
2025-04-15T08:28:30.5033414Z   âœ“ should report expressions in queries (108 ms)
2025-04-15T08:28:30.5036920Z   âœ“ should report expressions in query params (14 ms)
2025-04-15T08:28:30.5037665Z   âœ“ should report unused query params (11 ms)
2025-04-15T08:28:30.5038340Z   âœ“ should not report non-database node (5 ms)
2025-04-15T08:28:30.5038718Z 
2025-04-15T08:28:46.8353735Z PASS test/integration/binary-data.api.test.ts (23.813 s)
2025-04-15T08:28:46.8359892Z   GET /binary-data
2025-04-15T08:28:46.8360713Z     should reject on missing or invalid binary data ID
2025-04-15T08:28:46.8362583Z       âœ“ on request to view (58 ms)
2025-04-15T08:28:46.8363403Z       âœ“ on request to download (15 ms)
2025-04-15T08:28:46.8363902Z     should return binary data [filesystem]
2025-04-15T08:28:46.8367559Z       âœ“ on request to view (11 ms)
2025-04-15T08:28:46.8374298Z       âœ“ on request to download (8 ms)
2025-04-15T08:28:46.8374852Z     should handle non-ASCII filename [filesystem]
2025-04-15T08:28:46.8375458Z       âœ“ on request to download (8 ms)
2025-04-15T08:28:46.8375992Z     should return 404 on file not found [filesystem]
2025-04-15T08:28:46.8376605Z       âœ“ on request to view (7 ms)
2025-04-15T08:28:46.8377125Z       âœ“ on request to download (9 ms)
2025-04-15T08:28:46.8377599Z     should return binary data [s3]
2025-04-15T08:28:46.8378141Z       âœ“ on request to view (7 ms)
2025-04-15T08:28:46.8378683Z       âœ“ on request to download (7 ms)
2025-04-15T08:28:46.8379174Z     should return 404 on file not found [s3]
2025-04-15T08:28:46.8379729Z       âœ“ on request to view (8 ms)
2025-04-15T08:28:46.8380265Z       âœ“ on request to download (6 ms)
2025-04-15T08:28:46.8380554Z 
2025-04-15T08:28:47.6513043Z PASS test/integration/role.api.test.ts (23.858 s)
2025-04-15T08:28:47.6513875Z   GET /roles/
2025-04-15T08:28:47.6514681Z     âœ“ should return all role categories (38 ms)
2025-04-15T08:28:47.6515418Z     âœ“ should return fixed global roles (11 ms)
2025-04-15T08:28:47.6516214Z     âœ“ should return fixed project roles (10 ms)
2025-04-15T08:28:47.6516967Z     âœ“ should return fixed credential sharing roles (8 ms)
2025-04-15T08:28:47.6520907Z     âœ“ should return fixed workflow sharing roles (9 ms)
2025-04-15T08:28:47.6523352Z 
2025-04-15T08:28:49.7010918Z PASS src/push/__tests__/websocket.push.test.ts
2025-04-15T08:28:49.7011531Z   WebSocketPush
2025-04-15T08:28:49.7013024Z     âœ“ can add a connection (8 ms)
2025-04-15T08:28:49.7013728Z     âœ“ closes a connection (1 ms)
2025-04-15T08:28:49.7014308Z     âœ“ sends data to one connection (2 ms)
2025-04-15T08:28:49.7014961Z     âœ“ sends data to all connections (1 ms)
2025-04-15T08:28:49.7015640Z     âœ“ pings all connections (2 ms)
2025-04-15T08:28:49.7016319Z     âœ“ sends data to all users connections (1 ms)
2025-04-15T08:28:49.7017130Z     âœ“ emits message event when connection receives data (3 ms)
2025-04-15T08:28:49.7017959Z     âœ“ emits doesn' emit message for client heartbeat (1 ms)
2025-04-15T08:28:49.7018364Z 
2025-04-15T08:28:51.0383112Z PASS src/external-secrets.ee/__tests__/external-secrets-manager.ee.test.ts
2025-04-15T08:28:51.0391158Z   External Secrets Manager
2025-04-15T08:28:51.0395457Z     âœ“ should get secret (8 ms)
2025-04-15T08:28:51.0399693Z     âœ“ should not throw errors during init (3 ms)
2025-04-15T08:28:51.0404235Z     âœ“ should not throw errors during shutdown (2 ms)
2025-04-15T08:28:51.0408414Z     âœ“ should save provider settings (3 ms)
2025-04-15T08:28:51.0413176Z     âœ“ should call provider update functions on a timer (4 ms)
2025-04-15T08:28:51.0418080Z     âœ“ should not call provider update functions if the not licensed (1 ms)
2025-04-15T08:28:51.0423830Z     âœ“ should not call provider update functions if the provider has an error (1 ms)
2025-04-15T08:28:51.0428945Z     âœ“ should reinitialize a provider when save provider settings (2 ms)
2025-04-15T08:28:51.0433627Z 
2025-04-15T08:28:52.5621856Z PASS src/execution-lifecycle/__tests__/to-save-settings.test.ts
2025-04-15T08:28:52.5622598Z   failed production executions
2025-04-15T08:28:52.5624106Z     âœ“ should favor workflow settings over defaults (7 ms)
2025-04-15T08:28:52.5626851Z     âœ“ should fall back to default if no workflow setting (7 ms)
2025-04-15T08:28:52.5627792Z   successful production executions
2025-04-15T08:28:52.5630764Z     âœ“ should favor workflow settings over defaults (1 ms)
2025-04-15T08:28:52.5634642Z     âœ“ should fall back to default if no workflow setting (1 ms)
2025-04-15T08:28:52.5636139Z   manual executions
2025-04-15T08:28:52.5636784Z     âœ“ should favor workflow setting over default (1 ms)
2025-04-15T08:28:52.5637761Z     âœ“ should favor fall back to default if workflow setting is explicit default (1 ms)
2025-04-15T08:28:52.5638755Z     âœ“ should fall back to default if no workflow setting (1 ms)
2025-04-15T08:28:52.5639329Z   execution progress
2025-04-15T08:28:52.5639956Z     âœ“ should favor workflow setting over default (1 ms)
2025-04-15T08:28:52.5640900Z     âœ“ should favor fall back to default if workflow setting is explicit default (1 ms)
2025-04-15T08:28:52.5641791Z     âœ“ should fall back to default if no workflow setting
2025-04-15T08:28:52.5642151Z 
2025-04-15T08:28:52.6726490Z PASS test/integration/database/repositories/project.repository.test.ts (21.956 s)
2025-04-15T08:28:52.6728438Z   ProjectRepository
2025-04-15T08:28:52.6728792Z     getPersonalProjectForUser
2025-04-15T08:28:52.6729517Z       âœ“ returns the personal project (46 ms)
2025-04-15T08:28:52.6730178Z       âœ“ does not return non personal projects (19 ms)
2025-04-15T08:28:52.6730704Z     getPersonalProjectForUserOrFail
2025-04-15T08:28:52.6731253Z       âœ“ returns the personal project (16 ms)
2025-04-15T08:28:52.6731860Z       âœ“ does not return non personal projects (45 ms)
2025-04-15T08:28:52.6732356Z     update personal project name
2025-04-15T08:28:52.6733483Z       âœ“ do not pass a User instance with circular references into `UserRepository.create` (43 ms)
2025-04-15T08:28:52.6734029Z 
2025-04-15T08:28:55.6501130Z PASS src/webhooks/__tests__/webhook-form-data.test.ts
2025-04-15T08:28:55.6501823Z   webhook-form-data
2025-04-15T08:28:55.6502180Z     createMultiFormDataParser
2025-04-15T08:28:55.6503394Z       âœ“ should parse fields from the multipart form data (66 ms)
2025-04-15T08:28:55.6504264Z       âœ“ should parse text/plain file from the multipart form data (15 ms)
2025-04-15T08:28:55.6505226Z       âœ“ should parse multiple files and fields from the multipart form data (11 ms)
2025-04-15T08:28:55.6506474Z       âœ“ should ignore file that is too large (8 ms)
2025-04-15T08:28:55.6506803Z 
2025-04-15T08:29:17.1702566Z PASS test/integration/license.api.test.ts (25.876 s)
2025-04-15T08:29:17.1705304Z   GET /license
2025-04-15T08:29:17.1707905Z     âœ“ should return license information to the instance owner (57 ms)
2025-04-15T08:29:17.1710397Z     âœ“ should return license information to a regular user (14 ms)
2025-04-15T08:29:17.1712494Z   POST /license/enterprise/request_trial
2025-04-15T08:29:17.1714865Z     âœ“ should work for instance owner (41 ms)
2025-04-15T08:29:17.1716981Z     âœ“ does not work for regular users (12 ms)
2025-04-15T08:29:17.1718892Z   POST /license/activate
2025-04-15T08:29:17.1723736Z     âœ“ should work for instance owner (14 ms)
2025-04-15T08:29:17.1725149Z     âœ“ does not work for regular users (13 ms)
2025-04-15T08:29:17.1725970Z     âœ“ errors out properly (30 ms)
2025-04-15T08:29:17.1728064Z   POST /license/renew
2025-04-15T08:29:17.1728642Z     âœ“ should work for instance owner (12 ms)
2025-04-15T08:29:17.1729298Z     âœ“ does not work for regular users (11 ms)
2025-04-15T08:29:17.1729866Z     âœ“ errors out properly (12 ms)
2025-04-15T08:29:17.1730155Z 
2025-04-15T08:29:18.4079338Z PASS test/integration/controllers/oauth/oauth2.api.test.ts (25.496 s)
2025-04-15T08:29:18.4083958Z   OAuth2 API
2025-04-15T08:29:18.4088997Z     âœ“ should return a valid auth URL when the auth flow is initiated (132 ms)
2025-04-15T08:29:18.4093807Z     âœ“ should fail on auth when callback is called as another user (60 ms)
2025-04-15T08:29:18.4095091Z     âœ“ should handle a valid callback without auth (99 ms)
2025-04-15T08:29:18.4095510Z 
2025-04-15T08:29:20.0201526Z PASS src/task-runners/__tests__/task-runner-process.test.ts
2025-04-15T08:29:20.0202125Z   TaskRunnerProcess
2025-04-15T08:29:20.0202442Z     constructor
2025-04-15T08:29:20.0203479Z       âœ“ should throw if runner mode is external (21 ms)
2025-04-15T08:29:20.0204353Z       âœ“ should register listener for `runner:failed-heartbeat-check` event (2 ms)
2025-04-15T08:29:20.0205337Z       âœ“ should register listener for `runner:timed-out-during-task` event
2025-04-15T08:29:20.0205872Z     start
2025-04-15T08:29:20.0206318Z       âœ“ should propagate PATH from env as is (2 ms)
2025-04-15T08:29:20.0207104Z       âœ“ should propagate NODE_FUNCTION_ALLOW_BUILTIN from env as is (1 ms)
2025-04-15T08:29:20.0207983Z       âœ“ should propagate NODE_FUNCTION_ALLOW_EXTERNAL from env as is (1 ms)
2025-04-15T08:29:20.0208769Z       âœ“ should propagate N8N_SENTRY_DSN from env as is (1 ms)
2025-04-15T08:29:20.0209458Z       âœ“ should propagate N8N_VERSION from env as is (1 ms)
2025-04-15T08:29:20.0210130Z       âœ“ should propagate ENVIRONMENT from env as is (3 ms)
2025-04-15T08:29:20.0210824Z       âœ“ should propagate DEPLOYMENT_NAME from env as is (2 ms)
2025-04-15T08:29:20.0211506Z       âœ“ should propagate NODE_PATH from env as is (1 ms)
2025-04-15T08:29:20.0212202Z       âœ“ should propagate GENERIC_TIMEZONE from env as is (1 ms)
2025-04-15T08:29:20.0213326Z       âœ“ should pass NODE_OPTIONS env if maxOldSpaceSize is configured (1 ms)
2025-04-15T08:29:20.0214391Z       âœ“ should not pass NODE_OPTIONS env if maxOldSpaceSize is not configured (10 ms)
2025-04-15T08:29:20.0215690Z       âœ“ should use --disallow-code-generation-from-strings and --disable-proto=delete flags (2 ms)
2025-04-15T08:29:20.0216348Z 
2025-04-15T08:29:21.1158845Z PASS test/integration/credentials/credentials.service.test.ts (25.194 s)
2025-04-15T08:29:21.1161568Z   credentials service
2025-04-15T08:29:21.1163721Z     replaceCredentialContentsForSharee
2025-04-15T08:29:21.1166398Z       âœ“ should replace the contents of the credential for sharee (25 ms)
2025-04-15T08:29:21.1168998Z       âœ“ should replace the contents of the credential for project viewer (42 ms)
2025-04-15T08:29:21.1171617Z       âœ“ should not replace the contents of the credential for project editor (27 ms)
2025-04-15T08:29:21.1176709Z 
2025-04-15T08:29:21.7233659Z PASS src/sso.ee/saml/__tests__/saml.service.ee.test.ts
2025-04-15T08:29:21.7234346Z   SamlService
2025-04-15T08:29:21.7235652Z     getAttributesFromLoginResponse
2025-04-15T08:29:21.7236493Z       âœ“ throws when any attribute is missing (150 ms)
2025-04-15T08:29:21.7236954Z     init
2025-04-15T08:29:21.7237572Z       âœ“ calls `reset` if an InvalidSamlMetadataError is thrown (2 ms)
2025-04-15T08:29:21.7238330Z       âœ“ calls `reset` if a SyntaxError is thrown (1 ms)
2025-04-15T08:29:21.7239110Z       âœ“ does not call reset and rethrows if another error is thrown (2 ms)
2025-04-15T08:29:21.7239851Z       âœ“ does not call reset if no error is thrown (1 ms)
2025-04-15T08:29:21.7240302Z     reset
2025-04-15T08:29:21.7240983Z       âœ“ disables saml login and deletes the saml `features.saml` key in the db (2 ms)
2025-04-15T08:29:21.7241471Z 
2025-04-15T08:29:23.3194780Z PASS src/__tests__/external-hooks.test.ts
2025-04-15T08:29:23.3200626Z   ExternalHooks
2025-04-15T08:29:23.3202643Z     init()
2025-04-15T08:29:23.3213378Z       âœ“ should not load hooks if no external hook files are configured (6 ms)
2025-04-15T08:29:23.3214469Z       âœ“ should throw an error if hook file cannot be loaded (13 ms)
2025-04-15T08:29:23.3215374Z       âœ“ should successfully load hooks from valid hook file (3 ms)
2025-04-15T08:29:23.3215928Z     run()
2025-04-15T08:29:23.3219907Z       âœ“ should not throw if no hooks are registered (1 ms)
2025-04-15T08:29:23.3220714Z       âœ“ should execute registered hooks (1 ms)
2025-04-15T08:29:23.3221444Z       âœ“ should report error if hook execution fails (2 ms)
2025-04-15T08:29:23.3221827Z 
2025-04-15T08:29:26.6188197Z PASS src/credentials/__tests__/credentials.service.test.ts
2025-04-15T08:29:26.6189036Z   CredentialsService
2025-04-15T08:29:26.6189388Z     redact
2025-04-15T08:29:26.6190059Z       âœ“ should redact sensitive values (5 ms)
2025-04-15T08:29:26.6193352Z     decrypt
2025-04-15T08:29:26.6194639Z       âœ“ should redact sensitive values by default (2 ms)
2025-04-15T08:29:26.6195566Z       âœ“ should return sensitive values if `includeRawData` is true (1 ms)
2025-04-15T08:29:26.6196551Z       âœ“ should return return an empty object if decryption fails (2 ms)
2025-04-15T08:29:26.6197083Z 
2025-04-15T08:29:45.1021004Z PASS test/integration/workflows/workflow-sharing.service.test.ts (23.741 s)
2025-04-15T08:29:45.1024321Z   WorkflowSharingService
2025-04-15T08:29:45.1026075Z     getSharedWorkflowIds
2025-04-15T08:29:45.1030435Z       âœ“ should show all workflows to owners (40 ms)
2025-04-15T08:29:45.1031111Z       âœ“ should show shared workflows to users (38 ms)
2025-04-15T08:29:45.1032163Z       âœ“ should show workflows that the user has access to through a team project they are part of (17 ms)
2025-04-15T08:29:45.1033451Z       âœ“ should show workflows that the user has update access to (29 ms)
2025-04-15T08:29:45.1033915Z 
2025-04-15T08:29:49.7588120Z PASS test/integration/public-api/variables.test.ts (26.191 s)
2025-04-15T08:29:49.7593320Z   Variables in Public API
2025-04-15T08:29:49.7597587Z     GET /variables
2025-04-15T08:29:49.7602456Z       âœ“ if licensed, should return all variables with pagination (426 ms)
2025-04-15T08:29:49.7607436Z       âœ“ if not licensed, should reject (28 ms)
2025-04-15T08:29:49.7611820Z     POST /variables
2025-04-15T08:29:49.7616468Z       âœ“ if licensed, should create a new variable (39 ms)
2025-04-15T08:29:49.7621155Z       âœ“ if not licensed, should reject (21 ms)
2025-04-15T08:29:49.7625762Z     DELETE /variables/:id
2025-04-15T08:29:49.7630277Z       âœ“ if licensed, should delete a variable (64 ms)
2025-04-15T08:29:49.7635062Z       âœ“ if not licensed, should reject (22 ms)
2025-04-15T08:29:49.7639254Z 
2025-04-15T08:29:53.2189263Z PASS src/services/__tests__/ai.service.test.ts
2025-04-15T08:29:53.2197676Z   AiService
2025-04-15T08:29:53.2211655Z     init
2025-04-15T08:29:53.2214968Z       âœ“ should not initialize client if AI assistant is not enabled (8 ms)
2025-04-15T08:29:53.2217017Z       âœ“ should initialize client when AI assistant is enabled (2 ms)
2025-04-15T08:29:53.2217637Z     chat
2025-04-15T08:29:53.2218296Z       âœ“ should call client chat method after initialization (2 ms)
2025-04-15T08:29:53.2219908Z       âœ“ should throw error if client is not initialized (13 ms)
2025-04-15T08:29:53.2220442Z     applySuggestion
2025-04-15T08:29:53.2220963Z       âœ“ should call client applySuggestion (2 ms)
2025-04-15T08:29:53.2224990Z       âœ“ should throw error if client is not initialized (1 ms)
2025-04-15T08:29:53.2227328Z     askAi
2025-04-15T08:29:53.2228787Z       âœ“ should call client askAi method after initialization (9 ms)
2025-04-15T08:29:53.2230870Z       âœ“ should throw error if client is not initialized (1 ms)
2025-04-15T08:29:53.2233361Z 
2025-04-15T08:29:53.3055779Z PASS test/integration/executions.controller.test.ts (26.434 s)
2025-04-15T08:29:53.3064563Z   GET /executions
2025-04-15T08:29:53.3066237Z     âœ“ only returns executions of shared workflows if sharing is enabled (193 ms)
2025-04-15T08:29:53.3067825Z     âœ“ should return a scopes array for each execution (50 ms)
2025-04-15T08:29:53.3068558Z   GET /executions/:id
2025-04-15T08:29:53.3076423Z     âœ“ project viewers can view executions for workflows in the project (93 ms)
2025-04-15T08:29:53.3079743Z     âœ“ only returns executions of shared workflows if sharing is enabled (68 ms)
2025-04-15T08:29:53.3094491Z   POST /executions/delete
2025-04-15T08:29:53.3096011Z     âœ“ should hard-delete an execution (58 ms)
2025-04-15T08:29:53.3096393Z 
2025-04-15T08:29:56.3217185Z PASS src/executions/pre-execution-checks/__tests__/credentials-permission-checker.test.ts
2025-04-15T08:29:56.3218270Z   CredentialsPermissionChecker
2025-04-15T08:29:56.3220336Z     âœ“ should throw if a node has a credential without an id (15 ms)
2025-04-15T08:29:56.3221004Z     âœ“ should throw if a credential is not accessible (2 ms)
2025-04-15T08:29:56.3221700Z     âœ“ should not throw an error if the workflow has no credentials (1 ms)
2025-04-15T08:29:56.3222537Z     âœ“ should not throw an error if all credentials are accessible (1 ms)
2025-04-15T08:29:56.3223753Z     âœ“ should skip credential checks if the home project owner has global scope (1 ms)
2025-04-15T08:29:56.3224315Z 
2025-04-15T08:29:56.9357234Z PASS src/decorators/__tests__/controller.registry.test.ts
2025-04-15T08:29:56.9360093Z   ControllerRegistry
2025-04-15T08:29:56.9360649Z     Rate limiting
2025-04-15T08:29:56.9361492Z       âœ“ should not rate-limit by default (83 ms)
2025-04-15T08:29:56.9362212Z       âœ“ should rate-limit when configured (26 ms)
2025-04-15T08:29:56.9362891Z     Authorization
2025-04-15T08:29:56.9363547Z       âœ“ should not require auth if configured to skip (7 ms)
2025-04-15T08:29:56.9364232Z       âœ“ should require auth by default (12 ms)
2025-04-15T08:29:56.9364700Z     License checks
2025-04-15T08:29:56.9365264Z       âœ“ should disallow when feature is missing (5 ms)
2025-04-15T08:29:56.9365950Z       âœ“ should allow when feature is available (5 ms)
2025-04-15T08:29:56.9366434Z     Args
2025-04-15T08:29:56.9366939Z       âœ“ should pass in correct args to the route handler (6 ms)
2025-04-15T08:29:59.0396826Z 
2025-04-15T08:29:59.0397530Z PASS src/__tests__/credential-types.test.ts
2025-04-15T08:29:59.0449290Z   CredentialTypes
2025-04-15T08:29:59.0449863Z     getByName
2025-04-15T08:29:59.0451369Z       âœ“ Should throw error when calling invalid credential name (18 ms)
2025-04-15T08:29:59.0453032Z       âœ“ Should return correct credential type for valid name (1 ms)
2025-04-15T08:29:59.0470364Z     recognizes
2025-04-15T08:29:59.0471225Z       âœ“ Should recognize credential type that exists in knownCredentials (1 ms)
2025-04-15T08:29:59.0472332Z       âœ“ Should recognize credential type that exists in loadedCredentials (1 ms)
2025-04-15T08:29:59.0473440Z       âœ“ Should not recognize unknown credential type
2025-04-15T08:29:59.0473981Z     getSupportedNodes
2025-04-15T08:29:59.0474763Z       âœ“ Should return supported nodes for known credential type (2 ms)
2025-04-15T08:29:59.0475835Z       âœ“ Should return empty array for unknown credential type supported nodes (1 ms)
2025-04-15T08:29:59.0476487Z     getParentTypes
2025-04-15T08:29:59.0477187Z       âœ“ Should return parent types for credential type with extends (2 ms)
2025-04-15T08:29:59.0478677Z       âœ“ Should return empty array for credential type without extends (1 ms)
2025-04-15T08:29:59.0479803Z       âœ“ Should return empty array for unknown credential type parent types
2025-04-15T08:29:59.0480288Z 
2025-04-15T08:30:02.0525147Z PASS test/integration/webhooks.test.ts
2025-04-15T08:30:02.0527644Z   WebhookServer
2025-04-15T08:30:02.0529673Z     CORS
2025-04-15T08:30:02.0531519Z       for webhook
2025-04-15T08:30:02.0534165Z         âœ“ should handle preflight requests (181 ms)
2025-04-15T08:30:02.0536526Z         âœ“ should handle regular requests (9 ms)
2025-04-15T08:30:02.0538546Z       for webhookTest
2025-04-15T08:30:02.0540759Z         âœ“ should handle preflight requests (6 ms)
2025-04-15T08:30:02.0543332Z         âœ“ should handle regular requests (6 ms)
2025-04-15T08:30:02.0545426Z     Routing for Waiting Webhooks
2025-04-15T08:30:02.0551326Z       âœ“ should handle URLs without suffix (5 ms)
2025-04-15T08:30:02.0554676Z       âœ“ should handle URLs with suffix (4 ms)
2025-04-15T08:30:02.0555299Z 
2025-04-15T08:30:02.4913847Z PASS src/controllers/__tests__/user-settings.controller.test.ts
2025-04-15T08:30:02.4914549Z   UserSettingsController
2025-04-15T08:30:02.4914920Z     NPS Survey
2025-04-15T08:30:02.4916188Z       âœ“ updates user settings, setting response state to done (5 ms)
2025-04-15T08:30:02.4917381Z       âœ“ updates user settings, setting response state to done, ignoring other keys like waitForResponse
2025-04-15T08:30:02.4918743Z       âœ“ updates user settings, setting response state to done, ignoring other keys like ignoredCount (1 ms)
2025-04-15T08:30:02.4920038Z       âœ“ updates user settings, setting response state to done, ignoring other unknown keys (1 ms)
2025-04-15T08:30:02.4920944Z       âœ“ updates user settings, updating ignore count
2025-04-15T08:30:02.4921684Z       âœ“ updates user settings, resetting to waiting state (1 ms)
2025-04-15T08:30:02.4922626Z       âœ“ updates user settings, updating ignore count, ignoring unknown keys (1 ms)
2025-04-15T08:30:02.4923745Z       âœ“ updates user settings, setting response state to done
2025-04-15T08:30:02.4924494Z       âœ“ updates user settings, updating ignore count (1 ms)
2025-04-15T08:30:02.4925271Z       âœ“ throws error when request payload is is missing (9 ms)
2025-04-15T08:30:02.4926106Z       âœ“ throws error when request payload is is undefined (1 ms)
2025-04-15T08:30:02.4927091Z       âœ“ throws error when request payload is is responded but missing lastShownAt (1 ms)
2025-04-15T08:30:02.4928270Z       âœ“ throws error when request payload is is waitingForResponse but missing lastShownAt (1 ms)
2025-04-15T08:30:02.4929526Z       âœ“ throws error when request payload is is waitingForResponse but missing ignoredCount (1 ms)
2025-04-15T08:30:02.4930110Z 
2025-04-15T08:30:05.4187727Z PASS src/scaling/__tests__/publisher.service.test.ts
2025-04-15T08:30:05.4193299Z   Publisher
2025-04-15T08:30:05.4200532Z     constructor
2025-04-15T08:30:05.4250069Z       âœ“ should init Redis client in scaling mode (5 ms)
2025-04-15T08:30:05.4250970Z       âœ“ should not init Redis client in regular mode (1 ms)
2025-04-15T08:30:05.4251489Z     shutdown
2025-04-15T08:30:05.4252019Z       âœ“ should disconnect Redis client
2025-04-15T08:30:05.4268516Z     publishCommand
2025-04-15T08:30:05.4270963Z       âœ“ should do nothing if not in scaling mode (1 ms)
2025-04-15T08:30:05.4280702Z       âœ“ should publish command into `n8n.commands` pubsub channel (1 ms)
2025-04-15T08:30:05.4281602Z       âœ“ should not debounce `add-webhooks-triggers-and-pollers` (1 ms)
2025-04-15T08:30:05.4282388Z       âœ“ should not debounce `remove-triggers-and-pollers`
2025-04-15T08:30:05.4283072Z     publishWorkerResponse
2025-04-15T08:30:05.4283840Z       âœ“ should publish worker response into `n8n.worker-response` pubsub channel
2025-04-15T08:30:05.4284320Z 
2025-04-15T08:30:08.1864722Z PASS src/license/__tests__/license.service.test.ts
2025-04-15T08:30:08.1865789Z   LicenseService
2025-04-15T08:30:08.1866249Z     getLicenseData
2025-04-15T08:30:08.1867826Z       âœ“ should return usage and license data (8 ms)
2025-04-15T08:30:08.1868815Z     activateLicense
2025-04-15T08:30:08.1869362Z       âœ“ should handle SCHEMA_VALIDATION error (20 ms)
2025-04-15T08:30:08.1870092Z       âœ“ should handle RESERVATION_EXHAUSTED error (1 ms)
2025-04-15T08:30:08.1870795Z       âœ“ should handle RESERVATION_EXPIRED error (1 ms)
2025-04-15T08:30:08.1871429Z       âœ“ should handle NOT_FOUND error (1 ms)
2025-04-15T08:30:08.1872066Z       âœ“ should handle RESERVATION_CONFLICT error (1 ms)
2025-04-15T08:30:08.1872987Z       âœ“ should handle RESERVATION_DUPLICATE error (1 ms)
2025-04-15T08:30:08.1873474Z     renewLicense
2025-04-15T08:30:08.1873875Z       âœ“ on success (1 ms)
2025-04-15T08:30:08.1874260Z       âœ“ on failure (2 ms)
2025-04-15T08:30:08.1874621Z     registerCommunityEdition
2025-04-15T08:30:08.1875077Z       âœ“ on success (1 ms)
2025-04-15T08:30:08.1875796Z       âœ“ on failure (2 ms)
2025-04-15T08:30:08.1876081Z 
2025-04-15T08:30:11.2799024Z PASS test/integration/owner.api.test.ts (25.89 s)
2025-04-15T08:30:11.2799715Z   POST /owner/setup
2025-04-15T08:30:11.2800617Z     âœ“ should create owner and enable isInstanceOwnerSetUp (321 ms)
2025-04-15T08:30:11.2805423Z     âœ“ should create owner with lowercased email (122 ms)
2025-04-15T08:30:11.2806234Z     âœ“ should fail with invalid inputs (31 ms)
2025-04-15T08:30:11.2806452Z 
2025-04-15T08:30:13.8319093Z PASS src/task-runners/task-managers/__tests__/task-manager.test.ts
2025-04-15T08:30:13.8323757Z   TaskRequester
2025-04-15T08:30:13.8328048Z     handleRpc
2025-04-15T08:30:13.8332961Z       âœ“ should handle logNodeOutput rpc call (10 ms)
2025-04-15T08:30:13.8337710Z       âœ“ should handle helpers.assertBinaryData rpc call (1 ms)
2025-04-15T08:30:13.8342157Z       âœ“ should handle helpers.getBinaryDataBuffer rpc call (1 ms)
2025-04-15T08:30:13.8349363Z       âœ“ should handle helpers.prepareBinaryData rpc call (1 ms)
2025-04-15T08:30:13.8353697Z       âœ“ should handle helpers.setBinaryDataBuffer rpc call (1 ms)
2025-04-15T08:30:13.8354574Z       âœ“ should handle helpers.binaryToString rpc call (1 ms)
2025-04-15T08:30:13.8355401Z       âœ“ should handle helpers.httpRequest rpc call (1 ms)
2025-04-15T08:30:13.8356236Z       âœ“ converts any serialized buffer arguments into buffers (1 ms)
2025-04-15T08:30:13.8356766Z       errors
2025-04-15T08:30:13.8357444Z         âœ“ sends method not allowed error if method is not in the allow list
2025-04-15T08:30:13.8358171Z         âœ“ sends error if method throws (1 ms)
2025-04-15T08:30:13.8358495Z 
2025-04-15T08:30:16.8474722Z PASS src/databases/repositories/__tests__/execution.repository.test.ts
2025-04-15T08:30:16.8488622Z   ExecutionRepository
2025-04-15T08:30:16.8493181Z     getWaitingExecutions()
2025-04-15T08:30:16.8496378Z       âœ“ on sqlite, should be called with expected args (9 ms)
2025-04-15T08:30:16.8499429Z       âœ“ on postgresdb, should be called with expected args (1 ms)
2025-04-15T08:30:16.8502135Z     deleteExecutionsByFilter
2025-04-15T08:30:16.8514272Z       âœ“ should delete binary data (2 ms)
2025-04-15T08:30:16.8515835Z     updateExistingExecution
2025-04-15T08:30:16.8516651Z       âœ“ should update execution and data in transaction on sqlite (2 ms)
2025-04-15T08:30:16.8517613Z       âœ“ should update execution and data in transaction on postgresdb (1 ms)
2025-04-15T08:30:16.8518584Z       âœ“ should update execution and data in transaction on mysqldb (2 ms)
2025-04-15T08:30:16.8519048Z 
2025-04-15T08:30:26.6406782Z PASS test/integration/workflow-history-manager.test.ts (24.324 s)
2025-04-15T08:30:26.6414247Z   Workflow History Manager
2025-04-15T08:30:26.6415195Z     âœ“ should prune on interval (14 ms)
2025-04-15T08:30:26.6416326Z     âœ“ should not prune when not licensed (75 ms)
2025-04-15T08:30:26.6417291Z     âœ“ should not prune when licensed but disabled (25 ms)
2025-04-15T08:30:26.6419191Z     âœ“ should not prune when both prune times are -1 (infinite) (19 ms)
2025-04-15T08:30:26.6420555Z     âœ“ should prune when config prune time is not -1 (infinite) (20 ms)
2025-04-15T08:30:26.6421743Z     âœ“ should prune when license prune time is not -1 (infinite) (18 ms)
2025-04-15T08:30:26.6423526Z     âœ“ should only prune versions older than prune time (39 ms)
2025-04-15T08:30:26.6426220Z 
2025-04-15T08:30:31.6955654Z PASS src/environments.ee/source-control/__tests__/source-control.controller.ee.test.ts
2025-04-15T08:30:31.6962631Z   SourceControlController
2025-04-15T08:30:31.6970171Z     pushWorkfolder
2025-04-15T08:30:31.6971295Z       âœ“ should push workfolder with expected parameters (9 ms)
2025-04-15T08:30:31.6971842Z     pullWorkfolder
2025-04-15T08:30:31.6972474Z       âœ“ should pull workfolder with expected parameters (1 ms)
2025-04-15T08:30:31.6973269Z     getStatus
2025-04-15T08:30:31.6973888Z       âœ“ should call getStatus with expected parameters (2 ms)
2025-04-15T08:30:31.6974408Z     status
2025-04-15T08:30:31.6974958Z       âœ“ should call getStatus with expected parameters (2 ms)
2025-04-15T08:30:31.6975347Z 
2025-04-15T08:30:32.5945895Z PASS src/modules/insights/__tests__/insights.controller.test.ts (24.179 s)
2025-04-15T08:30:32.5947876Z   InsightsController
2025-04-15T08:30:32.5948264Z     getInsightsSummary
2025-04-15T08:30:32.5949139Z       âœ“ should return default insights if no data (8 ms)
2025-04-15T08:30:32.5950743Z       âœ“ should return the insights summary with null deviation if insights exist only for current period (1 ms)
2025-04-15T08:30:32.5952151Z       âœ“ should return the insights summary if insights exist for both periods (1 ms)
2025-04-15T08:30:32.5953082Z 
2025-04-15T08:30:34.1197617Z PASS src/push/__tests__/sse.push.test.ts
2025-04-15T08:30:34.1198113Z   SSEPush
2025-04-15T08:30:34.1198720Z     âœ“ pings all connections (3 ms)
2025-04-15T08:30:34.1199240Z     âœ“ closes all connections (2 ms)
2025-04-15T08:30:34.1199626Z     add
2025-04-15T08:30:34.1199996Z       âœ“ adds a connection (13 ms)
2025-04-15T08:30:34.1200366Z     closes a connection
2025-04-15T08:30:34.1200750Z       âœ“ on "end" event (4 ms)
2025-04-15T08:30:34.1201192Z       âœ“ on "close" event (4 ms)
2025-04-15T08:30:34.1201642Z       âœ“ on "finish" event (1 ms)
2025-04-15T08:30:34.1202036Z     sends data
2025-04-15T08:30:34.1202418Z       âœ“ to one connection (5 ms)
2025-04-15T08:30:34.1203085Z       âœ“ to all connections (2 ms)
2025-04-15T08:30:34.1203563Z       âœ“ to a specific user (2 ms)
2025-04-15T08:30:34.1203809Z 
2025-04-15T08:30:35.7830374Z PASS src/services/__tests__/active-workflows.service.test.ts
2025-04-15T08:30:35.7838420Z   ActiveWorkflowsService
2025-04-15T08:30:35.7840079Z     getAllActiveIdsInStorage
2025-04-15T08:30:35.7841512Z       âœ“ should filter out any workflow ids that have activation errors (8 ms)
2025-04-15T08:30:35.7843230Z     getAllActiveIdsFor
2025-04-15T08:30:35.7845301Z       âœ“ should return all workflow ids when user has full access (2 ms)
2025-04-15T08:30:35.7846743Z       âœ“ should filter out workflow ids that the user does not have access to (2 ms)
2025-04-15T08:30:35.7847750Z     getActivationError
2025-04-15T08:30:35.7849331Z       âœ“ should throw a BadRequestError a user does not have access to the workflow id (13 ms)
2025-04-15T08:30:35.7851784Z       âœ“ should return the error when the user has access (1 ms)
2025-04-15T08:30:35.7852997Z 
2025-04-15T08:30:39.1982569Z PASS src/workflows/workflow-history.ee/__tests__/workflow-history.service.ee.test.ts
2025-04-15T08:30:39.1983587Z   WorkflowHistoryService
2025-04-15T08:30:39.1983942Z     saveVersion
2025-04-15T08:30:39.1985046Z       âœ“ should save a new version when workflow history is enabled and nodes and connections are present (6 ms)
2025-04-15T08:30:39.1986141Z       âœ“ should not save a new version when workflow history is disabled (1 ms)
2025-04-15T08:30:39.1987081Z       âœ“ should not save a new version when nodes or connections are missing (1 ms)
2025-04-15T08:30:39.1988047Z       âœ“ should log an error when failed to save workflow history version (1 ms)
2025-04-15T08:30:39.1988513Z 
2025-04-15T08:30:43.3306715Z PASS test/integration/commands/reset.cmd.test.ts (26.259 s)
2025-04-15T08:30:43.3309914Z   âœ“ user-management:reset should reset DB to default user state (113 ms)
2025-04-15T08:30:43.3333318Z 
2025-04-15T08:30:45.9238586Z PASS src/task-runners/task-broker/auth/__tests__/task-broker-auth.controller.test.ts
2025-04-15T08:30:45.9243620Z   TaskBrokerAuthController
2025-04-15T08:30:45.9299068Z     createGrantToken
2025-04-15T08:30:45.9301942Z       âœ“ should throw BadRequestError when auth token is missing (13 ms)
2025-04-15T08:30:45.9303130Z       âœ“ should throw ForbiddenError when auth token is invalid (1 ms)
2025-04-15T08:30:45.9303948Z       âœ“ should return rant token when auth token is valid (3 ms)
2025-04-15T08:30:45.9304453Z     authMiddleware
2025-04-15T08:30:45.9305041Z       âœ“ should respond with 401 when grant token is missing (2 ms)
2025-04-15T08:30:45.9305885Z       âœ“ should respond with 403 when grant token is invalid (1 ms)
2025-04-15T08:30:45.9306676Z       âœ“ should call next() when grant token is valid (1 ms)
2025-04-15T08:30:45.9307047Z 
2025-04-15T08:30:48.1590801Z PASS src/task-runners/task-managers/__tests__/data-request-response-builder.test.ts
2025-04-15T08:30:48.1596493Z   DataRequestResponseBuilder
2025-04-15T08:30:48.1601203Z     âœ“ picks only specific properties for additional data (9 ms)
2025-04-15T08:30:48.1605984Z     âœ“ picks only specific properties for workflow (3 ms)
2025-04-15T08:30:48.1610752Z     âœ“ clears nodeExecutionStack, waitingExecution and waitingExecutionSource from runExecutionData (2 ms)
2025-04-15T08:30:48.1613790Z 
2025-04-15T08:30:48.6764812Z PASS test/integration/task-runners/task-runner-process.test.ts (9.303 s)
2025-04-15T08:30:48.6766158Z   TaskRunnerProcess
2025-04-15T08:30:48.6766941Z     âœ“ should start and connect the task runner (1255 ms)
2025-04-15T08:30:48.6767657Z     âœ“ should stop an disconnect the task runner (1631 ms)
2025-04-15T08:30:48.6768360Z     âœ“ should restart the task runner if it exits (2680 ms)
2025-04-15T08:30:48.6769368Z     âœ“ should work together with restart loop detector (1036 ms)
2025-04-15T08:30:48.6769946Z 
2025-04-15T08:30:53.2527311Z PASS src/controllers/__tests__/ai.controller.test.ts
2025-04-15T08:30:53.2541988Z   AiController
2025-04-15T08:30:53.2542377Z     chat
2025-04-15T08:30:53.2543368Z       âœ“ should handle chat request successfully (10 ms)
2025-04-15T08:30:53.2544166Z       âœ“ should throw InternalServerError if chat fails (11 ms)
2025-04-15T08:30:53.2544747Z     applySuggestion
2025-04-15T08:30:53.2545316Z       âœ“ should apply suggestion successfully (2 ms)
2025-04-15T08:30:53.2546170Z       âœ“ should throw InternalServerError if applying suggestion fails (1 ms)
2025-04-15T08:30:53.2546776Z     askAi method
2025-04-15T08:30:53.2547250Z       âœ“ should ask AI successfully (2 ms)
2025-04-15T08:30:53.2547991Z       âœ“ should throw InternalServerError if asking AI fails (1 ms)
2025-04-15T08:30:53.2548401Z 
2025-04-15T08:30:56.5216215Z PASS src/databases/repositories/__tests__/shared-credentials.repository.test.ts
2025-04-15T08:30:56.5224747Z   SharedCredentialsRepository
2025-04-15T08:30:56.5225226Z     findCredentialForUser
2025-04-15T08:30:56.5226214Z       âœ“ should allow instance owner access to all credentials (9 ms)
2025-04-15T08:30:56.5227006Z       âœ“ should allow members (2 ms)
2025-04-15T08:30:56.5227789Z       âœ“ should return null when no shared credential is found (1 ms)
2025-04-15T08:30:56.5228227Z 
2025-04-15T08:30:58.8280792Z PASS src/task-runners/__tests__/forward-to-logger.test.ts
2025-04-15T08:30:58.8286068Z   forwardToLogger
2025-04-15T08:30:58.8286789Z     âœ“ should forward stdout data to logger.info (7 ms)
2025-04-15T08:30:58.8287441Z     âœ“ should forward stderr data to logger.error (1 ms)
2025-04-15T08:30:58.8288100Z     âœ“ should remove trailing newline from stdout (2 ms)
2025-04-15T08:30:58.8288748Z     âœ“ should remove trailing newline from stderr (1 ms)
2025-04-15T08:30:58.8289355Z     âœ“ should forward stderr data to logger.error
2025-04-15T08:30:58.8290012Z     âœ“ should include prefix if provided for stdout (1 ms)
2025-04-15T08:30:58.8290703Z     âœ“ should include prefix if provided for stderr (1 ms)
2025-04-15T08:30:58.8291493Z     âœ“ should make sure there is no duplicate space after prefix for stdout
2025-04-15T08:30:58.8293234Z     âœ“ should make sure there is no duplicate space after prefix for stderr (5 ms)
2025-04-15T08:30:58.8293729Z 
2025-04-15T08:30:59.5220770Z PASS test/integration/security-audit/nodes-risk-reporter.test.ts (25.158 s)
2025-04-15T08:30:59.5226722Z   âœ“ should report risky official nodes (103 ms)
2025-04-15T08:30:59.5227488Z   âœ“ should not report non-risky official nodes (20 ms)
2025-04-15T08:30:59.5228151Z   âœ“ should report community nodes (12 ms)
2025-04-15T08:30:59.5228483Z 
2025-04-15T08:31:01.8052342Z PASS src/services/__tests__/user.service.test.ts
2025-04-15T08:31:01.8058806Z   UserService
2025-04-15T08:31:01.8064365Z     toPublic
2025-04-15T08:31:01.8066113Z       âœ“ should remove sensitive properties (7 ms)
2025-04-15T08:31:01.8066830Z       âœ“ should add scopes if requested (2 ms)
2025-04-15T08:31:01.8067734Z       âœ“ should add invite URL if requested (2 ms)
2025-04-15T08:31:01.8068242Z     update
2025-04-15T08:31:01.8068807Z       âœ“ should use `save` instead of `update` (3 ms)
2025-04-15T08:31:01.8069503Z 
2025-04-15T08:31:02.8546296Z PASS src/controllers/__tests__/api-keys.controller.test.ts
2025-04-15T08:31:02.8549205Z   ApiKeysController
2025-04-15T08:31:02.8549837Z     createAPIKey
2025-04-15T08:31:02.8552951Z       âœ“ should create and save an API key (10 ms)
2025-04-15T08:31:02.8553780Z     getAPIKeys
2025-04-15T08:31:02.8555521Z       âœ“ should return the users api keys redacted (2 ms)
2025-04-15T08:31:02.8556181Z     deleteAPIKey
2025-04-15T08:31:02.8557870Z       âœ“ should delete the API key (5 ms)
2025-04-15T08:31:02.8558344Z 
2025-04-15T08:31:05.6235795Z PASS src/validators/__tests__/no-xss.validator.test.ts
2025-04-15T08:31:05.6240952Z   NoXss
2025-04-15T08:31:05.6241225Z     Scripts
2025-04-15T08:31:05.6241868Z       âœ“ should block <script src/> (6 ms)
2025-04-15T08:31:05.6242494Z       âœ“ should block <script>alert('xss')</script> (1 ms)
2025-04-15T08:31:05.6243319Z       âœ“ should block <a href="#">Jack</a>
2025-04-15T08:31:05.6243710Z     Names
2025-04-15T08:31:05.6245846Z       âœ“ should allow Johann StrauÃŸ (1 ms)
2025-04-15T08:31:05.6246457Z       âœ“ should allow Ð’Ð°Ð³Ð¸Ñ„ Ð¡Ó™Ð¼Ó™Ð´Ð¾Ò“Ð»Ñƒ
2025-04-15T08:31:05.6246977Z       âœ“ should allow RenÃ© Magritte
2025-04-15T08:31:05.6247475Z       âœ“ should allow à¦¸à§à¦•à§à¦®à¦¾à¦° à¦°à¦¾à§Ÿ
2025-04-15T08:31:05.6248037Z       âœ“ should allow à½˜à½‚à½¼à½“à¼‹à½”à½¼à¼‹à½¢à¾¡à½¼à¼‹à½¢à¾—à½ºà¼ (1 ms)
2025-04-15T08:31:05.6248590Z       âœ“ should allow Ø¹Ø¨Ø¯Ø§Ù„Ø­Ù„ÙŠÙ… Ø­Ø§ÙØ¸
2025-04-15T08:31:05.6248975Z     ISO-8601 timestamps
2025-04-15T08:31:05.6249450Z       âœ“ should allow 2022-01-01T00:00:00.000Z (1 ms)
2025-04-15T08:31:05.6249994Z       âœ“ should allow 2022-01-01T00:00:00.000+02:00
2025-04-15T08:31:05.6250365Z     Semver versions
2025-04-15T08:31:05.6250704Z       âœ“ should allow 1.0.0
2025-04-15T08:31:05.6251116Z       âœ“ should allow 1.0.0-alpha.1
2025-04-15T08:31:05.6251468Z     Miscellaneous strings
2025-04-15T08:31:05.6251828Z       âœ“ should allow CI/CD
2025-04-15T08:31:05.6252129Z     Array of strings
2025-04-15T08:31:05.6269291Z       âœ“ should allow array: ["cloud-infrastructure-orchestration","ci-cd","reporting"]
2025-04-15T08:31:05.6270558Z       âœ“ should allow array: ["automationGoalDevops","cloudComputing","containerization"] (1 ms)
2025-04-15T08:31:05.6271936Z       âœ“ should reject array containing invalid string: ["valid-string","<script>alert(\"xss\")</script>","another-valid-string"] (1 ms)
2025-04-15T08:31:05.6273509Z       âœ“ should reject array containing invalid string: ["<img src=\"x\" onerror=\"alert('XSS')\">","valid-string"]
2025-04-15T08:31:05.6274097Z 
2025-04-15T08:31:14.6145571Z PASS test/integration/project.service.integration.test.ts (25.646 s)
2025-04-15T08:31:14.6146269Z   ProjectService
2025-04-15T08:31:14.6146597Z     findRolesInProjects
2025-04-15T08:31:14.6147111Z       when user has roles in projects where workflow is accessible
2025-04-15T08:31:14.6147939Z         âœ“ should return roles and project IDs (50 ms)
2025-04-15T08:31:14.6148539Z       when user has no roles in projects where workflow is accessible
2025-04-15T08:31:14.6149255Z         âœ“ should return project IDs but no roles (30 ms)
2025-04-15T08:31:14.6150362Z       when user has roles in projects where workflow is inaccessible
2025-04-15T08:31:14.6151083Z         âœ“ should return project IDs but no roles (44 ms)
2025-04-15T08:31:14.6151406Z 
2025-04-15T08:31:30.4049797Z PASS test/integration/ai/ai.api.test.ts (28.349 s)
2025-04-15T08:31:30.4051791Z   POST /ai/free-credits
2025-04-15T08:31:30.4059002Z     âœ“ should create OpenAI managed credential (109 ms)
2025-04-15T08:31:30.4059403Z 
2025-04-15T08:31:32.7751011Z PASS test/integration/activation-errors.service.test.ts
2025-04-15T08:31:32.7755971Z   ActivationErrorsService
2025-04-15T08:31:32.7760149Z     register
2025-04-15T08:31:32.7765319Z       âœ“ should register an activation error for a workflow (7 ms)
2025-04-15T08:31:32.7768328Z     deregister
2025-04-15T08:31:32.7770613Z       âœ“ should deregister an activation error for a workflow (1 ms)
2025-04-15T08:31:32.7772265Z     get
2025-04-15T08:31:32.7779654Z       âœ“ should retrieve an activation error for a workflow (1 ms)
2025-04-15T08:31:32.7780685Z       âœ“ should return `null` if no activation error found for a workflow
2025-04-15T08:31:32.7781254Z     getAll
2025-04-15T08:31:32.7781775Z       âœ“ should retrieve all activation errors (2 ms)
2025-04-15T08:31:32.7783136Z       âœ“ should return an empty object if no activation errors
2025-04-15T08:31:32.7784982Z     clearAll()
2025-04-15T08:31:32.7785457Z       âœ“ should clear activation errors (1 ms)
2025-04-15T08:31:32.7785729Z 
2025-04-15T08:31:34.3281477Z PASS test/integration/tags.api.test.ts (28.479 s)
2025-04-15T08:31:34.3282065Z   POST /tags
2025-04-15T08:31:34.3282960Z     âœ“ should create tag (44 ms)
2025-04-15T08:31:34.3283578Z     âœ“ should not create duplicate tag (79 ms)
2025-04-15T08:31:34.3284183Z     âœ“ should delete tag (13 ms)
2025-04-15T08:31:34.3284728Z     âœ“ should update tag name (28 ms)
2025-04-15T08:31:34.3285303Z     âœ“ should retrieve all tags (15 ms)
2025-04-15T08:31:34.3285981Z     âœ“ should retrieve all tags with with usage count (16 ms)
2025-04-15T08:31:34.3286468Z 
2025-04-15T08:31:35.1745649Z PASS src/webhooks/__tests__/test-webhook-registrations.service.test.ts
2025-04-15T08:31:35.1757083Z   TestWebhookRegistrationsService
2025-04-15T08:31:35.1761164Z     register()
2025-04-15T08:31:35.1762646Z       âœ“ should register a test webhook registration (8 ms)
2025-04-15T08:31:35.1765392Z       âœ“ should skip setting TTL in single-main setup (6 ms)
2025-04-15T08:31:35.1768026Z     deregister()
2025-04-15T08:31:35.1768682Z       âœ“ should deregister a test webhook registration (1 ms)
2025-04-15T08:31:35.1769194Z     get()
2025-04-15T08:31:35.1769746Z       âœ“ should retrieve a test webhook registration (1 ms)
2025-04-15T08:31:35.1770690Z       âœ“ should return undefined if no such test webhook registration was found (1 ms)
2025-04-15T08:31:35.1771331Z     getAllKeys()
2025-04-15T08:31:35.1771904Z       âœ“ should retrieve all test webhook registration keys
2025-04-15T08:31:35.1772409Z     getAllRegistrations()
2025-04-15T08:31:35.1773191Z       âœ“ should retrieve all test webhook registrations
2025-04-15T08:31:35.1773710Z     deregisterAll()
2025-04-15T08:31:35.1774355Z       âœ“ should deregister all test webhook registrations (1 ms)
2025-04-15T08:31:35.1775948Z     toKey()
2025-04-15T08:31:35.1776569Z       âœ“ should convert a test webhook registration to a key
2025-04-15T08:31:35.1776943Z 
2025-04-15T08:31:38.6728126Z PASS src/services/__tests__/naming.service.test.ts
2025-04-15T08:31:38.6733144Z   NamingService
2025-04-15T08:31:38.6737598Z     getUniqueWorkflowName()
2025-04-15T08:31:38.6742528Z       âœ“ should return requested name if already unique (8 ms)
2025-04-15T08:31:38.6747662Z       âœ“ should return requested name suffixed if already existing once
2025-04-15T08:31:38.6752915Z       âœ“ should return requested name with incremented suffix if already suffixed (1 ms)
2025-04-15T08:31:38.6757538Z     getUniqueCredentialName()
2025-04-15T08:31:38.6759673Z       âœ“ should return requested name if already unique (1 ms)
2025-04-15T08:31:38.6774325Z       âœ“ should return requested name suffixed if already existing once (1 ms)
2025-04-15T08:31:38.6776370Z       âœ“ should return requested name with incremented suffix if already suffixed (1 ms)
2025-04-15T08:31:38.6777385Z 
2025-04-15T08:31:43.5309930Z PASS test/integration/commands/worker.cmd.test.ts (28.739 s)
2025-04-15T08:31:43.5320967Z   âœ“ worker initializes all its components (166 ms)
2025-04-15T08:31:43.5321349Z 
2025-04-15T08:31:46.6931362Z PASS src/user-management/email/__tests__/user-management-mailer.test.ts
2025-04-15T08:31:46.6932072Z   UserManagementMailer
2025-04-15T08:31:46.6932490Z     when SMTP is not configured
2025-04-15T08:31:46.6933447Z       âœ“ should not setup email transport (5 ms)
2025-04-15T08:31:46.6934007Z       âœ“ should not send emails (1 ms)
2025-04-15T08:31:46.6934406Z     when SMTP is configured
2025-04-15T08:31:46.6934881Z       âœ“ should setup email transport (1 ms)
2025-04-15T08:31:46.6935433Z       âœ“ should send invitation emails (22 ms)
2025-04-15T08:31:46.6936006Z       âœ“ should send password reset emails (3 ms)
2025-04-15T08:31:46.6936384Z 
2025-04-15T08:32:03.7937923Z PASS test/integration/insights/insights.api.test.ts (29.209 s)
2025-04-15T08:32:03.7943765Z   GET /insights routes work for owner and admins for server with dashboard license
2025-04-15T08:32:03.7945596Z     âœ“ Call should work and return empty summary for user owner (51 ms)
2025-04-15T08:32:03.7946529Z     âœ“ Call should work and return empty summary for user admin (20 ms)
2025-04-15T08:32:03.7947253Z     âœ“ Call should work and return empty summary for user member (13 ms)
2025-04-15T08:32:03.7948019Z   GET /insights routes return 403 for dashboard routes when summary license only
2025-04-15T08:32:03.7948920Z     âœ“ Call should work and return empty summary for user owner (15 ms)
2025-04-15T08:32:03.7949752Z     âœ“ Call should work and return empty summary for user admin (13 ms)
2025-04-15T08:32:03.7950587Z     âœ“ Call should work and return empty summary for user member (13 ms)
2025-04-15T08:32:03.7951145Z   GET /insights/by-workflow
2025-04-15T08:32:03.7951750Z     âœ“ Call should work with valid query parameters (9 ms)
2025-04-15T08:32:03.7952916Z     âœ“ Call should return internal server error with invalid pagination query parameters (24 ms)
2025-04-15T08:32:03.7954118Z     âœ“ Call should return internal server error with invalid pagination query parameters (5 ms)
2025-04-15T08:32:03.7955188Z     âœ“ Call should return bad request with invalid sortby query parameters (5 ms)
2025-04-15T08:32:03.7955663Z 
2025-04-15T08:32:05.5235353Z PASS test/integration/database/repositories/execution.repository.test.ts (26.646 s)
2025-04-15T08:32:05.5242946Z   ExecutionRepository
2025-04-15T08:32:05.5243341Z     createNewExecution
2025-04-15T08:32:05.5243980Z       âœ“ should save execution data (38 ms)
2025-04-15T08:32:05.5244677Z       âœ“ should not create execution if execution data insert fails (18 ms)
2025-04-15T08:32:05.5245112Z 
2025-04-15T08:32:10.5085423Z PASS src/webhooks/__tests__/waiting-webhooks.test.ts
2025-04-15T08:32:10.5087692Z   WaitingWebhooks
2025-04-15T08:32:10.5088759Z     âœ“ should throw NotFoundError if there is no execution to resume (31 ms)
2025-04-15T08:32:10.5089865Z     âœ“ should throw ConflictError if the execution to resume is already running (2 ms)
2025-04-15T08:32:10.5090992Z     âœ“ should throw ConflictError if the execution to resume already finished (3 ms)
2025-04-15T08:32:10.5091977Z     âœ“ should mark as test webhook when execution mode is manual (5 ms)
2025-04-15T08:32:10.5092422Z 
2025-04-15T08:32:13.8980607Z PASS src/modules/insights/__tests__/insights.module.test.ts
2025-04-15T08:32:13.8983321Z   InsightsModule
2025-04-15T08:32:13.8984418Z     backgroundProcess
2025-04-15T08:32:13.8985501Z       âœ“ should start background process if instance is main and leader (9 ms)
2025-04-15T08:32:13.8986578Z       âœ“ should not start background process if instance is main but not leader (1 ms)
2025-04-15T08:32:13.8987547Z       âœ“ should start background process on leader takeover (1 ms)
2025-04-15T08:32:13.8988346Z       âœ“ should stop background process on leader stepdown (2 ms)
2025-04-15T08:32:13.8989296Z 
2025-04-15T08:32:14.4845396Z PASS test/integration/license-metrics.repository.test.ts (27.565 s)
2025-04-15T08:32:14.4847639Z   LicenseMetricsRepository
2025-04-15T08:32:14.4850134Z     getLicenseRenewalMetrics
2025-04-15T08:32:14.4852422Z       âœ“ should return license renewal metrics (111 ms)
2025-04-15T08:32:14.4854784Z       âœ“ should handle zero execution statistics correctly (22 ms)
2025-04-15T08:32:14.4856477Z 
2025-04-15T08:32:17.1529978Z PASS src/evaluation.ee/test-runner/__tests__/create-pin-data.ee.test.ts
2025-04-15T08:32:17.1530894Z   createPinData
2025-04-15T08:32:17.1531821Z     âœ“ should create pin data from past execution data (7 ms)
2025-04-15T08:32:17.1532919Z     âœ“ should not create pin data for non-existing mocked nodes (1 ms)
2025-04-15T08:32:17.1533792Z     âœ“ should create pin data for all mocked nodes (1 ms)
2025-04-15T08:32:17.1534616Z     âœ“ should return empty object if no mocked nodes are provided
2025-04-15T08:32:17.1535591Z     âœ“ should create pin data for all mocked nodes with renamed nodes
2025-04-15T08:32:17.1536065Z 
2025-04-15T08:32:21.2119229Z PASS src/controllers/__tests__/auth.controller.test.ts
2025-04-15T08:32:21.2119816Z   AuthController
2025-04-15T08:32:21.2120553Z     login
2025-04-15T08:32:21.2121489Z       âœ“ should not validate email in "emailOrLdapLoginId" if LDAP is enabled (7 ms)
2025-04-15T08:32:21.2121908Z 
2025-04-15T08:32:23.5737669Z PASS src/concurrency/__tests__/concurrency-queue.test.ts
2025-04-15T08:32:23.5738408Z   ConcurrencyQueue
2025-04-15T08:32:23.5739141Z     âœ“ should limit concurrency (10 ms)
2025-04-15T08:32:23.5740106Z     âœ“ should debounce emitting of the `concurrency-check` event (1 ms)
2025-04-15T08:32:23.5741018Z 
2025-04-15T08:32:34.0108023Z PASS test/integration/workflows/workflow.service.test.ts (30.029 s)
2025-04-15T08:32:34.0110653Z   update()
2025-04-15T08:32:34.0113936Z     âœ“ should remove and re-add to active workflows on `active: true` payload (77 ms)
2025-04-15T08:32:34.0118934Z     âœ“ should remove from active workflows on `active: false` payload (29 ms)
2025-04-15T08:32:34.0119409Z 
2025-04-15T08:32:37.1065139Z PASS src/task-runners/task-broker/auth/__tests__/task-broker-auth.service.test.ts
2025-04-15T08:32:37.1066309Z   TaskBrokerAuthService
2025-04-15T08:32:37.1069033Z     isValidAuthToken
2025-04-15T08:32:37.1070824Z       âœ“ should be valid for the configured token (5 ms)
2025-04-15T08:32:37.1071545Z       âœ“ should be invalid for anything else (1 ms)
2025-04-15T08:32:37.1072029Z     createGrantToken
2025-04-15T08:32:37.1072538Z       âœ“ should generate a random token (2 ms)
2025-04-15T08:32:37.1073423Z       âœ“ should store the generated token in cache (1 ms)
2025-04-15T08:32:37.1073891Z     tryConsumeGrantToken
2025-04-15T08:32:37.1074508Z       âœ“ should return false for an invalid grant token (1 ms)
2025-04-15T08:32:37.1075208Z       âœ“ should return true for a valid grant token (1 ms)
2025-04-15T08:32:37.1075953Z       âœ“ should return false for a already used grant token (1 ms)
2025-04-15T08:32:37.1077090Z       âœ“ should return false for an expired grant token (310 ms)
2025-04-15T08:32:37.1077476Z 
2025-04-15T08:32:44.8137929Z PASS test/integration/commands/update/workflow.test.ts (30.685 s)
2025-04-15T08:32:44.8139149Z   âœ“ update:workflow can activate all workflows (64 ms)
2025-04-15T08:32:44.8139939Z   âœ“ update:workflow can deactivate all workflows (17 ms)
2025-04-15T08:32:44.8140763Z   âœ“ update:workflow can activate a specific workflow (29 ms)
2025-04-15T08:32:44.8141612Z   âœ“ update:workflow can deactivate a specific workflow (14 ms)
2025-04-15T08:32:44.8142038Z 
2025-04-15T08:32:47.6326858Z PASS src/external-secrets.ee/providers/__tests__/gcp-secrets-manager.test.ts
2025-04-15T08:32:47.6373562Z   GCP Secrets Manager
2025-04-15T08:32:47.6377035Z     âœ“ should update cached secrets (9 ms)
2025-04-15T08:32:47.6379938Z 
2025-04-15T08:32:52.2102460Z PASS src/credentials/__tests__/credentials.controller.test.ts
2025-04-15T08:32:52.2103334Z   CredentialsController
2025-04-15T08:32:52.2103796Z     createCredentials
2025-04-15T08:32:52.2104704Z       âœ“ should create new credentials and emit "credentials-created" (6 ms)
2025-04-15T08:32:52.2105168Z 
2025-04-15T08:32:54.9983509Z PASS test/integration/environments/source-control.api.test.ts (31.243 s)
2025-04-15T08:32:54.9984396Z   GET /sourceControl/preferences
2025-04-15T08:32:54.9985283Z     âœ“ should return Source Control preferences (35 ms)
2025-04-15T08:32:54.9987903Z     âœ“ should return repo sync status (15 ms)
2025-04-15T08:32:54.9989200Z     âœ“ refreshing key pairsshould return new rsa key (1420 ms)
2025-04-15T08:32:54.9991525Z 
2025-04-15T08:32:56.2787727Z PASS src/scaling/__tests__/job-processor.service.test.ts
2025-04-15T08:32:56.2788903Z   JobProcessor
2025-04-15T08:32:56.2790196Z     âœ“ should refrain from processing a crashed execution (7 ms)
2025-04-15T08:32:56.2791660Z     âœ“ should use manualExecutionService to process a job in "manual" mode (13 ms)
2025-04-15T08:32:56.2793329Z     âœ“ should use manualExecutionService to process a job in "evaluation" mode (2 ms)
2025-04-15T08:32:56.2883675Z 
2025-04-15T08:32:57.8135890Z PASS src/collaboration/__tests__/collaboration.state.test.ts
2025-04-15T08:32:57.8138945Z   CollaborationState
2025-04-15T08:32:57.8140058Z     addCollaborator
2025-04-15T08:32:57.8143052Z       âœ“ should add workflow user with correct cache key and value (9 ms)
2025-04-15T08:32:57.8143716Z     removeCollaborator
2025-04-15T08:32:57.8144432Z       âœ“ should remove workflow user with correct cache key (1 ms)
2025-04-15T08:32:57.8144987Z     getCollaborators
2025-04-15T08:32:57.8163715Z       âœ“ should get workflows with correct cache key (1 ms)
2025-04-15T08:32:57.8164610Z       âœ“ should get workflow users that are not expired (9 ms)
2025-04-15T08:32:57.8166555Z 
2025-04-15T08:32:59.2295657Z PASS src/decorators/__tests__/on-shutdown.test.ts
2025-04-15T08:32:59.2300665Z   OnShutdown
2025-04-15T08:32:59.2302131Z     âœ“ should register a methods that is decorated with OnShutdown (8 ms)
2025-04-15T08:32:59.2304748Z     âœ“ should register multiple methods in the same class (10 ms)
2025-04-15T08:32:59.2308722Z     âœ“ should use the given priority (1 ms)
2025-04-15T08:32:59.2311252Z     âœ“ should throw an error if the decorated member is not a function (14 ms)
2025-04-15T08:32:59.2313986Z     âœ“ should throw if the priority is invalid (6 ms)
2025-04-15T08:32:59.2315978Z 
2025-04-15T08:33:00.3260427Z PASS src/evaluation.ee/test-runner/__tests__/evaluation-metrics.ee.test.ts
2025-04-15T08:33:00.3313425Z   EvaluationMetrics
2025-04-15T08:33:00.3315041Z     âœ“ should aggregate metrics correctly (7 ms)
2025-04-15T08:33:00.3316088Z     âœ“ should throw when metric value is not number (14 ms)
2025-04-15T08:33:00.3320465Z     âœ“ should handle empty metrics
2025-04-15T08:33:00.3325066Z     âœ“ should handle empty testMetrics (1 ms)
2025-04-15T08:33:00.3329532Z     âœ“ should ignore non-relevant values
2025-04-15T08:33:00.3334662Z     âœ“ should report info on added metrics (2 ms)
2025-04-15T08:33:00.3335802Z 
2025-04-15T08:33:05.0454786Z PASS test/integration/database/repositories/workflow.repository.test.ts (27.702 s)
2025-04-15T08:33:05.0456046Z   WorkflowRepository
2025-04-15T08:33:05.0456385Z     activateAll
2025-04-15T08:33:05.0457096Z       âœ“ should activate all workflows (107 ms)
2025-04-15T08:33:05.0457596Z     deactivateAll
2025-04-15T08:33:05.0458121Z       âœ“ should deactivate all workflows (20 ms)
2025-04-15T08:33:05.0458566Z     getActiveIds
2025-04-15T08:33:05.0459196Z       âœ“ should return all active workflow IDs when invoked without maxResults (29 ms)
2025-04-15T08:33:05.0460291Z       âœ“ should return a capped number of active workflow IDs when invoked with maxResults (18 ms)
2025-04-15T08:33:05.0460866Z 
2025-04-15T08:33:05.2185305Z PASS src/workflows/__tests__/workflows.controller.test.ts
2025-04-15T08:33:05.2185917Z   WorkflowsController
2025-04-15T08:33:05.2186262Z     getFromUrl
2025-04-15T08:33:05.2186622Z       should return workflow data
2025-04-15T08:33:05.2187452Z         âœ“ when the URL points to a valid JSON file (7 ms)
2025-04-15T08:33:05.2188034Z       should throw a BadRequestError
2025-04-15T08:33:05.2188719Z         âœ“ when the URL does not point to a valid JSON file (37 ms)
2025-04-15T08:33:05.2189483Z         âœ“ when the data is not a valid n8n workflow JSON (1 ms)
2025-04-15T08:33:05.2190599Z         âœ“ when the data is missing required fields (8 ms)
2025-04-15T08:33:05.2191021Z 
2025-04-15T08:33:07.6558169Z PASS src/task-runners/task-broker/__tests__/task-broker-ws-server.test.ts
2025-04-15T08:33:07.6561824Z   TaskBrokerWsServer
2025-04-15T08:33:07.6563574Z     removeConnection
2025-04-15T08:33:07.6565956Z       âœ“ should close with 1000 status code by default (6 ms)
2025-04-15T08:33:07.6573112Z     heartbeat timer
2025-04-15T08:33:07.6573671Z       âœ“ should set up heartbeat timer on server start (1 ms)
2025-04-15T08:33:07.6574336Z       âœ“ should clear heartbeat timer on server stop (1 ms)
2025-04-15T08:33:07.6574769Z     sendMessage
2025-04-15T08:33:07.6575352Z       âœ“ should work with a message containing circular references (1 ms)
2025-04-15T08:33:07.6575804Z 
2025-04-15T08:33:10.3846078Z PASS src/metrics/__tests__/license-metrics.service.test.ts
2025-04-15T08:33:10.3846698Z   LicenseMetricsService
2025-04-15T08:33:10.3847059Z     collectPassthroughData
2025-04-15T08:33:10.3847930Z       âœ“ should return an object with active workflow IDs (7 ms)
2025-04-15T08:33:10.3848450Z     collectUsageMetrics
2025-04-15T08:33:10.3849061Z       âœ“ should return an array of expected usage metrics (1 ms)
2025-04-15T08:33:10.3849431Z 
2025-04-15T08:33:29.1515891Z PASS test/integration/workflow-tag-mapping.repository.integration.test.ts (29.664 s)
2025-04-15T08:33:29.1516757Z   WorkflowTagMappingRepository
2025-04-15T08:33:29.1517172Z     overwriteTaggings
2025-04-15T08:33:29.1517929Z       âœ“ should overwrite taggings in a workflow (44 ms)
2025-04-15T08:33:29.1518652Z       âœ“ should delete taggings if no tags are provided (14 ms)
2025-04-15T08:33:29.1519030Z 
2025-04-15T08:33:31.5050551Z PASS src/evaluation.ee/test-runner/__tests__/format-test-case-execution-input-data.ee.test.ts
2025-04-15T08:33:31.5051610Z   formatTestCaseExecutionInputData
2025-04-15T08:33:31.5052650Z     âœ“ should format the test case execution input data correctly (12 ms)
2025-04-15T08:33:31.5053329Z 
2025-04-15T08:33:34.4367252Z PASS src/posthog/__tests__/posthog.test.ts
2025-04-15T08:33:34.4377035Z   PostHog
2025-04-15T08:33:34.4377742Z     âœ“ inits PostHog correctly (9 ms)
2025-04-15T08:33:34.4378540Z     âœ“ does not initialize or track if diagnostics are not enabled (1 ms)
2025-04-15T08:33:34.4379270Z     âœ“ captures PostHog events (2 ms)
2025-04-15T08:33:34.4379817Z     âœ“ gets feature flags (8 ms)
2025-04-15T08:33:34.4380088Z 
2025-04-15T08:33:36.8278021Z PASS test/integration/debug.controller.test.ts (31.324 s)
2025-04-15T08:33:36.8283772Z   DebugController
2025-04-15T08:33:36.8284189Z     GET /debug/multi-main-setup
2025-04-15T08:33:36.8285063Z       âœ“ should return multi-main setup details (33 ms)
2025-04-15T08:33:36.8285462Z 
2025-04-15T08:33:39.2443345Z PASS src/task-runners/__tests__/task-runner-process-restart-loop-detector.test.ts
2025-04-15T08:33:39.2444873Z   TaskRunnerProcessRestartLoopDetector
2025-04-15T08:33:39.2450251Z     âœ“ should detect a restart loop if process exits 5 times within 5s (7 ms)
2025-04-15T08:33:39.2451409Z     âœ“ should not detect a restart loop if process exits less than 5 times within 5s (3 ms)
2025-04-15T08:33:39.2454426Z 
2025-04-15T08:33:42.7483658Z PASS test/integration/eventbus.test.ts (32.092 s)
2025-04-15T08:33:42.7485904Z   GET /eventbus/destination
2025-04-15T08:33:42.7489601Z     âœ“ should fail due to missing authentication (28 ms)
2025-04-15T08:33:42.7492004Z     âœ“ should fail due to missing license when authenticated (16 ms)
2025-04-15T08:33:42.7492565Z   POST /eventbus/destination
2025-04-15T08:33:42.7493331Z     âœ“ should fail due to missing authentication (4 ms)
2025-04-15T08:33:42.7494085Z     âœ“ should fail due to missing license when authenticated (9 ms)
2025-04-15T08:33:42.7494645Z   DELETE /eventbus/destination
2025-04-15T08:33:42.7495259Z     âœ“ should fail due to missing authentication (4 ms)
2025-04-15T08:33:42.7495981Z     âœ“ should fail due to missing license when authenticated (11 ms)
2025-04-15T08:33:42.7496372Z 
2025-04-15T08:33:45.8529986Z PASS src/sso.ee/saml/routes/__tests__/saml.controller.ee.test.ts
2025-04-15T08:33:45.8531212Z   Test views
2025-04-15T08:33:45.8533527Z     âœ“ Should render success with template (6 ms)
2025-04-15T08:33:45.8534843Z     âœ“ Should render failure with template (1 ms)
2025-04-15T08:33:45.8535451Z     âœ“ Should render error with template
2025-04-15T08:33:45.8535760Z 
2025-04-15T08:33:48.3790929Z PASS src/environments.ee/source-control/__tests__/source-control-git.service.test.ts
2025-04-15T08:33:48.3793670Z   SourceControlGitService
2025-04-15T08:33:48.3794050Z     getBranches
2025-04-15T08:33:48.3794772Z       âœ“ should support branch names containing slashes (5 ms)
2025-04-15T08:33:48.3795267Z     initRepository
2025-04-15T08:33:48.3795679Z       when local repo is set up after remote is ready
2025-04-15T08:33:48.3796301Z         âœ“ should track remote (2 ms)
2025-04-15T08:33:48.3796575Z 
2025-04-15T08:33:50.5866345Z PASS src/task-runners/__tests__/sliding-window-signal.test.ts
2025-04-15T08:33:50.5868200Z   SlidingWindowSignal
2025-04-15T08:33:50.5869333Z     âœ“ should return the last signal if within window size (7 ms)
2025-04-15T08:33:50.5870263Z     âœ“ should return null if there is no signal within the window (3 ms)
2025-04-15T08:33:50.5871212Z     âœ“ should return null if "exit" event is not emitted before timeout (1 ms)
2025-04-15T08:33:50.5872198Z     âœ“ should return the signal emitted on "exit" event before timeout (1 ms)
2025-04-15T08:33:50.5872661Z 
2025-04-15T08:33:52.9610265Z PASS src/services/cache/__tests__/cache-mock.service.test.ts
2025-04-15T08:33:52.9611806Z   CacheService (Mock)
2025-04-15T08:33:52.9612661Z     should prevent use of empty keys
2025-04-15T08:33:52.9659763Z       âœ“ get (8 ms)
2025-04-15T08:33:52.9660205Z       âœ“ getMany (1 ms)
2025-04-15T08:33:52.9660593Z       âœ“ set (2 ms)
2025-04-15T08:33:52.9661003Z       âœ“ setMany (2 ms)
2025-04-15T08:33:52.9661395Z       âœ“ delete
2025-04-15T08:33:52.9661724Z       âœ“ deleteMany
2025-04-15T08:33:52.9661913Z 
2025-04-15T08:34:04.4823540Z PASS src/modules/insights/database/entities/__tests__/insights-raw.test.ts (29.817 s)
2025-04-15T08:34:04.4824358Z   Insights Raw Entity
2025-04-15T08:34:04.4825256Z     âœ“ `success` can be serialized and deserialized correctly (9 ms)
2025-04-15T08:34:04.4826133Z     âœ“ `failure` can be serialized and deserialized correctly (1 ms)
2025-04-15T08:34:04.4827013Z     âœ“ `runtime_ms` can be serialized and deserialized correctly (1 ms)
2025-04-15T08:34:04.4827942Z     âœ“ `time_saved_min` can be serialized and deserialized correctly (1 ms)
2025-04-15T08:34:04.4828869Z     âœ“ `timestamp` can be serialized and deserialized correctly (2 ms)
2025-04-15T08:34:04.4829664Z     âœ“ timestamp uses the correct default value (67 ms)
2025-04-15T08:34:04.4830023Z 
2025-04-15T08:34:06.9567462Z PASS src/services/__tests__/jwt.service.test.ts
2025-04-15T08:34:06.9570479Z   JwtService
2025-04-15T08:34:06.9572545Z     secret initialization
2025-04-15T08:34:06.9577437Z       âœ“ should read the secret from config, when set (7 ms)
2025-04-15T08:34:06.9578435Z       âœ“ should derive the secret from encryption key when not set in config (1 ms)
2025-04-15T08:34:06.9579049Z     with a secret set
2025-04-15T08:34:06.9579443Z       âœ“ should sign (3 ms)
2025-04-15T08:34:06.9579972Z       âœ“ should decode and verify payload (2 ms)
2025-04-15T08:34:06.9580671Z       âœ“ should throw an error on verify if the token is expired (9 ms)
2025-04-15T08:34:06.9581025Z 
2025-04-15T08:34:08.9080559Z PASS test/integration/security-audit/filesystem-risk-reporter.test.ts (29.437 s)
2025-04-15T08:34:08.9090608Z   âœ“ should report filesystem interaction nodes (90 ms)
2025-04-15T08:34:08.9091559Z   âœ“ should not report non-filesystem-interaction node (12 ms)
2025-04-15T08:34:08.9091997Z 
2025-04-15T08:34:09.1862884Z PASS src/external-secrets.ee/providers/__tests__/azure-key-vault.test.ts
2025-04-15T08:34:09.1864297Z   AzureKeyVault
2025-04-15T08:34:09.1865424Z     âœ“ should update cached secrets (121 ms)
2025-04-15T08:34:09.1865999Z 
2025-04-15T08:34:11.7134675Z PASS src/executions/__tests__/execution-data.service.test.ts
2025-04-15T08:34:11.7136526Z   ExecutionDataService
2025-04-15T08:34:11.7138683Z     generateFailedExecutionFromError
2025-04-15T08:34:11.7144336Z       âœ“ should generate a failed execution with error details (17 ms)
2025-04-15T08:34:11.7149725Z       âœ“ should generate a failed execution without node details if node is undefined (1 ms)
2025-04-15T08:34:11.7151781Z 
2025-04-15T08:34:11.9880521Z PASS src/task-runners/task-broker/__tests__/task-broker-server.test.ts
2025-04-15T08:34:11.9898372Z   TaskBrokerServer
2025-04-15T08:34:11.9898765Z     handleUpgradeRequest
2025-04-15T08:34:11.9899731Z       âœ“ should close WebSocket when response status code is > 200 (11 ms)
2025-04-15T08:34:11.9900715Z       âœ“ should not close WebSocket when response status code is 200 (2 ms)
2025-04-15T08:34:11.9905394Z 
2025-04-15T08:34:14.3401206Z PASS src/task-runners/errors/__tests__/task-runner-disconnected-error.test.ts
2025-04-15T08:34:14.3402371Z   TaskRunnerDisconnectedError
2025-04-15T08:34:14.3403716Z     âœ“ should have the correct default error message (6 ms)
2025-04-15T08:34:14.3404695Z     âœ“ should have the error level set to "error"
2025-04-15T08:34:14.3433979Z     âœ“ should set the correct description for non-cloud deployments (1 ms)
2025-04-15T08:34:14.3435169Z     âœ“ should set the correct description for cloud deployments (1 ms)
2025-04-15T08:34:14.3435824Z 
2025-04-15T08:34:15.0331376Z PASS src/databases/repositories/__tests__/workflow-statistics.test.ts
2025-04-15T08:34:15.0332117Z   insertWorkflowStatistics
2025-04-15T08:34:15.0333227Z     âœ“ Successfully inserts data when it is not yet present (8 ms)
2025-04-15T08:34:15.0334004Z     âœ“ Does not insert when data is present (1 ms)
2025-04-15T08:34:15.0334667Z     âœ“ throws an error when insertion fails (1 ms)
2025-04-15T08:34:15.0335060Z 
2025-04-15T08:34:16.8545946Z PASS src/modules/__tests__/modules.config.test.ts
2025-04-15T08:34:16.8546871Z   ModulesConfig
2025-04-15T08:34:16.8548125Z     âœ“ should initialize with insights modules if no environment variable is set (8 ms)
2025-04-15T08:34:16.8549511Z     âœ“ should parse valid module names from environment variable (1 ms)
2025-04-15T08:34:16.8550633Z     âœ“ should disable valid module names from environment variable (1 ms)
2025-04-15T08:34:16.8551726Z     âœ“ should throw UnexpectedError for invalid module names (29 ms)
2025-04-15T08:34:16.8553264Z     âœ“ should throw UnexpectedError if any module is both enabled and disabled (1 ms)
2025-04-15T08:34:16.8554563Z     âœ“ should throw UnexpectedError if any enabled module name is invalid (1 ms)
2025-04-15T08:34:16.8555931Z     âœ“ should throw UnexpectedError if any disabled module name is invalid (1 ms)
2025-04-15T08:34:16.8556664Z 
2025-04-15T08:34:17.6079096Z PASS src/__tests__/utils.test.ts
2025-04-15T08:34:17.6080946Z   shouldAssignExecuteMethod
2025-04-15T08:34:17.6086225Z     âœ“ should return true when node has no execute, poll, trigger, webhook (unless declarative), or methods (6 ms)
2025-04-15T08:34:17.6087145Z     âœ“ should return false when node has execute (1 ms)
2025-04-15T08:34:17.6087780Z     âœ“ should return false when node has poll
2025-04-15T08:34:17.6088433Z     âœ“ should return false when node has trigger
2025-04-15T08:34:17.6089159Z     âœ“ should return false when node has webhook and is not declarative
2025-04-15T08:34:17.6090009Z     âœ“ should return true when node has webhook but is declarative (1 ms)
2025-04-15T08:34:17.6090712Z     âœ“ should return false when node has methods
2025-04-15T08:34:17.6091020Z 
2025-04-15T08:34:19.9749326Z PASS src/sso.ee/saml/__tests__/saml-helpers.test.ts
2025-04-15T08:34:19.9750260Z   sso/saml/samlHelpers
2025-04-15T08:34:19.9765008Z     updateUserFromSamlAttributes
2025-04-15T08:34:19.9766969Z       âœ“ does not user `Repository.update`, but `Repository.save` instead (6 ms)
2025-04-15T08:34:19.9768294Z 
2025-04-15T08:34:23.2520159Z PASS test/integration/task-runners/task-runner-module.external.test.ts
2025-04-15T08:34:23.2530186Z   TaskRunnerModule in external mode
2025-04-15T08:34:23.2530662Z     start
2025-04-15T08:34:23.2531923Z       âœ“ should throw if the task runner is disabled (18 ms)
2025-04-15T08:34:23.2533075Z       âœ“ should throw if auth token is missing (11 ms)
2025-04-15T08:34:23.2533791Z       âœ“ should start the task runner (398 ms)
2025-04-15T08:34:23.2534543Z       âœ“ should use DefaultTaskRunnerDisconnectAnalyzer (1 ms)
2025-04-15T08:34:23.2534986Z 
2025-04-15T08:34:23.5453991Z PASS test/integration/services/workflow-static-data.service.test.ts (30.358 s)
2025-04-15T08:34:23.5454969Z   WorkflowStaticDataService
2025-04-15T08:34:23.5456096Z     âœ“ should not change workflow updatedAt when calling saveStaticData (26 ms)
2025-04-15T08:34:23.5457120Z     âœ“ should not change workflow updatedAt when calling saveStaticDataById (5 ms)
2025-04-15T08:34:23.5457594Z 
2025-04-15T08:34:25.7840857Z PASS src/modules/insights/__tests__/insights.pre-init.test.ts
2025-04-15T08:34:25.7853100Z   InsightsModulePreInit
2025-04-15T08:34:25.7866463Z     âœ“ should return false if instance type is not "main" (5 ms)
2025-04-15T08:34:25.7867379Z     âœ“ should return false if database type is "sqlite" and poolSize is < 1 (1 ms)
2025-04-15T08:34:25.7868277Z     âœ“ should return true if instance type is "main" and database is not sqlite
2025-04-15T08:34:25.7869145Z     âœ“ should return true if instance type is "main" and database is not sqlite
2025-04-15T08:34:25.7870064Z     âœ“ should return true if instance type is "main" and database is not sqlite (1 ms)
2025-04-15T08:34:25.7870979Z     âœ“ should return true if instance type is "main" and sqlite poolSize is >= 1
2025-04-15T08:34:25.7871407Z 
2025-04-15T08:34:26.8041927Z PASS src/controllers/__tests__/translation.controller.test.ts
2025-04-15T08:34:26.8045147Z   TranslationController
2025-04-15T08:34:26.8045580Z     getCredentialTranslation
2025-04-15T08:34:26.8046480Z       âœ“ should throw 400 on invalid credential types (20 ms)
2025-04-15T08:34:26.8047470Z       âœ“ should return translation json on valid credential types (2 ms)
2025-04-15T08:34:26.8047968Z 
2025-04-15T08:34:29.3813037Z PASS src/errors/response-errors/__tests__/webhook-not-found.error.test.ts
2025-04-15T08:34:29.3817017Z   utils test webhookNotFoundErrorMessage 
2025-04-15T08:34:29.3820938Z     âœ“ should return a message with path and method (7 ms)
2025-04-15T08:34:29.3825221Z     âœ“ should return a message with path
2025-04-15T08:34:29.3827555Z     âœ“ should return a message with method with tip (1 ms)
2025-04-15T08:34:29.3845351Z     âœ“ should return a message with method with tip (1 ms)
2025-04-15T08:34:29.3846255Z     âœ“ should return a message with method with tip (1 ms)
2025-04-15T08:34:29.3846813Z 
2025-04-15T08:34:51.4721207Z PASS test/integration/auth.mw.test.ts (33.678 s)
2025-04-15T08:34:51.4723668Z   Auth Middleware
2025-04-15T08:34:51.4725600Z     Routes requiring Authentication
2025-04-15T08:34:51.4728585Z       âœ“ patch /me should return 401 Unauthorized if no cookie (26 ms)
2025-04-15T08:34:51.4731036Z       âœ“ patch /me/password should return 401 Unauthorized if no cookie (4 ms)
2025-04-15T08:34:51.4735442Z       âœ“ post /me/survey should return 401 Unauthorized if no cookie (3 ms)
2025-04-15T08:34:51.4739889Z       âœ“ post /invitations should return 401 Unauthorized if no cookie (4 ms)
2025-04-15T08:34:51.4740888Z       âœ“ delete /users/123 should return 401 Unauthorized if no cookie (4 ms)
2025-04-15T08:34:51.4741538Z     Routes requiring Authorization
2025-04-15T08:34:51.4742316Z       âœ“ post /invitations should return 403 Forbidden for member (14 ms)
2025-04-15T08:34:51.4743482Z       âœ“ delete /users/123 should return 403 Forbidden for member (8 ms)
2025-04-15T08:34:51.4743908Z 
2025-04-15T08:34:54.1049958Z PASS src/scaling/__tests__/subscriber.service.test.ts
2025-04-15T08:34:54.1051416Z   Subscriber
2025-04-15T08:34:54.1052267Z     constructor
2025-04-15T08:34:54.1058527Z       âœ“ should init Redis client in scaling mode (9 ms)
2025-04-15T08:34:54.1059330Z       âœ“ should not init Redis client in regular mode
2025-04-15T08:34:54.1059780Z     shutdown
2025-04-15T08:34:54.1060276Z       âœ“ should disconnect Redis client (2 ms)
2025-04-15T08:34:54.1060725Z     subscribe
2025-04-15T08:34:54.1061681Z       âœ“ should subscribe to pubsub channel (1 ms)
2025-04-15T08:34:54.1062077Z 
2025-04-15T08:34:56.9978681Z PASS src/databases/repositories/__tests__/credentials.repository.test.ts
2025-04-15T08:34:57.0039280Z   findMany
2025-04-15T08:34:57.0040358Z     âœ“ return `data` property if `includeData:true` and select is using the record syntax (5 ms)
2025-04-15T08:34:57.0041487Z     âœ“ return `data` property if `includeData:true` and select is using the record syntax
2025-04-15T08:34:57.0042020Z 
2025-04-15T08:34:57.6519456Z PASS test/integration/user.repository.test.ts (31.63 s)
2025-04-15T08:34:57.6520168Z   UserRepository
2025-04-15T08:34:57.6520535Z     countUsersByRole()
2025-04-15T08:34:57.6521415Z       âœ“ should return the number of users in each role (68 ms)
2025-04-15T08:34:57.6522062Z     createUserWithProject()
2025-04-15T08:34:57.6522944Z       âœ“ should create personal project for a user (16 ms)
2025-04-15T08:34:57.6523359Z 
2025-04-15T08:34:59.1637036Z PASS src/services/__tests__/url.service.test.ts
2025-04-15T08:34:59.1659298Z   UrlService
2025-04-15T08:34:59.1659784Z     getInstanceBaseUrl
2025-04-15T08:34:59.1660543Z       âœ“ should set URL from N8N_EDITOR_BASE_URL (8 ms)
2025-04-15T08:34:59.1661164Z       âœ“ should set URL from WEBHOOK_URL (2 ms)
2025-04-15T08:34:59.1661900Z       âœ“ should trim quotes when setting URL from N8N_EDITOR_BASE_URL (1 ms)
2025-04-15T08:34:59.1662924Z       âœ“ should trim quotes when setting URL from WEBHOOK_URL (1 ms)
2025-04-15T08:34:59.1663332Z 
2025-04-15T08:35:01.1007159Z PASS test/integration/task-runners/task-runner-server.test.ts
2025-04-15T08:35:01.1011913Z   TaskBrokerServer
2025-04-15T08:35:01.1016419Z     /healthz
2025-04-15T08:35:01.1020769Z       âœ“ should return 200 (32 ms)
2025-04-15T08:35:01.1025226Z     /runners/_ws
2025-04-15T08:35:01.1029762Z       âœ“ should return 429 when too many requests are made (29 ms)
2025-04-15T08:35:01.1035133Z     /runners/auth
2025-04-15T08:35:01.1039565Z       âœ“ should return 429 when too many requests are made (36 ms)
2025-04-15T08:35:01.1043981Z 
2025-04-15T08:35:02.0914454Z PASS test/integration/task-runners/task-broker-server.test.ts
2025-04-15T08:35:02.0915301Z   TaskBrokerServer
2025-04-15T08:35:02.0915625Z     /healthz
2025-04-15T08:35:02.0916288Z       âœ“ should return 200 (24 ms)
2025-04-15T08:35:02.0916670Z     /runners/_ws
2025-04-15T08:35:02.0917249Z       âœ“ should return 429 when too many requests are made (26 ms)
2025-04-15T08:35:02.0917755Z     /runners/auth
2025-04-15T08:35:02.0918325Z       âœ“ should return 429 when too many requests are made (23 ms)
2025-04-15T08:35:02.0918704Z 
2025-04-15T08:35:02.9841388Z PASS test/integration/services/execution-metadata.service.test.ts (33.408 s)
2025-04-15T08:35:02.9842294Z   ProjectService
2025-04-15T08:35:02.9843567Z     save
2025-04-15T08:35:02.9844599Z       âœ“ should deduplicate entries by exeuctionId and key, keeping the latest one (44 ms)
2025-04-15T08:35:02.9845196Z 
2025-04-15T08:35:06.3452602Z PASS src/workflows/workflow-history.ee/__tests__/workflow-history-helper.ee.test.ts
2025-04-15T08:35:06.3455750Z   getWorkflowHistoryPruneTime
2025-04-15T08:35:06.3458425Z     âœ“ should return -1 (infinite) if config and license are -1 (6 ms)
2025-04-15T08:35:06.3459560Z     âœ“ should return config time if license is infinite and config is not (1 ms)
2025-04-15T08:35:06.3467955Z     âœ“ should return license time if config is infinite and license is not (1 ms)
2025-04-15T08:35:06.3468910Z     âœ“ should return lowest of config and license time if both are not -1
2025-04-15T08:35:06.3469384Z 
2025-04-15T08:35:06.7606104Z PASS src/controllers/__tests__/users.controller.test.ts
2025-04-15T08:35:06.7608620Z   UsersController
2025-04-15T08:35:06.7609414Z     changeGlobalRole
2025-04-15T08:35:06.7610371Z       âœ“ should emit event user-changed-role (6 ms)
2025-04-15T08:35:06.7611339Z 
2025-04-15T08:35:09.7496166Z PASS src/services/__tests__/password.utility.test.ts
2025-04-15T08:35:09.7498662Z   PasswordUtility
2025-04-15T08:35:09.7499011Z     hash()
2025-04-15T08:35:09.7500155Z       âœ“ should hash a plaintext password (134 ms)
2025-04-15T08:35:09.7500649Z     compare()
2025-04-15T08:35:09.7502979Z       âœ“ should return true on match (204 ms)
2025-04-15T08:35:09.7503602Z       âœ“ should return false on mismatch (200 ms)
2025-04-15T08:35:09.7504137Z 
2025-04-15T08:35:14.0416977Z PASS src/services/__tests__/orchestration.service.test.ts
2025-04-15T08:35:14.0417808Z   Orchestration Service
2025-04-15T08:35:14.0418668Z     âœ“ should initialize (5 ms)
2025-04-15T08:35:14.0419093Z 
2025-04-15T08:35:17.2541900Z PASS src/ldap.ee/__tests__/helpers.test.ts
2025-04-15T08:35:17.2555425Z   Ldap/helpers
2025-04-15T08:35:17.2555808Z     updateLdapUserOnLocalDb
2025-04-15T08:35:17.2557197Z       âœ“ does not use `Repository.update`, but `Repository.save` instead (7 ms)
2025-04-15T08:35:17.2559327Z 
2025-04-15T08:35:19.5082524Z PASS src/evaluation.ee/test-runner/__tests__/get-test-run-final-result.ee.test.ts
2025-04-15T08:35:19.5087575Z   getTestRunFinalResult
2025-04-15T08:35:19.5089621Z     âœ“ should return success if all test cases are successful (7 ms)
2025-04-15T08:35:19.5092054Z     âœ“ should return error if at least one test case is errored (1 ms)
2025-04-15T08:35:19.5094918Z     âœ“ should return warning if at least one test case is warned (1 ms)
2025-04-15T08:35:19.5095717Z     âœ“ should return error if there are errors and warnings
2025-04-15T08:35:19.5096090Z 
2025-04-15T08:35:21.8552354Z PASS src/evaluation.ee/test-runner/__tests__/get-start-node.ee.test.ts
2025-04-15T08:35:21.8557284Z   getPastExecutionStartNode
2025-04-15T08:35:21.8562048Z     âœ“ should return the start node of the past execution (12 ms)
2025-04-15T08:35:21.8564976Z     âœ“ should return the start node of the past execution with multiple triggers
2025-04-15T08:35:21.8566294Z     âœ“ should return the start node of the past execution with multiple triggers - chat trigger (1 ms)
2025-04-15T08:35:21.8566888Z 
2025-04-15T08:35:33.3310993Z PASS test/integration/cta.service.test.ts (31.973 s)
2025-04-15T08:35:33.3316706Z   CtaService
2025-04-15T08:35:33.3317147Z     getBecomeCreatorCta()
2025-04-15T08:35:33.3318360Z       âœ“ should return false if user has 0 active workflows with 0 successful production executions (21 ms)
2025-04-15T08:35:33.3319739Z       âœ“ should return false if user has 2 active workflows with 5 successful production executions (31 ms)
2025-04-15T08:35:33.3321095Z       âœ“ should return false if user has 3 active workflows with 4 successful production executions (25 ms)
2025-04-15T08:35:33.3322436Z       âœ“ should return true if user has 3 active workflows with 5 successful production executions (23 ms)
2025-04-15T08:35:33.3323246Z 
2025-04-15T08:35:36.0604006Z PASS test/integration/middlewares/body-parser.test.ts
2025-04-15T08:35:36.0606449Z   bodyParser
2025-04-15T08:35:36.0609261Z     âœ“ should handle uncompressed data (38 ms)
2025-04-15T08:35:36.0611331Z     âœ“ should handle gzip data (8 ms)
2025-04-15T08:35:36.0613597Z     âœ“ should handle deflate data (6 ms)
2025-04-15T08:35:36.0615289Z 
2025-04-15T08:35:38.5371640Z PASS src/databases/entities/__tests__/user.entity.test.ts
2025-04-15T08:35:38.5376199Z   User Entity
2025-04-15T08:35:38.5376864Z     JSON.stringify
2025-04-15T08:35:38.5379052Z       âœ“ should not serialize sensitive data (6 ms)
2025-04-15T08:35:38.5380062Z     createPersonalProjectName
2025-04-15T08:35:38.5383728Z       âœ“ given fistName: Nathan, lastName: Nathaniel and email: nathan@nathaniel.n8n this gives the projectName: "Nathan Nathaniel <nathan@nathaniel.n8n>" (1 ms)
2025-04-15T08:35:38.5385674Z       âœ“ given fistName: undefined, lastName: Nathaniel and email: nathan@nathaniel.n8n this gives the projectName: "<nathan@nathaniel.n8n>"
2025-04-15T08:35:38.5387444Z       âœ“ given fistName: Nathan, lastName: undefined and email: nathan@nathaniel.n8n this gives the projectName: "<nathan@nathaniel.n8n>"
2025-04-15T08:35:38.5389205Z       âœ“ given fistName: undefined, lastName: undefined and email: nathan@nathaniel.n8n this gives the projectName: "<nathan@nathaniel.n8n>"
2025-04-15T08:35:38.5391306Z       âœ“ given fistName: undefined, lastName: undefined and email: undefined this gives the projectName: "Unnamed Project" (1 ms)
2025-04-15T08:35:38.5393124Z       âœ“ given fistName: Nathan, lastName: Nathaniel and email: undefined this gives the projectName: "Unnamed Project"
2025-04-15T08:35:38.5393840Z 
2025-04-15T08:35:39.7794212Z PASS test/integration/workflows/workflows.controller-with-active-workflow-manager.ee.test.ts (33.236 s)
2025-04-15T08:35:39.7795362Z   PUT /:workflowId/transfer
2025-04-15T08:35:39.7796571Z     âœ“ can transfer an active workflow (118 ms)
2025-04-15T08:35:39.7800912Z 
2025-04-15T08:35:41.4145927Z PASS test/integration/task-runners/task-runner-module.internal.test.ts
2025-04-15T08:35:41.4151509Z   TaskRunnerModule in internal mode
2025-04-15T08:35:41.4152378Z     start
2025-04-15T08:35:41.4153497Z       âœ“ should throw if the task runner is disabled (15 ms)
2025-04-15T08:35:41.4154449Z       âœ“ should start the task runner (463 ms)
2025-04-15T08:35:41.4155407Z       âœ“ should use InternalTaskRunnerDisconnectAnalyzer (1 ms)
2025-04-15T08:35:41.4156004Z 
2025-04-15T08:35:42.3554772Z PASS src/utils/__tests__/object-to-error.test.ts
2025-04-15T08:35:42.3555386Z   objectToError
2025-04-15T08:35:42.3555717Z     node error handling
2025-04-15T08:35:42.3556640Z       âœ“ should create `NodeOperationError` when node is found (11 ms)
2025-04-15T08:35:42.3557512Z       âœ“ should create `Error` when node is not found (2 ms)
2025-04-15T08:35:42.3557901Z 
2025-04-15T08:35:45.9174107Z PASS src/services/__tests__/credentials-tester.service.test.ts
2025-04-15T08:35:45.9175180Z   CredentialsTester
2025-04-15T08:35:45.9176849Z     âœ“ should find the OAuth2 credential test for a generic OAuth2 API credential (4 ms)
2025-04-15T08:35:45.9177623Z 
2025-04-15T08:35:50.0675058Z PASS src/task-runners/__tests__/node-process-oom-detector.test.ts
2025-04-15T08:35:50.0678159Z   NodeProcessOomDetector
2025-04-15T08:35:50.0679427Z     âœ“ should detect an out-of-memory error in a monitored process (1404 ms)
2025-04-15T08:35:50.0680889Z     âœ“ should not detect an out-of-memory error in a process that exits normally (45 ms)
2025-04-15T08:35:50.0681658Z 
2025-04-15T08:35:53.2632959Z PASS src/execution-lifecycle/shared/__tests__/shared-hook-functions.test.ts
2025-04-15T08:35:53.2637214Z   determineFinalExecutionStatus
2025-04-15T08:35:53.2642471Z     âœ“ should return "error" when resultData.error exists (2 ms)
2025-04-15T08:35:53.2645409Z     âœ“ should return "waiting" when waitTill is defined (1 ms)
2025-04-15T08:35:53.2645979Z     When waitTill is not set
2025-04-15T08:35:53.2646541Z       âœ“ should return "canceled" (6 ms)
2025-04-15T08:35:53.2647092Z       âœ“ should return "crashed"
2025-04-15T08:35:53.2647565Z       âœ“ should return "error" (1 ms)
2025-04-15T08:35:53.2648078Z       âœ“ should return "success"
2025-04-15T08:35:53.2648906Z 
2025-04-15T08:35:54.9356058Z   console.log
2025-04-15T08:35:54.9361971Z     Migration "RenameAnalyticsToInsights1741167584277" failed, error: Can't add new command when connection is in closed state
2025-04-15T08:35:54.9367408Z 
2025-04-15T08:35:54.9368719Z       at Function.log (../../node_modules/.pnpm/@n8n+typeorm@0.3.20-12_@sentry+node@8.52.1_ioredis@5.3.2_mssql@10.0.2_mysql2@3.11.0_pg@_d8e1d9c1918afe722aa00ab5be03d957/node_modules/src/platform/PlatformTools.ts:230:17)
2025-04-15T08:35:54.9369923Z 
2025-04-15T08:35:54.9676227Z FAIL src/modules/insights/database/entities/__tests__/insights-by-period.test.ts (32.879 s)
2025-04-15T08:35:54.9677127Z   Insights By Period
2025-04-15T08:35:54.9682185Z     âœ• `time_saved_min` can be serialized and deserialized correctly (5 ms)
2025-04-15T08:35:54.9690654Z     âœ• `runtime_ms` can be serialized and deserialized correctly (1 ms)
2025-04-15T08:35:54.9691565Z     âœ• `failure` can be serialized and deserialized correctly
2025-04-15T08:35:54.9693179Z     âœ• `success` can be serialized and deserialized correctly (1 ms)
2025-04-15T08:35:54.9694119Z     âœ• `hour` can be serialized and deserialized correctly
2025-04-15T08:35:54.9695746Z     âœ• `day` can be serialized and deserialized correctly
2025-04-15T08:35:54.9697325Z     âœ• `week` can be serialized and deserialized correctly
2025-04-15T08:35:54.9697903Z 
2025-04-15T08:35:54.9698792Z   â— Insights By Period â€º `time_saved_min` can be serialized and deserialized correctly
2025-04-15T08:35:54.9700903Z 
2025-04-15T08:35:54.9701214Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:35:54.9702414Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:35:54.9703452Z 
2025-04-15T08:35:54.9704272Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:35:54.9705116Z      [90m 10 |[39m
2025-04-15T08:35:54.9705844Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:35:54.9706572Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:35:54.9707295Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:35:54.9716284Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:35:54.9717466Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:35:54.9717781Z 
2025-04-15T08:35:54.9718474Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:35:54.9719216Z 
2025-04-15T08:35:54.9719869Z   â— Insights By Period â€º `runtime_ms` can be serialized and deserialized correctly
2025-04-15T08:35:54.9720428Z 
2025-04-15T08:35:54.9720712Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:35:54.9721929Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:35:54.9723036Z 
2025-04-15T08:35:54.9723862Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:35:54.9724767Z      [90m 10 |[39m
2025-04-15T08:35:54.9725481Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:35:54.9726181Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:35:54.9726915Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:35:54.9728316Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:35:54.9729396Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:35:54.9729683Z 
2025-04-15T08:35:54.9730361Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:35:54.9731480Z 
2025-04-15T08:35:54.9732120Z   â— Insights By Period â€º `failure` can be serialized and deserialized correctly
2025-04-15T08:35:54.9732653Z 
2025-04-15T08:35:54.9733142Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:35:54.9734339Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:35:54.9735211Z 
2025-04-15T08:35:54.9736443Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:35:54.9737292Z      [90m 10 |[39m
2025-04-15T08:35:54.9738003Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:35:54.9738818Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:35:54.9739587Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:35:54.9740929Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:35:54.9742029Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:35:54.9742331Z 
2025-04-15T08:35:54.9743497Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:35:54.9744264Z 
2025-04-15T08:35:54.9744877Z   â— Insights By Period â€º `success` can be serialized and deserialized correctly
2025-04-15T08:35:54.9745418Z 
2025-04-15T08:35:54.9745689Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:35:54.9746881Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:35:54.9747721Z 
2025-04-15T08:35:54.9748492Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:35:54.9749339Z      [90m 10 |[39m
2025-04-15T08:35:54.9750052Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:35:54.9750828Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:35:54.9751530Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:35:54.9753109Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:35:54.9754210Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:35:54.9754505Z 
2025-04-15T08:35:54.9755169Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:35:54.9755889Z 
2025-04-15T08:35:54.9756476Z   â— Insights By Period â€º `hour` can be serialized and deserialized correctly
2025-04-15T08:35:54.9756975Z 
2025-04-15T08:35:54.9757259Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:35:54.9758444Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:35:54.9759283Z 
2025-04-15T08:35:54.9760101Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:35:54.9760946Z      [90m 10 |[39m
2025-04-15T08:35:54.9761650Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:35:54.9762344Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:35:54.9763274Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:35:54.9764644Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:35:54.9765684Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:35:54.9765950Z 
2025-04-15T08:35:54.9766627Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:35:54.9767357Z 
2025-04-15T08:35:54.9767914Z   â— Insights By Period â€º `day` can be serialized and deserialized correctly
2025-04-15T08:35:54.9768701Z 
2025-04-15T08:35:54.9768976Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:35:54.9770202Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:35:54.9771077Z 
2025-04-15T08:35:54.9771886Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:35:54.9772943Z      [90m 10 |[39m
2025-04-15T08:35:54.9773689Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:35:54.9774451Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:35:54.9775176Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:35:54.9776522Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:35:54.9777662Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:35:54.9777971Z 
2025-04-15T08:35:54.9778637Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:35:54.9779636Z 
2025-04-15T08:35:54.9780277Z   â— Insights By Period â€º `week` can be serialized and deserialized correctly
2025-04-15T08:35:54.9780793Z 
2025-04-15T08:35:54.9781084Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:35:54.9782286Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:35:54.9783348Z 
2025-04-15T08:35:54.9784157Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:35:54.9785006Z      [90m 10 |[39m
2025-04-15T08:35:54.9785728Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:35:54.9786488Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:35:54.9787218Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:35:54.9788575Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:35:54.9789693Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:35:54.9789991Z 
2025-04-15T08:35:54.9790681Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:35:54.9791399Z 
2025-04-15T08:35:57.5391240Z PASS src/utils/__tests__/path-util.test.ts
2025-04-15T08:35:57.5393229Z   isContainedWithin
2025-04-15T08:35:57.5395141Z     âœ“ should return true when parent and child paths are the same (4 ms)
2025-04-15T08:35:57.5400159Z     âœ“ should return true for parent /some/parent/folder and child /some/parent/folder/subfolder/file.txt
2025-04-15T08:35:57.5402880Z     âœ“ should return true for parent /some/parent/folder and child /some/parent/folder/../folder/subfolder/file.txt
2025-04-15T08:35:57.5404338Z     âœ“ should return true for parent /some/parent/folder/ and child /some/parent/folder/subfolder/file.txt (1 ms)
2025-04-15T08:35:57.5405606Z     âœ“ should return true for parent /some/parent/folder and child /some/parent/folder/subfolder/
2025-04-15T08:35:57.5406751Z     âœ“ should return false for parent /some/parent/folder and child /some/other/folder/file.txt
2025-04-15T08:35:57.5407984Z     âœ“ should return false for parent /some/parent/folder and child /some/parent/folder_but_not_really (1 ms)
2025-04-15T08:35:57.5409034Z     âœ“ should return false for parent /one/path and child /another/path
2025-04-15T08:35:57.5409469Z 
2025-04-15T08:36:00.5526787Z PASS src/services/__tests__/execution-metadata.service.test.ts
2025-04-15T08:36:00.5527501Z   ExecutionMetadataService
2025-04-15T08:36:00.5528308Z     âœ“ Execution metadata is saved in a batch (9 ms)
2025-04-15T08:36:00.5534874Z 
2025-04-15T08:36:02.9401253Z PASS src/decorators/__tests__/module.test.ts
2025-04-15T08:36:02.9402323Z   registerLifecycleHooks
2025-04-15T08:36:02.9405820Z     âœ“ is called when ModuleRegistry.registerLifecycleHooks is called (7 ms)
2025-04-15T08:36:02.9406357Z 
2025-04-15T08:36:06.1844749Z PASS src/environments.ee/source-control/__tests__/source-control-preferences.service.ee.test.ts
2025-04-15T08:36:06.1853976Z   SourceControlPreferencesService
2025-04-15T08:36:06.1854985Z     âœ“ should class validate correct preferences (9 ms)
2025-04-15T08:36:06.1855398Z 
2025-04-15T08:36:17.0266402Z PASS test/integration/commands/license.cmd.test.ts (34.472 s)
2025-04-15T08:36:17.0269329Z   âœ“ license:clear invokes clear() to release any floating entitlements and deletes the license cert from the DB (29 ms)
2025-04-15T08:36:17.0270109Z 
2025-04-15T08:36:19.5017266Z PASS src/validators/__tests__/no-url.validator.test.ts
2025-04-15T08:36:19.5023982Z   NoUrl
2025-04-15T08:36:19.5025453Z     URLs
2025-04-15T08:36:19.5026139Z       âœ“ should block http://google.com (7 ms)
2025-04-15T08:36:19.5027798Z       âœ“ should block www.domain.tld (1 ms)
2025-04-15T08:36:19.5028390Z       âœ“ should block n8n.io (1 ms)
2025-04-15T08:36:19.5028645Z 
2025-04-15T08:36:21.6564701Z PASS src/config/__tests__/index.test.ts
2025-04-15T08:36:21.6567620Z   userManagement.jwtRefreshTimeoutHours
2025-04-15T08:36:21.6569015Z     âœ“ resets jwtRefreshTimeoutHours to 0 if it's greater than or equal to jwtSessionDurationHours (7 ms)
2025-04-15T08:36:21.6569799Z 
2025-04-15T08:36:25.4301230Z PASS test/integration/saml/saml-helpers.test.ts (31.948 s)
2025-04-15T08:36:25.4303470Z   sso/saml/samlHelpers
2025-04-15T08:36:25.4303873Z     createUserFromSamlAttributes
2025-04-15T08:36:25.4304627Z       âœ“ Creates personal project for user (127 ms)
2025-04-15T08:36:25.4304923Z 
2025-04-15T08:36:36.0814245Z PASS test/integration/healthcheck.controller.test.ts (29.66 s)
2025-04-15T08:36:36.0815468Z   HealthcheckController
2025-04-15T08:36:36.0816360Z     âœ“ should return ok when DB is connected and migrated (17 ms)
2025-04-15T08:36:36.0817187Z     âœ“ should return error when DB is not connected (4 ms)
2025-04-15T08:36:36.0817555Z 
2025-04-15T08:36:36.2173738Z Summary of all failing tests
2025-04-15T08:36:36.2175391Z FAIL src/modules/insights/__tests__/insights.service.test.ts
2025-04-15T08:36:36.2176536Z   â— Test suite failed to run
2025-04-15T08:36:36.2176936Z 
2025-04-15T08:36:36.2177508Z     Jest worker encountered 4 child process exceptions, exceeding retry limit
2025-04-15T08:36:36.2178135Z 
2025-04-15T08:36:36.2179183Z       at ChildProcessWorker.initialize (../../node_modules/.pnpm/jest-worker@29.6.2/node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)
2025-04-15T08:36:36.2180239Z 
2025-04-15T08:36:36.2263976Z FAIL src/modules/insights/database/entities/__tests__/insights-by-period.test.ts (32.879 s)
2025-04-15T08:36:36.2265320Z   â— Insights By Period â€º `time_saved_min` can be serialized and deserialized correctly
2025-04-15T08:36:36.2265836Z 
2025-04-15T08:36:36.2266084Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:36:36.2267221Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:36:36.2268002Z 
2025-04-15T08:36:36.2268782Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:36:36.2269580Z      [90m 10 |[39m
2025-04-15T08:36:36.2270256Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:36:36.2270942Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:36:36.2271651Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:36:36.2273133Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:36:36.2274261Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:36:36.2274545Z 
2025-04-15T08:36:36.2275675Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:36:36.2276381Z 
2025-04-15T08:36:36.2276978Z   â— Insights By Period â€º `runtime_ms` can be serialized and deserialized correctly
2025-04-15T08:36:36.2277503Z 
2025-04-15T08:36:36.2277768Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:36:36.2278913Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:36:36.2279726Z 
2025-04-15T08:36:36.2280457Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:36:36.2281244Z      [90m 10 |[39m
2025-04-15T08:36:36.2281931Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:36:36.2282577Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:36:36.2283398Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:36:36.2284639Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:36:36.2285597Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:36:36.2286101Z 
2025-04-15T08:36:36.2286749Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:36:36.2287414Z 
2025-04-15T08:36:36.2287942Z   â— Insights By Period â€º `failure` can be serialized and deserialized correctly
2025-04-15T08:36:36.2288415Z 
2025-04-15T08:36:36.2288656Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:36:36.2289803Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:36:36.2290616Z 
2025-04-15T08:36:36.2314049Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:36:36.2315195Z      [90m 10 |[39m
2025-04-15T08:36:36.2316108Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:36:36.2316999Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:36:36.2317909Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:36:36.2319419Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:36:36.2320616Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:36:36.2321101Z 
2025-04-15T08:36:36.2321960Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:36:36.2323104Z 
2025-04-15T08:36:36.2323873Z   â— Insights By Period â€º `success` can be serialized and deserialized correctly
2025-04-15T08:36:36.2324575Z 
2025-04-15T08:36:36.2325058Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:36:36.2343497Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:36:36.2353340Z 
2025-04-15T08:36:36.2357691Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:36:36.2361197Z      [90m 10 |[39m
2025-04-15T08:36:36.2362134Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:36:36.2383559Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:36:36.2384672Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:36:36.2386236Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:36:36.2387465Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:36:36.2390322Z 
2025-04-15T08:36:36.2391037Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:36:36.2392219Z 
2025-04-15T08:36:36.2392981Z   â— Insights By Period â€º `hour` can be serialized and deserialized correctly
2025-04-15T08:36:36.2393484Z 
2025-04-15T08:36:36.2393754Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:36:36.2394866Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:36:36.2396101Z 
2025-04-15T08:36:36.2396852Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:36:36.2397629Z      [90m 10 |[39m
2025-04-15T08:36:36.2398274Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:36:36.2398924Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:36:36.2399596Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:36:36.2400851Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:36:36.2401790Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:36:36.2402064Z 
2025-04-15T08:36:36.2403150Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:36:36.2403852Z 
2025-04-15T08:36:36.2404364Z   â— Insights By Period â€º `day` can be serialized and deserialized correctly
2025-04-15T08:36:36.2404816Z 
2025-04-15T08:36:36.2405069Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:36:36.2406434Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:36:36.2407205Z 
2025-04-15T08:36:36.2408653Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:36:36.2409418Z      [90m 10 |[39m
2025-04-15T08:36:36.2410211Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:36:36.2410853Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:36:36.2412157Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:36:36.2421116Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:36:36.2422106Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:36:36.2422387Z 
2025-04-15T08:36:36.2423245Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:36:36.2423950Z 
2025-04-15T08:36:36.2424504Z   â— Insights By Period â€º `week` can be serialized and deserialized correctly
2025-04-15T08:36:36.2424984Z 
2025-04-15T08:36:36.2425240Z     thrown: "Exceeded timeout of 30000 ms for a hook.
2025-04-15T08:36:36.2426375Z     Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."
2025-04-15T08:36:36.2427179Z 
2025-04-15T08:36:36.2427886Z     [0m [90m  9 |[39m [36mlet[39m insightsRawRepository[33m:[39m [33mInsightsRawRepository[39m[33m;[39m
2025-04-15T08:36:36.2430335Z      [90m 10 |[39m
2025-04-15T08:36:36.2431036Z     [31m[1m>[22m[39m[90m 11 |[39m beforeAll([36masync[39m () [33m=>[39m {
2025-04-15T08:36:36.2431694Z      [90m    |[39m [31m[1m^[22m[39m
2025-04-15T08:36:36.2432414Z      [90m 12 |[39m 	[36mawait[39m testDb[33m.[39minit()[33m;[39m
2025-04-15T08:36:36.2434014Z      [90m 13 |[39m 	insightsRawRepository [33m=[39m [33mContainer[39m[33m.[39m[36mget[39m([33mInsightsRawRepository[39m)[33m;[39m
2025-04-15T08:36:36.2434990Z      [90m 14 |[39m })[33m;[39m[0m
2025-04-15T08:36:36.2435258Z 
2025-04-15T08:36:36.2435896Z       at Object.<anonymous> (src/modules/insights/database/entities/__tests__/insights-by-period.test.ts:11:1)
2025-04-15T08:36:36.2436846Z 
2025-04-15T08:36:36.2436867Z 
2025-04-15T08:36:36.2437158Z Test Suites: 2 failed, 248 passed, 250 total
2025-04-15T08:36:36.2437767Z Tests:       7 failed, 2751 passed, 2758 total
2025-04-15T08:36:36.2438303Z Snapshots:   3 passed, 3 total
2025-04-15T08:36:36.2438704Z Time:        789.678 s
2025-04-15T08:36:36.2439073Z Ran all test suites.
2025-04-15T08:36:37.4188528Z â€‰ELIFECYCLEâ€‰ Command failed with exit code 1.
2025-04-15T08:36:37.4639542Z ##[error]Process completed with exit code 1.
2025-04-15T08:36:37.4695687Z Post job cleanup.
2025-04-15T08:36:37.5529732Z ok
2025-04-15T08:36:37.6204720Z mariadb-1  | 2025-04-15 08:23:24+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.5.28+maria~ubu2004 started.
2025-04-15T08:36:37.6205504Z mariadb-1  | 2025-04-15 08:23:24+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
2025-04-15T08:36:37.6206437Z mariadb-1  | 2025-04-15 08:23:24+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.5.28+maria~ubu2004 started.
2025-04-15T08:36:37.6207579Z mariadb-1  | 2025-04-15 08:23:24+00:00 [Note] [Entrypoint]: Initializing database files
2025-04-15T08:36:37.6208168Z mariadb-1  | 2025-04-15 08:23:25+00:00 [Note] [Entrypoint]: Database files initialized
2025-04-15T08:36:37.6208719Z mariadb-1  | 2025-04-15 08:23:25+00:00 [Note] [Entrypoint]: Starting temporary server
2025-04-15T08:36:37.6209254Z mariadb-1  | 2025-04-15 08:23:25+00:00 [Note] [Entrypoint]: Waiting for server startup
2025-04-15T08:36:37.6210330Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] Starting MariaDB 10.5.28-MariaDB-ubu2004 source revision 7eded23be6597b4c485e8cad1538f2ae14541f91 server_uid 72+4ASMvYxproTQgRqIDplDA1XA= as process 101
2025-04-15T08:36:37.6211180Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Uses event mutexes
2025-04-15T08:36:37.6211676Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
2025-04-15T08:36:37.6212150Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Number of pools: 1
2025-04-15T08:36:37.6212655Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
2025-04-15T08:36:37.6213518Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] mysqld: O_TMPFILE is not supported on /tmp (disabling future attempts)
2025-04-15T08:36:37.6214090Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Using Linux native AIO
2025-04-15T08:36:37.6214735Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
2025-04-15T08:36:37.6215385Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Completed initialization of buffer pool
2025-04-15T08:36:37.6215928Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: 128 rollback segments are active.
2025-04-15T08:36:37.6216497Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Creating shared tablespace for temporary tables
2025-04-15T08:36:37.6217241Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
2025-04-15T08:36:37.6217914Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
2025-04-15T08:36:37.6218535Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] InnoDB: 10.5.28 started; log sequence number 45051; transaction id 20
2025-04-15T08:36:37.6219099Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] Plugin 'FEEDBACK' is disabled.
2025-04-15T08:36:37.6219598Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] Reading of all Master_info entries succeeded
2025-04-15T08:36:37.6220115Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] Added new Master_info '' to hash table
2025-04-15T08:36:37.6220590Z mariadb-1  | 2025-04-15  8:23:25 0 [Note] mysqld: ready for connections.
2025-04-15T08:36:37.6221558Z mariadb-1  | Version: '10.5.28-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 0  mariadb.org binary distribution
2025-04-15T08:36:37.6222849Z mariadb-1  | 2025-04-15 08:23:26+00:00 [Note] [Entrypoint]: Temporary server started.
2025-04-15T08:36:37.6223447Z mariadb-1  | 2025-04-15 08:23:28+00:00 [Note] [Entrypoint]: Creating database n8n
2025-04-15T08:36:37.6224441Z mariadb-1  | 2025-04-15 08:23:28+00:00 [Note] [Entrypoint]: Securing system users (equivalent to running mysql_secure_installation)
2025-04-15T08:36:37.6224918Z mariadb-1  | 
2025-04-15T08:36:37.6225293Z mariadb-1  | 2025-04-15 08:23:28+00:00 [Note] [Entrypoint]: Stopping temporary server
2025-04-15T08:36:37.6245375Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] mysqld (initiated by: unknown): Normal shutdown
2025-04-15T08:36:37.6247020Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: FTS optimize thread exiting.
2025-04-15T08:36:37.6247984Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Starting shutdown...
2025-04-15T08:36:37.6249171Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Dumping buffer pool(s) to /var/lib/mysql/ib_buffer_pool
2025-04-15T08:36:37.6250407Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Buffer pool(s) dump completed at 250415  8:23:28
2025-04-15T08:36:37.6251592Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Removed temporary tablespace data file: "ibtmp1"
2025-04-15T08:36:37.6253244Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Shutdown completed; log sequence number 45079; transaction id 21
2025-04-15T08:36:37.6254448Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] Event Scheduler: Purging the queue. 0 events
2025-04-15T08:36:37.6255379Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] mysqld: Shutdown complete
2025-04-15T08:36:37.6256358Z mariadb-1  | 2025-04-15 08:23:28+00:00 [Note] [Entrypoint]: Temporary server stopped
2025-04-15T08:36:37.6257003Z mariadb-1  | 
2025-04-15T08:36:37.6257861Z mariadb-1  | 2025-04-15 08:23:28+00:00 [Note] [Entrypoint]: MariaDB init process done. Ready for start up.
2025-04-15T08:36:37.6258616Z mariadb-1  | 
2025-04-15T08:36:37.6260195Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] Starting MariaDB 10.5.28-MariaDB-ubu2004 source revision 7eded23be6597b4c485e8cad1538f2ae14541f91 server_uid 72+4ASMvYxproTQgRqIDplDA1XA= as process 1
2025-04-15T08:36:37.6261761Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Uses event mutexes
2025-04-15T08:36:37.6263142Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
2025-04-15T08:36:37.6264105Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Number of pools: 1
2025-04-15T08:36:37.6265062Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
2025-04-15T08:36:37.6266300Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] mysqld: O_TMPFILE is not supported on /tmp (disabling future attempts)
2025-04-15T08:36:37.6267007Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Using Linux native AIO
2025-04-15T08:36:37.6267686Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
2025-04-15T08:36:37.6268351Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Completed initialization of buffer pool
2025-04-15T08:36:37.6268924Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: 128 rollback segments are active.
2025-04-15T08:36:37.6269510Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Creating shared tablespace for temporary tables
2025-04-15T08:36:37.6270270Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
2025-04-15T08:36:37.6270939Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
2025-04-15T08:36:37.6271556Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: 10.5.28 started; log sequence number 45079; transaction id 20
2025-04-15T08:36:37.6272104Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] Plugin 'FEEDBACK' is disabled.
2025-04-15T08:36:37.6272887Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
2025-04-15T08:36:37.6273786Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] InnoDB: Buffer pool(s) load completed at 250415  8:23:28
2025-04-15T08:36:37.6274390Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] Server socket created on IP: '::'.
2025-04-15T08:36:37.6275138Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] Reading of all Master_info entries succeeded
2025-04-15T08:36:37.6275663Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] Added new Master_info '' to hash table
2025-04-15T08:36:37.6276151Z mariadb-1  | 2025-04-15  8:23:28 0 [Note] mysqld: ready for connections.
2025-04-15T08:36:37.6276850Z mariadb-1  | Version: '10.5.28-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 3306  mariadb.org binary distribution
2025-04-15T08:36:37.6278054Z mariadb-1  | 2025-04-15  8:28:01 192 [Warning] Aborted connection 192 to db: 'n8n_test_4kfypczjd9_1744705664868' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T08:36:37.6279228Z mariadb-1  | 2025-04-15  8:28:01 188 [Warning] Aborted connection 188 to db: 'n8n_test_4kfypczjd9_1744705664868' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T08:36:37.6280373Z mariadb-1  | 2025-04-15  8:28:01 191 [Warning] Aborted connection 191 to db: 'n8n_test_4kfypczjd9_1744705664868' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T08:36:37.6281534Z mariadb-1  | 2025-04-15  8:29:21 215 [Warning] Aborted connection 215 to db: 'n8n_test_0y627b7t3n_1744705740334' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T08:36:37.6282914Z mariadb-1  | 2025-04-15  8:29:21 214 [Warning] Aborted connection 214 to db: 'n8n_test_0y627b7t3n_1744705740334' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T08:36:37.6284073Z mariadb-1  | 2025-04-15  8:32:34 266 [Warning] Aborted connection 266 to db: 'n8n_test_dorllodd1_1744705928769' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T08:36:38.1838368Z  Container github-mariadb-1  Stopping
2025-04-15T08:36:38.7095757Z  Container github-mariadb-1  Stopped
2025-04-15T08:36:38.7096350Z  Container github-mariadb-1  Removing
2025-04-15T08:36:38.7143012Z  Container github-mariadb-1  Removed
2025-04-15T08:36:38.7150394Z  Network github_default  Removing
2025-04-15T08:36:38.8223892Z  Network github_default  Removed
2025-04-15T08:36:39.3272569Z docker-compose is down
2025-04-15T08:36:39.3367527Z Post job cleanup.
2025-04-15T08:36:39.4420056Z {"level":30,"time":1744705391619,"pid":1976,"hostname":"fv-az1784-6","msg":"Server listening at http://[::1]:41230"}
2025-04-15T08:36:39.4421396Z {"level":30,"time":1744705391621,"pid":1976,"hostname":"fv-az1784-6","msg":"Server listening at http://127.0.0.1:41230"}
2025-04-15T08:36:39.4423375Z {"level":30,"time":1744705391798,"pid":1976,"hostname":"fv-az1784-6","reqId":"req-1","req":{"method":"GET","url":"/","hostname":"localhost:41230","remoteAddress":"::1","remotePort":51754},"msg":"incoming request"}
2025-04-15T08:36:39.4424772Z {"level":30,"time":1744705391806,"pid":1976,"hostname":"fv-az1784-6","reqId":"req-1","res":{"statusCode":200},"responseTime":7.166209999995772,"msg":"request completed"}
2025-04-15T08:36:39.4426288Z {"level":30,"time":1744706199433,"pid":1976,"hostname":"fv-az1784-6","reqId":"req-2","req":{"method":"DELETE","url":"/shutdown","hostname":"localhost:41230","remoteAddress":"::1","remotePort":38580},"msg":"incoming request"}
2025-04-15T08:36:39.4427646Z {"level":30,"time":1744706199433,"pid":1976,"hostname":"fv-az1784-6","reqId":"req-2","res":{"statusCode":200},"responseTime":0.570295000099577,"msg":"request completed"}
2025-04-15T08:36:39.4428151Z 
2025-04-15T08:36:39.5247874Z Post job cleanup.
2025-04-15T08:36:39.5978167Z [command]/usr/bin/git version
2025-04-15T08:36:39.6012290Z git version 2.49.0
2025-04-15T08:36:39.6055207Z Temporarily overriding HOME='/home/runner/work/_temp/e7bdf16f-bd60-427c-85a4-065cc02c2df4' before making global git config changes
2025-04-15T08:36:39.6056041Z Adding repository directory to the temporary git global config as a safe directory
2025-04-15T08:36:39.6058877Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/n8n/n8n
2025-04-15T08:36:39.6089619Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-04-15T08:36:39.6118696Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-04-15T08:36:39.6373107Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-04-15T08:36:39.6394628Z http.https://github.com/.extraheader
2025-04-15T08:36:39.6406172Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-04-15T08:36:39.6435141Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-04-15T08:36:39.6790189Z Cleaning up orphan processes

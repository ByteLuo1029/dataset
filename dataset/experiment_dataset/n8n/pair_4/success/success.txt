2025-04-15T01:01:13.1778282Z Requested labels: ubuntu-latest
2025-04-15T01:01:13.1778525Z Job defined at: n8n-io/n8n/.github/workflows/ci-postgres-mysql.yml@refs/pull/14176/merge
2025-04-15T01:01:13.1778604Z Waiting for a runner to pick up this job...
2025-04-15T01:01:13.4189720Z Job is waiting for a hosted runner to come online.
2025-04-15T01:01:16.5055564Z Job is about to start running on the hosted runner: GitHub Actions 5 (hosted)
2025-04-15T01:01:18.0327216Z Current runner version: '2.323.0'
2025-04-15T01:01:18.0350175Z ##[group]Operating System
2025-04-15T01:01:18.0350944Z Ubuntu
2025-04-15T01:01:18.0351504Z 24.04.2
2025-04-15T01:01:18.0352212Z LTS
2025-04-15T01:01:18.0352683Z ##[endgroup]
2025-04-15T01:01:18.0353282Z ##[group]Runner Image
2025-04-15T01:01:18.0353847Z Image: ubuntu-24.04
2025-04-15T01:01:18.0354358Z Version: 20250406.1.0
2025-04-15T01:01:18.0355460Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250406.1/images/ubuntu/Ubuntu2404-Readme.md
2025-04-15T01:01:18.0356777Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250406.1
2025-04-15T01:01:18.0357653Z ##[endgroup]
2025-04-15T01:01:18.0358255Z ##[group]Runner Image Provisioner
2025-04-15T01:01:18.0358841Z 2.0.422.1
2025-04-15T01:01:18.0359358Z ##[endgroup]
2025-04-15T01:01:18.0361852Z ##[group]GITHUB_TOKEN Permissions
2025-04-15T01:01:18.0363729Z Actions: write
2025-04-15T01:01:18.0364599Z Attestations: write
2025-04-15T01:01:18.0365289Z Checks: write
2025-04-15T01:01:18.0365802Z Contents: write
2025-04-15T01:01:18.0366323Z Deployments: write
2025-04-15T01:01:18.0366887Z Discussions: write
2025-04-15T01:01:18.0367388Z Issues: write
2025-04-15T01:01:18.0367853Z Metadata: read
2025-04-15T01:01:18.0368395Z Models: read
2025-04-15T01:01:18.0368887Z Packages: write
2025-04-15T01:01:18.0369394Z Pages: write
2025-04-15T01:01:18.0369997Z PullRequests: write
2025-04-15T01:01:18.0370519Z RepositoryProjects: write
2025-04-15T01:01:18.0371098Z SecurityEvents: write
2025-04-15T01:01:18.0371959Z Statuses: write
2025-04-15T01:01:18.0372553Z ##[endgroup]
2025-04-15T01:01:18.0375479Z Secret source: Actions
2025-04-15T01:01:18.0376373Z Prepare workflow directory
2025-04-15T01:01:18.0816380Z Prepare all required actions
2025-04-15T01:01:18.0852455Z Getting action download info
2025-04-15T01:01:18.2889808Z Download action repository 'actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11' (SHA:b4ffde65f46336ab88eb53be808477a3936bae11)
2025-04-15T01:01:18.3663403Z Download action repository 'actions/setup-node@1d0ff469b7ec7b3cb9d8673fde0c81c44821de2a' (SHA:1d0ff469b7ec7b3cb9d8673fde0c81c44821de2a)
2025-04-15T01:01:18.5980843Z Download action repository 'rharkor/caching-for-turbo@439abec0d28d21b192fa8817b744ffdf1ee5ac0d' (SHA:439abec0d28d21b192fa8817b744ffdf1ee5ac0d)
2025-04-15T01:01:18.8274174Z Download action repository 'actions/cache@1bd1e32a3bdc45362d1e726936510720a7c30a57' (SHA:1bd1e32a3bdc45362d1e726936510720a7c30a57)
2025-04-15T01:01:19.1055005Z Download action repository 'isbang/compose-action@802a148945af6399a338c7906c267331b39a71af' (SHA:802a148945af6399a338c7906c267331b39a71af)
2025-04-15T01:01:19.3960059Z Complete job name: MariaDB
2025-04-15T01:01:19.4818869Z ##[group]Run actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11
2025-04-15T01:01:19.4820264Z with:
2025-04-15T01:01:19.4820701Z   repository: n8n-io/n8n
2025-04-15T01:01:19.4821746Z   token: ***
2025-04-15T01:01:19.4822204Z   ssh-strict: true
2025-04-15T01:01:19.4822728Z   persist-credentials: true
2025-04-15T01:01:19.4823335Z   clean: true
2025-04-15T01:01:19.4823847Z   sparse-checkout-cone-mode: true
2025-04-15T01:01:19.4824510Z   fetch-depth: 1
2025-04-15T01:01:19.4824995Z   fetch-tags: false
2025-04-15T01:01:19.4825508Z   show-progress: true
2025-04-15T01:01:19.4826018Z   lfs: false
2025-04-15T01:01:19.4826452Z   submodules: false
2025-04-15T01:01:19.4826976Z   set-safe-directory: true
2025-04-15T01:01:19.4827799Z env:
2025-04-15T01:01:19.4828256Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T01:01:19.4828862Z ##[endgroup]
2025-04-15T01:01:19.6202653Z Syncing repository: n8n-io/n8n
2025-04-15T01:01:19.6204815Z ##[group]Getting Git version info
2025-04-15T01:01:19.6206006Z Working directory is '/home/runner/work/n8n/n8n'
2025-04-15T01:01:19.6207387Z [command]/usr/bin/git version
2025-04-15T01:01:19.6242049Z git version 2.49.0
2025-04-15T01:01:19.6269827Z ##[endgroup]
2025-04-15T01:01:19.6284578Z Temporarily overriding HOME='/home/runner/work/_temp/4f49e962-42b4-42c5-987b-69aea95ad2a6' before making global git config changes
2025-04-15T01:01:19.6287700Z Adding repository directory to the temporary git global config as a safe directory
2025-04-15T01:01:19.6289455Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/n8n/n8n
2025-04-15T01:01:19.6320287Z Deleting the contents of '/home/runner/work/n8n/n8n'
2025-04-15T01:01:19.6324272Z ##[group]Initializing the repository
2025-04-15T01:01:19.6326972Z [command]/usr/bin/git init /home/runner/work/n8n/n8n
2025-04-15T01:01:19.6385834Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-04-15T01:01:19.6387567Z hint: is subject to change. To configure the initial branch name to use in all
2025-04-15T01:01:19.6389044Z hint: of your new repositories, which will suppress this warning, call:
2025-04-15T01:01:19.6390677Z hint:
2025-04-15T01:01:19.6391287Z hint: 	git config --global init.defaultBranch <name>
2025-04-15T01:01:19.6392370Z hint:
2025-04-15T01:01:19.6393145Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-04-15T01:01:19.6394599Z hint: 'development'. The just-created branch can be renamed via this command:
2025-04-15T01:01:19.6395885Z hint:
2025-04-15T01:01:19.6396360Z hint: 	git branch -m <name>
2025-04-15T01:01:19.6397312Z Initialized empty Git repository in /home/runner/work/n8n/n8n/.git/
2025-04-15T01:01:19.6399763Z [command]/usr/bin/git remote add origin https://github.com/n8n-io/n8n
2025-04-15T01:01:19.6429436Z ##[endgroup]
2025-04-15T01:01:19.6430380Z ##[group]Disabling automatic garbage collection
2025-04-15T01:01:19.6432003Z [command]/usr/bin/git config --local gc.auto 0
2025-04-15T01:01:19.6458395Z ##[endgroup]
2025-04-15T01:01:19.6459249Z ##[group]Setting up auth
2025-04-15T01:01:19.6463997Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-04-15T01:01:19.6495357Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-04-15T01:01:19.6762623Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-04-15T01:01:19.6791808Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-04-15T01:01:19.7010470Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-04-15T01:01:19.7066011Z ##[endgroup]
2025-04-15T01:01:19.7067533Z ##[group]Fetching the repository
2025-04-15T01:01:19.7076707Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +111199eb3b74ffa85a6e0c33a4fb96be4c3e19ba:refs/remotes/pull/14176/merge
2025-04-15T01:01:20.5270712Z From https://github.com/n8n-io/n8n
2025-04-15T01:01:20.5272785Z  * [new ref]         111199eb3b74ffa85a6e0c33a4fb96be4c3e19ba -> pull/14176/merge
2025-04-15T01:01:20.5391295Z ##[endgroup]
2025-04-15T01:01:20.5394627Z ##[group]Determining the checkout info
2025-04-15T01:01:20.5396453Z ##[endgroup]
2025-04-15T01:01:20.5397857Z ##[group]Checking out the ref
2025-04-15T01:01:20.5399978Z [command]/usr/bin/git checkout --progress --force refs/remotes/pull/14176/merge
2025-04-15T01:01:21.1075951Z Note: switching to 'refs/remotes/pull/14176/merge'.
2025-04-15T01:01:21.1078159Z 
2025-04-15T01:01:21.1078595Z You are in 'detached HEAD' state. You can look around, make experimental
2025-04-15T01:01:21.1079542Z changes and commit them, and you can discard any commits you make in this
2025-04-15T01:01:21.1080498Z state without impacting any branches by switching back to a branch.
2025-04-15T01:01:21.1081030Z 
2025-04-15T01:01:21.1081384Z If you want to create a new branch to retain commits you create, you may
2025-04-15T01:01:21.1082413Z do so (now or later) by using -c with the switch command. Example:
2025-04-15T01:01:21.1082900Z 
2025-04-15T01:01:21.1083111Z   git switch -c <new-branch-name>
2025-04-15T01:01:21.1083764Z 
2025-04-15T01:01:21.1083970Z Or undo this operation with:
2025-04-15T01:01:21.1084293Z 
2025-04-15T01:01:21.1084473Z   git switch -
2025-04-15T01:01:21.1084742Z 
2025-04-15T01:01:21.1085163Z Turn off this advice by setting config variable advice.detachedHead to false
2025-04-15T01:01:21.1085738Z 
2025-04-15T01:01:21.1086448Z HEAD is now at 111199e Merge 148be9365dc1c63f9aebabf5c0a223eb12aa0007 into 390c5089463ed7aada32a32b1fb34ddf454f7faa
2025-04-15T01:01:21.1098021Z ##[endgroup]
2025-04-15T01:01:21.1137980Z [command]/usr/bin/git log -1 --format='%H'
2025-04-15T01:01:21.1162316Z '111199eb3b74ffa85a6e0c33a4fb96be4c3e19ba'
2025-04-15T01:01:21.1381992Z ##[group]Run actions/setup-node@1d0ff469b7ec7b3cb9d8673fde0c81c44821de2a
2025-04-15T01:01:21.1382452Z with:
2025-04-15T01:01:21.1382682Z   node-version: 20.x
2025-04-15T01:01:21.1382931Z   always-auth: false
2025-04-15T01:01:21.1383168Z   check-latest: false
2025-04-15T01:01:21.1383592Z   token: ***
2025-04-15T01:01:21.1383836Z env:
2025-04-15T01:01:21.1384078Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T01:01:21.1384364Z ##[endgroup]
2025-04-15T01:01:21.3223734Z Found in cache @ /opt/hostedtoolcache/node/20.19.0/x64
2025-04-15T01:01:21.3229916Z ##[group]Environment details
2025-04-15T01:01:21.6182152Z node: v20.19.0
2025-04-15T01:01:21.6182659Z npm: 10.8.2
2025-04-15T01:01:21.6184561Z yarn: 1.22.22
2025-04-15T01:01:21.6185457Z ##[endgroup]
2025-04-15T01:01:21.6294088Z ##[group]Run npm i -g corepack@0.31
2025-04-15T01:01:21.6294517Z [36;1mnpm i -g corepack@0.31[0m
2025-04-15T01:01:21.6294833Z [36;1mcorepack enable[0m
2025-04-15T01:01:21.6346138Z shell: /usr/bin/bash -e {0}
2025-04-15T01:01:21.6346448Z env:
2025-04-15T01:01:21.6346700Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T01:01:21.6346985Z ##[endgroup]
2025-04-15T01:01:22.1855825Z 
2025-04-15T01:01:22.1862245Z changed 1 package in 485ms
2025-04-15T01:01:22.2567433Z ##[group]Run pnpm install --frozen-lockfile
2025-04-15T01:01:22.2567857Z [36;1mpnpm install --frozen-lockfile[0m
2025-04-15T01:01:22.2615724Z shell: /usr/bin/bash -e {0}
2025-04-15T01:01:22.2615976Z env:
2025-04-15T01:01:22.2616187Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T01:01:22.2616429Z ##[endgroup]
2025-04-15T01:01:22.4535365Z ! Corepack is about to download https://registry.npmjs.org/pnpm/-/pnpm-10.2.1.tgz
2025-04-15T01:01:23.5544332Z Scope: all 29 workspace projects
2025-04-15T01:01:48.4480805Z .../sqlite3@5.1.7/node_modules/sqlite3 install$ prebuild-install -r napi || node-gyp rebuild
2025-04-15T01:01:48.6874293Z .../sqlite3@5.1.7/node_modules/sqlite3 install: Done
2025-04-15T01:01:49.4408309Z 
2025-04-15T01:01:49.4408733Z devDependencies:
2025-04-15T01:01:49.4409243Z + @biomejs/biome 1.9.0
2025-04-15T01:01:49.4409952Z + @n8n/eslint-config 0.0.1 <- packages/@n8n/eslint-config
2025-04-15T01:01:49.4410646Z + @types/jest 29.5.3
2025-04-15T01:01:49.4411160Z + @types/node 18.16.16
2025-04-15T01:01:49.4411869Z + @types/supertest 6.0.2
2025-04-15T01:01:49.4412366Z + cross-env 7.0.3
2025-04-15T01:01:49.4412801Z + jest 29.6.2
2025-04-15T01:01:49.4413330Z + jest-environment-jsdom 29.6.2
2025-04-15T01:01:49.4413813Z + jest-expect-message 1.1.3
2025-04-15T01:01:49.4414249Z + jest-junit 16.0.0
2025-04-15T01:01:49.4414635Z + jest-mock 29.6.2
2025-04-15T01:01:49.4415085Z + jest-mock-extended 3.0.4
2025-04-15T01:01:49.4415521Z + lefthook 1.7.15
2025-04-15T01:01:49.4415873Z + nock 14.0.1
2025-04-15T01:01:49.4416232Z + nodemon 3.0.1
2025-04-15T01:01:49.4416612Z + npm-run-all2 7.0.2
2025-04-15T01:01:49.4416995Z + p-limit 3.1.0
2025-04-15T01:01:49.4417365Z + rimraf 5.0.1
2025-04-15T01:01:49.4417762Z + run-script-os 1.1.6
2025-04-15T01:01:49.4418175Z + supertest 7.0.0
2025-04-15T01:01:49.4419667Z + ts-jest 29.1.1
2025-04-15T01:01:49.4420139Z + tsc-alias 1.8.10
2025-04-15T01:01:49.4420529Z + tsc-watch 6.2.0
2025-04-15T01:01:49.4420888Z + turbo 2.3.3
2025-04-15T01:01:49.4421373Z + typescript 5.8.2
2025-04-15T01:01:49.4422227Z + zx 8.1.4
2025-04-15T01:01:49.4422454Z 
2025-04-15T01:01:49.4425197Z Ignored build scripts: @biomejs/biome, @fortawesome/fontawesome-common-types, @fortawesome/fontawesome-svg-core, @fortawesome/free-regular-svg-icons, @fortawesome/free-solid-svg-icons, core-js, cpu-features, cypress, esbuild, eslint-plugin-n8n-nodes-base, lefthook, msgpackr-extract, protobufjs, sharp, ssh2, tree-sitter, tree-sitter-bash, vue-demi. Run "pnpm approve-builds" to pick which dependencies should be allowed to run scripts.
2025-04-15T01:01:49.4427444Z 
2025-04-15T01:01:49.7936594Z . preinstall$ node scripts/block-npm-install.js
2025-04-15T01:01:49.8354743Z . preinstall: Done
2025-04-15T01:01:49.8356417Z . prepare$ node scripts/prepare.mjs
2025-04-15T01:01:49.8787573Z . prepare: Done
2025-04-15T01:01:49.9876236Z Done in 26.8s
2025-04-15T01:01:50.0915742Z ##[group]Run rharkor/caching-for-turbo@439abec0d28d21b192fa8817b744ffdf1ee5ac0d
2025-04-15T01:01:50.0916140Z with:
2025-04-15T01:01:50.0916338Z   cache-prefix: turbogha_
2025-04-15T01:01:50.0916568Z env:
2025-04-15T01:01:50.0916769Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T01:01:50.0917025Z ##[endgroup]
2025-04-15T01:01:50.3979590Z Cache version: turbogha_v2
2025-04-15T01:01:50.3981277Z Cache prefix: turbogha_
2025-04-15T01:01:50.3981895Z Launched child process: 1962
2025-04-15T01:01:50.3982502Z Server log file: /home/runner/work/_temp/turbogha.log
2025-04-15T01:01:50.9716981Z Server is now up and running.
2025-04-15T01:01:50.9717839Z The following environment variables are exported:
2025-04-15T01:01:50.9725074Z   TURBOGHA_PORT=41230
2025-04-15T01:01:50.9726641Z   TURBO_API=http://localhost:41230
2025-04-15T01:01:50.9727262Z   TURBO_TOKEN=turbogha
2025-04-15T01:01:50.9728083Z   TURBO_TEAM=turbogha
2025-04-15T01:01:50.9905083Z ##[group]Run actions/cache/restore@1bd1e32a3bdc45362d1e726936510720a7c30a57
2025-04-15T01:01:50.9905484Z with:
2025-04-15T01:01:50.9905680Z   path: ./packages/**/dist
2025-04-15T01:01:50.9905964Z   key: 111199eb3b74ffa85a6e0c33a4fb96be4c3e19ba:db-tests
2025-04-15T01:01:50.9906267Z   enableCrossOsArchive: false
2025-04-15T01:01:50.9906510Z   fail-on-cache-miss: false
2025-04-15T01:01:50.9906746Z   lookup-only: false
2025-04-15T01:01:50.9906942Z env:
2025-04-15T01:01:50.9907127Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T01:01:50.9907363Z   TURBOGHA_PORT: 41230
2025-04-15T01:01:50.9907605Z   TURBO_API: http://localhost:41230
2025-04-15T01:01:50.9907867Z   TURBO_TOKEN: turbogha
2025-04-15T01:01:50.9908085Z   TURBO_TEAM: turbogha
2025-04-15T01:01:50.9908279Z ##[endgroup]
2025-04-15T01:01:51.1965306Z Cache hit for: 111199eb3b74ffa85a6e0c33a4fb96be4c3e19ba:db-tests
2025-04-15T01:01:51.5760025Z Received 46849254 of 46849254 (100.0%), 135.8 MBs/sec
2025-04-15T01:01:51.5761785Z Cache Size: ~45 MB (46849254 B)
2025-04-15T01:01:51.5793235Z [command]/usr/bin/tar -xf /home/runner/work/_temp/a5814b57-3f45-4375-985b-aafa88480a73/cache.tzst -P -C /home/runner/work/n8n/n8n --use-compress-program unzstd
2025-04-15T01:01:55.0926197Z Cache restored successfully
2025-04-15T01:01:55.1146072Z Cache restored from key: 111199eb3b74ffa85a6e0c33a4fb96be4c3e19ba:db-tests
2025-04-15T01:01:55.1278815Z ##[group]Run isbang/compose-action@802a148945af6399a338c7906c267331b39a71af
2025-04-15T01:01:55.1279210Z with:
2025-04-15T01:01:55.1279431Z   compose-file: ./.github/docker-compose.yml
2025-04-15T01:01:55.1279704Z   services: mariadb

2025-04-15T01:01:55.1279918Z   cwd: /home/runner/work/n8n/n8n
2025-04-15T01:01:55.1280151Z env:
2025-04-15T01:01:55.1280346Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T01:01:55.1280588Z   TURBOGHA_PORT: 41230
2025-04-15T01:01:55.1280827Z   TURBO_API: http://localhost:41230
2025-04-15T01:01:55.1281082Z   TURBO_TOKEN: turbogha
2025-04-15T01:01:55.1281289Z   TURBO_TEAM: turbogha
2025-04-15T01:01:55.1281487Z ##[endgroup]
2025-04-15T01:01:55.3742911Z 2.27.1
2025-04-15T01:01:55.8798988Z docker-compose version: 2.27.1
2025-04-15T01:01:55.9504036Z  mariadb Pulling 
2025-04-15T01:01:56.2262225Z  13b7e930469f Pulling fs layer 
2025-04-15T01:01:56.2262746Z  333f0c69df78 Pulling fs layer 
2025-04-15T01:01:56.2263242Z  8b4f3d191a1d Pulling fs layer 
2025-04-15T01:01:56.2263881Z  39925a082074 Pulling fs layer 
2025-04-15T01:01:56.2264179Z  06c2bf42d3da Pulling fs layer 
2025-04-15T01:01:56.2264449Z  f5df99d02de0 Pulling fs layer 
2025-04-15T01:01:56.2264714Z  23dfc5d6cd7e Pulling fs layer 
2025-04-15T01:01:56.2264970Z  329c81ca2d70 Pulling fs layer 
2025-04-15T01:01:56.2265203Z  f5df99d02de0 Waiting 
2025-04-15T01:01:56.2265422Z  39925a082074 Waiting 
2025-04-15T01:01:56.2265626Z  23dfc5d6cd7e Waiting 
2025-04-15T01:01:56.2265848Z  329c81ca2d70 Waiting 
2025-04-15T01:01:56.2266055Z  06c2bf42d3da Waiting 
2025-04-15T01:01:56.2995422Z  333f0c69df78 Downloading [====================>                              ]     720B/1.72kB
2025-04-15T01:01:56.2996433Z  333f0c69df78 Downloading [==================================================>]   1.72kB/1.72kB
2025-04-15T01:01:56.2997162Z  333f0c69df78 Verifying Checksum 
2025-04-15T01:01:56.2997663Z  333f0c69df78 Download complete 
2025-04-15T01:01:56.3010392Z  13b7e930469f Downloading [>                                                  ]  281.9kB/27.51MB
2025-04-15T01:01:56.3027256Z  8b4f3d191a1d Downloading [>                                                  ]  73.25kB/7.189MB
2025-04-15T01:01:56.3525813Z  39925a082074 Downloading [==================================================>]     116B/116B
2025-04-15T01:01:56.3527175Z  39925a082074 Verifying Checksum 
2025-04-15T01:01:56.3527778Z  39925a082074 Download complete 
2025-04-15T01:01:56.4029825Z  8b4f3d191a1d Downloading [========================================>          ]  5.847MB/7.189MB
2025-04-15T01:01:56.4042328Z  06c2bf42d3da Downloading [==================================================>]     334B/334B
2025-04-15T01:01:56.4044872Z  06c2bf42d3da Verifying Checksum 
2025-04-15T01:01:56.4045918Z  06c2bf42d3da Download complete 
2025-04-15T01:01:56.4119488Z  13b7e930469f Downloading [=================>                                 ]  9.845MB/27.51MB
2025-04-15T01:01:56.4410282Z  8b4f3d191a1d Verifying Checksum 
2025-04-15T01:01:56.4411763Z  8b4f3d191a1d Download complete 
2025-04-15T01:01:56.4856045Z  f5df99d02de0 Downloading [>                                                  ]  538.9kB/86.27MB
2025-04-15T01:01:56.5106110Z  23dfc5d6cd7e Downloading [========>                                          ]     720B/4.022kB
2025-04-15T01:01:56.5107019Z  23dfc5d6cd7e Downloading [==================================================>]  4.022kB/4.022kB
2025-04-15T01:01:56.5107854Z  23dfc5d6cd7e Verifying Checksum 
2025-04-15T01:01:56.5108328Z  23dfc5d6cd7e Download complete 
2025-04-15T01:01:56.5143136Z  13b7e930469f Downloading [===================================>               ]   19.4MB/27.51MB
2025-04-15T01:01:56.5755459Z  329c81ca2d70 Downloading [====>                                              ]     720B/8.196kB
2025-04-15T01:01:56.5756746Z  329c81ca2d70 Downloading [==================================================>]  8.196kB/8.196kB
2025-04-15T01:01:56.5757245Z  329c81ca2d70 Verifying Checksum 
2025-04-15T01:01:56.5757572Z  329c81ca2d70 Download complete 
2025-04-15T01:01:56.5951136Z  f5df99d02de0 Downloading [=====>                                             ]  9.665MB/86.27MB
2025-04-15T01:01:56.6181199Z  13b7e930469f Downloading [============================================>      ]  24.53MB/27.51MB
2025-04-15T01:01:56.6785069Z  13b7e930469f Verifying Checksum 
2025-04-15T01:01:56.6785564Z  13b7e930469f Download complete 
2025-04-15T01:01:56.6953274Z  f5df99d02de0 Downloading [============>                                      ]  20.95MB/86.27MB
2025-04-15T01:01:56.7201888Z  13b7e930469f Extracting [>                                                  ]  294.9kB/27.51MB
2025-04-15T01:01:56.8028795Z  f5df99d02de0 Downloading [==============>                                    ]  25.25MB/86.27MB
2025-04-15T01:01:56.8213225Z  13b7e930469f Extracting [===========>                                       ]  6.193MB/27.51MB
2025-04-15T01:01:56.9059284Z  f5df99d02de0 Downloading [===================>                               ]  34.37MB/86.27MB
2025-04-15T01:01:56.9229700Z  13b7e930469f Extracting [=================>                                 ]  9.437MB/27.51MB
2025-04-15T01:01:57.0080278Z  f5df99d02de0 Downloading [========================>                          ]  42.94MB/86.27MB
2025-04-15T01:01:57.0245724Z  13b7e930469f Extracting [==========================>                        ]  14.45MB/27.51MB
2025-04-15T01:01:57.1082233Z  f5df99d02de0 Downloading [===========================>                       ]  48.29MB/86.27MB
2025-04-15T01:01:57.1261958Z  13b7e930469f Extracting [========================================>          ]  22.41MB/27.51MB
2025-04-15T01:01:57.2108262Z  f5df99d02de0 Downloading [================================>                  ]  55.77MB/86.27MB
2025-04-15T01:01:57.2707503Z  13b7e930469f Extracting [==========================================>        ]   23.3MB/27.51MB
2025-04-15T01:01:57.3116266Z  f5df99d02de0 Downloading [=====================================>             ]  64.83MB/86.27MB
2025-04-15T01:01:57.3751788Z  13b7e930469f Extracting [===============================================>   ]  26.25MB/27.51MB
2025-04-15T01:01:57.4136433Z  f5df99d02de0 Downloading [==========================================>        ]  72.85MB/86.27MB
2025-04-15T01:01:57.4794142Z  13b7e930469f Extracting [=================================================> ]  27.13MB/27.51MB
2025-04-15T01:01:57.5233120Z  f5df99d02de0 Downloading [============================================>      ]  76.07MB/86.27MB
2025-04-15T01:01:57.5592632Z  13b7e930469f Extracting [==================================================>]  27.51MB/27.51MB
2025-04-15T01:01:57.6023468Z  13b7e930469f Pull complete 
2025-04-15T01:01:57.6038339Z  333f0c69df78 Extracting [==================================================>]   1.72kB/1.72kB
2025-04-15T01:01:57.6042981Z  333f0c69df78 Extracting [==================================================>]   1.72kB/1.72kB
2025-04-15T01:01:57.6207244Z  f5df99d02de0 Verifying Checksum 
2025-04-15T01:01:57.6208518Z  f5df99d02de0 Download complete 
2025-04-15T01:02:00.2302619Z  333f0c69df78 Pull complete 
2025-04-15T01:02:00.2315895Z  8b4f3d191a1d Extracting [>                                                  ]   98.3kB/7.189MB
2025-04-15T01:02:00.3318565Z  8b4f3d191a1d Extracting [==================================>                ]  4.915MB/7.189MB
2025-04-15T01:02:00.4413880Z  8b4f3d191a1d Extracting [==========================================>        ]  6.095MB/7.189MB
2025-04-15T01:02:00.5883015Z  8b4f3d191a1d Extracting [===========================================>       ]  6.291MB/7.189MB
2025-04-15T01:02:00.7213100Z  8b4f3d191a1d Extracting [=============================================>     ]  6.488MB/7.189MB
2025-04-15T01:02:00.7519600Z  8b4f3d191a1d Extracting [==================================================>]  7.189MB/7.189MB
2025-04-15T01:02:00.8194390Z  8b4f3d191a1d Pull complete 
2025-04-15T01:02:00.8208547Z  39925a082074 Extracting [==================================================>]     116B/116B
2025-04-15T01:02:00.8213445Z  39925a082074 Extracting [==================================================>]     116B/116B
2025-04-15T01:02:00.8282840Z  39925a082074 Pull complete 
2025-04-15T01:02:00.8292966Z  06c2bf42d3da Extracting [==================================================>]     334B/334B
2025-04-15T01:02:00.8298351Z  06c2bf42d3da Extracting [==================================================>]     334B/334B
2025-04-15T01:02:00.8374427Z  06c2bf42d3da Pull complete 
2025-04-15T01:02:00.8594457Z  f5df99d02de0 Extracting [>                                                  ]  557.1kB/86.27MB
2025-04-15T01:02:00.9608077Z  f5df99d02de0 Extracting [====>                                              ]  8.356MB/86.27MB
2025-04-15T01:02:01.0613105Z  f5df99d02de0 Extracting [=========>                                         ]  16.15MB/86.27MB
2025-04-15T01:02:01.1683901Z  f5df99d02de0 Extracting [==============>                                    ]  24.51MB/86.27MB
2025-04-15T01:02:01.2696096Z  f5df99d02de0 Extracting [==================>                                ]  31.75MB/86.27MB
2025-04-15T01:02:01.3703525Z  f5df99d02de0 Extracting [======================>                            ]  38.99MB/86.27MB
2025-04-15T01:02:01.4733965Z  f5df99d02de0 Extracting [===========================>                       ]  47.35MB/86.27MB
2025-04-15T01:02:01.5760403Z  f5df99d02de0 Extracting [=================================>                 ]  57.38MB/86.27MB
2025-04-15T01:02:01.6793405Z  f5df99d02de0 Extracting [===================================>               ]  61.83MB/86.27MB
2025-04-15T01:02:01.7913829Z  f5df99d02de0 Extracting [======================================>            ]  66.29MB/86.27MB
2025-04-15T01:02:01.9043083Z  f5df99d02de0 Extracting [========================================>          ]  70.19MB/86.27MB
2025-04-15T01:02:02.0056642Z  f5df99d02de0 Extracting [============================================>      ]  76.32MB/86.27MB
2025-04-15T01:02:02.1069960Z  f5df99d02de0 Extracting [===============================================>   ]  81.33MB/86.27MB
2025-04-15T01:02:02.2235990Z  f5df99d02de0 Extracting [================================================>  ]  83.56MB/86.27MB
2025-04-15T01:02:02.4506512Z  f5df99d02de0 Extracting [=================================================> ]  85.79MB/86.27MB
2025-04-15T01:02:02.4859842Z  f5df99d02de0 Extracting [==================================================>]  86.27MB/86.27MB
2025-04-15T01:02:03.0230356Z  f5df99d02de0 Pull complete 
2025-04-15T01:02:03.0239091Z  23dfc5d6cd7e Extracting [==================================================>]  4.022kB/4.022kB
2025-04-15T01:02:03.0242799Z  23dfc5d6cd7e Extracting [==================================================>]  4.022kB/4.022kB
2025-04-15T01:02:03.0350171Z  23dfc5d6cd7e Pull complete 
2025-04-15T01:02:03.0362466Z  329c81ca2d70 Extracting [==================================================>]  8.196kB/8.196kB
2025-04-15T01:02:03.0367354Z  329c81ca2d70 Extracting [==================================================>]  8.196kB/8.196kB
2025-04-15T01:02:03.0447165Z  329c81ca2d70 Pull complete 
2025-04-15T01:02:03.0501176Z  mariadb Pulled 
2025-04-15T01:02:03.0547001Z  Network github_default  Creating
2025-04-15T01:02:03.1169757Z  Network github_default  Created
2025-04-15T01:02:03.1170632Z  Container github-mariadb-1  Creating
2025-04-15T01:02:03.1347357Z  Container github-mariadb-1  Created
2025-04-15T01:02:03.1353419Z  Container github-mariadb-1  Starting
2025-04-15T01:02:03.3465832Z  Container github-mariadb-1  Started
2025-04-15T01:02:03.8514626Z docker-compose is up
2025-04-15T01:02:03.8576643Z ##[group]Run pnpm test:mariadb --testTimeout 30000
2025-04-15T01:02:03.8577040Z [36;1mpnpm test:mariadb --testTimeout 30000[0m
2025-04-15T01:02:03.8624390Z shell: /usr/bin/bash -e {0}
2025-04-15T01:02:03.8624634Z env:
2025-04-15T01:02:03.8624834Z   DB_MYSQLDB_PASSWORD: password
2025-04-15T01:02:03.8625080Z   TURBOGHA_PORT: 41230
2025-04-15T01:02:03.8625319Z   TURBO_API: http://localhost:41230
2025-04-15T01:02:03.8625575Z   TURBO_TOKEN: turbogha
2025-04-15T01:02:03.8625802Z   TURBO_TEAM: turbogha
2025-04-15T01:02:03.8626002Z ##[endgroup]
2025-04-15T01:02:04.2111904Z 
2025-04-15T01:02:04.2112842Z > n8n@1.89.0 test:mariadb /home/runner/work/n8n/n8n/packages/cli
2025-04-15T01:02:04.2114208Z > N8N_LOG_LEVEL=silent DB_TYPE=mariadb DB_TABLE_PREFIX=test_ jest --no-coverage --testTimeout 30000
2025-04-15T01:02:04.2114761Z 
2025-04-15T01:02:16.8221368Z PASS src/modules/insights/__tests__/insights.service.test.ts (11.327 s)
2025-04-15T01:02:16.8232930Z   workflowExecuteAfterHandler
2025-04-15T01:02:16.8234092Z     âœ“ stores events for executions with the status `success` (56 ms)
2025-04-15T01:02:16.8235052Z     âœ“ stores events for executions with the status `error` (23 ms)
2025-04-15T01:02:16.8235978Z     âœ“ stores events for executions with the status `crashed` (23 ms)
2025-04-15T01:02:16.8236931Z     âœ“ does not store events for executions with the status `waiting` (17 ms)
2025-04-15T01:02:16.8238167Z     âœ“ does not store events for executions with the status `canceled` (15 ms)
2025-04-15T01:02:16.8239525Z     âœ“ does not store events for executions with the status `unknown` (15 ms)
2025-04-15T01:02:16.8240489Z     âœ“ does not store events for executions with the status `new` (16 ms)
2025-04-15T01:02:16.8242668Z     âœ“ does not store events for executions with the status `running` (14 ms)
2025-04-15T01:02:16.8243703Z     âœ“ does not store events for executions with the mode `internal` (14 ms)
2025-04-15T01:02:16.8244690Z     âœ“ does not store events for executions with the mode `manual` (14 ms)
2025-04-15T01:02:16.8245697Z     âœ“ does not store events for executions with the mode `integrated` (13 ms)
2025-04-15T01:02:16.8246663Z     âœ“ stores events for executions with the mode `evaluation` (20 ms)
2025-04-15T01:02:16.8247560Z     âœ“ stores events for executions with the mode `error` (24 ms)
2025-04-15T01:02:16.8248382Z     âœ“ stores events for executions with the mode `cli` (18 ms)
2025-04-15T01:02:16.8249235Z     âœ“ stores events for executions with the mode `retry` (22 ms)
2025-04-15T01:02:16.8250106Z     âœ“ stores events for executions with the mode `trigger` (17 ms)
2025-04-15T01:02:16.8250954Z     âœ“ stores events for executions with the mode `webhook` (18 ms)
2025-04-15T01:02:16.8252271Z   workflowExecuteAfterHandler - cacheMetadata
2025-04-15T01:02:16.8253052Z     âœ“ reuses cached metadata for subsequent executions of the same workflow (15 ms)
2025-04-15T01:02:16.8253872Z     âœ“ updates cached metadata if workflow details change (12 ms)
2025-04-15T01:02:16.8254521Z   workflowExecuteAfterHandler - flushEvents
2025-04-15T01:02:16.8255258Z     âœ“ flushes events to the database once buffer is full (120 ms)
2025-04-15T01:02:16.8256031Z     âœ“ flushes events to the database after a timeout (39 ms)
2025-04-15T01:02:16.8256677Z     âœ“ reschedule flush on flushing end (22 ms)
2025-04-15T01:02:16.8257322Z     âœ“ flushes events to the database on shutdown (16 ms)
2025-04-15T01:02:16.8258019Z     âœ“ flushes events synchronously while shutting down (14 ms)
2025-04-15T01:02:16.8258712Z     âœ“ restore buffer events on flushing error (12 ms)
2025-04-15T01:02:16.8259388Z     âœ“ waits for ongoing flush during shutdown (19 ms)
2025-04-15T01:02:16.8259848Z   compaction
2025-04-15T01:02:16.8260154Z     compactRawToHour
2025-04-15T01:02:16.8260611Z       âœ“ compact into 2 rows (27 ms)
2025-04-15T01:02:16.8261117Z       âœ“ compact into 3 rows (29 ms)
2025-04-15T01:02:16.8261992Z       âœ“ batch compaction split events in hourly insight periods (266 ms)
2025-04-15T01:02:16.8263396Z       âœ“ batch compaction split events in hourly insight periods by type and workflow (271 ms)
2025-04-15T01:02:16.8264360Z       âœ“ should return the number of compacted events (258 ms)
2025-04-15T01:02:16.8265080Z       âœ“ works with data in the compacted table (66 ms)
2025-04-15T01:02:16.8265761Z       âœ“ works with data bigger than the batch size (198 ms)
2025-04-15T01:02:16.8266257Z     compactionSchedule
2025-04-15T01:02:16.8266769Z       âœ“ compaction is running on schedule (6 ms)
2025-04-15T01:02:16.8267224Z     compactHourToDay
2025-04-15T01:02:16.8267671Z       âœ“ compact into 2 rows (28 ms)
2025-04-15T01:02:16.8268179Z       âœ“ compact into 3 rows (32 ms)
2025-04-15T01:02:16.8268791Z       âœ“ recent insight periods should not be compacted (19 ms)
2025-04-15T01:02:16.8269304Z     compactDayToWeek
2025-04-15T01:02:16.8269749Z       âœ“ compact into 2 rows (25 ms)
2025-04-15T01:02:16.8270257Z       âœ“ compact into 3 rows (33 ms)
2025-04-15T01:02:16.8270899Z       âœ“ recent insight periods should not be compacted (20 ms)
2025-04-15T01:02:16.8271662Z     compaction threshold configuration
2025-04-15T01:02:16.8272608Z       âœ“ insights by period older than the hourly to daily threshold are not compacted (20 ms)
2025-04-15T01:02:16.8273736Z       âœ“ insights by period older than the daily to weekly threshold are not compacted (33 ms)
2025-04-15T01:02:16.8274395Z   getInsightsSummary
2025-04-15T01:02:16.8274943Z     âœ“ compacted data are summarized correctly (41 ms)
2025-04-15T01:02:16.8275736Z     âœ“ no data for previous period should return null deviation (25 ms)
2025-04-15T01:02:16.8276793Z     âœ“ mixed period data are summarized correctly (33 ms)
2025-04-15T01:02:16.8277290Z   getInsightsByWorkflow
2025-04-15T01:02:16.8277933Z     âœ“ compacted data are are grouped by workflow correctly (67 ms)
2025-04-15T01:02:16.8278808Z     âœ“ compacted data are grouped by workflow correctly with sorting (40 ms)
2025-04-15T01:02:16.8279763Z     âœ“ compacted data are grouped by workflow correctly with pagination (36 ms)
2025-04-15T01:02:16.8280923Z     âœ“ compacted data are grouped by workflow correctly even with 0 data (check division by 0) (18 ms)
2025-04-15T01:02:16.8281966Z   getInsightsByTime
2025-04-15T01:02:16.8282527Z     âœ“ returns empty array when no insights exist (16 ms)
2025-04-15T01:02:16.8283351Z     âœ“ returns empty array when no insights in the time range exists (23 ms)
2025-04-15T01:02:16.8284191Z     âœ“ compacted data are are grouped by time correctly (57 ms)
2025-04-15T01:02:16.8284664Z 
2025-04-15T01:02:21.2101997Z PASS test/integration/workflows/workflows.controller.ee.test.ts (15.679 s)
2025-04-15T01:02:21.2104440Z   router should switch based on flag
2025-04-15T01:02:21.2107121Z     âœ“ when sharing is disabled (105 ms)
2025-04-15T01:02:21.2111431Z     âœ“ when sharing is enabled (48 ms)
2025-04-15T01:02:21.2112148Z   PUT /workflows/:workflowId/share
2025-04-15T01:02:21.2112765Z     âœ“ should save sharing with new users (46 ms)
2025-04-15T01:02:21.2113504Z     âœ“ should succeed when sharing with invalid user-id (25 ms)
2025-04-15T01:02:21.2114259Z     âœ“ should allow sharing with pending users (31 ms)
2025-04-15T01:02:21.2114939Z     âœ“ should allow sharing with multiple users (29 ms)
2025-04-15T01:02:21.2115547Z     âœ“ should override sharing (50 ms)
2025-04-15T01:02:21.2116240Z     âœ“ should allow sharing by the owner of the workflow (29 ms)
2025-04-15T01:02:21.2116981Z     âœ“ should allow sharing by the instance owner (40 ms)
2025-04-15T01:02:21.2117720Z     âœ“ should not allow sharing by another shared member (32 ms)
2025-04-15T01:02:21.2118602Z     âœ“ should not allow sharing with self by another non-shared member (19 ms)
2025-04-15T01:02:21.2120452Z     âœ“ should not allow sharing by another non-shared member (31 ms)
2025-04-15T01:02:21.2121937Z     âœ“ should not call internal hooks listener for email sent if emailing is disabled (25 ms)
2025-04-15T01:02:21.2123042Z     âœ“ should ignore sharing with owner project (22 ms)
2025-04-15T01:02:21.2124128Z     âœ“ should ignore sharing with project that already has it shared (25 ms)
2025-04-15T01:02:21.2124768Z   GET /workflows/new
2025-04-15T01:02:21.2126118Z     âœ“ should return an auto-incremented name, even when sharing is enabled (27 ms)
2025-04-15T01:02:21.2127593Z     âœ“ should return an auto-incremented name, even when sharing is disabled (21 ms)
2025-04-15T01:02:21.2128424Z   GET /workflows/:workflowId
2025-04-15T01:02:21.2129275Z     âœ“ should fail with invalid id due to route rule (32 ms)
2025-04-15T01:02:21.2130119Z     âœ“ should return 404 for non existing workflow (13 ms)
2025-04-15T01:02:21.2130777Z     âœ“ project viewers can view workflows (35 ms)
2025-04-15T01:02:21.2131432Z     âœ“ should return a workflow with owner (30 ms)
2025-04-15T01:02:21.2132479Z     âœ“ should return tags (37 ms)
2025-04-15T01:02:21.2133318Z     âœ“ should return shared workflow with user data (40 ms)
2025-04-15T01:02:21.2134118Z     âœ“ should return all sharees (41 ms)
2025-04-15T01:02:21.2135238Z     âœ“ should return workflow with credentials owned by user (44 ms)
2025-04-15T01:02:21.2136618Z     âœ“ should return workflow with credentials saying owner does have access even when not shared (60 ms)
2025-04-15T01:02:21.2138309Z     âœ“ should return workflow with credentials saying admin does have access even when not shared (46 ms)
2025-04-15T01:02:21.2139827Z     âœ“ should return workflow with credentials for all users with or without access (67 ms)
2025-04-15T01:02:21.2141246Z     âœ“ should return workflow with credentials for all users with access (72 ms)
2025-04-15T01:02:21.2142884Z     âœ“ should return workflow credentials home project and shared with projects (63 ms)
2025-04-15T01:02:21.2144108Z   POST /workflows
2025-04-15T01:02:21.2144903Z     âœ“ project viewers cannot create workflows (42 ms)
2025-04-15T01:02:21.2167749Z     âœ“ Should create a workflow that uses no credential (23 ms)
2025-04-15T01:02:21.2168618Z     âœ“ Should save a new workflow with credentials (37 ms)
2025-04-15T01:02:21.2169602Z     âœ“ Should not allow saving a workflow using credential you have no access (20 ms)
2025-04-15T01:02:21.2170754Z     âœ“ Should allow owner to save a workflow using credential owned by others (33 ms)
2025-04-15T01:02:21.2172170Z     âœ“ Should allow saving a workflow using a credential owned by others and shared with you (41 ms)
2025-04-15T01:02:21.2173285Z     âœ“ Should create workflow history version when licensed (29 ms)
2025-04-15T01:02:21.2174248Z     âœ“ Should not create workflow history version when not licensed (24 ms)
2025-04-15T01:02:21.2174941Z   PATCH /workflows/:workflowId
2025-04-15T01:02:21.2175607Z     âœ“ project viewers cannot update workflows (22 ms)
2025-04-15T01:02:21.2176248Z     validate credential permissions to user
2025-04-15T01:02:21.2177043Z       âœ“ Should succeed when saving unchanged workflow nodes (63 ms)
2025-04-15T01:02:21.2178089Z       âœ“ Should allow owner to add node containing credential not shared with the owner (67 ms)
2025-04-15T01:02:21.2180051Z       âœ“ Tamper proofing kicks in if the workflow is owned by the owner and shared with the member, the credentials is owned by the owner, and the member tries to use the credential in the workflow (41 ms)
2025-04-15T01:02:21.2185172Z       âœ“ Tamper proofing kicks in if the workflow is owned by team 1, the credentials is owned by the member, and the member tries to use the credential in the workflow (39 ms)
2025-04-15T01:02:21.2187114Z       âœ“ Tamper proofing kicks in if the workflow is owned by team 1, the credentials is owned by team 2, and the member tries to use the credential in the workflow (32 ms)
2025-04-15T01:02:21.2189050Z       âœ“ Tamper proofing kicks in if the workflow is owned by the member, the credentials is owned by the owner, and the member tries to use the credential in the workflow (38 ms)
2025-04-15T01:02:21.2191196Z       âœ“ Tamper proofing kicks in if the workflow is owned by the member, the credentials is owned by team 2, and the member tries to use the credential in the workflow (41 ms)
2025-04-15T01:02:21.2193196Z       âœ“ Should succeed but prevent modifying node attributes other than position, name and disabled (93 ms)
2025-04-15T01:02:21.2194071Z     validate interim updates
2025-04-15T01:02:21.2195238Z       âœ“ should block owner updating workflow nodes on interim update by member (133 ms)
2025-04-15T01:02:21.2196446Z       âœ“ should block member updating workflow nodes on interim update by owner (151 ms)
2025-04-15T01:02:21.2197478Z       âœ“ should block owner activation on interim activation by member (179 ms)
2025-04-15T01:02:21.2198486Z       âœ“ should block member activation on interim activation by owner (173 ms)
2025-04-15T01:02:21.2199561Z       âœ“ should block member updating workflow settings on interim update by owner (113 ms)
2025-04-15T01:02:21.2200563Z       âœ“ should block member updating workflow name on interim update by owner (104 ms)
2025-04-15T01:02:21.2201109Z     workflow history
2025-04-15T01:02:21.2201896Z       âœ“ Should create workflow history version when licensed (37 ms)
2025-04-15T01:02:21.2202736Z       âœ“ Should not create workflow history version when not licensed (32 ms)
2025-04-15T01:02:21.2203336Z     activate workflow
2025-04-15T01:02:21.2203978Z       âœ“ should activate workflow without changing version ID (33 ms)
2025-04-15T01:02:21.2204868Z       âœ“ should deactivate workflow without changing version ID (30 ms)
2025-04-15T01:02:21.2205467Z   PUT /:workflowId/transfer
2025-04-15T01:02:21.2206057Z     âœ“ cannot transfer into the same project (27 ms)
2025-04-15T01:02:21.2206729Z     âœ“ cannot transfer somebody elses workflow (20 ms)
2025-04-15T01:02:21.2207586Z     âœ“ cannot transfer if you're not a member of the destination project (29 ms)
2025-04-15T01:02:21.2208436Z     âœ“ project:editors cannot transfer workflows (23 ms)
2025-04-15T01:02:21.2209441Z     âœ“ project:viewers cannot transfer workflows (22 ms)
2025-04-15T01:02:21.2210395Z     âœ“ global owners can transfer workflows from a team project to a team project (38 ms)
2025-04-15T01:02:21.2211494Z     âœ“ global owners can transfer workflows from a team project to a personal project (33 ms)
2025-04-15T01:02:21.2212896Z     âœ“ global owners can transfer workflows from a personal project to a team project (33 ms)
2025-04-15T01:02:21.2214062Z     âœ“ global admins can transfer workflows from a team project to a team project (37 ms)
2025-04-15T01:02:21.2215245Z     âœ“ global admins can transfer workflows from a team project to a personal project (36 ms)
2025-04-15T01:02:21.2216418Z     âœ“ global admins can transfer workflows from a personal project to a team project (34 ms)
2025-04-15T01:02:21.2217635Z     âœ“ removes and re-adds the workflow from the active workflow manager during the transfer (49 ms)
2025-04-15T01:02:21.2218716Z     âœ“ should detach workflow from parent folder in source project (70 ms)
2025-04-15T01:02:21.2220080Z     âœ“ deactivates the workflow if it cannot be added to the active workflow manager again and returns the WorkflowActivationError as data (44 ms)
2025-04-15T01:02:21.2221712Z     âœ“ owner transfers workflow from project they are not part of, e.g. test global cred sharing scope (62 ms)
2025-04-15T01:02:21.2223114Z     âœ“ admin transfers workflow from project they are not part of, e.g. test global cred sharing scope (60 ms)
2025-04-15T01:02:21.2224750Z     âœ“ member transfers workflow from personal project to team project and wf contains a credential that they can use but not share (48 ms)
2025-04-15T01:02:21.2226363Z     âœ“ member transfers workflow from their personal project to another team project in which they have editor role (44 ms)
2025-04-15T01:02:21.2227859Z     âœ“ member transfers workflow from a team project as project admin to another team project in which they have editor role (59 ms)
2025-04-15T01:02:21.2229999Z     âœ“ member transfers workflow from a team project as project admin to another team project in which they have editor role but cannot share the credential that is only shared into the source project (71 ms)
2025-04-15T01:02:21.2232426Z     âœ“ member transfers workflow from a team project as project admin to another team project in which they have editor role but cannot share all the credentials (56 ms)
2025-04-15T01:02:21.2234189Z     âœ“ returns a 500 if the workflow cannot be activated due to an unknown error (36 ms)
2025-04-15T01:02:21.2234918Z   POST /workflows/:workflowId/run
2025-04-15T01:02:21.2235533Z     âœ“ project viewers cannot run workflows (17 ms)
2025-04-15T01:02:21.2235886Z 
2025-04-15T01:02:22.2264014Z PASS test/integration/workflows/workflows.controller.test.ts (16.731 s)
2025-04-15T01:02:22.2264850Z   POST /workflows
2025-04-15T01:02:22.2265736Z     âœ“ should store pin data for node in workflow (114 ms)
2025-04-15T01:02:22.2266564Z     âœ“ should set pin data to null if no pin data (67 ms)
2025-04-15T01:02:22.2267464Z     âœ“ should return scopes on created workflow (65 ms)
2025-04-15T01:02:22.2268344Z     âœ“ should create workflow history version when licensed (57 ms)
2025-04-15T01:02:22.2269345Z     âœ“ should not create workflow history version when not licensed (51 ms)
2025-04-15T01:02:22.2270316Z     âœ“ create workflow in personal project by default (107 ms)
2025-04-15T01:02:22.2271324Z     âœ“ creates workflow in a specific project if the projectId is passed (71 ms)
2025-04-15T01:02:22.2272860Z     âœ“ does not create the workflow in a specific project if the user is not part of the project (76 ms)
2025-04-15T01:02:22.2274331Z     âœ“ does not create the workflow in a specific project if the user does not have the right role to do so (48 ms)
2025-04-15T01:02:22.2275491Z     âœ“ create link workflow with folder if one is provided (59 ms)
2025-04-15T01:02:22.2276458Z     âœ“ create workflow without parent folder if no folder is provided (74 ms)
2025-04-15T01:02:22.2277623Z     âœ“ create workflow without parent is provided folder does not exist in the project (55 ms)
2025-04-15T01:02:22.2279137Z   GET /workflows/:workflowId
2025-04-15T01:02:22.2279775Z     âœ“ should return pin data (78 ms)
2025-04-15T01:02:22.2280387Z     âœ“ should return tags (62 ms)
2025-04-15T01:02:22.2280810Z   GET /workflows
2025-04-15T01:02:22.2281399Z     âœ“ should return zero workflows if none exist (41 ms)
2025-04-15T01:02:22.2323110Z     âœ“ should return workflows (78 ms)
2025-04-15T01:02:22.2323982Z     âœ“ should return workflows with scopes when ?includeScopes=true (128 ms)
2025-04-15T01:02:22.2324640Z     filter
2025-04-15T01:02:22.2325241Z       âœ“ should filter workflows by field: name (64 ms)
2025-04-15T01:02:22.2325966Z       âœ“ should filter workflows by field: active (80 ms)
2025-04-15T01:02:22.2326816Z       âœ“ should filter workflows by field: tags (AND operator) (90 ms)
2025-04-15T01:02:22.2327631Z       âœ“ should filter workflows by projectId (60 ms)
2025-04-15T01:02:22.2328360Z       âœ“ should filter workflows by parentFolderId (64 ms)
2025-04-15T01:02:22.2329308Z       âœ“ should return homeProject when filtering workflows by projectId (48 ms)
2025-04-15T01:02:22.2329961Z     select
2025-04-15T01:02:22.2330518Z       âœ“ should select workflow field: name (50 ms)
2025-04-15T01:02:22.2331249Z       âœ“ should select workflow field: active (57 ms)
2025-04-15T01:02:22.2332369Z       âœ“ should select workflow field: tags (50 ms)
2025-04-15T01:02:22.2333269Z       âœ“ should select workflow fields: createdAt and updatedAt (58 ms)
2025-04-15T01:02:22.2334114Z       âœ“ should select workflow field: versionId (51 ms)
2025-04-15T01:02:22.2334849Z       âœ“ should select workflow field: ownedBy (56 ms)
2025-04-15T01:02:22.2335602Z       âœ“ should select workflow field: parentFolder (53 ms)
2025-04-15T01:02:22.2336123Z     sortBy
2025-04-15T01:02:22.2336766Z       âœ“ should fail when trying to sort by non sortable column (42 ms)
2025-04-15T01:02:22.2337533Z       âœ“ should sort by createdAt column (67 ms)
2025-04-15T01:02:22.2338172Z       âœ“ should sort by name column (72 ms)
2025-04-15T01:02:22.2338852Z       âœ“ should sort by updatedAt column (72 ms)
2025-04-15T01:02:22.2339335Z     pagination
2025-04-15T01:02:22.2340012Z       âœ“ should fail when skip is provided without take (87 ms)
2025-04-15T01:02:22.2340841Z       âœ“ should handle skip with take parameter (96 ms)
2025-04-15T01:02:22.2341823Z       âœ“ should handle pagination with sorting (78 ms)
2025-04-15T01:02:22.2342638Z       âœ“ should handle pagination with filtering (130 ms)
2025-04-15T01:02:22.2343775Z       âœ“ should return empty array when pagination exceeds total count (69 ms)
2025-04-15T01:02:22.2344886Z       âœ“ should return all results when no pagination parameters are provided (67 ms)
2025-04-15T01:02:22.2345609Z   GET /workflows?includeFolders=true
2025-04-15T01:02:22.2346405Z     âœ“ should return zero workflows and folders if none exist (36 ms)
2025-04-15T01:02:22.2347218Z     âœ“ should return workflows and folders (69 ms)
2025-04-15T01:02:22.2348172Z     âœ“ should return workflows with scopes and folders when ?includeScopes=true (101 ms)
2025-04-15T01:02:22.2348893Z     filter
2025-04-15T01:02:22.2349532Z       âœ“ should filter workflows and folders by field: name (65 ms)
2025-04-15T01:02:22.2350430Z       âœ“ should filter workflows and folders by field: active (41 ms)
2025-04-15T01:02:22.2351466Z       âœ“ should filter workflows and folders by field: tags (AND operator) (66 ms)
2025-04-15T01:02:22.2352594Z       âœ“ should filter workflows by projectId (58 ms)
2025-04-15T01:02:22.2353680Z       âœ“ should filter workflows by parentFolderId and its descendants when filtering by name (68 ms)
2025-04-15T01:02:22.2354954Z       âœ“ should return homeProject when filtering workflows and folders by projectId (107 ms)
2025-04-15T01:02:22.2355682Z     sortBy
2025-04-15T01:02:22.2356352Z       âœ“ should fail when trying to sort by non sortable column (40 ms)
2025-04-15T01:02:22.2357199Z       âœ“ should sort by createdAt column (99 ms)
2025-04-15T01:02:22.2357754Z       âœ“ should sort by name column (73 ms)
2025-04-15T01:02:22.2358689Z       âœ“ should sort by updatedAt column (68 ms)
2025-04-15T01:02:22.2359179Z     pagination
2025-04-15T01:02:22.2359816Z       âœ“ should fail when skip is provided without take (64 ms)
2025-04-15T01:02:22.2360585Z       âœ“ should handle skip with take parameter (72 ms)
2025-04-15T01:02:22.2361328Z       âœ“ should handle pagination with sorting (69 ms)
2025-04-15T01:02:22.2362271Z       âœ“ should handle pagination with filtering (99 ms)
2025-04-15T01:02:22.2363163Z       âœ“ should return empty array when pagination exceeds total count (58 ms)
2025-04-15T01:02:22.2364265Z       âœ“ should return all results when no pagination parameters are provided (70 ms)
2025-04-15T01:02:22.2365013Z   PATCH /workflows/:workflowId
2025-04-15T01:02:22.2365800Z     âœ“ should create workflow history version when licensed (73 ms)
2025-04-15T01:02:22.2366782Z     âœ“ should not create workflow history version when not licensed (48 ms)
2025-04-15T01:02:22.2367825Z     âœ“ should activate workflow without changing version ID (59 ms)
2025-04-15T01:02:22.2368767Z     âœ“ should deactivate workflow without changing version ID (51 ms)
2025-04-15T01:02:22.2369506Z     âœ“ should update workflow meta (72 ms)
2025-04-15T01:02:22.2370151Z     âœ“ should move workflow to folder (59 ms)
2025-04-15T01:02:22.2370836Z     âœ“ should move workflow to project root (51 ms)
2025-04-15T01:02:22.2372162Z     âœ“ should fail if trying update workflow parent folder with a folder that does not belong to project (67 ms)
2025-04-15T01:02:22.2373062Z   POST /workflows/:workflowId/run
2025-04-15T01:02:22.2373759Z     âœ“ should prevent tampering if sharing is enabled (32 ms)
2025-04-15T01:02:22.2374637Z     âœ“ should skip tampering prevention if sharing is disabled (101 ms)
2025-04-15T01:02:22.2375298Z   DELETE /workflows/:workflowId
2025-04-15T01:02:22.2375928Z     âœ“ deletes a workflow owned by the user (61 ms)
2025-04-15T01:02:22.2376852Z     âœ“ deletes a workflow owned by the user, even if the user is just a member (45 ms)
2025-04-15T01:02:22.2377881Z     âœ“ does not delete a workflow that is not owned by the user (34 ms)
2025-04-15T01:02:22.2378739Z     âœ“ allows the owner to delete workflows they don't own (46 ms)
2025-04-15T01:02:22.2379152Z 
2025-04-15T01:02:26.3633015Z   console.log
2025-04-15T01:02:26.3633763Z     { message: 'Forbidden' }
2025-04-15T01:02:26.3634169Z 
2025-04-15T01:02:26.3634941Z       at Object.<anonymous> (test/integration/public-api/endpoints-with-scopes-enabled.test.ts:336:14)
2025-04-15T01:02:26.3635767Z 
2025-04-15T01:02:28.4428385Z PASS test/integration/public-api/endpoints-with-scopes-enabled.test.ts (11.39 s)
2025-04-15T01:02:28.4436146Z   Public API endpoints with feat:apiKeyScopes enabled
2025-04-15T01:02:28.4436776Z     with "feat:apiKeyScopes" enabled
2025-04-15T01:02:28.4437216Z       users
2025-04-15T01:02:28.4438400Z         âœ“ should fail when "feat:apiKeyScopes" is disabled and API key does not have "user:list" scope (39 ms)
2025-04-15T01:02:28.4439628Z         GET /users
2025-04-15T01:02:28.4440660Z           âœ“ should return all users when API key has "user:list" scope (1210 ms)
2025-04-15T01:02:28.4441730Z         POST /users
2025-04-15T01:02:28.4442679Z           âœ“ should create user when API key has "user:create" scope (68 ms)
2025-04-15T01:02:28.4444371Z           âœ“ should fail to create user when API key doesn't have "user:create" scope (35 ms)
2025-04-15T01:02:28.4445102Z         PATCH /users/:id/role
2025-04-15T01:02:28.4446050Z           âœ“ should change role when API key has "user:changeRole" scope (53 ms)
2025-04-15T01:02:28.4447147Z           âœ“ should fail to change role when API key doesn't have "user:changeRole" scope (32 ms)
2025-04-15T01:02:28.4448095Z           âœ“ should remove all admin only scopes when user downgrading to member (41 ms)
2025-04-15T01:02:28.4448778Z         DELETE /users/:id
2025-04-15T01:02:28.4449761Z           âœ“ should delete user when API key has "user:delete" scope (82 ms)
2025-04-15T01:02:28.4451059Z           âœ“ should fail to create user when API key doesn't have "user:delete" scope (29 ms)
2025-04-15T01:02:28.4452632Z       credentials
2025-04-15T01:02:28.4453017Z         POST /credentials
2025-04-15T01:02:28.4454048Z           âœ“ should fail to create credential when API key doesn't have "credential:create" scope (96 ms)
2025-04-15T01:02:28.4455326Z           âœ“ should create credential when API key has "credential:create" scope (64 ms)
2025-04-15T01:02:28.4456060Z         DELETE /credentials/:id
2025-04-15T01:02:28.4456980Z           âœ“ should delete credential when API key has "credential:create" scope (51 ms)
2025-04-15T01:02:28.4458266Z           âœ“ should delete credential when API key doesn't have "credential:create" scope (38 ms)
2025-04-15T01:02:28.4459091Z         PUT /credentials/:id/transfer
2025-04-15T01:02:28.4460057Z           âœ“ should transfer credential when API key has "credential:move" scope (61 ms)
2025-04-15T01:02:28.4461362Z           âœ“ should fail to transfer credential when API key doesn't have "credential:move" scope (32 ms)
2025-04-15T01:02:28.4462313Z       executions
2025-04-15T01:02:28.4462673Z         GET /executions/:id
2025-04-15T01:02:28.4463550Z           âœ“ should retrieve execution when API key has "execution:read" scope (45 ms)
2025-04-15T01:02:28.4464784Z           âœ“ should fail to retrieve credential API key doesn't have "execution:read" scope (38 ms)
2025-04-15T01:02:28.4465579Z         DELETE /executions/:id
2025-04-15T01:02:28.4466462Z           âœ“ should delete execution when API key has "execution:delete" scope (62 ms)
2025-04-15T01:02:28.4467470Z           âœ“ should fail to delete execution when API key doesn't have "execution:delete" scope (35 ms)
2025-04-15T01:02:28.4467867Z         GET /executions
2025-04-15T01:02:28.4468329Z           âœ“ should retrieve all executions when API key has "execution:list" scope (52 ms)
2025-04-15T01:02:28.4469011Z           âœ“ should fail to retrieve all executions when API key doesn't have "execution:list" scope (28 ms)
2025-04-15T01:02:28.4469425Z       tags
2025-04-15T01:02:28.4469610Z         GET /tags
2025-04-15T01:02:28.4469999Z           âœ“ should retrieve all tags when API key has "tag:list" scope (43 ms)
2025-04-15T01:02:28.4470599Z           âœ“ should fail to retrieve all tags when API key doesn't have "tag:list" scope (32 ms)
2025-04-15T01:02:28.4470985Z         POST /tags
2025-04-15T01:02:28.4471374Z           âœ“ should create a tag when API key has "tag:create" scope (49 ms)
2025-04-15T01:02:28.4472499Z           âœ“ should fail to create a tag when API key doesn't have "tag:create" scope (25 ms)
2025-04-15T01:02:28.4473448Z         DELETE /tags/:id
2025-04-15T01:02:28.4474228Z           âœ“ should delete a tag when API key has "tag:delete" scope (36 ms)
2025-04-15T01:02:28.4475274Z           âœ“ should fail to delete a tag when API key doesn't have "tag:delete" scope (23 ms)
2025-04-15T01:02:28.4475966Z         PUT /tags/:id
2025-04-15T01:02:28.4476755Z           âœ“ should update a tag when API key has "tag:update" scope (66 ms)
2025-04-15T01:02:28.4477836Z           âœ“ should fail to update a tag when API key doesn't have "tag:update" scope (28 ms)
2025-04-15T01:02:28.4478532Z         GET /tags/:id
2025-04-15T01:02:28.4479320Z           âœ“ should retrieve a tag when API key has "tag:read" scope (40 ms)
2025-04-15T01:02:28.4480408Z           âœ“ should fail to retrieve a tag when API key doesn't have "tag:read" scope (23 ms)
2025-04-15T01:02:28.4481095Z       variables
2025-04-15T01:02:28.4481448Z         GET /variables
2025-04-15T01:02:28.4482175Z           âœ“ should retrieve all variables when API key has "variable:list" scope (47 ms)
2025-04-15T01:02:28.4482839Z           âœ“ should fail to retrieve all variables when API key doesn't have "variable:read" scope (40 ms)
2025-04-15T01:02:28.4483242Z         POST /variables
2025-04-15T01:02:28.4483817Z           âœ“ should create variable when API key has "variable:create" scope (94 ms)
2025-04-15T01:02:28.4485015Z           âœ“ should fail to create variable when API key doesn't have "variable:create" scope (37 ms)
2025-04-15T01:02:28.4485741Z       projects
2025-04-15T01:02:28.4486103Z         POST /projects
2025-04-15T01:02:28.4486924Z           âœ“ should create project when API key has "project:create" scope (46 ms)
2025-04-15T01:02:28.4487581Z           âœ“ should fail to create project when API key doesn't have "project:create" scope (24 ms)
2025-04-15T01:02:28.4487960Z         GET /projects
2025-04-15T01:02:28.4488382Z           âœ“ should return all projects when API key has "project:list" scope (42 ms)
2025-04-15T01:02:28.4488993Z           âœ“ should fail to create project when API key doesn't have "project:list" scope (32 ms)
2025-04-15T01:02:28.4489391Z         DELETE /projects/:id
2025-04-15T01:02:28.4489826Z           âœ“ should delete a project when API key has "project:delete" scope (43 ms)
2025-04-15T01:02:28.4490435Z           âœ“ should fail to delete a project when API key doesn't have "project:delete" scope (27 ms)
2025-04-15T01:02:28.4490824Z         PUT /projects/:id
2025-04-15T01:02:28.4491237Z           âœ“ should update a project when API key has "project:update" scope (32 ms)
2025-04-15T01:02:28.4492300Z           âœ“ should fail to update a project when API key doesn't have "project:update" scope (22 ms)
2025-04-15T01:02:28.4492994Z       workflows
2025-04-15T01:02:28.4493336Z         POST /workflows
2025-04-15T01:02:28.4494165Z           âœ“ should create workflow when API key has "workflow:create" scope (88 ms)
2025-04-15T01:02:28.4495407Z           âœ“ should fail to create a workflow when API key doesn't have "workflow:create" scope (27 ms)
2025-04-15T01:02:28.4496190Z         GET /workflows
2025-04-15T01:02:28.4497097Z           âœ“ should retrieve all workflows when API key has "workflow:list" scope (73 ms)
2025-04-15T01:02:28.4498411Z           âœ“ should fail to retrieve all workflows when API key doesn't have "workflow:create" scope (38 ms)
2025-04-15T01:02:28.4499218Z         GET /workflows/:id
2025-04-15T01:02:28.4500119Z           âœ“ should retrieve a workflow when API key has "workflow:read" scope (48 ms)
2025-04-15T01:02:28.4501343Z           âœ“ should fail to retrieve a workflow when API key doesn't have "workflow:read" scope (33 ms)
2025-04-15T01:02:28.4502358Z         DELETE /workflows/:id
2025-04-15T01:02:28.4503281Z           âœ“ should delete a workflow when API key has "workflow:delete" scope (55 ms)
2025-04-15T01:02:28.4504536Z           âœ“ should fail to delete a workflow when API key doesn't have "workflow:delete" scope (27 ms)
2025-04-15T01:02:28.4505313Z         PUT /workflows/:id
2025-04-15T01:02:28.4506175Z           âœ“ should update workflow when API key has "workflow:update" scope (77 ms)
2025-04-15T01:02:28.4507630Z           âœ“ should fail to update workflow when API key doesn't have "workflow:update" scope (30 ms)
2025-04-15T01:02:28.4508438Z         GET /workflows/:id/tags
2025-04-15T01:02:28.4509386Z           âœ“ should retrieve all workflow tags when API key has "workflowTags:list" scope (59 ms)
2025-04-15T01:02:28.4510742Z           âœ“ should fail to retrieve all workflow tags when API key doesn't have "workflowTags:list" scope (41 ms)
2025-04-15T01:02:28.4511799Z         PUT /workflows/:id/tags
2025-04-15T01:02:28.4512768Z           âœ“ should update workflow tags when API key has "workflowTags:update" scope (74 ms)
2025-04-15T01:02:28.4514073Z           âœ“ should fail to update workflow tags when API key doesn't have "workflowTags:update" scope (42 ms)
2025-04-15T01:02:28.4514722Z 
2025-04-15T01:02:31.6585866Z PASS test/integration/credentials/credentials.api.test.ts (10.156 s)
2025-04-15T01:02:31.6586605Z   GET /credentials
2025-04-15T01:02:31.6587359Z     âœ“ should return all creds for owner (100 ms)
2025-04-15T01:02:31.6588051Z     âœ“ should return only own creds for member (78 ms)
2025-04-15T01:02:31.6588832Z     âœ“ should return scopes when ?includeScopes=true (98 ms)
2025-04-15T01:02:31.6589668Z     âœ“ should return data when ?includeData=true (91 ms)
2025-04-15T01:02:31.6590561Z     âœ“ should return data when ?includeData=true for owners (56 ms)
2025-04-15T01:02:31.6591118Z     should return
2025-04-15T01:02:31.6591826Z       âœ“ all credentials for owner (91 ms)
2025-04-15T01:02:31.6592460Z       âœ“ only own credentials for member (63 ms)
2025-04-15T01:02:31.6593294Z     filter
2025-04-15T01:02:31.6593924Z       âœ“ should filter credentials by field: name - full match (64 ms)
2025-04-15T01:02:31.6594815Z       âœ“ should filter credentials by field: name - partial match (53 ms)
2025-04-15T01:02:31.6595637Z       âœ“ should filter credentials by field: type - full match (47 ms)
2025-04-15T01:02:31.6596370Z       âœ“ should filter credentials by field: type - partial match (46 ms)
2025-04-15T01:02:31.6597064Z       âœ“ should filter credentials by projectId (46 ms)
2025-04-15T01:02:31.6597928Z       âœ“ should return homeProject when filtering credentials by projectId (44 ms)
2025-04-15T01:02:31.6598991Z       âœ“ should return all credentials in a team project that member is part of (48 ms)
2025-04-15T01:02:31.6600051Z       âœ“ should return no credentials in a team project that member not is part of (39 ms)
2025-04-15T01:02:31.6601310Z       âœ“ should return only owned and explicitly shared credentials when filtering by any personal project id (52 ms)
2025-04-15T01:02:31.6603026Z       âœ“ should not ignore the project filter when the request is done by an owner and also includes the scopes (48 ms)
2025-04-15T01:02:31.6603790Z     select
2025-04-15T01:02:31.6604265Z       âœ“ should select credential field: id (44 ms)
2025-04-15T01:02:31.6604913Z       âœ“ should select credential field: name (41 ms)
2025-04-15T01:02:31.6605556Z       âœ“ should select credential field: type (36 ms)
2025-04-15T01:02:31.6606007Z     take
2025-04-15T01:02:31.6606577Z       âœ“ should return n credentials or less, without skip (55 ms)
2025-04-15T01:02:31.6607336Z       âœ“ should return n credentials or less, with skip (44 ms)
2025-04-15T01:02:31.6607850Z   POST /credentials
2025-04-15T01:02:31.6608296Z     âœ“ should create cred (45 ms)
2025-04-15T01:02:31.6608855Z     âœ“ should fail with invalid inputs (45 ms)
2025-04-15T01:02:31.6609428Z     âœ“ should ignore ID in payload (58 ms)
2025-04-15T01:02:31.6610108Z     âœ“ creates credential in personal project by default (48 ms)
2025-04-15T01:02:31.6611000Z     âœ“ creates credential in a specific project if the projectId is passed (56 ms)
2025-04-15T01:02:31.6612339Z     âœ“ does not create the credential in a specific project if the user is not part of the project (69 ms)
2025-04-15T01:02:31.6613051Z   DELETE /credentials/:id
2025-04-15T01:02:31.6613556Z     âœ“ should delete owned cred for owner (53 ms)
2025-04-15T01:02:31.6614163Z     âœ“ should delete non-owned cred for owner (49 ms)
2025-04-15T01:02:31.6615067Z     âœ“ should delete owned cred for member (44 ms)
2025-04-15T01:02:31.6615736Z     âœ“ should not delete non-owned cred for member (44 ms)
2025-04-15T01:02:31.6616496Z     âœ“ should not delete non-owned but shared cred for member (43 ms)
2025-04-15T01:02:31.6617163Z     âœ“ should fail if cred not found (36 ms)
2025-04-15T01:02:31.6617597Z   PATCH /credentials/:id
2025-04-15T01:02:31.6618102Z     âœ“ should update owned cred for owner (57 ms)
2025-04-15T01:02:31.6618720Z     âœ“ should update non-owned cred for owner (41 ms)
2025-04-15T01:02:31.6619349Z     âœ“ should update owned cred for member (52 ms)
2025-04-15T01:02:31.6619997Z     âœ“ should not update non-owned cred for member (40 ms)
2025-04-15T01:02:31.6620750Z     âœ“ should not update non-owned but shared cred for member (43 ms)
2025-04-15T01:02:31.6621722Z     âœ“ should update non-owned but shared cred for instance owner (54 ms)
2025-04-15T01:02:31.6622498Z     âœ“ should not allow to overwrite oauthTokenData (66 ms)
2025-04-15T01:02:31.6623162Z     âœ“ should fail with invalid inputs (76 ms)
2025-04-15T01:02:31.6624233Z     âœ“ should fail with a 404 if the credential does not exist and the actor has the global credential:update scope (31 ms)
2025-04-15T01:02:31.6625710Z     âœ“ should fail with a 403 if the credential does not exist and the actor does not have the global credential:update scope (35 ms)
2025-04-15T01:02:31.6626780Z     âœ“ should fail with a 400 is credential is managed (58 ms)
2025-04-15T01:02:31.6627296Z   GET /credentials/new
2025-04-15T01:02:31.6627968Z     âœ“ should return default name for new credential or its increment (75 ms)
2025-04-15T01:02:31.6629126Z     âœ“ should return name from query for new credential or its increment (84 ms)
2025-04-15T01:02:31.6629725Z   GET /credentials/:id
2025-04-15T01:02:31.6630247Z     âœ“ should retrieve owned cred for owner (55 ms)
2025-04-15T01:02:31.6631014Z     âœ“ should redact the data when `includeData:true` is passed (46 ms)
2025-04-15T01:02:31.6632024Z     âœ“ should omit oauth data when `includeData:true` is passed (37 ms)
2025-04-15T01:02:31.6632764Z     âœ“ should retrieve owned cred for member (44 ms)
2025-04-15T01:02:31.6633413Z     âœ“ should retrieve non-owned cred for owner (47 ms)
2025-04-15T01:02:31.6634109Z     âœ“ should not retrieve non-owned cred for member (32 ms)
2025-04-15T01:02:31.6634776Z     âœ“ should return 404 if cred not found (31 ms)
2025-04-15T01:02:31.6635223Z   POST /credentials/test
2025-04-15T01:02:31.6635814Z     âœ“ should test a credential with unredacted data (38 ms)
2025-04-15T01:02:31.6636516Z     âœ“ should test a credential with redacted data (38 ms)
2025-04-15T01:02:31.6636895Z 
2025-04-15T01:02:32.4634628Z PASS test/integration/public-api/workflows.test.ts (9.981 s)
2025-04-15T01:02:32.4646134Z   GET /workflows
2025-04-15T01:02:32.4647222Z     âœ“ should fail due to missing API Key (48 ms)
2025-04-15T01:02:32.4647914Z     âœ“ should fail due to invalid API Key (15 ms)
2025-04-15T01:02:32.4648548Z     âœ“ should return all owned workflows (215 ms)
2025-04-15T01:02:32.4649377Z     âœ“ should return all owned workflows with pagination (58 ms)
2025-04-15T01:02:32.4650187Z     âœ“ should return all owned workflows filtered by tag (42 ms)
2025-04-15T01:02:32.4652760Z     âœ“ should return all owned workflows filtered by tags (59 ms)
2025-04-15T01:02:32.4662764Z     âœ“ for owner, should return all workflows filtered by `projectId` (51 ms)
2025-04-15T01:02:32.4664343Z     âœ“ for member, should return all member-accessible workflows filtered by `projectId` (32 ms)
2025-04-15T01:02:32.4667162Z     âœ“ should return all owned workflows filtered by name (33 ms)
2025-04-15T01:02:32.4669101Z     âœ“ should return all workflows for owner (59 ms)
2025-04-15T01:02:32.4669980Z     âœ“ should return all owned workflows without pinned data (42 ms)
2025-04-15T01:02:32.4670694Z   GET /workflows/:id
2025-04-15T01:02:32.4672902Z     âœ“ should fail due to missing API Key (16 ms)
2025-04-15T01:02:32.4673545Z     âœ“ should fail due to invalid API Key (10 ms)
2025-04-15T01:02:32.4674222Z     âœ“ should fail due to non-existing workflow (42 ms)
2025-04-15T01:02:32.4675265Z     âœ“ should retrieve workflow (40 ms)
2025-04-15T01:02:32.4675891Z     âœ“ should retrieve non-owned workflow for owner (28 ms)
2025-04-15T01:02:32.4676572Z     âœ“ should retrieve workflow without pinned data (36 ms)
2025-04-15T01:02:32.4677055Z   DELETE /workflows/:id
2025-04-15T01:02:32.4677550Z     âœ“ should fail due to missing API Key (16 ms)
2025-04-15T01:02:32.4678132Z     âœ“ should fail due to invalid API Key (21 ms)
2025-04-15T01:02:32.4678745Z     âœ“ should fail due to non-existing workflow (36 ms)
2025-04-15T01:02:32.4679371Z     âœ“ should delete the workflow (53 ms)
2025-04-15T01:02:32.4680043Z     âœ“ should delete non-owned workflow when owner (25 ms)
2025-04-15T01:02:32.4680596Z   POST /workflows/:id/activate
2025-04-15T01:02:32.4681158Z     âœ“ should fail due to missing API Key (10 ms)
2025-04-15T01:02:32.4681962Z     âœ“ should fail due to invalid API Key (10 ms)
2025-04-15T01:02:32.4682642Z     âœ“ should fail due to non-existing workflow (44 ms)
2025-04-15T01:02:32.4683539Z     âœ“ should fail due to trying to activate a workflow without any nodes (42 ms)
2025-04-15T01:02:32.4684540Z     âœ“ should fail due to trying to activate a workflow without a trigger (30 ms)
2025-04-15T01:02:32.4685311Z     âœ“ should set workflow as active (85 ms)
2025-04-15T01:02:32.4686018Z     âœ“ should set non-owned workflow as active when owner (104 ms)
2025-04-15T01:02:32.4686622Z   POST /workflows/:id/deactivate
2025-04-15T01:02:32.4687219Z     âœ“ should fail due to missing API Key (8 ms)
2025-04-15T01:02:32.4688146Z     âœ“ should fail due to invalid API Key (14 ms)
2025-04-15T01:02:32.4688833Z     âœ“ should fail due to non-existing workflow (18 ms)
2025-04-15T01:02:32.4689433Z     âœ“ should deactivate workflow (57 ms)
2025-04-15T01:02:32.4690134Z     âœ“ should deactivate non-owned workflow when owner (56 ms)
2025-04-15T01:02:32.4690671Z   POST /workflows
2025-04-15T01:02:32.4691161Z     âœ“ should fail due to missing API Key (8 ms)
2025-04-15T01:02:32.4695366Z     âœ“ should fail due to invalid API Key (10 ms)
2025-04-15T01:02:32.4696017Z     âœ“ should fail due to invalid body (39 ms)
2025-04-15T01:02:32.4696554Z     âœ“ should create workflow (41 ms)
2025-04-15T01:02:32.4697225Z     âœ“ should create workflow history version when licensed (22 ms)
2025-04-15T01:02:32.4698111Z     âœ“ should not create workflow history version when not licensed (20 ms)
2025-04-15T01:02:32.4699093Z     âœ“ should not add a starting node if the payload has no starting nodes (20 ms)
2025-04-15T01:02:32.4699722Z   PUT /workflows/:id
2025-04-15T01:02:32.4700296Z     âœ“ should fail due to missing API Key (10 ms)
2025-04-15T01:02:32.4700947Z     âœ“ should fail due to invalid API Key (9 ms)
2025-04-15T01:02:32.4701919Z     âœ“ should fail due to non-existing workflow (32 ms)
2025-04-15T01:02:32.4702593Z     âœ“ should fail due to invalid body (12 ms)
2025-04-15T01:02:32.4703185Z     âœ“ should update workflow (26 ms)
2025-04-15T01:02:32.4703905Z     âœ“ should create workflow history version when licensed (24 ms)
2025-04-15T01:02:32.4704786Z     âœ“ should not create workflow history when not licensed (25 ms)
2025-04-15T01:02:32.4705568Z     âœ“ should update non-owned workflow if owner (35 ms)
2025-04-15T01:02:32.4706091Z   GET /workflows/:id/tags
2025-04-15T01:02:32.4706634Z     âœ“ should fail due to missing API Key (9 ms)
2025-04-15T01:02:32.4707242Z     âœ“ should fail due to invalid API Key (7 ms)
2025-04-15T01:02:32.4707922Z     âœ“ should fail if N8N_WORKFLOW_TAGS_DISABLED (20 ms)
2025-04-15T01:02:32.4708635Z     âœ“ should fail due to non-existing workflow (13 ms)
2025-04-15T01:02:32.4709357Z     âœ“ should return all tags of owned workflow (31 ms)
2025-04-15T01:02:32.4710170Z     âœ“ should return empty array if workflow does not have tags (25 ms)
2025-04-15T01:02:32.4710770Z   PUT /workflows/:id/tags
2025-04-15T01:02:32.4711324Z     âœ“ should fail due to missing API Key (10 ms)
2025-04-15T01:02:32.4712107Z     âœ“ should fail due to invalid API Key (11 ms)
2025-04-15T01:02:32.4712777Z     âœ“ should fail if N8N_WORKFLOW_TAGS_DISABLED (19 ms)
2025-04-15T01:02:32.4713716Z     âœ“ should fail due to non-existing workflow (12 ms)
2025-04-15T01:02:32.4714531Z     âœ“ should add the tags, workflow have not got tags previously (38 ms)
2025-04-15T01:02:32.4715423Z     âœ“ should add the tags, workflow have some tags previously (42 ms)
2025-04-15T01:02:32.4716407Z     âœ“ should fail to add the tags as one does not exist, workflow should maintain previous tags (41 ms)
2025-04-15T01:02:32.4717164Z   PUT /workflows/:id/transfer
2025-04-15T01:02:32.4717795Z     âœ“ should transfer workflow to project (77 ms)
2025-04-15T01:02:32.4718508Z     âœ“ if no destination project, should reject (17 ms)
2025-04-15T01:02:32.4718862Z 
2025-04-15T01:02:36.2863149Z PASS src/events/__tests__/telemetry-event-relay.test.ts
2025-04-15T01:02:36.2863844Z   TelemetryEventRelay
2025-04-15T01:02:36.2864223Z     init
2025-04-15T01:02:36.2865213Z       âœ“ with diagnostics enabled, should init telemetry and register listeners (17 ms)
2025-04-15T01:02:36.2866503Z       âœ“ with diagnostics disabled, should neither init telemetry nor register listeners (1 ms)
2025-04-15T01:02:36.2867284Z     project events
2025-04-15T01:02:36.2867940Z       âœ“ should track on `team-project-updated` event (2 ms)
2025-04-15T01:02:36.2868742Z       âœ“ should track on `team-project-deleted` event (1 ms)
2025-04-15T01:02:36.2869505Z       âœ“ should track on `team-project-created` event (1 ms)
2025-04-15T01:02:36.2870038Z     source control events
2025-04-15T01:02:36.2870794Z       âœ“ should track on `source-control-settings-updated` event (1 ms)
2025-04-15T01:02:36.2872537Z       âœ“ should track on `source-control-user-started-pull-ui` event
2025-04-15T01:02:36.2873541Z       âœ“ should track on `source-control-user-finished-pull-ui` event (1 ms)
2025-04-15T01:02:36.2874568Z       âœ“ should track on `source-control-user-pulled-api` event (1 ms)
2025-04-15T01:02:36.2875497Z       âœ“ should track on `source-control-user-started-push-ui` event
2025-04-15T01:02:36.2876461Z       âœ“ should track on `source-control-user-finished-push-ui` event (1 ms)
2025-04-15T01:02:36.2877105Z     license events
2025-04-15T01:02:36.2877798Z       âœ“ should track on `license-renewal-attempted` event (1 ms)
2025-04-15T01:02:36.2878363Z     variable events
2025-04-15T01:02:36.2878924Z       âœ“ should track on `variable-created` event
2025-04-15T01:02:36.2879428Z     external secrets events
2025-04-15T01:02:36.2880281Z       âœ“ should track on `external-secrets-provider-settings-saved` event (1 ms)
2025-04-15T01:02:36.2880978Z     public API events
2025-04-15T01:02:36.2881813Z       âœ“ should track on `public-api-invoked` event
2025-04-15T01:02:36.2882709Z       âœ“ should track on `public-api-key-created` event (1 ms)
2025-04-15T01:02:36.2883564Z       âœ“ should track on `public-api-key-deleted` event
2025-04-15T01:02:36.2884122Z     community package events
2025-04-15T01:02:36.2884846Z       âœ“ should track on `community-package-installed` event (1 ms)
2025-04-15T01:02:36.2885777Z       âœ“ should track on `community-package-updated` event (1 ms)
2025-04-15T01:02:36.2886697Z       âœ“ should track on `community-package-deleted` event
2025-04-15T01:02:36.2887261Z     credentials events
2025-04-15T01:02:36.2887903Z       âœ“ should track on `credentials-created` event (1 ms)
2025-04-15T01:02:36.2888599Z       âœ“ should track on `credentials-shared` event (1 ms)
2025-04-15T01:02:36.2889304Z       âœ“ should track on `credentials-updated` event (1 ms)
2025-04-15T01:02:36.2889986Z       âœ“ should track on `credentials-deleted` event
2025-04-15T01:02:36.2890450Z     LDAP events
2025-04-15T01:02:36.2891057Z       âœ“ should track on `ldap-general-sync-finished` event (1 ms)
2025-04-15T01:02:36.2923666Z       âœ“ should track on `ldap-settings-updated` event (1 ms)
2025-04-15T01:02:36.2924519Z       âœ“ should track on `ldap-login-sync-failed` event
2025-04-15T01:02:36.2925452Z       âœ“ should track on `login-failed-due-to-ldap-disabled` event (1 ms)
2025-04-15T01:02:36.2926094Z     workflow events
2025-04-15T01:02:36.2926698Z       âœ“ should track on `workflow-created` event (3 ms)
2025-04-15T01:02:36.2927810Z       âœ“ should track on `workflow-deleted` event (1 ms)
2025-04-15T01:02:36.2928732Z       âœ“ should track on `workflow-post-execute` event (3 ms)
2025-04-15T01:02:36.2929485Z       âœ“ should track on `workflow-saved` event (10 ms)
2025-04-15T01:02:36.2930239Z       âœ“ should track on `workflow-sharing-updated` event
2025-04-15T01:02:36.2930766Z     user events
2025-04-15T01:02:36.2931299Z       âœ“ should track on `user-updated` event
2025-04-15T01:02:36.2962322Z       âœ“ should track on `user-deleted` event (1 ms)
2025-04-15T01:02:36.2963007Z       âœ“ should track on `user-invited` event
2025-04-15T01:02:36.2963674Z       âœ“ should track on `user-signed-up` event (1 ms)
2025-04-15T01:02:36.2964562Z       âœ“ should track on `user-submitted-personalization-survey` event (1 ms)
2025-04-15T01:02:36.2965438Z       âœ“ should track on `user-changed-role` event (1 ms)
2025-04-15T01:02:36.2966138Z       âœ“ should track on `user-retrieved-user` event
2025-04-15T01:02:36.2966902Z       âœ“ should track on `user-retrieved-all-users` event (1 ms)
2025-04-15T01:02:36.2967462Z     lifecycle events
2025-04-15T01:02:36.2968031Z       âœ“ should track on `server-started` event (10 ms)
2025-04-15T01:02:36.2968720Z       âœ“ should track on `session-started` event (1 ms)
2025-04-15T01:02:36.2969424Z       âœ“ should track on `instance-stopped` event (1 ms)
2025-04-15T01:02:36.2970186Z       âœ“ should track on `instance-owner-setup` event (1 ms)
2025-04-15T01:02:36.2970719Z     workflow execution events
2025-04-15T01:02:36.2971427Z       âœ“ should track on `first-production-workflow-succeeded` event
2025-04-15T01:02:36.2972841Z       âœ“ should track on `first-workflow-data-loaded` event (1 ms)
2025-04-15T01:02:36.2973391Z     email events
2025-04-15T01:02:36.2973921Z       âœ“ should track on `email-failed` event (1 ms)
2025-04-15T01:02:36.2974425Z     Community+ registered
2025-04-15T01:02:36.2975076Z       âœ“ should track `license-community-plus-registered` event
2025-04-15T01:02:36.2975692Z     workflow post execute events
2025-04-15T01:02:36.2976329Z       âœ“ should not track when workflow has no id (1 ms)
2025-04-15T01:02:36.2977050Z       âœ“ should track successful workflow execution (19 ms)
2025-04-15T01:02:36.2977978Z       âœ“ should call telemetry.track when manual node execution finished (9 ms)
2025-04-15T01:02:36.2979246Z       âœ“ should call telemetry.track when manual node execution finished with canceled error message (6 ms)
2025-04-15T01:02:36.2980451Z       âœ“ should call telemetry.track when manual workflow execution finished (83 ms)
2025-04-15T01:02:36.2982055Z       âœ“ should call telemetry.track when manual node execution finished with is_managed and credential_type properties (4 ms)
2025-04-15T01:02:36.2983424Z       âœ“ should call telemetry.track when user ran out of free AI credits (7 ms)
2025-04-15T01:02:36.2983946Z 
2025-04-15T01:02:39.0557855Z PASS test/integration/credentials/credentials.api.ee.test.ts (10.328 s)
2025-04-15T01:02:39.0604197Z   POST /credentials
2025-04-15T01:02:39.0605714Z     âœ“ project viewers cannot create credentials (165 ms)
2025-04-15T01:02:39.0606496Z   GET /credentials
2025-04-15T01:02:39.0607216Z     âœ“ should return all creds for owner (109 ms)
2025-04-15T01:02:39.0608183Z     âœ“ should return only relevant creds for member (83 ms)
2025-04-15T01:02:39.0609482Z     âœ“ should show credentials that the user has access to through a team project they are part of (79 ms)
2025-04-15T01:02:39.0610615Z   GET /credentials/for-workflow
2025-04-15T01:02:39.0611169Z     for team projects
2025-04-15T01:02:39.0612822Z       âœ“ it will only return the credentials in that project if "workflowId" is used as the query parameter and the actor is a "member" (79 ms)
2025-04-15T01:02:39.0614702Z       âœ“ it will only return the credentials in that project if "projectId" is used as the query parameter and the actor is a "member" (64 ms)
2025-04-15T01:02:39.0616136Z       âœ“ it will only return the credentials in that project if "workflowId" is used as the query parameter and the actor is a "owner" (74 ms)
2025-04-15T01:02:39.0618032Z       âœ“ it will only return the credentials in that project if "projectId" is used as the query parameter and the actor is a "owner" (98 ms)
2025-04-15T01:02:39.0618932Z     for personal projects
2025-04-15T01:02:39.0619928Z       âœ“ it returns only personal credentials for a members, if "projectId" is used as the query parameter (102 ms)
2025-04-15T01:02:39.0621271Z       âœ“ it returns only personal credentials for a members, if "workflowId" is used as the query parameter (95 ms)
2025-04-15T01:02:39.0623208Z       âœ“ if the actor is a global owner and the workflow has not been shared with them, it returns all credentials of all projects the workflow is part of (76 ms)
2025-04-15T01:02:39.0625109Z       âœ“ if the actor is a global owner and the workflow has been shared with them, it returns all credentials of all projects the workflow is part of (66 ms)
2025-04-15T01:02:39.0626619Z       âœ“ if the projectId is passed by a global owner it will return all credentials in that project (61 ms)
2025-04-15T01:02:39.0628278Z       âœ“ if the global owner owns the workflow it will return all credentials of all personal projects, when using "workflowId" as the query parameter (69 ms)
2025-04-15T01:02:39.0630089Z       âœ“ if the global owner owns the workflow it will return all credentials of all personal projects, when using "projectId" as the query parameter (74 ms)
2025-04-15T01:02:39.0631055Z   GET /credentials/:id
2025-04-15T01:02:39.0631725Z     âœ“ project viewers can view credentials (62 ms)
2025-04-15T01:02:39.0632377Z     âœ“ should retrieve owned cred for owner (62 ms)
2025-04-15T01:02:39.0633332Z     âœ“ should redact the data when `includeData:true` is passed (57 ms)
2025-04-15T01:02:39.0634058Z     âœ“ should retrieve non-owned cred for owner (98 ms)
2025-04-15T01:02:39.0634677Z     âœ“ should retrieve owned cred for member (88 ms)
2025-04-15T01:02:39.0635366Z     âœ“ should not retrieve non-owned cred for member (45 ms)
2025-04-15T01:02:39.0636005Z     âœ“ should return 404 if cred not found (51 ms)
2025-04-15T01:02:39.0636480Z   PATCH /credentials/:id
2025-04-15T01:02:39.0637066Z     âœ“ project viewer cannot update credentials (56 ms)
2025-04-15T01:02:39.0637570Z   PUT /credentials/:id/share
2025-04-15T01:02:39.0638477Z     âœ“ should share the credential with the provided userIds and unshare it for missing ones (101 ms)
2025-04-15T01:02:39.0639490Z     âœ“ should share the credential with the provided userIds (74 ms)
2025-04-15T01:02:39.0640263Z     âœ“ should respond 403 for non-existing credentials (50 ms)
2025-04-15T01:02:39.0641146Z     âœ“ should respond 403 for non-owned credentials for shared members (58 ms)
2025-04-15T01:02:39.0642406Z     âœ“ should respond 403 for non-owned credentials for non-shared members sharing with self (57 ms)
2025-04-15T01:02:39.0643563Z     âœ“ should respond 403 for non-owned credentials for non-shared members sharing (59 ms)
2025-04-15T01:02:39.0644504Z     âœ“ should respond 200 for non-owned credentials for owners (53 ms)
2025-04-15T01:02:39.0645217Z     âœ“ should not ignore pending sharee (57 ms)
2025-04-15T01:02:39.0645828Z     âœ“ should ignore non-existing sharee (53 ms)
2025-04-15T01:02:39.0646485Z     âœ“ should ignore sharing with owner project (44 ms)
2025-04-15T01:02:39.0647326Z     âœ“ should ignore sharing with project that already has it shared (54 ms)
2025-04-15T01:02:39.0648191Z     âœ“ should respond 400 if invalid payload is provided (41 ms)
2025-04-15T01:02:39.0648863Z     âœ“ should unshare the credential (56 ms)
2025-04-15T01:02:39.0649755Z     âœ“ should not call internal hooks listener for email sent if emailing is disabled (55 ms)
2025-04-15T01:02:39.0651007Z     âœ“ member should be able to share from personal project to team project that member has access to (58 ms)
2025-04-15T01:02:39.0652281Z     âœ“ member should be able to share from team project to personal project (60 ms)
2025-04-15T01:02:39.0653395Z     âœ“ member should be able to share from team project to team project that member has access to (49 ms)
2025-04-15T01:02:39.0654476Z     âœ“ admins should be able to share from any team project to any team project  (67 ms)
2025-04-15T01:02:39.0655844Z     âœ“ admins should be able to share from any team project to any user's personal project  (54 ms)
2025-04-15T01:02:39.0656990Z     âœ“ admins should be able to share from any personal project to any team project  (59 ms)
2025-04-15T01:02:39.0657666Z   PUT /:credentialId/transfer
2025-04-15T01:02:39.0658234Z     âœ“ cannot transfer into the same project (57 ms)
2025-04-15T01:02:39.0658888Z     âœ“ cannot transfer somebody elses credential (55 ms)
2025-04-15T01:02:39.0659701Z     âœ“ cannot transfer if you're not a member of the destination project (55 ms)
2025-04-15T01:02:39.0660561Z     âœ“ project:editors cannot transfer credentials (60 ms)
2025-04-15T01:02:39.0661276Z     âœ“ project:viewers cannot transfer credentials (45 ms)
2025-04-15T01:02:39.0667356Z     âœ“ owners can always transfer from a team project to a team project (54 ms)
2025-04-15T01:02:39.0668384Z     âœ“ owners can always transfer from a team project to a personal project (45 ms)
2025-04-15T01:02:39.0669416Z     âœ“ owners can always transfer from a personal project to a team project (56 ms)
2025-04-15T01:02:39.0670376Z     âœ“ admins can always transfer from a team project to a team project (50 ms)
2025-04-15T01:02:39.0671335Z     âœ“ admins can always transfer from a team project to a personal project (66 ms)
2025-04-15T01:02:39.0672511Z     âœ“ admins can always transfer from a personal project to a team project (69 ms)
2025-04-15T01:02:39.0672972Z 
2025-04-15T01:02:40.6762980Z PASS src/ldap.ee/__tests__/ldap.service.test.ts
2025-04-15T01:02:40.6763601Z   LdapService
2025-04-15T01:02:40.6764374Z     init()
2025-04-15T01:02:40.6765099Z       âœ“ should load the LDAP configuration (8 ms)
2025-04-15T01:02:40.6766031Z       âœ“ should set expected configuration variables from LDAP config if LDAP is enabled (3 ms)
2025-04-15T01:02:40.6767174Z       âœ“ should set expected configuration variables from LDAP config if LDAP is disabled (1 ms)
2025-04-15T01:02:40.6768302Z       âœ“ should show logger warning if authentication method is not ldap or email (1 ms)
2025-04-15T01:02:40.6769290Z       âœ“ should schedule syncing if config has enabled synchronization (2 ms)
2025-04-15T01:02:40.6770518Z       âœ“ should throw an error if config has enabled synchronization but no synchronizationInterval is set (50 ms)
2025-04-15T01:02:40.6771299Z     loadConfig()
2025-04-15T01:02:40.6772145Z       âœ“ should retrieve the LDAP configuration from the settings repository (1 ms)
2025-04-15T01:02:40.6773175Z       âœ“ should throw an expected error if the LDAP configuration is not found (2 ms)
2025-04-15T01:02:40.6774184Z       âœ“ should decipher the LDAP configuration admin password (1 ms)
2025-04-15T01:02:40.6775247Z       âœ“ should return the expected LDAP configuration (1 ms)
2025-04-15T01:02:40.6775765Z     updateConfig()
2025-04-15T01:02:40.6776489Z       âœ“ should throw expected error if the LDAP configuration is invalid (6 ms)
2025-04-15T01:02:40.6777769Z       âœ“ should throw expected error if login is enabled and the current authentication method is "saml" (1 ms)
2025-04-15T01:02:40.6778772Z       âœ“ should encrypt the binding admin password (2 ms)
2025-04-15T01:02:40.6779730Z       âœ“ should delete all ldap identities if login is disabled and ldap users exist (2 ms)
2025-04-15T01:02:40.6780955Z       âœ“ should not delete ldap identities if login is disabled and there are no ldap identities (7 ms)
2025-04-15T01:02:40.6791187Z       âœ“ should update the LDAP configuration in the settings repository (1 ms)
2025-04-15T01:02:40.6792333Z       âœ“ should update the LDAP login label in the config (1 ms)
2025-04-15T01:02:40.6792921Z     setConfig()
2025-04-15T01:02:40.6793821Z       âœ“ should stop synchronization if the timer is running and the config is disabled (1 ms)
2025-04-15T01:02:40.6795113Z       âœ“ should schedule synchronization if the timer is not running and the config is enabled (1 ms)
2025-04-15T01:02:40.6796693Z       âœ“ should throw an error if the timer is not running and the config is enabled but the synchronizationInterval is not set (1 ms)
2025-04-15T01:02:40.6798468Z       âœ“ should restart synchronization if the timer is running and the config is enabled (1 ms)
2025-04-15T01:02:40.6799264Z     searchWithAdminBinding()
2025-04-15T01:02:40.6799845Z       âœ“ should bind admin client (1 ms)
2025-04-15T01:02:40.6800522Z       âœ“ should call client search with expected parameters
2025-04-15T01:02:40.6801510Z       âœ“ should call client search with expected parameters when searchPageSize is 0 (1 ms)
2025-04-15T01:02:40.6802574Z       âœ“ should unbind client after search (1 ms)
2025-04-15T01:02:40.6803217Z       âœ“ should return expected search entries
2025-04-15T01:02:40.6803924Z     validUser()
2025-04-15T01:02:40.6804652Z       âœ“ should throw expected error if no configuration has been set (1 ms)
2025-04-15T01:02:40.6805730Z       âœ“ should bind the ldap client with the expected distinguished name and password (1 ms)
2025-04-15T01:02:40.6806612Z       âœ“ should throw expected error if binding fails
2025-04-15T01:02:40.6807270Z       âœ“ should unbind the client binding (1 ms)
2025-04-15T01:02:40.6807840Z     findAndAuthenticateLdapUser()
2025-04-15T01:02:40.6808586Z       âœ“ should search for expected admin login ID (2 ms)
2025-04-15T01:02:40.6809400Z       âœ“ should emit expected error if admin search fails (1 ms)
2025-04-15T01:02:40.6810207Z       âœ“ should return undefined if no user is found (1 ms)
2025-04-15T01:02:40.6810852Z       âœ“ should validate found user (1 ms)
2025-04-15T01:02:40.6811786Z       âœ“ should validate last user if more than one is found (1 ms)
2025-04-15T01:02:40.6812643Z       âœ“ should return undefined if invalid user is found
2025-04-15T01:02:40.6813438Z       âœ“ should resolve binary attributes for found user
2025-04-15T01:02:40.6814075Z       âœ“ should return found user (1 ms)
2025-04-15T01:02:40.6814514Z     testConnection()
2025-04-15T01:02:40.6815197Z       âœ“ should throw expected error if init() is not called first (1 ms)
2025-04-15T01:02:40.6816217Z       âœ“ should create a new client without TLS if connectionSecurity is set to "none"
2025-04-15T01:02:40.6817709Z       âœ“ should create a new client with TLS enabled if connectionSecurity is set to "tls" and allowing unauthorized certificates (2 ms)
2025-04-15T01:02:40.6819461Z       âœ“ should create a new client with TLS enabled if connectionSecurity is set to "tls" and not allowing unauthorized certificates
2025-04-15T01:02:40.6820925Z       âœ“ should create a new client and start TLS if connectionSecurity is set to "startTls" (1 ms)
2025-04-15T01:02:40.6822316Z       âœ“ should not create a new client if one has already been created (1 ms)
2025-04-15T01:02:40.6822942Z     runSync()
2025-04-15T01:02:40.6823527Z       âœ“ should search for users with expected parameters (1 ms)
2025-04-15T01:02:40.6824259Z       âœ“ should resolve binary attributes for users (2 ms)
2025-04-15T01:02:40.6824946Z       âœ“ should throw expected error if search fails (1 ms)
2025-04-15T01:02:40.6825663Z       âœ“ should process expected users if mode is "live" (1 ms)
2025-04-15T01:02:40.6826453Z       âœ“ should sync expected LDAP data when no errors (2 ms)
2025-04-15T01:02:40.6827628Z       âœ“ should sync expected LDAP data when users fail to process (2 ms)
2025-04-15T01:02:40.6828649Z       âœ“ should emit expected event if synchronization is enabled (1 ms)
2025-04-15T01:02:40.6829621Z       âœ“ should emit expected event if synchronization is disabled (1 ms)
2025-04-15T01:02:40.6830630Z       âœ“ should emit expected event with error message if processUsers fails (1 ms)
2025-04-15T01:02:40.6831293Z     stopSync()
2025-04-15T01:02:40.6844109Z       âœ“ should clear the scheduled timer
2025-04-15T01:02:40.6844499Z 
2025-04-15T01:02:42.6448926Z PASS test/integration/folder/folder.controller.test.ts (9.957 s)
2025-04-15T01:02:42.6449721Z   POST /projects/:projectId/folders
2025-04-15T01:02:42.6450755Z     âœ“ should not create folder when project does not exist (135 ms)
2025-04-15T01:02:42.6452004Z     âœ“ should not create folder when name is empty (59 ms)
2025-04-15T01:02:42.6453093Z     âœ“ should not create folder if user has project:viewer role in team project (44 ms)
2025-04-15T01:02:42.6454304Z     âœ“ should not allow creating folder in another user's personal project (33 ms)
2025-04-15T01:02:42.6455522Z     âœ“ should create folder if user has project:editor role in team project (33 ms)
2025-04-15T01:02:42.6456691Z     âœ“ should create folder if user has project:admin role in team project (28 ms)
2025-04-15T01:02:42.6458067Z     âœ“ should not allow creating folder with parent that exists in another project (58 ms)
2025-04-15T01:02:42.6459122Z     âœ“ should create folder in root of specified project (42 ms)
2025-04-15T01:02:42.6460534Z     âœ“ should create folder in specified project within another folder (46 ms)
2025-04-15T01:02:42.6461423Z     âœ“ should create folder in personal project (35 ms)
2025-04-15T01:02:42.6462462Z   GET /projects/:projectId/folders/:folderId/tree
2025-04-15T01:02:42.6463651Z     âœ“ should not get folder tree when project does not exist (28 ms)
2025-04-15T01:02:42.6464590Z     âœ“ should not get folder tree when folder does not exist (41 ms)
2025-04-15T01:02:42.6465613Z     âœ“ should not get folder tree if user has no access to project (36 ms)
2025-04-15T01:02:42.6466770Z     âœ“ should not allow getting folder tree from another user's personal project (34 ms)
2025-04-15T01:02:42.6467718Z     âœ“ should get nested folder structure (59 ms)
2025-04-15T01:02:42.6468338Z   PATCH /projects/:projectId/folders/:folderId
2025-04-15T01:02:42.6469159Z     âœ“ should not update folder when project does not exist (59 ms)
2025-04-15T01:02:42.6470040Z     âœ“ should not update folder when folder does not exist (34 ms)
2025-04-15T01:02:42.6470935Z     âœ“ should not update folder when name is empty (33 ms)
2025-04-15T01:02:42.6472146Z     âœ“ should not update folder if user has project:viewer role in team project (36 ms)
2025-04-15T01:02:42.6473264Z     âœ“ should not allow updating folder in another user's personal project (28 ms)
2025-04-15T01:02:42.6474436Z     âœ“ should update folder if user has project:editor role in team project (31 ms)
2025-04-15T01:02:42.6475631Z     âœ“ should update folder if user has project:admin role in team project (35 ms)
2025-04-15T01:02:42.6476596Z     âœ“ should update folder in personal project (34 ms)
2025-04-15T01:02:42.6477336Z     âœ“ should update folder tags (46 ms)
2025-04-15T01:02:42.6478119Z     âœ“ should replace existing folder tags with new ones (50 ms)
2025-04-15T01:02:42.6478887Z     âœ“ should update folder parent folder ID (50 ms)
2025-04-15T01:02:42.6479858Z     âœ“ should not update folder parent when target folder does not exist (37 ms)
2025-04-15T01:02:42.6481069Z     âœ“ should not update folder parent when target folder is in another project (39 ms)
2025-04-15T01:02:42.6482552Z     âœ“ should allow moving a folder to root level by setting parentFolderId to "0" (41 ms)
2025-04-15T01:02:42.6483787Z     âœ“ should not update folder parent if user has project:viewer role in team project (46 ms)
2025-04-15T01:02:42.6485071Z     âœ“ should update folder parent folder if user has project:editor role in team project (43 ms)
2025-04-15T01:02:42.6486387Z     âœ“ should not allow setting a folder as its own parent (34 ms)
2025-04-15T01:02:42.6487125Z   DELETE /projects/:projectId/folders/:folderId
2025-04-15T01:02:42.6487962Z     âœ“ should not delete folder when project does not exist (24 ms)
2025-04-15T01:02:42.6488855Z     âœ“ should not delete folder when folder does not exist (31 ms)
2025-04-15T01:02:42.6489953Z     âœ“ should not delete folder if user has project:viewer role in team project (30 ms)
2025-04-15T01:02:42.6491134Z     âœ“ should not allow deleting folder in another user's personal project (31 ms)
2025-04-15T01:02:42.6492503Z     âœ“ should delete folder if user has project:editor role in team project (37 ms)
2025-04-15T01:02:42.6493570Z     âœ“ should delete folder if user has project:admin role in team project (31 ms)
2025-04-15T01:02:42.6494481Z     âœ“ should delete folder in personal project (29 ms)
2025-04-15T01:02:42.6495727Z     âœ“ should delete folder, all child folders, and contained workflows when no transfer folder is specified (48 ms)
2025-04-15T01:02:42.6497063Z     âœ“ should transfer folder contents when transferToFolderId is specified (50 ms)
2025-04-15T01:02:42.6498255Z     âœ“ should not transfer folder contents when transfer folder does not exist (36 ms)
2025-04-15T01:02:42.6499473Z     âœ“ should not transfer folder contents when transfer folder is in another project (40 ms)
2025-04-15T01:02:42.6500735Z     âœ“ should not allow transferring contents to the same folder being deleted (34 ms)
2025-04-15T01:02:42.6502188Z     âœ“ should transfer folder contents to project root when transferToFolderId is "0" (58 ms)
2025-04-15T01:02:42.6503290Z   GET /projects/:projectId/folders
2025-04-15T01:02:42.6504055Z     âœ“ should not list folders when project does not exist (24 ms)
2025-04-15T01:02:42.6504953Z     âœ“ should not list folders if user has no access to project (26 ms)
2025-04-15T01:02:42.6505938Z     âœ“ should not allow listing folders from another user's personal project (22 ms)
2025-04-15T01:02:42.6507076Z     âœ“ should list folders if user has project:viewer role in team project (59 ms)
2025-04-15T01:02:42.6508035Z     âœ“ should list folders from personal project (35 ms)
2025-04-15T01:02:42.6508780Z     âœ“ should filter folders by name (37 ms)
2025-04-15T01:02:42.6509525Z     âœ“ should filter folders by parent folder ID (44 ms)
2025-04-15T01:02:42.6510437Z     âœ“ should filter root-level folders when parentFolderId=0 (38 ms)
2025-04-15T01:02:42.6511219Z     âœ“ should filter folders by tag (65 ms)
2025-04-15T01:02:42.6512266Z     âœ“ should filter folders by multiple tags (AND operator) (55 ms)
2025-04-15T01:02:42.6513275Z     âœ“ should filter folders by excludeFolderIdAndDescendants (43 ms)
2025-04-15T01:02:42.6514209Z     âœ“ should apply pagination with take parameter (61 ms)
2025-04-15T01:02:42.6515079Z     âœ“ should apply pagination with skip parameter (46 ms)
2025-04-15T01:02:42.6515927Z     âœ“ should apply combined skip and take parameters (48 ms)
2025-04-15T01:02:42.6516699Z     âœ“ should sort folders by name ascending (39 ms)
2025-04-15T01:02:42.6517451Z     âœ“ should sort folders by name descending (33 ms)
2025-04-15T01:02:42.6518214Z     âœ“ should sort folders by updatedAt (32 ms)
2025-04-15T01:02:42.6518989Z     âœ“ should select specific fields when requested (31 ms)
2025-04-15T01:02:42.6519875Z     âœ“ should combine multiple query parameters correctly (40 ms)
2025-04-15T01:02:42.6520821Z     âœ“ should filter by projectId automatically based on URL (33 ms)
2025-04-15T01:02:42.6521743Z   GET /projects/:projectId/folders/content
2025-04-15T01:02:42.6522566Z     âœ“ should not list folders when project does not exist (29 ms)
2025-04-15T01:02:42.6523583Z     âœ“ should not return folder content if user has no access to project (32 ms)
2025-04-15T01:02:42.6524732Z     âœ“ should not return folder content if folder does not belong to project (28 ms)
2025-04-15T01:02:42.6525947Z     âœ“ should return folder content if user has project:viewer role in team project (41 ms)
2025-04-15T01:02:42.6526906Z     âœ“ should return folder content (49 ms)
2025-04-15T01:02:42.6527260Z 
2025-04-15T01:02:46.1309503Z PASS src/evaluation.ee/test-runner/__tests__/test-runner.service.ee.test.ts (5.163 s)
2025-04-15T01:02:46.1314046Z   TestRunnerService
2025-04-15T01:02:46.1317677Z     âœ“ should create an instance of TestRunnerService (6 ms)
2025-04-15T01:02:46.1332050Z     âœ“ should create and run test cases from past executions (11 ms)
2025-04-15T01:02:46.1333042Z     âœ“ should run both workflow under test and evaluation workflow (14 ms)
2025-04-15T01:02:46.1334019Z     âœ“ should properly count passed and failed executions (20 ms)
2025-04-15T01:02:46.1334921Z     âœ“ should properly count failed test executions (8 ms)
2025-04-15T01:02:46.1337585Z     âœ“ should properly count failed evaluations (6 ms)
2025-04-15T01:02:46.1339265Z     âœ“ should specify correct start nodes when running workflow under test (14 ms)
2025-04-15T01:02:46.1340181Z     âœ“ should properly choose trigger and start nodes (1 ms)
2025-04-15T01:02:46.1341256Z     âœ“ should properly choose trigger and start nodes 2 (2 ms)
2025-04-15T01:02:46.1342543Z     âœ“ should properly run test when nodes were renamed (5 ms)
2025-04-15T01:02:46.1343546Z     âœ“ should properly choose trigger when it was renamed (1 ms)
2025-04-15T01:02:46.1344754Z     âœ“ should create proper execution data for queue mode in runTestCase (3 ms)
2025-04-15T01:02:46.1346103Z     âœ“ should create proper execution data for regular mode in runTestCase (2 ms)
2025-04-15T01:02:46.1372881Z     âœ“ should run workflow with metrics defined in the middle of the workflow (16 ms)
2025-04-15T01:02:46.1374104Z     âœ“ should properly override metrics from earlier nodes with later ones (6 ms)
2025-04-15T01:02:46.1375253Z     Test Run cancellation
2025-04-15T01:02:46.1375857Z       âœ“ should cancel test run (4 ms)
2025-04-15T01:02:46.1376171Z 
2025-04-15T01:02:47.9557586Z PASS test/integration/project.api.test.ts (8.619 s)
2025-04-15T01:02:47.9572187Z   GET /projects/
2025-04-15T01:02:47.9573273Z     âœ“ member should get all personal projects and team projects they are apart of (93 ms)
2025-04-15T01:02:47.9574186Z     âœ“ owner should get all projects (48 ms)
2025-04-15T01:02:47.9574637Z   GET /projects/count
2025-04-15T01:02:47.9575199Z     âœ“ should return correct number of projects (35 ms)
2025-04-15T01:02:47.9575695Z   GET /projects/my-projects
2025-04-15T01:02:47.9576362Z     âœ“ member should get all projects they are apart of (76 ms)
2025-04-15T01:02:47.9577171Z     âœ“ owner should get all projects they are apart of (58 ms)
2025-04-15T01:02:47.9577715Z   GET /projects/personal
2025-04-15T01:02:47.9578281Z     âœ“ should return the user's personal project (20 ms)
2025-04-15T01:02:47.9579138Z     âœ“ should return 404 if user doesn't have a personal project (44 ms)
2025-04-15T01:02:47.9579705Z   POST /projects/
2025-04-15T01:02:47.9580218Z     âœ“ should create a team project (31 ms)
2025-04-15T01:02:47.9581077Z     âœ“ should allow to create a team projects if below the quota (30 ms)
2025-04-15T01:02:47.9582349Z     âœ“ should fail to create a team project if at quota (18 ms)
2025-04-15T01:02:47.9583319Z     âœ“ should fail to create a team project if above the quota (17 ms)
2025-04-15T01:02:47.9583955Z   PATCH /projects/:projectId
2025-04-15T01:02:47.9584631Z     âœ“ should update a team project name (28 ms)
2025-04-15T01:02:47.9585510Z     âœ“ should not allow viewers to edit team project name (21 ms)
2025-04-15T01:02:47.9586480Z     âœ“ should not allow owners to edit personal project name (29 ms)
2025-04-15T01:02:47.9587083Z     member management
2025-04-15T01:02:47.9587755Z       âœ“ should add or remove users from a project (83 ms)
2025-04-15T01:02:47.9588884Z       âœ“ `project:viewer`s should not be able to add, update or remove users from a project (42 ms)
2025-04-15T01:02:47.9590257Z       âœ“ `project:editor`s should not be able to add, update or remove users from a project (37 ms)
2025-04-15T01:02:47.9591752Z       âœ“ should not be able to add a user with the role project:viewer if it's not licensed (35 ms)
2025-04-15T01:02:47.9593107Z       âœ“ should not be able to add a user with the role project:editor if it's not licensed (31 ms)
2025-04-15T01:02:47.9594857Z       âœ“ should not edit a relation of a project when changing a user's role to an unlicensed role (37 ms)
2025-04-15T01:02:47.9596575Z       âœ“ should  edit a relation of a project when changing a user's role to an licensed role but unlicensed roles are present (40 ms)
2025-04-15T01:02:47.9597872Z       âœ“ should not add or remove users from a personal project (22 ms)
2025-04-15T01:02:47.9598502Z   GET /project/:projectId
2025-04-15T01:02:47.9599194Z     âœ“ should get project details and relations (44 ms)
2025-04-15T01:02:47.9599783Z   DELETE /project/:projectId
2025-04-15T01:02:47.9600526Z     âœ“ allows the project:owner to delete a project (84 ms)
2025-04-15T01:02:47.9601841Z     âœ“ allows the instance owner to delete a team project their are not related to (36 ms)
2025-04-15T01:02:47.9603057Z     âœ“ does not allow instance members to delete their personal project (22 ms)
2025-04-15T01:02:47.9604184Z     âœ“ does not allow instance owners to delete their personal projects (16 ms)
2025-04-15T01:02:47.9605347Z     âœ“ does not allow users with the role project:editor to delete a project (17 ms)
2025-04-15T01:02:47.9606515Z     âœ“ does not allow users with the role project:viewer to delete a project (24 ms)
2025-04-15T01:02:47.9607835Z     âœ“ deletes all workflows and credentials it owns as well as the sharings into other projects (104 ms)
2025-04-15T01:02:47.9609187Z     âœ“ unshares all workflows and credentials that were shared with the project (93 ms)
2025-04-15T01:02:47.9610147Z     âœ“ deletes the project relations (36 ms)
2025-04-15T01:02:47.9611345Z     âœ“ should fail if the project to delete does not exist (15 ms)
2025-04-15T01:02:47.9612690Z     âœ“ should fail to delete if project to migrate to and the project to delete are the same (19 ms)
2025-04-15T01:02:47.9614488Z     âœ“ does not migrate credentials and projects if the user does not have the permissions to create workflows or credentials in the target project (24 ms)
2025-04-15T01:02:47.9616332Z     âœ“ migrates folders, workflows and credentials to another project if `migrateToProject` is passed (70 ms)
2025-04-15T01:02:47.9617813Z     âœ“ should upgrade a projects role if the workflow/credential is already shared with it (44 ms)
2025-04-15T01:02:47.9618471Z 
2025-04-15T01:02:50.8086955Z PASS test/integration/users.api.test.ts (7.928 s)
2025-04-15T01:02:50.8087622Z   GET /users
2025-04-15T01:02:50.8088363Z     âœ“ should return all users (79 ms)
2025-04-15T01:02:50.8088831Z     list query options
2025-04-15T01:02:50.8089195Z       filter
2025-04-15T01:02:50.8089737Z         âœ“ should filter users by field: email (25 ms)
2025-04-15T01:02:50.8090507Z         âœ“ should filter users by field: firstName (18 ms)
2025-04-15T01:02:50.8091227Z         âœ“ should filter users by field: lastName (18 ms)
2025-04-15T01:02:50.8092392Z         âœ“ should filter users by computed field: isOwner (15 ms)
2025-04-15T01:02:50.8092902Z       select
2025-04-15T01:02:50.8093367Z         âœ“ should select user field: id (9 ms)
2025-04-15T01:02:50.8094010Z         âœ“ should select user field: email (5 ms)
2025-04-15T01:02:50.8094728Z         âœ“ should select user field: firstName (5 ms)
2025-04-15T01:02:50.8095387Z         âœ“ should select user field: lastName (5 ms)
2025-04-15T01:02:50.8095847Z       take
2025-04-15T01:02:50.8096452Z         âœ“ should return n users or less, without skip (20 ms)
2025-04-15T01:02:50.8097230Z         âœ“ should return n users or less, with skip (9 ms)
2025-04-15T01:02:50.8097755Z       auxiliary fields
2025-04-15T01:02:50.8098457Z         âœ“ should support options that require auxiliary fields (7 ms)
2025-04-15T01:02:50.8099145Z   GET /users/:id/password-reset-link
2025-04-15T01:02:50.8100136Z     âœ“ should allow owners to generate password reset links for admins and members (27 ms)
2025-04-15T01:02:50.8101782Z     âœ“ should allow admins to generate password reset links for admins and members, but not owners (50 ms)
2025-04-15T01:02:50.8103011Z     âœ“ should not allow members to generate password reset links for anyone (15 ms)
2025-04-15T01:02:50.8103656Z   DELETE /users/:id
2025-04-15T01:02:50.8104638Z     âœ“ should delete user and their resources (90 ms)
2025-04-15T01:02:50.8105690Z     âœ“ should delete user and team relations and transfer their personal resources to user (129 ms)
2025-04-15T01:02:50.8106773Z     âœ“ should delete user and transfer their personal resources to team project (55 ms)
2025-04-15T01:02:50.8107497Z     âœ“ should fail to delete self (11 ms)
2025-04-15T01:02:50.8108088Z     âœ“ should fail to delete the instance owner (19 ms)
2025-04-15T01:02:50.8108773Z     âœ“ should fail to delete a user that does not exist (5 ms)
2025-04-15T01:02:50.8109555Z     âœ“ should fail to transfer to a project that does not exist (15 ms)
2025-04-15T01:02:50.8110343Z     âœ“ should fail to delete if user to delete is transferee (17 ms)
2025-04-15T01:02:50.8110846Z   PATCH /users/:id/role
2025-04-15T01:02:50.8114090Z     âœ“ should clear credential external secrets usability cache when changing a user's role (52 ms)
2025-04-15T01:02:50.8114833Z     unauthenticated user
2025-04-15T01:02:50.8115368Z       âœ“ should receive 401 (4 ms)
2025-04-15T01:02:50.8115863Z     Invalid payload should return 400 when newRoleName
2025-04-15T01:02:50.8116380Z       âœ“ is missing (7 ms)
2025-04-15T01:02:50.8116759Z       âœ“ is `owner` (5 ms)
2025-04-15T01:02:50.8117135Z       âœ“ is an array (5 ms)
2025-04-15T01:02:50.8117451Z     member
2025-04-15T01:02:50.8117916Z       âœ“ should fail to demote owner to member (7 ms)
2025-04-15T01:02:50.8118529Z       âœ“ should fail to demote owner to admin (8 ms)
2025-04-15T01:02:50.8119150Z       âœ“ should fail to demote admin to member (10 ms)
2025-04-15T01:02:50.8120131Z       âœ“ should fail to promote other member to owner (5 ms)
2025-04-15T01:02:50.8120784Z       âœ“ should fail to promote other member to admin (6 ms)
2025-04-15T01:02:50.8121395Z       âœ“ should fail to promote self to admin (5 ms)
2025-04-15T01:02:50.8122250Z       âœ“ should fail to promote self to owner (6 ms)
2025-04-15T01:02:50.8122659Z     admin
2025-04-15T01:02:50.8123094Z       âœ“ should receive 404 on unknown target user (7 ms)
2025-04-15T01:02:50.8123692Z       âœ“ should fail to demote owner to admin (8 ms)
2025-04-15T01:02:50.8124265Z       âœ“ should fail to demote owner to member (9 ms)
2025-04-15T01:02:50.8124967Z       âœ“ should fail to promote member to admin if not licensed (5 ms)
2025-04-15T01:02:50.8125680Z       âœ“ should be able to demote admin to member (32 ms)
2025-04-15T01:02:50.8126338Z       âœ“ should be able to demote self to member (19 ms)
2025-04-15T01:02:50.8127093Z       âœ“ should be able to promote member to admin if licensed (18 ms)
2025-04-15T01:02:50.8127632Z     owner
2025-04-15T01:02:50.8128110Z       âœ“ should fail to demote self to admin (7 ms)
2025-04-15T01:02:50.8128743Z       âœ“ should fail to demote self to member (7 ms)
2025-04-15T01:02:50.8129483Z       âœ“ should fail to promote member to admin if not licensed (5 ms)
2025-04-15T01:02:50.8130295Z       âœ“ should be able to promote member to admin if licensed (19 ms)
2025-04-15T01:02:50.8131030Z       âœ“ should be able to demote admin to member (21 ms)
2025-04-15T01:02:50.8131414Z 
2025-04-15T01:02:51.1215881Z PASS src/task-runners/task-broker/__tests__/task-broker.service.test.ts
2025-04-15T01:02:51.1223726Z   TaskBroker
2025-04-15T01:02:51.1224057Z     expireTasks
2025-04-15T01:02:51.1224957Z       âœ“ should remove expired task offers and keep valid task offers (5 ms)
2025-04-15T01:02:51.1225787Z       âœ“ should not expire non-expiring task offers (1 ms)
2025-04-15T01:02:51.1226268Z     registerRunner
2025-04-15T01:02:51.1226784Z       âœ“ should add a runner to known runners (1 ms)
2025-04-15T01:02:51.1227413Z       âœ“ should send node types to runner
2025-04-15T01:02:51.1227835Z     registerRequester
2025-04-15T01:02:51.1228352Z       âœ“ should add a requester to known requesters
2025-04-15T01:02:51.1228833Z     deregisterRunner
2025-04-15T01:02:51.1229388Z       âœ“ should remove a runner from known runners (1 ms)
2025-04-15T01:02:51.1230071Z       âœ“ should remove any pending offers for that runner
2025-04-15T01:02:51.1231097Z       âœ“ should fail any running tasks for that runner (2 ms)
2025-04-15T01:02:51.1231815Z     deregisterRequester
2025-04-15T01:02:51.1232395Z       âœ“ should remove a requester from known requesters
2025-04-15T01:02:51.1232859Z     taskRequested
2025-04-15T01:02:51.1233452Z       âœ“ should match a pending offer to an incoming request (1 ms)
2025-04-15T01:02:51.1233960Z     taskOffered
2025-04-15T01:02:51.1234487Z       âœ“ should match a pending request to an incoming offer
2025-04-15T01:02:51.1234957Z     settleTasks
2025-04-15T01:02:51.1235556Z       âœ“ should match task offers with task requests by task type (2 ms)
2025-04-15T01:02:51.1236440Z       âœ“ should not match a request whose acceptance is in progress (1 ms)
2025-04-15T01:02:51.1237174Z       âœ“ should expire tasks before settling (1 ms)
2025-04-15T01:02:51.1237629Z     onRunnerMessage
2025-04-15T01:02:51.1238182Z       âœ“ should handle `runner:taskaccepted` message (1 ms)
2025-04-15T01:02:51.1238885Z       âœ“ should handle `runner:taskrejected` message (1 ms)
2025-04-15T01:02:51.1239582Z       âœ“ should handle `runner:taskdone` message (1 ms)
2025-04-15T01:02:51.1240198Z       âœ“ should handle `runner:taskerror` message
2025-04-15T01:02:51.1240892Z       âœ“ should handle `runner:taskdatarequest` message (1 ms)
2025-04-15T01:02:51.1241708Z       âœ“ should handle `runner:rpc` message
2025-04-15T01:02:51.1242377Z       âœ“ should handle `runner:nodetypesrequest` message
2025-04-15T01:02:51.1243157Z       âœ“ should handle `runner:taskoffer` message with expiring offer (1 ms)
2025-04-15T01:02:51.1244036Z       âœ“ should handle `runner:taskoffer` message with non-expiring offer (1 ms)
2025-04-15T01:02:51.1244869Z     onRequesterMessage
2025-04-15T01:02:51.1245414Z       âœ“ should handle `requester:nodetypesresponse` message
2025-04-15T01:02:51.1245874Z     task timeouts
2025-04-15T01:02:51.1246401Z       âœ“ on sending task, we should set up task timeout (1 ms)
2025-04-15T01:02:51.1247061Z       âœ“ on task completion, we should clear timeout (1 ms)
2025-04-15T01:02:51.1247642Z       âœ“ on task error, we should clear timeout
2025-04-15T01:02:51.1248666Z       âœ“ [internal mode] on timeout, we should emit `runner:timed-out-during-task` event and send error to requester (2 ms)
2025-04-15T01:02:51.1249927Z       âœ“ [external mode] on timeout, we should instruct the runner to cancel and send error to requester (1 ms)
2025-04-15T01:02:51.1250524Z 
2025-04-15T01:02:51.8979050Z PASS src/events/__tests__/log-streaming-event-relay.test.ts (5.546 s)
2025-04-15T01:02:51.8984328Z   LogStreamingEventRelay
2025-04-15T01:02:51.8988463Z     workflow events
2025-04-15T01:02:51.8993509Z       âœ“ should log on `workflow-created` event (5 ms)
2025-04-15T01:02:51.8998174Z       âœ“ should log on `workflow-deleted` event (1 ms)
2025-04-15T01:02:51.9003223Z       âœ“ should log on `workflow-saved` event
2025-04-15T01:02:51.9006947Z       âœ“ should log on `workflow-pre-execute` event (1 ms)
2025-04-15T01:02:51.9009963Z       âœ“ should log on `workflow-post-execute` for successful execution (8 ms)
2025-04-15T01:02:51.9021249Z       âœ“ should log on `workflow-post-execute` event for failed execution (1 ms)
2025-04-15T01:02:51.9022125Z     user events
2025-04-15T01:02:51.9022667Z       âœ“ should log on `user-updated` event
2025-04-15T01:02:51.9023381Z       âœ“ should log on `user-deleted` event (1 ms)
2025-04-15T01:02:51.9024078Z       âœ“ should log on `user-invited` event (1 ms)
2025-04-15T01:02:51.9024808Z       âœ“ should log on `user-reinvited` event (1 ms)
2025-04-15T01:02:51.9025531Z       âœ“ should log on `user-signed-up` event
2025-04-15T01:02:51.9026179Z       âœ“ should log on `user-logged-in` event
2025-04-15T01:02:51.9026692Z     click events
2025-04-15T01:02:51.9027427Z       âœ“ should log on `user-password-reset-request-click` event (1 ms)
2025-04-15T01:02:51.9028346Z       âœ“ should log on `user-invite-email-click` event (1 ms)
2025-04-15T01:02:51.9029184Z       âœ“ should log on `user-password-reset-email-click` event
2025-04-15T01:02:51.9029728Z     node events
2025-04-15T01:02:51.9030315Z       âœ“ should log on `node-pre-execute` event (1 ms)
2025-04-15T01:02:51.9031500Z       âœ“ should log on `node-post-execute` event (1 ms)
2025-04-15T01:02:51.9032732Z     credentials events
2025-04-15T01:02:51.9033410Z       âœ“ should log on `credentials-shared` event (1 ms)
2025-04-15T01:02:51.9034203Z       âœ“ should log on `credentials-created` event (1 ms)
2025-04-15T01:02:51.9034967Z       âœ“ should log on `credentials-deleted` event
2025-04-15T01:02:51.9035756Z       âœ“ should log on `credentials-updated` event (1 ms)
2025-04-15T01:02:51.9036285Z     auth events
2025-04-15T01:02:51.9036887Z       âœ“ should log on `user-login-failed` event
2025-04-15T01:02:51.9037400Z     community package events
2025-04-15T01:02:51.9038103Z       âœ“ should log on `community-package-updated` event
2025-04-15T01:02:51.9039045Z       âœ“ should log on `community-package-installed` event (1 ms)
2025-04-15T01:02:51.9039931Z       âœ“ should log on `community-package-deleted` event (1 ms)
2025-04-15T01:02:51.9040494Z     email events
2025-04-15T01:02:51.9041049Z       âœ“ should log on `email-failed` event
2025-04-15T01:02:51.9041742Z     public API events
2025-04-15T01:02:51.9042427Z       âœ“ should log on `public-api-key-created` event (1 ms)
2025-04-15T01:02:51.9043258Z       âœ“ should log on `public-api-key-deleted` event (1 ms)
2025-04-15T01:02:51.9043793Z     execution events
2025-04-15T01:02:51.9044472Z       âœ“ should log on `execution-started-during-bootup` event
2025-04-15T01:02:51.9045296Z       âœ“ should log on `execution-throttled` event (1 ms)
2025-04-15T01:02:51.9045822Z     AI events
2025-04-15T01:02:51.9046838Z       âœ“ should log on `ai-messages-retrieved-from-memory` event
2025-04-15T01:02:51.9047680Z       âœ“ should log on `ai-message-added-to-memory` event
2025-04-15T01:02:51.9048425Z       âœ“ should log on `ai-output-parsed` event
2025-04-15T01:02:51.9049198Z       âœ“ should log on `ai-documents-retrieved` event (1 ms)
2025-04-15T01:02:51.9049951Z       âœ“ should log on `ai-document-embedded` event
2025-04-15T01:02:51.9050707Z       âœ“ should log on `ai-query-embedded` event (1 ms)
2025-04-15T01:02:51.9051453Z       âœ“ should log on `ai-document-processed` event
2025-04-15T01:02:51.9052418Z       âœ“ should log on `ai-text-split` event (1 ms)
2025-04-15T01:02:51.9053103Z       âœ“ should log on `ai-tool-called` event
2025-04-15T01:02:51.9053867Z       âœ“ should log on `ai-vector-store-searched` event (1 ms)
2025-04-15T01:02:51.9054686Z       âœ“ should log on `ai-llm-generated-output` event
2025-04-15T01:02:51.9055436Z       âœ“ should log on `ai-llm-errored` event (1 ms)
2025-04-15T01:02:51.9056230Z       âœ“ should log on `ai-vector-store-populated` event
2025-04-15T01:02:51.9057067Z       âœ“ should log on `ai-vector-store-updated` event (1 ms)
2025-04-15T01:02:51.9057488Z 
2025-04-15T01:02:56.0303463Z PASS src/execution-lifecycle/__tests__/execution-lifecycle-hooks.test.ts
2025-04-15T01:02:56.0308146Z   Execution Lifecycle Hooks
2025-04-15T01:02:56.0312139Z     getLifecycleHooksForRegularMain
2025-04-15T01:02:56.0315022Z       âœ“ should setup the correct set of hooks (2 ms)
2025-04-15T01:02:56.0316526Z       workflowExecuteBefore
2025-04-15T01:02:56.0318226Z         âœ“ should emit workflow-pre-execute events (7 ms)
2025-04-15T01:02:56.0320367Z         âœ“ should run workflow.preExecute hook (1 ms)
2025-04-15T01:02:56.0322612Z         âœ“ should send executionStarted push event (1 ms)
2025-04-15T01:02:56.0326650Z         âœ“ should run workflow.preExecute external hook (1 ms)
2025-04-15T01:02:56.0327271Z       workflowExecuteAfter
2025-04-15T01:02:56.0328240Z         âœ“ should emit workflow-post-execute events (3 ms)
2025-04-15T01:02:56.0329222Z         âœ“ should not emit workflow-post-execute events for waiting executions (1 ms)
2025-04-15T01:02:56.0330109Z         âœ“ should run workflow.postExecute hook (1 ms)
2025-04-15T01:02:56.0330846Z         âœ“ should send executionFinished push event (2 ms)
2025-04-15T01:02:56.0331765Z         âœ“ should send executionWaiting push event (2 ms)
2025-04-15T01:02:56.0332709Z         âœ“ should restore binary data IDs after workflow execution for webhooks (1 ms)
2025-04-15T01:02:56.0333692Z         saving static data
2025-04-15T01:02:56.0334310Z           âœ“ should skip saving static data for manual executions
2025-04-15T01:02:56.0335000Z           âœ“ should save static data for prod executions (1 ms)
2025-04-15T01:02:56.0335657Z           âœ“ should handle static data saving errors (1 ms)
2025-04-15T01:02:56.0335950Z         saving execution data
2025-04-15T01:02:56.0336293Z           âœ“ should update execution with proper data (2 ms)
2025-04-15T01:02:56.0336693Z           âœ“ should not delete unfinished executions (1 ms)
2025-04-15T01:02:56.0337096Z           âœ“ should not delete waiting executions (1 ms)
2025-04-15T01:02:56.0337593Z           âœ“ should soft delete manual executions when manual saving is disabled (1 ms)
2025-04-15T01:02:56.0338299Z           âœ“ should not soft delete manual executions with waitTill (1 ms)
2025-04-15T01:02:56.0338868Z         error workflow
2025-04-15T01:02:56.0339557Z           âœ“ should not execute error workflow for manual executions (1 ms)
2025-04-15T01:02:56.0340441Z           âœ“ should execute error workflow for failed non-manual executions (2 ms)
2025-04-15T01:02:56.0341022Z       nodeExecuteBefore
2025-04-15T01:02:56.0341711Z         âœ“ should emit node-pre-execute event (1 ms)
2025-04-15T01:02:56.0342331Z         âœ“ should send nodeExecuteBefore push event
2025-04-15T01:02:56.0342776Z       nodeExecuteAfter
2025-04-15T01:02:56.0343305Z         âœ“ should emit node-post-execute event (1 ms)
2025-04-15T01:02:56.0343934Z         âœ“ should send nodeExecuteAfter push event (1 ms)
2025-04-15T01:02:56.0344848Z         âœ“ should save execution progress when enabled (1 ms)
2025-04-15T01:02:56.0345663Z         âœ“ should not save execution progress when disabled (1 ms)
2025-04-15T01:02:56.0346228Z       statistics events
2025-04-15T01:02:56.0347173Z         âœ“ workflowExecuteAfter should emit workflowExecutionCompleted statistics event (1 ms)
2025-04-15T01:02:56.0348422Z         âœ“ nodeFetchedData should handle nodeFetchedData statistics event (1 ms)
2025-04-15T01:02:56.0349134Z       when pushRef isn't set
2025-04-15T01:02:56.0349787Z         âœ“ should not setup any push hooks (2 ms)
2025-04-15T01:02:56.0350341Z     getLifecycleHooksForScalingMain
2025-04-15T01:02:56.0351054Z       âœ“ should setup the correct set of hooks (1 ms)
2025-04-15T01:02:56.0351780Z       workflowExecuteBefore
2025-04-15T01:02:56.0352454Z         âœ“ should emit workflow-pre-execute events
2025-04-15T01:02:56.0353178Z         âœ“ should run workflow.preExecute hook (1 ms)
2025-04-15T01:02:56.0354005Z         âœ“ should run the workflow.preExecute external hook (1 ms)
2025-04-15T01:02:56.0354633Z       workflowExecuteAfter
2025-04-15T01:02:56.0355326Z         âœ“ should emit workflow-post-execute events (1 ms)
2025-04-15T01:02:56.0356313Z         âœ“ should not emit workflow-post-execute events for waiting executions (5 ms)
2025-04-15T01:02:56.0357219Z         âœ“ should run workflow.postExecute hook
2025-04-15T01:02:56.0358185Z         âœ“ should delete successful executions when success saving is disabled (1 ms)
2025-04-15T01:02:56.0359255Z         âœ“ should delete failed executions when error saving is disabled
2025-04-15T01:02:56.0359957Z     getLifecycleHooksForScalingWorker
2025-04-15T01:02:56.0360666Z       âœ“ should setup the correct set of hooks (1 ms)
2025-04-15T01:02:56.0361181Z       nodeExecuteBefore
2025-04-15T01:02:56.0361986Z         âœ“ should emit node-pre-execute event (1 ms)
2025-04-15T01:02:56.0362495Z       nodeExecuteAfter
2025-04-15T01:02:56.0363127Z         âœ“ should emit node-post-execute event (1 ms)
2025-04-15T01:02:56.0363721Z       workflowExecuteBefore
2025-04-15T01:02:56.0364345Z         âœ“ should run workflow.preExecute hook
2025-04-15T01:02:56.0364845Z       workflowExecuteAfter
2025-04-15T01:02:56.0365492Z         âœ“ should run workflow.postExecute hook (1 ms)
2025-04-15T01:02:56.0366009Z       statistics events
2025-04-15T01:02:56.0367058Z         âœ“ workflowExecuteAfter should emit workflowExecutionCompleted statistics event (1 ms)
2025-04-15T01:02:56.0368616Z         âœ“ nodeFetchedData should handle nodeFetchedData statistics event (1 ms)
2025-04-15T01:02:56.0369360Z       saving static data
2025-04-15T01:02:56.0370137Z         âœ“ should skip saving static data for manual executions (1 ms)
2025-04-15T01:02:56.0371025Z         âœ“ should save static data for prod executions (1 ms)
2025-04-15T01:02:56.0372054Z         âœ“ should handle static data saving errors (1 ms)
2025-04-15T01:02:56.0372582Z       error workflow
2025-04-15T01:02:56.0373309Z         âœ“ should not execute error workflow for manual executions (1 ms)
2025-04-15T01:02:56.0374363Z         âœ“ should execute error workflow for failed non-manual executions (1 ms)
2025-04-15T01:02:56.0375098Z     getLifecycleHooksForSubExecutions
2025-04-15T01:02:56.0375800Z       âœ“ should setup the correct set of hooks (1 ms)
2025-04-15T01:02:56.0376339Z       workflowExecuteBefore
2025-04-15T01:02:56.0376994Z         âœ“ should emit workflow-pre-execute events (1 ms)
2025-04-15T01:02:56.0377738Z         âœ“ should run workflow.preExecute hook (1 ms)
2025-04-15T01:02:56.0378279Z       workflowExecuteAfter
2025-04-15T01:02:56.0378963Z         âœ“ should emit workflow-post-execute events (1 ms)
2025-04-15T01:02:56.0379961Z         âœ“ should not emit workflow-post-execute events for waiting executions (1 ms)
2025-04-15T01:02:56.0380926Z         âœ“ should run workflow.postExecute hook (2 ms)
2025-04-15T01:02:56.0381452Z       nodeExecuteBefore
2025-04-15T01:02:56.0382268Z         âœ“ should emit node-pre-execute event (1 ms)
2025-04-15T01:02:56.0382777Z       nodeExecuteAfter
2025-04-15T01:02:56.0383667Z         âœ“ should emit node-post-execute event (1 ms)
2025-04-15T01:02:56.0384181Z       statistics events
2025-04-15T01:02:56.0385134Z         âœ“ workflowExecuteAfter should emit workflowExecutionCompleted statistics event (1 ms)
2025-04-15T01:02:56.0386365Z         âœ“ nodeFetchedData should handle nodeFetchedData statistics event (1 ms)
2025-04-15T01:02:56.0386918Z 
2025-04-15T01:02:57.6331048Z PASS src/scaling/__tests__/pubsub-handler.test.ts (5.487 s)
2025-04-15T01:02:57.6331917Z   PubSubHandler
2025-04-15T01:02:57.6332313Z     in webhook process
2025-04-15T01:02:57.6333155Z       âœ“ should set up handlers in webhook process (7 ms)
2025-04-15T01:02:57.6339739Z       âœ“ should reload license on `reload-license` event (2 ms)
2025-04-15T01:02:57.6340663Z       âœ“ should restart event bus on `restart-event-bus` event (1 ms)
2025-04-15T01:02:57.6341875Z       âœ“ should reload providers on `reload-external-secrets-providers` event (1 ms)
2025-04-15T01:02:57.6343024Z       âœ“ should install community package on `community-package-install` event (1 ms)
2025-04-15T01:02:57.6344154Z       âœ“ should update community package on `community-package-update` event (1 ms)
2025-04-15T01:02:57.6345281Z       âœ“ should uninstall community package on `community-package-uninstall` event (2 ms)
2025-04-15T01:02:57.6345986Z     in worker process
2025-04-15T01:02:57.6346560Z       âœ“ should set up handlers in worker process (1 ms)
2025-04-15T01:02:57.6347268Z       âœ“ should reload license on `reload-license` event
2025-04-15T01:02:57.6348076Z       âœ“ should restart event bus on `restart-event-bus` event (1 ms)
2025-04-15T01:02:57.6349055Z       âœ“ should reload providers on `reload-external-secrets-providers` event
2025-04-15T01:02:57.6350079Z       âœ“ should install community package on `community-package-install` event
2025-04-15T01:02:57.6351230Z       âœ“ should update community package on `community-package-update` event (1 ms)
2025-04-15T01:02:57.6352519Z       âœ“ should uninstall community package on `community-package-uninstall` event
2025-04-15T01:02:57.6353565Z       âœ“ should generate status on `get-worker-status` event
2025-04-15T01:02:57.6354114Z     in main process
2025-04-15T01:02:57.6354942Z       âœ“ should set up command and worker response handlers in main process (2 ms)
2025-04-15T01:02:57.6355916Z       âœ“ should reload license on `reload-license` event (1 ms)
2025-04-15T01:02:57.6356753Z       âœ“ should restart event bus on `restart-event-bus` event
2025-04-15T01:02:57.6358160Z       âœ“ should reload providers on `reload-external-secrets-providers` event
2025-04-15T01:02:57.6359406Z       âœ“ should install community package on `community-package-install` event (1 ms)
2025-04-15T01:02:57.6360545Z       âœ“ should update community package on `community-package-update` event
2025-04-15T01:02:57.6361950Z       âœ“ should uninstall community package on `community-package-uninstall` event (1 ms)
2025-04-15T01:02:57.6362707Z       multi-main setup
2025-04-15T01:02:57.6363551Z         âœ“ if leader, should handle `add-webhooks-triggers-and-pollers` event (7 ms)
2025-04-15T01:02:57.6364712Z         âœ“ if follower, should skip `add-webhooks-triggers-and-pollers` event (11 ms)
2025-04-15T01:02:57.6365841Z         âœ“ if leader, should handle `remove-triggers-and-pollers` event (17 ms)
2025-04-15T01:02:57.6366893Z         âœ“ if follower, should skip `remove-triggers-and-pollers` event (16 ms)
2025-04-15T01:02:57.6367879Z         âœ“ should handle `display-workflow-activation` event (1 ms)
2025-04-15T01:02:57.6368837Z         âœ“ should handle `display-workflow-deactivation` event (1 ms)
2025-04-15T01:02:57.6369853Z         âœ“ should handle `display-workflow-activation-error` event (13 ms)
2025-04-15T01:02:57.6373907Z         âœ“ should handle `relay-execution-lifecycle-event` event (1 ms)
2025-04-15T01:02:57.6376779Z         âœ“ should handle `clear-test-webhooks` event (1 ms)
2025-04-15T01:02:57.6377680Z         âœ“ should handle `response-to-get-worker-status event (11 ms)
2025-04-15T01:02:57.6378113Z 
2025-04-15T01:02:58.1661741Z PASS test/integration/execution.service.integration.test.ts (7.065 s)
2025-04-15T01:02:58.1663337Z   ExecutionService
2025-04-15T01:02:58.1694072Z     findRangeWithCount
2025-04-15T01:02:58.1695103Z       âœ“ should return execution summaries (69 ms)
2025-04-15T01:02:58.1696121Z       âœ“ should limit executions (25 ms)
2025-04-15T01:02:58.1697191Z       âœ“ should retrieve executions before `lastId`, excluding it (43 ms)
2025-04-15T01:02:58.1698486Z       âœ“ should retrieve executions after `firstId`, excluding it (18 ms)
2025-04-15T01:02:58.1699581Z       âœ“ should filter executions by `status` (25 ms)
2025-04-15T01:02:58.1700523Z       âœ“ should filter executions by `workflowId` (27 ms)
2025-04-15T01:02:58.1701514Z       âœ“ should filter executions by `startedBefore` (14 ms)
2025-04-15T01:02:58.1702719Z       âœ“ should filter executions by `startedAfter` (17 ms)
2025-04-15T01:02:58.1703716Z       âœ“ should filter executions by `metadata` (18 ms)
2025-04-15T01:02:58.1704687Z       âœ“ should filter executions by `projectId` (32 ms)
2025-04-15T01:02:58.1705856Z       âœ“ should filter executions by `projectId` and expected `status` (28 ms)
2025-04-15T01:02:58.1707101Z       âœ“ should filter executions by `projectId` and expected `waitTill` (37 ms)
2025-04-15T01:02:58.1708459Z       âœ“ should filter executions by `projectId` and expected `metadata` (35 ms)
2025-04-15T01:02:58.1709835Z       âœ“ should filter executions by `projectId` and expected `startedAfter` (35 ms)
2025-04-15T01:02:58.1711221Z       âœ“ should filter executions by `projectId` and expected `startedBefore` (36 ms)
2025-04-15T01:02:58.1712735Z       âœ“ should exclude executions by inaccessible `workflowId` (19 ms)
2025-04-15T01:02:58.1713788Z       âœ“ should support advanced filters (21 ms)
2025-04-15T01:02:58.1714490Z     findLatestCurrentAndCompleted
2025-04-15T01:02:58.1715478Z       âœ“ should return latest current and completed executions (86 ms)
2025-04-15T01:02:58.1716586Z       âœ“ should handle zero current executions (26 ms)
2025-04-15T01:02:58.1717582Z       âœ“ should handle zero completed executions (17 ms)
2025-04-15T01:02:58.1718498Z       âœ“ should handle zero executions (8 ms)
2025-04-15T01:02:58.1719429Z       âœ“ should prioritize `running` over `new` executions (26 ms)
2025-04-15T01:02:58.1720205Z     annotation
2025-04-15T01:02:58.1720824Z       âœ“ should add and retrieve annotation (31 ms)
2025-04-15T01:02:58.1752581Z       âœ“ should update annotation (24 ms)
2025-04-15T01:02:58.1753532Z       âœ“ should filter by annotation tags (22 ms)
2025-04-15T01:02:58.1754681Z       âœ“ should filter by annotation vote (26 ms)
2025-04-15T01:02:58.1755522Z 
2025-04-15T01:03:00.2356052Z PASS src/sso.ee/saml/__tests__/saml-validator.test.ts
2025-04-15T01:03:00.2360292Z   saml-validator
2025-04-15T01:03:00.2361947Z     validateMetadata
2025-04-15T01:03:00.2364451Z       âœ“ successfully validates metadata containing ws federation tags (171 ms)
2025-04-15T01:03:00.2365441Z       âœ“ rejects invalid metadata (207 ms)
2025-04-15T01:03:00.2366658Z       âœ“ rejects malformed XML metadata (146 ms)
2025-04-15T01:03:00.2367701Z       âœ“ rejects metadata missing SingleSignOnService (221 ms)
2025-04-15T01:03:00.2368774Z       âœ“ rejects metadata with invalid X.509 certificate (153 ms)
2025-04-15T01:03:00.2369800Z     validateResponse
2025-04-15T01:03:00.2370660Z       âœ“ successfully validates response (176 ms)
2025-04-15T01:03:00.2371319Z       âœ“ rejects invalid response (174 ms)
2025-04-15T01:03:00.2372117Z       âœ“ rejects expired SAML response (121 ms)
2025-04-15T01:03:00.2372464Z 
2025-04-15T01:03:03.9770149Z PASS src/concurrency/__tests__/concurrency-control.service.test.ts
2025-04-15T01:03:03.9771312Z   ConcurrencyControlService
2025-04-15T01:03:03.9772533Z     constructor
2025-04-15T01:03:03.9773441Z       âœ“ should be enabled if production cap is positive (7 ms)
2025-04-15T01:03:03.9774304Z       âœ“ should be enabled if evaluation cap is positive (1 ms)
2025-04-15T01:03:03.9775058Z       âœ“ should throw if production cap is 0 (1 ms)
2025-04-15T01:03:03.9775758Z       âœ“ should throw if evaluation cap is 0 (1 ms)
2025-04-15T01:03:03.9776963Z       âœ“ should be disabled if both production and evaluation caps are -1
2025-04-15T01:03:03.9777915Z       âœ“ should be disabled if production cap is lower than -1 (1 ms)
2025-04-15T01:03:03.9778814Z       âœ“ should be disabled if evaluation cap is lower than -1 (1 ms)
2025-04-15T01:03:03.9779486Z       âœ“ should be disabled on queue mode
2025-04-15T01:03:03.9779922Z     if enabled
2025-04-15T01:03:03.9780224Z       throttle
2025-04-15T01:03:03.9780690Z         âœ“ should do nothing on cli mode (2 ms)
2025-04-15T01:03:03.9781281Z         âœ“ should do nothing on error mode
2025-04-15T01:03:03.9782170Z         âœ“ should do nothing on integrated mode
2025-04-15T01:03:03.9782806Z         âœ“ should do nothing on internal mode (1 ms)
2025-04-15T01:03:03.9783417Z         âœ“ should do nothing on manual mode
2025-04-15T01:03:03.9783984Z         âœ“ should do nothing on retry mode
2025-04-15T01:03:03.9784574Z         âœ“ should enqueue on webhook mode (1 ms)
2025-04-15T01:03:03.9785147Z         âœ“ should enqueue on trigger mode
2025-04-15T01:03:03.9785758Z         âœ“ should enqueue on evaluation mode (1 ms)
2025-04-15T01:03:03.9786210Z       release
2025-04-15T01:03:03.9786645Z         âœ“ should do nothing on cli mode
2025-04-15T01:03:03.9787230Z         âœ“ should do nothing on error mode (1 ms)
2025-04-15T01:03:03.9787843Z         âœ“ should do nothing on integrated mode (1 ms)
2025-04-15T01:03:03.9788459Z         âœ“ should do nothing on internal mode
2025-04-15T01:03:03.9789048Z         âœ“ should do nothing on manual mode (1 ms)
2025-04-15T01:03:03.9789637Z         âœ“ should do nothing on retry mode
2025-04-15T01:03:03.9790205Z         âœ“ should dequeue on webhook mode (1 ms)
2025-04-15T01:03:03.9790771Z         âœ“ should dequeue on trigger mode
2025-04-15T01:03:03.9791331Z         âœ“ should dequeue on evaluation mode
2025-04-15T01:03:03.9791897Z       remove
2025-04-15T01:03:03.9792379Z         âœ“ should do nothing on cli mode (1 ms)
2025-04-15T01:03:03.9792943Z         âœ“ should do nothing on error mode
2025-04-15T01:03:03.9793534Z         âœ“ should do nothing on integrated mode (1 ms)
2025-04-15T01:03:03.9794154Z         âœ“ should do nothing on internal mode
2025-04-15T01:03:03.9794739Z         âœ“ should do nothing on manual mode (2 ms)
2025-04-15T01:03:03.9795342Z         âœ“ should do nothing on retry mode (1 ms)
2025-04-15T01:03:03.9795946Z         âœ“ should remove an execution on webhook mode
2025-04-15T01:03:03.9796647Z         âœ“ should remove an execution on trigger mode (1 ms)
2025-04-15T01:03:03.9797572Z         âœ“ should remove an execution on evaluation mode
2025-04-15T01:03:03.9798055Z       removeAll
2025-04-15T01:03:03.9798686Z         âœ“ should remove all executions from the production queue (2 ms)
2025-04-15T01:03:03.9799531Z         âœ“ should remove all executions from the evaluation queue (1 ms)
2025-04-15T01:03:03.9800067Z       get queue
2025-04-15T01:03:03.9800542Z         âœ“ should choose the production queue
2025-04-15T01:03:03.9801125Z         âœ“ should choose the evaluation queue
2025-04-15T01:03:03.9801707Z     if disabled
2025-04-15T01:03:03.9802164Z       throttle
2025-04-15T01:03:03.9802549Z         âœ“ should do nothing
2025-04-15T01:03:03.9803106Z         âœ“ should do nothing for evaluation executions
2025-04-15T01:03:03.9803563Z       release
2025-04-15T01:03:03.9803904Z         âœ“ should do nothing
2025-04-15T01:03:03.9804501Z         âœ“ should do nothing for evaluation executions (1 ms)
2025-04-15T01:03:03.9804979Z       remove
2025-04-15T01:03:03.9805332Z         âœ“ should do nothing
2025-04-15T01:03:03.9805878Z         âœ“ should do nothing for evaluation executions
2025-04-15T01:03:03.9806323Z     telemetry
2025-04-15T01:03:03.9806614Z       on cloud
2025-04-15T01:03:03.9807327Z         âœ“ for capacity 5, should report temp cloud threshold if reached (1 ms)
2025-04-15T01:03:03.9808251Z         âœ“ for capacity 10, should report temp cloud threshold if reached (1 ms)
2025-04-15T01:03:03.9809129Z         âœ“ for capacity 20, should report temp cloud threshold if reached
2025-04-15T01:03:03.9810014Z         âœ“ for capacity 50, should report temp cloud threshold if reached (1 ms)
2025-04-15T01:03:03.9811158Z         âœ“ for capacity 100, should report temp cloud threshold if reached
2025-04-15T01:03:03.9812858Z         âœ“ for capacity 200, should report temp cloud threshold if reached (1 ms)
2025-04-15T01:03:03.9813799Z         âœ“ for capacity 4, should not report temp cloud threshold if not reached
2025-04-15T01:03:03.9814695Z         âœ“ for capacity 9, should not report temp cloud threshold if not reached
2025-04-15T01:03:03.9815604Z         âœ“ for capacity 19, should not report temp cloud threshold if not reached
2025-04-15T01:03:03.9816524Z         âœ“ for capacity 49, should not report temp cloud threshold if not reached
2025-04-15T01:03:03.9817480Z         âœ“ for capacity 99, should not report temp cloud threshold if not reached (1 ms)
2025-04-15T01:03:03.9818429Z         âœ“ for capacity 199, should not report temp cloud threshold if not reached
2025-04-15T01:03:03.9819367Z         âœ“ for capacity 6, should not report temp cloud threshold if exceeded (1 ms)
2025-04-15T01:03:03.9820316Z         âœ“ for capacity 11, should not report temp cloud threshold if exceeded
2025-04-15T01:03:03.9821247Z         âœ“ for capacity 21, should not report temp cloud threshold if exceeded (1 ms)
2025-04-15T01:03:03.9822347Z         âœ“ for capacity 51, should not report temp cloud threshold if exceeded
2025-04-15T01:03:03.9823293Z         âœ“ for capacity 101, should not report temp cloud threshold if exceeded (6 ms)
2025-04-15T01:03:03.9824235Z         âœ“ for capacity 201, should not report temp cloud threshold if exceeded
2025-04-15T01:03:03.9824671Z 
2025-04-15T01:03:04.4883499Z PASS src/databases/repositories/__tests__/folder.repository.test.ts (6.103 s)
2025-04-15T01:03:04.4884215Z   FolderRepository
2025-04-15T01:03:04.4885674Z     getMany
2025-04-15T01:03:04.4886301Z       filters
2025-04-15T01:03:04.4888091Z         âœ“ should return all folders if not filter is provided (28 ms)
2025-04-15T01:03:04.4889509Z         âœ“ should filter folders by IDs (21 ms)
2025-04-15T01:03:04.4890660Z         âœ“ should filter folders by project ID (21 ms)
2025-04-15T01:03:04.4892275Z         âœ“ should filter folders by name case-insensitively (13 ms)
2025-04-15T01:03:04.4894854Z         âœ“ should filter folders by parent folder ID (20 ms)
2025-04-15T01:03:04.4898002Z         âœ“ should filter folders by a single tag (22 ms)
2025-04-15T01:03:04.4899270Z         âœ“ should filter folders by multiple tags (AND operator) (27 ms)
2025-04-15T01:03:04.4901079Z         âœ“ should apply multiple filters together (20 ms)
2025-04-15T01:03:04.4902124Z       select
2025-04-15T01:03:04.4902950Z         âœ“ should select only id and name when specified (13 ms)
2025-04-15T01:03:04.4904372Z         âœ“ should return id, name and tags when specified (18 ms)
2025-04-15T01:03:04.4905689Z         âœ“ should return id, name and project when specified (15 ms)
2025-04-15T01:03:04.4906965Z         âœ“ should return id, name and parentFolder when specified (13 ms)
2025-04-15T01:03:04.4908608Z         âœ“ should return id, name and workflowCount when specified (17 ms)
2025-04-15T01:03:04.4910883Z         âœ“ should return id, name and subFolderCount when specified (15 ms)
2025-04-15T01:03:04.4911991Z         âœ“ should return timestamps when specified (12 ms)
2025-04-15T01:03:04.4912928Z         âœ“ should return all properties when no select is specified (19 ms)
2025-04-15T01:03:04.4913541Z       pagination
2025-04-15T01:03:04.4914155Z         âœ“ should limit results when take is specified (30 ms)
2025-04-15T01:03:04.4914914Z         âœ“ should skip results when skip is specified (22 ms)
2025-04-15T01:03:04.4915669Z         âœ“ should handle skip and take together (13 ms)
2025-04-15T01:03:04.4916472Z         âœ“ should handle take larger than remaining items (15 ms)
2025-04-15T01:03:04.4917335Z         âœ“ should handle zero take by returning all results (15 ms)
2025-04-15T01:03:04.4917897Z       sorting
2025-04-15T01:03:04.4918510Z         âœ“ should sort by default (updatedAt:desc) (16 ms)
2025-04-15T01:03:04.4919200Z         âœ“ should sort by name:asc (14 ms)
2025-04-15T01:03:04.4920221Z         âœ“ should sort by name:desc (13 ms)
2025-04-15T01:03:04.4921067Z         âœ“ should sort by name:desc when select does not include the name (17 ms)
2025-04-15T01:03:04.4922125Z         âœ“ should sort by createdAt:asc (14 ms)
2025-04-15T01:03:04.4922795Z         âœ“ should sort by createdAt:desc (12 ms)
2025-04-15T01:03:04.4923472Z         âœ“ should sort by updatedAt:asc (16 ms)
2025-04-15T01:03:04.4924103Z         âœ“ should sort by updatedAt:desc (13 ms)
2025-04-15T01:03:04.4924902Z         âœ“ should default to asc if order not specified (12 ms)
2025-04-15T01:03:04.4925334Z 
2025-04-15T01:03:06.1973634Z PASS test/integration/ldap/ldap.api.test.ts (8.324 s)
2025-04-15T01:03:06.1975180Z   âœ“ Member role should not be able to access ldap routes (104 ms)
2025-04-15T01:03:06.1976644Z   âœ“ GET /ldap/config route should retrieve current configuration (25 ms)
2025-04-15T01:03:06.1978075Z   âœ“ GET /ldap/sync should return paginated synchronizations (29 ms)
2025-04-15T01:03:06.1979230Z   PUT /ldap/config
2025-04-15T01:03:06.1980251Z     âœ“ route should validate payload (40 ms)
2025-04-15T01:03:06.1981055Z     âœ“ route should update model (17 ms)
2025-04-15T01:03:06.1983215Z     âœ“ route should fail due to trying to enable LDAP login with SSO as current authentication method (17 ms)
2025-04-15T01:03:06.1984964Z     âœ“ should apply "Convert all LDAP users to email users" strategy when LDAP login disabled (37 ms)
2025-04-15T01:03:06.1986011Z   POST /ldap/test-connection
2025-04-15T01:03:06.1986807Z     âœ“ route should success (11 ms)
2025-04-15T01:03:06.1987605Z     âœ“ route should fail (10 ms)
2025-04-15T01:03:06.1988291Z   POST /ldap/sync
2025-04-15T01:03:06.1988890Z     dry mode
2025-04-15T01:03:06.1989894Z       âœ“ should detect new user but not persist change in model (44 ms)
2025-04-15T01:03:06.1991352Z       âœ“ should detect updated user but not persist change in model (34 ms)
2025-04-15T01:03:06.1992948Z       âœ“ should detect disabled user but not persist change in model (30 ms)
2025-04-15T01:03:06.2010265Z     live mode
2025-04-15T01:03:06.2011297Z       âœ“ should detect new user and persist change in model (36 ms)
2025-04-15T01:03:06.2012732Z       âœ“ should detect updated user and persist change in model (67 ms)
2025-04-15T01:03:06.2014010Z       âœ“ should detect disabled user and persist change in model (40 ms)
2025-04-15T01:03:06.2015404Z       âœ“ should remove user instance access once the user is disabled during synchronization (39 ms)
2025-04-15T01:03:06.2016407Z   POST /login
2025-04-15T01:03:06.2017755Z     âœ“ should allow new LDAP user to login and synchronize data (31 ms)
2025-04-15T01:03:06.2019176Z     âœ“ should allow existing LDAP user to login and synchronize data (180 ms)
2025-04-15T01:03:06.2020738Z     âœ“ should allow instance owner to sign in with email/password when LDAP is enabled (133 ms)
2025-04-15T01:03:06.2022437Z     âœ“ should transform email user into LDAP user when match found (145 ms)
2025-04-15T01:03:06.2023539Z   Instance owner should able to delete LDAP users
2025-04-15T01:03:06.2024928Z     âœ“ don't transfer workflows (21 ms)
2025-04-15T01:03:06.2025899Z     âœ“ transfer workflows and credentials (16 ms)
2025-04-15T01:03:06.2026483Z 
2025-04-15T01:03:12.6586101Z PASS test/integration/evaluation/test-definitions.api.test.ts (8.456 s)
2025-04-15T01:03:12.6587609Z   GET /evaluation/test-definitions
2025-04-15T01:03:12.6588583Z     âœ“ should retrieve empty test definitions list (87 ms)
2025-04-15T01:03:12.6589345Z     âœ“ should retrieve test definitions list (46 ms)
2025-04-15T01:03:12.6590209Z     âœ“ should retrieve test definitions list with pagination (67 ms)
2025-04-15T01:03:12.6591154Z     âœ“ should retrieve test definitions list for a workflow (54 ms)
2025-04-15T01:03:12.6592801Z     âœ“ should return error if user has no access to the workflowId specified in filter (91 ms)
2025-04-15T01:03:12.6593849Z   GET /evaluation/test-definitions/:id
2025-04-15T01:03:12.6594736Z     âœ“ should retrieve test definition (45 ms)
2025-04-15T01:03:12.6596002Z     âœ“ should return 404 for non-existent test definition (31 ms)
2025-04-15T01:03:12.6597372Z     âœ“ should retrieve test definition with evaluation workflow (42 ms)
2025-04-15T01:03:12.6599114Z     âœ“ should not retrieve test definition if user does not have access to workflow under test (40 ms)
2025-04-15T01:03:12.6600006Z   POST /evaluation/test-definitions
2025-04-15T01:03:12.6600662Z     âœ“ should create test definition (43 ms)
2025-04-15T01:03:12.6604221Z     âœ“ should create test definition with evaluation workflow (37 ms)
2025-04-15T01:03:12.6604800Z     âœ“ should create test definition with all fields (36 ms)
2025-04-15T01:03:12.6605345Z     âœ“ should return error if name is empty (39 ms)
2025-04-15T01:03:12.6605879Z     âœ“ should return error if user has no access to the workflow (33 ms)
2025-04-15T01:03:12.6606456Z     âœ“ should return error if user has no access to the evaluation workflow (33 ms)
2025-04-15T01:03:12.6606968Z   PATCH /evaluation/test-definitions/:id
2025-04-15T01:03:12.6607331Z     âœ“ should update test definition (46 ms)
2025-04-15T01:03:12.6607890Z     âœ“ should return 404 if user has no access to the workflow (35 ms)
2025-04-15T01:03:12.6608475Z     âœ“ should update test definition with evaluation workflow (48 ms)
2025-04-15T01:03:12.6609048Z     âœ“ should return error if user has no access to the evaluation workflow (39 ms)
2025-04-15T01:03:12.6609810Z     âœ“ should disallow workflowId (32 ms)
2025-04-15T01:03:12.6610365Z     âœ“ should update annotationTagId (49 ms)
2025-04-15T01:03:12.6611334Z     âœ“ should return error if annotationTagId is invalid (46 ms)
2025-04-15T01:03:12.6612198Z     âœ“ should update pinned nodes (53 ms)
2025-04-15T01:03:12.6612894Z     âœ“ should return error if pinned nodes are invalid (34 ms)
2025-04-15T01:03:12.6613796Z     âœ“ should return error if pinned nodes are not in the workflow (33 ms)
2025-04-15T01:03:12.6614492Z   DELETE /evaluation/test-definitions/:id
2025-04-15T01:03:12.6615102Z     âœ“ should delete test definition (32 ms)
2025-04-15T01:03:12.6615845Z     âœ“ should return 404 if test definition does not exist (30 ms)
2025-04-15T01:03:12.6616772Z     âœ“ should return 404 if user has no access to the workflow (30 ms)
2025-04-15T01:03:12.6617448Z   POST /evaluation/test-definitions/:id/run
2025-04-15T01:03:12.6618132Z     âœ“ should trigger the test run (34 ms)
2025-04-15T01:03:12.6618458Z 
2025-04-15T01:03:13.2152435Z PASS test/integration/public-api/executions.test.ts (8.491 s)
2025-04-15T01:03:13.2154048Z   GET /executions/:id
2025-04-15T01:03:13.2156405Z     âœ“ should fail due to missing API Key (39 ms)
2025-04-15T01:03:13.2157869Z     âœ“ should fail due to invalid API Key (14 ms)
2025-04-15T01:03:13.2158795Z     âœ“ owner should be able to get an execution owned by him (199 ms)
2025-04-15T01:03:13.2159671Z     âœ“ owner should be able to read executions of other users (26 ms)
2025-04-15T01:03:13.2162480Z     âœ“ member should be able to fetch his own executions (34 ms)
2025-04-15T01:03:13.2166478Z     âœ“ member should not be able to fetch custom data when includeData is not set (39 ms)
2025-04-15T01:03:13.2167318Z     âœ“ member should be able to fetch custom data when includeData=true (74 ms)
2025-04-15T01:03:13.2168315Z     âœ“ member should not get an execution of another user without the workflow being shared (23 ms)
2025-04-15T01:03:13.2168941Z     âœ“ member should be able to fetch executions of workflows shared with him (31 ms)
2025-04-15T01:03:13.2169313Z   DELETE /executions/:id
2025-04-15T01:03:13.2169640Z     âœ“ should fail due to missing API Key (11 ms)
2025-04-15T01:03:13.2170300Z     âœ“ should fail due to invalid API Key (11 ms)
2025-04-15T01:03:13.2170987Z     âœ“ should delete an execution (47 ms)
2025-04-15T01:03:13.2171445Z   GET /executions
2025-04-15T01:03:13.2172303Z     âœ“ should fail due to missing API Key (9 ms)
2025-04-15T01:03:13.2172956Z     âœ“ should fail due to invalid API Key (9 ms)
2025-04-15T01:03:13.2173488Z     âœ“ should retrieve all successful executions (44 ms)
2025-04-15T01:03:13.2173865Z     âœ“ should paginate two executions (49 ms)
2025-04-15T01:03:13.2174227Z     âœ“ should retrieve all error executions (41 ms)
2025-04-15T01:03:13.2174623Z     âœ“ should return all waiting executions (38 ms)
2025-04-15T01:03:13.2175047Z     âœ“ should retrieve all executions of specific workflow (53 ms)
2025-04-15T01:03:13.2175507Z     âœ“ should return executions filtered by project ID (41 ms)
2025-04-15T01:03:13.2176015Z     âœ“ owner should retrieve all executions regardless of ownership (115 ms)
2025-04-15T01:03:13.2176564Z     âœ“ member should not see executions of workflows not shared with him (78 ms)
2025-04-15T01:03:13.2177106Z     âœ“ member should also see executions of workflows shared with him (65 ms)
2025-04-15T01:03:13.2177373Z 
2025-04-15T01:03:13.6324943Z PASS test/integration/api-keys.api.test.ts (7.176 s)
2025-04-15T01:03:13.6325875Z   When public API is disabled
2025-04-15T01:03:13.6326821Z     âœ“ POST /api-keys should 404 (89 ms)
2025-04-15T01:03:13.6327617Z     âœ“ GET /api-keys should 404 (26 ms)
2025-04-15T01:03:13.6328468Z     âœ“ DELETE /api-key/:id should 404 (25 ms)
2025-04-15T01:03:13.6328910Z   Owner shell
2025-04-15T01:03:13.6329607Z     âœ“ POST /api-keys should create an api key with no expiration (28 ms)
2025-04-15T01:03:13.6330543Z     âœ“ POST /api-keys should fail to create api key with invalid scope (17 ms)
2025-04-15T01:03:13.6331467Z     âœ“ POST /api-keys should create an api key with expiration (18 ms)
2025-04-15T01:03:13.6332702Z     âœ“ POST /api-keys should create an api key with scopes allow in the user's role (18 ms)
2025-04-15T01:03:13.6333576Z     âœ“ PATCH /api-keys should update API key label (27 ms)
2025-04-15T01:03:13.6334746Z     âœ“ PATCH /api-keys should not modify API key expiration (37 ms)
2025-04-15T01:03:13.6335559Z     âœ“ GET /api-keys should fetch the api key redacted (31 ms)
2025-04-15T01:03:13.6336308Z     âœ“ DELETE /api-keys/:id should delete the api key (31 ms)
2025-04-15T01:03:13.6337094Z     âœ“ GET /api-keys/scopes should return scopes for the role (18 ms)
2025-04-15T01:03:13.6337418Z   Member
2025-04-15T01:03:13.6337800Z     âœ“ POST /api-keys should create an api key with no expiration (39 ms)
2025-04-15T01:03:13.6338318Z     âœ“ POST /api-keys should create an api key with expiration (20 ms)
2025-04-15T01:03:13.6338884Z     âœ“ POST /api-keys should create an api key with scopes allowed in the user's role (20 ms)
2025-04-15T01:03:13.6339566Z     âœ“ POST /api-keys should fail to create api key with scopes not allowed in the user's role (37 ms)
2025-04-15T01:03:13.6340104Z     âœ“ GET /api-keys should fetch the api key redacted (35 ms)
2025-04-15T01:03:13.6340555Z     âœ“ DELETE /api-keys/:id should delete the api key (30 ms)
2025-04-15T01:03:13.6341009Z     âœ“ GET /api-keys/scopes should return scopes for the role (15 ms)
2025-04-15T01:03:17.2717770Z 
2025-04-15T01:03:17.2718468Z PASS src/auth/__tests__/auth.service.test.ts
2025-04-15T01:03:17.2732246Z   AuthService
2025-04-15T01:03:17.2732654Z     createJWTHash
2025-04-15T01:03:17.2733431Z       âœ“ should generate unique hashes (21 ms)
2025-04-15T01:03:17.2733930Z     authMiddleware
2025-04-15T01:03:17.2734483Z       âœ“ should 401 if no cookie is set (2 ms)
2025-04-15T01:03:17.2735761Z       âœ“ should 401 and clear the cookie if the JWT is expired (32 ms)
2025-04-15T01:03:17.2736738Z       âœ“ should 401 and clear the cookie if the JWT has been invalidated (6 ms)
2025-04-15T01:03:17.2737676Z       âœ“ should refresh the cookie before it expires (10 ms)
2025-04-15T01:03:17.2738247Z     issueCookie
2025-04-15T01:03:17.2738934Z       âœ“ should issue a cookie with the correct options (5 ms)
2025-04-15T01:03:17.2739770Z       âœ“ should allow changing cookie options (2 ms)
2025-04-15T01:03:17.2740272Z     issueJWT
2025-04-15T01:03:17.2740782Z       when not setting userManagement.jwtSessionDuration
2025-04-15T01:03:17.2741758Z         âœ“ should default to expire in 7 days (5 ms)
2025-04-15T01:03:17.2742420Z       when setting userManagement.jwtSessionDuration
2025-04-15T01:03:17.2743137Z         âœ“ should apply it to tokens (8 ms)
2025-04-15T01:03:17.2743592Z     resolveJwt
2025-04-15T01:03:17.2744116Z       âœ“ should throw on invalid tokens (39 ms)
2025-04-15T01:03:17.2744842Z       âœ“ should throw on expired tokens (3 ms)
2025-04-15T01:03:17.2745569Z       âœ“ should throw on tampered tokens (2 ms)
2025-04-15T01:03:17.2746274Z       âœ“ should throw on hijacked tokens (3 ms)
2025-04-15T01:03:17.2746972Z       âœ“ should throw if no user is found (2 ms)
2025-04-15T01:03:17.2747684Z       âœ“ should throw if the user is disabled (2 ms)
2025-04-15T01:03:17.2748603Z       âœ“ should throw if user password does not match the one on the token (1 ms)
2025-04-15T01:03:17.2749662Z       âœ“ should throw if user email does not match the one on the token (1 ms)
2025-04-15T01:03:17.2750574Z       âœ“ should refresh the cookie before it expires (7 ms)
2025-04-15T01:03:17.2751737Z       âœ“ should refresh the cookie only if less than 1/4th of time is left (4 ms)
2025-04-15T01:03:17.2752847Z       âœ“ should not refresh the cookie if jwtRefreshTimeoutHours is set to -1 (2 ms)
2025-04-15T01:03:17.2753587Z     generatePasswordResetUrl
2025-04-15T01:03:17.2754248Z       âœ“ should generate a valid url (2 ms)
2025-04-15T01:03:17.2754844Z     generatePasswordResetToken
2025-04-15T01:03:17.2755603Z       âœ“ should generate valid password-reset tokens (1 ms)
2025-04-15T01:03:17.2756199Z     resolvePasswordResetToken
2025-04-15T01:03:17.2756962Z       âœ“ should not return a user if the token in invalid (1 ms)
2025-04-15T01:03:17.2757817Z       âœ“ should not return a user if the token in expired (2 ms)
2025-04-15T01:03:17.2758746Z       âœ“ should not return a user if the user does not exist in the DB (1 ms)
2025-04-15T01:03:17.2759999Z       âœ“ should not return a user if the password sha does not match (2 ms)
2025-04-15T01:03:17.2760918Z       âœ“ should not return the user if all checks pass (2 ms)
2025-04-15T01:03:17.2761454Z     invalidateToken
2025-04-15T01:03:17.2775521Z       âœ“ should invalidate the token (1 ms)
2025-04-15T01:03:17.2775888Z 
2025-04-15T01:03:17.8063721Z PASS src/services/__tests__/community-packages.service.test.ts
2025-04-15T01:03:17.8068273Z   CommunityPackagesService
2025-04-15T01:03:17.8070134Z     parseNpmPackageName()
2025-04-15T01:03:17.8072436Z       âœ“ should fail with empty package name (39 ms)
2025-04-15T01:03:17.8074388Z       âœ“ should fail with invalid package prefix name (1 ms)
2025-04-15T01:03:17.8089040Z       âœ“ should parse valid package name (1 ms)
2025-04-15T01:03:17.8089755Z       âœ“ should parse valid package name and version (1 ms)
2025-04-15T01:03:17.8090508Z       âœ“ should parse valid package name, scope and version (1 ms)
2025-04-15T01:03:17.8091047Z     executeCommand()
2025-04-15T01:03:17.8091923Z       âœ“ should call command with valid options (2 ms)
2025-04-15T01:03:17.8092583Z       âœ“ should make sure folder exists (1 ms)
2025-04-15T01:03:17.8093261Z       âœ“ should try to create folder if it does not exist (8 ms)
2025-04-15T01:03:17.8094056Z       âœ“ should throw especial error when package is not found (3 ms)
2025-04-15T01:03:17.8094615Z     crossInformationPackage()
2025-04-15T01:03:17.8095328Z       âœ“ should return same list if availableUpdates is undefined (2 ms)
2025-04-15T01:03:17.8096534Z       âœ“ should correctly match update versions for packages (1 ms)
2025-04-15T01:03:17.8097386Z       âœ“ should correctly match update versions for single package (1 ms)
2025-04-15T01:03:17.8097972Z     matchMissingPackages()
2025-04-15T01:03:17.8098595Z       âœ“ should not match failed packages that do not exist (2 ms)
2025-04-15T01:03:17.8099381Z       âœ“ should match failed packages that should be present (1 ms)
2025-04-15T01:03:17.8100245Z       âœ“ should match failed packages even if version is wrong
2025-04-15T01:03:17.8100775Z     checkNpmPackageStatus()
2025-04-15T01:03:17.8101267Z       âœ“ should call axios.post
2025-04-15T01:03:17.8102007Z       âœ“ should not fail if request fails (1 ms)
2025-04-15T01:03:17.8126758Z       âœ“ should warn if package is banned
2025-04-15T01:03:17.8127324Z     hasPackageLoadedSuccessfully()
2025-04-15T01:03:17.8128128Z       âœ“ should return true when failed package list does not exist (1 ms)
2025-04-15T01:03:17.8129086Z       âœ“ should return true when package is not in the list of missing packages
2025-04-15T01:03:17.8130087Z       âœ“ should return false when package is in the list of missing packages
2025-04-15T01:03:17.8130747Z     removePackageFromMissingList()
2025-04-15T01:03:17.8131405Z       âœ“ should do nothing if key does not exist (1 ms)
2025-04-15T01:03:17.8132324Z       âœ“ should remove only correct package from list
2025-04-15T01:03:17.8133048Z       âœ“ should not remove if package is not in the list (1 ms)
2025-04-15T01:03:17.8133573Z     updateNpmModule
2025-04-15T01:03:17.8134256Z       âœ“ should call `exec` with the correct command and registry (2 ms)
2025-04-15T01:03:17.8134957Z       âœ“ should throw when not licensed (2 ms)
2025-04-15T01:03:17.8135284Z 
2025-04-15T01:03:18.7204310Z PASS test/integration/deduplication/deduplication-helper.test.ts (5.253 s)
2025-04-15T01:03:18.7205154Z   Deduplication.DeduplicationHelper
2025-04-15T01:03:18.7206412Z     âœ“ Deduplication (mode: entries): DeduplicationHelper should record and check data correctly (24 ms)
2025-04-15T01:03:18.7208054Z     âœ“ Deduplication (mode: entries): DeduplicationHelper different contexts should not interfere with each other (13 ms)
2025-04-15T01:03:18.7209541Z     âœ“ Deduplication (mode: entries): DeduplicationHelper check maxEntries (9 ms)
2025-04-15T01:03:18.7210593Z     âœ“ removeProcessed should throw error for latest modes (48 ms)
2025-04-15T01:03:18.7211946Z     âœ“ clearAllProcessedItems should delete all processed items for workflow scope (7 ms)
2025-04-15T01:03:18.7216596Z     âœ“ clearAllProcessedItems should delete all processed items for node scope (6 ms)
2025-04-15T01:03:18.7218094Z     âœ“ clearAllProcessedItems should not clear workflow processed items when clearing node scope (8 ms)
2025-04-15T01:03:18.7219561Z     âœ“ clearAllProcessedItems should not clear node processed items when clearing workflow scope (11 ms)
2025-04-15T01:03:18.7230767Z     âœ“ getProcessedDataCount should return correct count for different modes (6 ms)
2025-04-15T01:03:18.7232264Z     Deduplication (mode: latestIncrementalKey): DeduplicationHelper should record and check data correctly
2025-04-15T01:03:18.7233279Z       âœ“ dates (33 ms)
2025-04-15T01:03:18.7233698Z       âœ“ numbers (5 ms)
2025-04-15T01:03:18.7233926Z 
2025-04-15T01:03:23.6373700Z PASS src/controllers/oauth/__tests__/oauth2-credential.controller.test.ts (5.581 s)
2025-04-15T01:03:23.6402314Z   OAuth2CredentialController
2025-04-15T01:03:23.6405092Z     getAuthUri
2025-04-15T01:03:23.6408072Z       âœ“ should throw a BadRequestError when credentialId is missing in the query (35 ms)
2025-04-15T01:03:23.6411114Z       âœ“ should throw a NotFoundError when no matching credential is found for the user (2 ms)
2025-04-15T01:03:23.6412517Z       âœ“ should return a valid auth URI (7 ms)
2025-04-15T01:03:23.6412995Z     handleCallback
2025-04-15T01:03:23.6413816Z       âœ“ should render the error page when required query params are missing (1 ms)
2025-04-15T01:03:23.6414904Z       âœ“ should render the error page when `state` query param is invalid (1 ms)
2025-04-15T01:03:23.6416240Z       âœ“ should render the error page when credential is not found in DB (2 ms)
2025-04-15T01:03:23.6417107Z       âœ“ should render the error page when csrfSecret on the saved credential does not match the state (1 ms)
2025-04-15T01:03:23.6417878Z       âœ“ should render the error page when state is older than 5 minutes (7 ms)
2025-04-15T01:03:23.6418513Z       âœ“ should render the error page when code exchange fails (61 ms)
2025-04-15T01:03:23.6419525Z       âœ“ should exchange the code for a valid token, and save it to DB (22 ms)
2025-04-15T01:03:23.6420450Z       âœ“ merges oauthTokenData if it already exists (60 ms)
2025-04-15T01:03:23.6421294Z       âœ“ overwrites oauthTokenData if it is a string (56 ms)
2025-04-15T01:03:23.6421743Z 
2025-04-15T01:03:24.8516888Z PASS test/integration/controllers/invitation/invitation.controller.integration.test.ts (7.373 s)
2025-04-15T01:03:24.8525541Z   InvitationController
2025-04-15T01:03:24.8526015Z     POST /invitations/:id/accept
2025-04-15T01:03:24.8526806Z       âœ“ should fill out a member shell (189 ms)
2025-04-15T01:03:24.8527467Z       âœ“ should fill out an admin shell (128 ms)
2025-04-15T01:03:24.8528082Z       âœ“ should fail with invalid payloads (34 ms)
2025-04-15T01:03:24.8528763Z       âœ“ should fail with already accepted invite (127 ms)
2025-04-15T01:03:24.8529264Z     POST /invitations
2025-04-15T01:03:24.8529793Z       âœ“ should fail with invalid payloads (40 ms)
2025-04-15T01:03:24.8530417Z       âœ“ should return 200 on empty payload (7 ms)
2025-04-15T01:03:24.8531110Z       âœ“ should return 200 if emailing is not set up (14 ms)
2025-04-15T01:03:24.8532437Z       âœ“ should create member shell (14 ms)
2025-04-15T01:03:24.8533184Z       âœ“ should create personal project for shell account (25 ms)
2025-04-15T01:03:24.8534129Z       âœ“ should create admin shell when advanced permissions is licensed (14 ms)
2025-04-15T01:03:24.8535028Z       âœ“ should reinvite member when sharing is licensed (29 ms)
2025-04-15T01:03:24.8535927Z       âœ“ should reinvite admin when advanced permissions is licensed (25 ms)
2025-04-15T01:03:24.8537067Z       âœ“ should return 403 on creating admin shell when advanced permissions is unlicensed (8 ms)
2025-04-15T01:03:24.8538245Z       âœ“ should email invites and create user shells, without inviting existing users (32 ms)
2025-04-15T01:03:24.8539339Z       âœ“ should return 200 and surface error when invite method throws error (13 ms)
2025-04-15T01:03:24.8539849Z 
2025-04-15T01:03:26.2900183Z PASS src/__tests__/load-nodes-and-credentials.test.ts
2025-04-15T01:03:26.2914488Z   LoadNodesAndCredentials
2025-04-15T01:03:26.2914930Z     resolveIcon
2025-04-15T01:03:26.2915900Z       âœ“ should return undefined if the loader for the package is not found (6 ms)
2025-04-15T01:03:26.2917077Z       âœ“ should return undefined if the resolved file path is outside the loader directory (1 ms)
2025-04-15T01:03:26.2918222Z       âœ“ should return the file path if the file is within the loader directory (1 ms)
2025-04-15T01:03:26.2919315Z       âœ“ should return undefined if the URL is outside the package directory
2025-04-15T01:03:26.2920006Z     convertNodeToAiTool
2025-04-15T01:03:26.2920731Z       âœ“ should modify the name and displayName correctly (1 ms)
2025-04-15T01:03:26.2921508Z       âœ“ should update inputs and outputs (2 ms)
2025-04-15T01:03:26.2922412Z       âœ“ should remove the usableAsTool property
2025-04-15T01:03:26.2923224Z       âœ“ should add toolDescription property if it doesn't exist
2025-04-15T01:03:26.2923997Z       âœ“ should set codex categories correctly
2025-04-15T01:03:26.2924699Z       âœ“ should preserve existing properties (1 ms)
2025-04-15T01:03:26.2925443Z       âœ“ should handle nodes with resource property
2025-04-15T01:03:26.2926205Z       âœ“ should handle nodes with operation property (1 ms)
2025-04-15T01:03:26.2927131Z       âœ“ should handle nodes with both resource and operation properties (1 ms)
2025-04-15T01:03:26.2928047Z       âœ“ should handle nodes with empty properties (1 ms)
2025-04-15T01:03:26.2928850Z       âœ“ should handle nodes with existing codex property (1 ms)
2025-04-15T01:03:26.2930219Z       âœ“ should handle nodes with existing codex with tool subcategory overwrite
2025-04-15T01:03:26.2931162Z       âœ“ should handle nodes with very long names (1 ms)
2025-04-15T01:03:26.2932663Z       âœ“ should handle nodes with special characters in name and displayName
2025-04-15T01:03:26.2933548Z     resolveSchema
2025-04-15T01:03:26.2936071Z       âœ“ should return undefined if the node is not known (1 ms)
2025-04-15T01:03:26.2936899Z       âœ“ should return the correct path if the node is known
2025-04-15T01:03:26.2937852Z       âœ“ should return the correct path if there is no resource or operation (1 ms)
2025-04-15T01:03:26.2940705Z     createAiTools
2025-04-15T01:03:26.2942057Z       âœ“ should create AI tools for nodes marked as usableAsTool (1 ms)
2025-04-15T01:03:26.2942958Z       âœ“ should duplicate supportedNodes for AI tools
2025-04-15T01:03:26.2943844Z       âœ“ should not modify nodes without usableAsTool property (1 ms)
2025-04-15T01:03:26.2944877Z       âœ“ should handle nodes with usableAsTool as an object with replacements (1 ms)
2025-04-15T01:03:26.2945445Z 
2025-04-15T01:03:26.3686951Z PASS test/integration/variables.test.ts (7.423 s)
2025-04-15T01:03:26.3688105Z   GET /variables
2025-04-15T01:03:26.3689360Z     âœ“ should return an empty array if there is nothing in the cache (55 ms)
2025-04-15T01:03:26.3690497Z     âœ“ should return all variables for an owner (19 ms)
2025-04-15T01:03:26.3691458Z     âœ“ should return all variables for a member (17 ms)
2025-04-15T01:03:26.3693571Z     state:empty
2025-04-15T01:03:26.3694167Z       âœ“ only return empty variables (16 ms)
2025-04-15T01:03:26.3694660Z   GET /variables/:id
2025-04-15T01:03:26.3695294Z     âœ“ should return a single variable for an owner (25 ms)
2025-04-15T01:03:26.3696109Z     âœ“ should return a single variable for a member (21 ms)
2025-04-15T01:03:26.3696643Z   POST /variables
2025-04-15T01:03:26.3697316Z     âœ“ should create a new variable and return it for an owner (18 ms)
2025-04-15T01:03:26.3698231Z     âœ“ should not create a new variable and return it for a member (9 ms)
2025-04-15T01:03:26.3699411Z     âœ“ should not create a new variable and return it if the instance doesn't have a license (8 ms)
2025-04-15T01:03:26.3700636Z     âœ“ should fail to create a new variable and if one with the same key exists (68 ms)
2025-04-15T01:03:26.3701825Z     âœ“ should not fail if variable limit not reached (17 ms)
2025-04-15T01:03:26.3702591Z     âœ“ should fail if variable limit reached (57 ms)
2025-04-15T01:03:26.3703644Z     âœ“ should fail if key too long (10 ms)
2025-04-15T01:03:26.3704340Z     âœ“ should fail if value too long (8 ms)
2025-04-15T01:03:26.3705120Z     âœ“ should fail if key contain's prohibited characters (7 ms)
2025-04-15T01:03:26.3705703Z   PATCH /variables/:id
2025-04-15T01:03:26.3710629Z     âœ“ should modify existing variable if use is an owner (17 ms)
2025-04-15T01:03:26.3711775Z     âœ“ should modify existing variable if use is an owner (11 ms)
2025-04-15T01:03:26.3712717Z     âœ“ should not modify existing variable if use is a member (9 ms)
2025-04-15T01:03:26.3713747Z     âœ“ should not modify existing variable if one with the same key exists (13 ms)
2025-04-15T01:03:26.3714440Z   DELETE /variables/:id
2025-04-15T01:03:26.3715120Z     âœ“ should delete a single variable for an owner (14 ms)
2025-04-15T01:03:26.3715951Z     âœ“ should not delete a single variable for a member (15 ms)
2025-04-15T01:03:26.3716320Z 
2025-04-15T01:03:30.7460269Z PASS src/workflows/__tests__/workflow-execution.service.test.ts
2025-04-15T01:03:30.7462447Z   WorkflowExecutionService
2025-04-15T01:03:30.7462891Z     runWorkflow()
2025-04-15T01:03:30.7463849Z       âœ“ should call `WorkflowRunner.run()` (12 ms)
2025-04-15T01:03:30.7464642Z     executeManually()
2025-04-15T01:03:30.7465701Z       âœ“ should call `WorkflowRunner.run()` with correct parameters with default partial execution logic (2 ms)
2025-04-15T01:03:30.7466902Z       âœ“ removes runData if the destination node is a trigger (2 ms)
2025-04-15T01:03:30.7467958Z       âœ“ should call WorkflowRunner.run() with pinned trigger with type trigger (1 ms)
2025-04-15T01:03:30.7470090Z       âœ“ should call WorkflowRunner.run() with pinned trigger with type webhook (2 ms)
2025-04-15T01:03:30.7471458Z       âœ“ should start from pinned trigger (1 ms)
2025-04-15T01:03:30.7472558Z       âœ“ should ignore pinned trigger and start from unexecuted trigger (1 ms)
2025-04-15T01:03:30.7476129Z     selectPinnedActivatorStarter()
2025-04-15T01:03:30.7476884Z       âœ“ should return `null` if no pindata (1 ms)
2025-04-15T01:03:30.7477609Z       âœ“ should return `null` if no starter nodes
2025-04-15T01:03:30.7478344Z       âœ“ should select webhook node if only choice (1 ms)
2025-04-15T01:03:30.7478964Z       âœ“ should return `null` if no choice
2025-04-15T01:03:30.7479548Z       âœ“ should return ignore Respond to Webhook
2025-04-15T01:03:30.7480236Z       âœ“ should select execute workflow trigger if only choice
2025-04-15T01:03:30.7481002Z       âœ“ should favor webhook node over execute workflow trigger
2025-04-15T01:03:30.7482115Z       âœ“ should favor first webhook node over second webhook node
2025-04-15T01:03:30.7486115Z       offloading manual executions to workers
2025-04-15T01:03:30.7500381Z         âœ“ when receiving no `runData`, should set `runData` to undefined in `executionData` (1 ms)
2025-04-15T01:03:30.7506176Z 
2025-04-15T01:03:31.8854037Z PASS src/services/__tests__/public-api-key.service.test.ts (5.277 s)
2025-04-15T01:03:31.8854476Z   PublicApiKeyService
2025-04-15T01:03:31.8854703Z     getAuthMiddleware
2025-04-15T01:03:31.8855286Z       âœ“ should return false if api key is invalid (10 ms)
2025-04-15T01:03:31.8855759Z       âœ“ should return false if valid api key is not in database (4 ms)
2025-04-15T01:03:31.8856251Z       âœ“ should return true if valid api key exist in the database (28 ms)
2025-04-15T01:03:31.8856703Z       âœ“ should return false if expired JWT is used (43 ms)
2025-04-15T01:03:31.8857100Z       âœ“ should work with non JWT (legacy) api keys (15 ms)
2025-04-15T01:03:31.8857378Z     redactApiKey
2025-04-15T01:03:31.8857665Z       âœ“ should redact api key (1 ms)
2025-04-15T01:03:31.8857961Z     removeOwnerOnlyScopesFromApiKeys
2025-04-15T01:03:31.8858393Z       âœ“ it should remove all owner only scopes from user's API keys (18 ms)
2025-04-15T01:03:31.8858750Z     getApiKeyScopedMiddleware
2025-04-15T01:03:31.8859148Z       âœ“ should allow access when API key has required scope (22 ms)
2025-04-15T01:03:31.8859650Z       âœ“ should deny access when API key does not have required scope (13 ms)
2025-04-15T01:03:31.8860409Z       âœ“ should deny access when API key is invalid (9 ms)
2025-04-15T01:03:31.8860899Z       âœ“ should deny access when header x-n8n-api-key is not present (11 ms)
2025-04-15T01:03:31.8861248Z     apiKeyHasValidScopes
2025-04-15T01:03:31.8863073Z       âœ“ should return true if API key has the required scope (19 ms)
2025-04-15T01:03:31.8864161Z       âœ“ should return false if API key does not have the required scope (11 ms)
2025-04-15T01:03:31.8864893Z     apiKeyHasValidScopesForRole
2025-04-15T01:03:31.8865768Z       âœ“ should return true if API key has the required scope for the role (2 ms)
2025-04-15T01:03:31.8866898Z       âœ“ should return false if API key does not have the required scope for the role (1 ms)
2025-04-15T01:03:31.8867471Z 
2025-04-15T01:03:33.2112286Z PASS test/integration/mfa/mfa.api.test.ts (8.112 s)
2025-04-15T01:03:33.2116105Z   Enable MFA setup
2025-04-15T01:03:33.2116485Z     Step one
2025-04-15T01:03:33.2117385Z       âœ“ GET /qr should fail due to unauthenticated user (74 ms)
2025-04-15T01:03:33.2118442Z       âœ“ GET /qr should reuse secret and recovery codes until setup is complete (100 ms)
2025-04-15T01:03:33.2119419Z       âœ“ GET /qr should return qr, secret and recovery codes (24 ms)
2025-04-15T01:03:33.2119979Z     Step two
2025-04-15T01:03:33.2120684Z       âœ“ POST /verify should fail due to unauthenticated user (13 ms)
2025-04-15T01:03:33.2121829Z       âœ“ POST /verify should fail due to invalid MFA code (32 ms)
2025-04-15T01:03:33.2122791Z       âœ“ POST /verify should fail due to missing mfaCode parameter (32 ms)
2025-04-15T01:03:33.2124089Z       âœ“ POST /verify should validate MFA code (32 ms)
2025-04-15T01:03:33.2124601Z     Step three
2025-04-15T01:03:33.2125269Z       âœ“ POST /enable should fail due to unauthenticated user (12 ms)
2025-04-15T01:03:33.2126196Z       âœ“ POST /verify should fail due to missing mfaCode parameter (23 ms)
2025-04-15T01:03:33.2127051Z       âœ“ POST /enable should fail due to invalid MFA code (47 ms)
2025-04-15T01:03:33.2128026Z       âœ“ POST /enable should fail due to empty secret and recovery codes (16 ms)
2025-04-15T01:03:33.2128935Z       âœ“ POST /enable should enable MFA in account (47 ms)
2025-04-15T01:03:33.2129822Z       âœ“ POST /enable should not enable MFA if pre check fails (34 ms)
2025-04-15T01:03:33.2130430Z   Disable MFA setup
2025-04-15T01:03:33.2131068Z     âœ“ POST /disable should disable login with MFA (40 ms)
2025-04-15T01:03:33.2132347Z     âœ“ POST /disable should fail if invalid MFA recovery code is given (25 ms)
2025-04-15T01:03:33.2133328Z     âœ“ POST /disable should fail if invalid MFA code is given (31 ms)
2025-04-15T01:03:33.2134308Z     âœ“ POST /disable should fail if neither MFA code nor recovery code is sent (24 ms)
2025-04-15T01:03:33.2134925Z   Change password with MFA enabled
2025-04-15T01:03:33.2135594Z     âœ“ POST /change-password should fail due to missing MFA code (22 ms)
2025-04-15T01:03:33.2136490Z     âœ“ POST /change-password should fail due to invalid MFA code (18 ms)
2025-04-15T01:03:33.2137407Z     âœ“ POST /change-password should update password (240 ms)
2025-04-15T01:03:33.2137968Z   MFA before enable checks
2025-04-15T01:03:33.2149944Z     âœ“ POST /can-enable should throw error if mfa.beforeSetup returns error (16 ms)
2025-04-15T01:03:33.2151320Z     âœ“ POST /can-enable should not throw error if mfa.beforeSetup does not exist (18 ms)
2025-04-15T01:03:33.2152302Z   Login
2025-04-15T01:03:33.2153070Z     âœ“ POST /login with email/password should succeed when mfa is disabled (27 ms)
2025-04-15T01:03:33.2154615Z     âœ“ GET /login should not include mfaSecret and mfaRecoveryCodes property in response (16 ms)
2025-04-15T01:03:33.2156049Z     âœ“ POST /login with email/password should fail when mfa is enabled (23 ms)
2025-04-15T01:03:33.2156968Z     Login with MFA token
2025-04-15T01:03:33.2158026Z       âœ“ POST /login should fail due to invalid MFA token (24 ms)
2025-04-15T01:03:33.2159084Z       âœ“ POST /login should fail due two MFA step needed (26 ms)
2025-04-15T01:03:33.2159846Z       âœ“ POST /login should succeed with MFA token (22 ms)
2025-04-15T01:03:33.2160854Z     Login with recovery code
2025-04-15T01:03:33.2161919Z       âœ“ POST /login should fail due to invalid MFA recovery code (25 ms)
2025-04-15T01:03:33.2213235Z       âœ“ POST /login should succeed with MFA recovery code (36 ms)
2025-04-15T01:03:33.2213658Z 
2025-04-15T01:03:34.8294166Z PASS src/__tests__/manual-execution.service.test.ts
2025-04-15T01:03:34.8294844Z   ManualExecutionService
2025-04-15T01:03:34.8295264Z     getExecutionStartNode
2025-04-15T01:03:34.8296066Z       âœ“ Should return undefined (6 ms)
2025-04-15T01:03:34.8296725Z       âœ“ Should return startNode (1 ms)
2025-04-15T01:03:34.8297480Z       âœ“ Should return triggerToStartFrom trigger node (1 ms)
2025-04-15T01:03:34.8298916Z     runManually
2025-04-15T01:03:34.8299882Z       âœ“ should correctly process triggerToStartFrom data when data.triggerToStartFrom.data is present (8 ms)
2025-04-15T01:03:34.8301131Z       âœ“ should correctly include destinationNode in executionData when provided (2 ms)
2025-04-15T01:03:34.8302527Z       âœ“ should call workflowExecute.run for full execution when no runData or startNodes (2 ms)
2025-04-15T01:03:34.8303569Z       âœ“ should use execution start node when available for full execution (3 ms)
2025-04-15T01:03:34.8304694Z       âœ“ should handle partial execution with provided runData, startNodes and no destinationNode (2 ms)
2025-04-15T01:03:34.8305815Z       âœ“ should handle partial execution with partialExecutionVersion=2 (2 ms)
2025-04-15T01:03:34.8306645Z       âœ“ should validate nodes exist before execution (2 ms)
2025-04-15T01:03:34.8307794Z       âœ“ should handle pinData correctly when provided (2 ms)
2025-04-15T01:03:34.8308182Z 
2025-04-15T01:03:35.4516706Z PASS src/controllers/__tests__/me.controller.test.ts
2025-04-15T01:03:35.4517278Z   MeController
2025-04-15T01:03:35.4517611Z     updateCurrentUser
2025-04-15T01:03:35.4540742Z       âœ“ should update the user in the DB, and issue a new cookie (16 ms)
2025-04-15T01:03:35.4542160Z       âœ“ should throw BadRequestError if beforeUpdate hook throws BadRequestError (28 ms)
2025-04-15T01:03:35.4542909Z       when mfa is enabled
2025-04-15T01:03:35.4543634Z         âœ“ should throw BadRequestError if mfa code is missing (1 ms)
2025-04-15T01:03:35.4544560Z         âœ“ should throw InvalidMfaCodeError if mfa code is invalid (1 ms)
2025-04-15T01:03:35.4545463Z         âœ“ should update the user's email if mfa code is valid (2 ms)
2025-04-15T01:03:35.4546039Z     updatePassword
2025-04-15T01:03:35.4546728Z       âœ“ should throw if the user does not have a password set (2 ms)
2025-04-15T01:03:35.4547770Z       âœ“ should throw if currentPassword does not match the user's password (149 ms)
2025-04-15T01:03:35.4548832Z       âœ“ should update the password in the DB, and issue a new cookie (208 ms)
2025-04-15T01:03:35.4549570Z       should throw if newPassword is not valid
2025-04-15T01:03:35.4550123Z         âœ“ pass (112 ms)
2025-04-15T01:03:35.4550568Z         âœ“ password (99 ms)
2025-04-15T01:03:35.4551038Z         âœ“ password1 (90 ms)
2025-04-15T01:03:35.4551449Z       mfa enabled
2025-04-15T01:03:35.4552293Z         âœ“ should throw BadRequestError if mfa code is missing (101 ms)
2025-04-15T01:03:35.4553284Z         âœ“ should throw InvalidMfaCodeError if invalid mfa code is given (92 ms)
2025-04-15T01:03:35.4554164Z         âœ“ should succeed when mfa code is correct (195 ms)
2025-04-15T01:03:35.4554693Z     storeSurveyAnswers
2025-04-15T01:03:35.4555488Z       âœ“ should throw BadRequestError if answers are missing in the payload (1 ms)
2025-04-15T01:03:35.4556490Z       âœ“ should not flag XSS attempt for `<` sign in company size (8 ms)
2025-04-15T01:03:35.4557650Z       âœ“ should throw BadRequestError on XSS attempt for an array field automationGoalDevops (3 ms)
2025-04-15T01:03:35.4579983Z       âœ“ should throw BadRequestError on XSS attempt for an array field companyIndustryExtended (1 ms)
2025-04-15T01:03:35.4622965Z       âœ“ should throw BadRequestError on XSS attempt for an array field otherCompanyIndustryExtended (1 ms)
2025-04-15T01:03:35.4624670Z       âœ“ should throw BadRequestError on XSS attempt for an array field automationGoalSm (1 ms)
2025-04-15T01:03:35.4625773Z       âœ“ should throw BadRequestError on XSS attempt for an array field usageModes (1 ms)
2025-04-15T01:03:35.4626936Z       âœ“ should throw BadRequestError on XSS attempt for a string field automationGoalDevopsOther (1 ms)
2025-04-15T01:03:35.4628065Z       âœ“ should throw BadRequestError on XSS attempt for a string field companySize (1 ms)
2025-04-15T01:03:35.4629132Z       âœ“ should throw BadRequestError on XSS attempt for a string field companyType (1 ms)
2025-04-15T01:03:35.4630280Z       âœ“ should throw BadRequestError on XSS attempt for a string field automationGoalSmOther (1 ms)
2025-04-15T01:03:35.4631378Z       âœ“ should throw BadRequestError on XSS attempt for a string field roleOther (1 ms)
2025-04-15T01:03:35.4632611Z       âœ“ should throw BadRequestError on XSS attempt for a string field reportedSource (1 ms)
2025-04-15T01:03:35.4633745Z       âœ“ should throw BadRequestError on XSS attempt for a string field reportedSourceOther (1 ms)
2025-04-15T01:03:35.4634286Z 
2025-04-15T01:03:39.3654588Z PASS src/webhooks/__tests__/webhook-helpers.test.ts
2025-04-15T01:03:39.3656937Z   autoDetectResponseMode
2025-04-15T01:03:39.3657939Z     âœ“ should return undefined if start node is WAIT_NODE_TYPE with resume not equal to form (6 ms)
2025-04-15T01:03:39.3658978Z     âœ“ should return responseNode when start node is FORM_NODE_TYPE and method is POST (1 ms)
2025-04-15T01:03:39.3660132Z     âœ“ should return undefined when start node is FORM_NODE_TYPE with no other form child nodes
2025-04-15T01:03:39.3661746Z     âœ“ should return undefined for non-matching node type and method (1 ms)
2025-04-15T01:03:39.3662381Z   handleFormRedirectionCase
2025-04-15T01:03:39.3663305Z     âœ“ should return data unchanged if start node is WAIT_NODE_TYPE with resume not equal to form (1 ms)
2025-04-15T01:03:39.3664415Z     âœ“ should modify data if start node type matches and responseCode is a redirect
2025-04-15T01:03:39.3712186Z     âœ“ should not modify data if location header is missing
2025-04-15T01:03:39.3712721Z   getResponseOnReceived
2025-04-15T01:03:39.3713499Z     âœ“ should return response with no data when responseData is "noData" (1 ms)
2025-04-15T01:03:39.3714424Z     âœ“ should return response with responseData when it is defined (1 ms)
2025-04-15T01:03:39.3715589Z     âœ“ should return response with webhookResponse when responseData is falsy but webhookResponse exists (1 ms)
2025-04-15T01:03:39.3716848Z     âœ“ should return default response message when responseData and webhookResponse are falsy
2025-04-15T01:03:39.3717569Z   setupResponseNodePromise
2025-04-15T01:03:39.3718100Z     âœ“ should handle regular response object (3 ms)
2025-04-15T01:03:39.3718660Z     âœ“ should handle binary data with ID (1 ms)
2025-04-15T01:03:39.3719193Z     âœ“ should handle buffer response (2 ms)
2025-04-15T01:03:39.3719719Z     âœ“ should handle errors properly (1 ms)
2025-04-15T01:03:39.3720134Z   prepareExecutionData
2025-04-15T01:03:39.3720725Z     âœ“ should create new execution data when not provided (1 ms)
2025-04-15T01:03:39.3721760Z     âœ“ should update existing runExecutionData when executionId is defined (1 ms)
2025-04-15T01:03:39.3722540Z     âœ“ should set destination node when provided
2025-04-15T01:03:39.3723217Z     âœ“ should update execution data with execution data merge
2025-04-15T01:03:39.3723958Z     âœ“ should set pinData when execution mode is manual (1 ms)
2025-04-15T01:03:39.3724772Z     âœ“ should not set pinData when execution mode is not manual or evaluation
2025-04-15T01:03:39.3725216Z 
2025-04-15T01:03:40.9263873Z PASS test/integration/me.api.test.ts (7.423 s)
2025-04-15T01:03:40.9266657Z   Owner shell
2025-04-15T01:03:40.9269581Z     âœ“ PATCH /me should succeed with valid inputs (82 ms)
2025-04-15T01:03:40.9272926Z     âœ“ PATCH /me should fail with invalid inputs (95 ms)
2025-04-15T01:03:40.9276238Z     âœ“ PATCH /me/password should fail for shell (106 ms)
2025-04-15T01:03:40.9282730Z     âœ“ POST /me/survey should succeed with valid inputs (36 ms)
2025-04-15T01:03:40.9283792Z   Member
2025-04-15T01:03:40.9284405Z     âœ“ PATCH /me should succeed with valid inputs (83 ms)
2025-04-15T01:03:40.9285121Z     âœ“ PATCH /me should fail with invalid inputs (85 ms)
2025-04-15T01:03:40.9285933Z     âœ“ PATCH /me/password should succeed with valid inputs (167 ms)
2025-04-15T01:03:40.9288139Z     âœ“ PATCH /me/password should fail with invalid inputs (117 ms)
2025-04-15T01:03:40.9290305Z     âœ“ POST /me/survey should succeed with valid inputs (35 ms)
2025-04-15T01:03:40.9291967Z   Owner
2025-04-15T01:03:40.9292708Z     âœ“ PATCH /me should succeed with valid inputs (32 ms)
2025-04-15T01:03:40.9293680Z 
2025-04-15T01:03:43.8049933Z (node:2863) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
2025-04-15T01:03:43.8061963Z (Use `node --trace-warnings ...` to show where the warning was created)
2025-04-15T01:03:44.0094651Z PASS test/integration/commands/ldap/reset.test.ts (8.311 s)
2025-04-15T01:03:44.0102272Z   âœ“ fails if neither `--userId` nor `--projectId` nor `--deleteWorkflowsAndCredentials` is passed (39 ms)
2025-04-15T01:03:44.0104671Z   âœ“ fails if more than one of `--userId`, `--projectId`, `--deleteWorkflowsAndCredentials` are passed (5 ms)
2025-04-15T01:03:44.0107480Z   âœ“ fails if more than one of `--userId`, `--projectId`, `--deleteWorkflowsAndCredentials` are passed (3 ms)
2025-04-15T01:03:44.0108954Z   âœ“ fails if more than one of `--userId`, `--projectId`, `--deleteWorkflowsAndCredentials` are passed (4 ms)
2025-04-15T01:03:44.0110978Z   âœ“ fails if more than one of `--userId`, `--projectId`, `--deleteWorkflowsAndCredentials` are passed (4 ms)
2025-04-15T01:03:44.0112137Z   --deleteWorkflowsAndCredentials
2025-04-15T01:03:44.0113234Z     âœ“ deletes personal projects, workflows and credentials owned by LDAP managed users (144 ms)
2025-04-15T01:03:44.0114223Z     âœ“ deletes the LDAP sync history (18 ms)
2025-04-15T01:03:44.0114855Z     âœ“ resets LDAP settings (24 ms)
2025-04-15T01:03:44.0115305Z   --userId
2025-04-15T01:03:44.0115833Z     âœ“ fails if the user does not exist (11 ms)
2025-04-15T01:03:44.0116644Z     âœ“ fails if the user to migrate to is also an LDAP user (14 ms)
2025-04-15T01:03:44.0117743Z     âœ“ transfers all workflows and credentials to the user's personal project (68 ms)
2025-04-15T01:03:44.0118446Z   --projectId
2025-04-15T01:03:44.0119020Z     âœ“ fails if the project does not exist (7 ms)
2025-04-15T01:03:44.0119858Z     âœ“ fails if the user to migrate to is also an LDAP user (14 ms)
2025-04-15T01:03:44.0120861Z     âœ“ transfers all workflows and credentials to a personal project (76 ms)
2025-04-15T01:03:44.0122079Z     âœ“ transfers all workflows and credentials to a team project (74 ms)
2025-04-15T01:03:44.0122567Z 
2025-04-15T01:03:46.8485332Z PASS src/webhooks/__tests__/webhook.service.test.ts
2025-04-15T01:03:46.8493143Z   WebhookService
2025-04-15T01:03:46.8493683Z     findWebhook() - static case [cache enabled]
2025-04-15T01:03:46.8494627Z       âœ“ should return the webhook if found (5 ms)
2025-04-15T01:03:46.8495288Z       âœ“ should return null if not found (1 ms)
2025-04-15T01:03:46.8495890Z     findWebhook() - dynamic case [cache enabled]
2025-04-15T01:03:46.8496560Z       âœ“ should return the webhook if found (1 ms)
2025-04-15T01:03:46.8497261Z       âœ“ should handle subset dynamic path case (1 ms)
2025-04-15T01:03:46.8498039Z       âœ“ should handle single-segment dynamic path case
2025-04-15T01:03:46.8498906Z       âœ“ should return null if not found (1 ms)
2025-04-15T01:03:46.8499511Z     findWebhook() - static case [cache disabled]
2025-04-15T01:03:46.8500329Z       âœ“ should return the webhook if found
2025-04-15T01:03:46.8501048Z       âœ“ should return null if not found (1 ms)
2025-04-15T01:03:46.8501839Z     findWebhook() - dynamic case [cache disabled]
2025-04-15T01:03:46.8502581Z       âœ“ should return the webhook if found (1 ms)
2025-04-15T01:03:46.8503306Z       âœ“ should handle subset dynamic path case (1 ms)
2025-04-15T01:03:46.8504496Z       âœ“ should handle single-segment dynamic path case (1 ms)
2025-04-15T01:03:46.8505329Z       âœ“ should return null if not found (1 ms)
2025-04-15T01:03:46.8505824Z     getWebhookMethods()
2025-04-15T01:03:46.8506390Z       âœ“ should return all methods for webhook (2 ms)
2025-04-15T01:03:46.8507165Z       âœ“ should return empty array if no webhooks found (1 ms)
2025-04-15T01:03:46.8507727Z     deleteWorkflowWebhooks()
2025-04-15T01:03:46.8508400Z       âœ“ should delete all webhooks of the workflow (2 ms)
2025-04-15T01:03:46.8509684Z       âœ“ should not delete any webhooks if none found
2025-04-15T01:03:46.8510190Z     createWebhook()
2025-04-15T01:03:46.8510663Z       âœ“ should store webhook in DB
2025-04-15T01:03:46.8511092Z     getNodeWebhooks()
2025-04-15T01:03:46.8511902Z       âœ“ should return empty array if node is disabled (1 ms)
2025-04-15T01:03:46.8512832Z       âœ“ should return webhooks for node with webhook definitions (2 ms)
2025-04-15T01:03:46.8513525Z     createWebhookIfNotExists()
2025-04-15T01:03:46.8514264Z       âœ“ should create webhook if it does not exist (2 ms)
2025-04-15T01:03:46.8514976Z       âœ“ should not create webhook if it already exists (1 ms)
2025-04-15T01:03:46.8515893Z       âœ“ should handle case when webhook methods are not defined (1 ms)
2025-04-15T01:03:46.8516561Z     deleteWebhook()
2025-04-15T01:03:46.8517172Z       âœ“ should call runWebhookMethod with delete (2 ms)
2025-04-15T01:03:46.8517703Z     runWebhook()
2025-04-15T01:03:46.8518405Z       âœ“ should throw error if node does not have webhooks (26 ms)
2025-04-15T01:03:46.8519644Z       âœ“ should execute webhook and return response data (1 ms)
2025-04-15T01:03:46.8520061Z 
2025-04-15T01:03:47.2358988Z PASS test/integration/auth.api.test.ts (7.523 s)
2025-04-15T01:03:47.2364107Z   POST /login
2025-04-15T01:03:47.2369243Z     âœ“ should log user in (86 ms)
2025-04-15T01:03:47.2370230Z     âœ“ should log user with MFA enabled (43 ms)
2025-04-15T01:03:47.2373007Z     âœ“ should throw AuthError for non-owner if not within users limit quota (63 ms)
2025-04-15T01:03:47.2392831Z     âœ“ should not throw AuthError for owner if not within users limit quota (39 ms)
2025-04-15T01:03:47.2394970Z     âœ“ should fail with invalid email in the payload is the current authentication method is "email" (20 ms)
2025-04-15T01:03:47.2396035Z   GET /login
2025-04-15T01:03:47.2396881Z     âœ“ should return 401 Unauthorized if no cookie (6 ms)
2025-04-15T01:03:47.2397922Z     âœ“ should return 401 Unauthorized if invalid cookie (6 ms)
2025-04-15T01:03:47.2398906Z     âœ“ should return logged-in owner shell (15 ms)
2025-04-15T01:03:47.2399856Z     âœ“ should return logged-in member shell (18 ms)
2025-04-15T01:03:47.2400689Z     âœ“ should return logged-in owner (15 ms)
2025-04-15T01:03:47.2401807Z     âœ“ should return logged-in member (19 ms)
2025-04-15T01:03:47.2402538Z   GET /resolve-signup-token
2025-04-15T01:03:47.2403347Z     âœ“ should validate invite token (23 ms)
2025-04-15T01:03:47.2404325Z     âœ“ should return 403 if user quota reached (22 ms)
2025-04-15T01:03:47.2405339Z     âœ“ should fail with invalid inputs (47 ms)
2025-04-15T01:03:47.2406023Z   POST /logout
2025-04-15T01:03:47.2406730Z     âœ“ should log user out (19 ms)
2025-04-15T01:03:47.2407524Z 
2025-04-15T01:03:47.9235276Z PASS test/integration/environments/source-control-import.service.test.ts (6.744 s)
2025-04-15T01:03:47.9246623Z   SourceControlImportService
2025-04-15T01:03:47.9249780Z     importCredentialsFromWorkFolder()
2025-04-15T01:03:47.9253267Z       if user email specified by `ownedBy` exists at target instance
2025-04-15T01:03:47.9258741Z         âœ“ should assign credential ownership to original user (53 ms)
2025-04-15T01:03:47.9259465Z       if user email specified by `ownedBy` is `null`
2025-04-15T01:03:47.9267716Z         âœ“ should assign credential ownership to importing user (15 ms)
2025-04-15T01:03:47.9268612Z       if user email specified by `ownedBy` does not exist at target instance
2025-04-15T01:03:47.9269583Z         âœ“ should assign credential ownership to importing user (13 ms)
2025-04-15T01:03:47.9270806Z     if owner specified by `ownedBy` does not exist at target instance
2025-04-15T01:03:47.9272586Z       âœ“ should assign the credential ownership to the importing user if it was owned by a personal project in the source instance (15 ms)
2025-04-15T01:03:47.9274243Z       âœ“ should create a new team project if the credential was owned by a team project in the source instance (17 ms)
2025-04-15T01:03:47.9275306Z     if owner specified by `ownedBy` does exist at target instance
2025-04-15T01:03:47.9276393Z       âœ“ should use the existing team project if credential owning project is found (12 ms)
2025-04-15T01:03:47.9277712Z       âœ“ should not change the owner if the credential is owned by somebody else on the target instance (18 ms)
2025-04-15T01:03:47.9278370Z 
2025-04-15T01:03:50.1785642Z PASS src/executions/pre-execution-checks/__tests__/subworkflow-policy-checker.test.ts
2025-04-15T01:03:50.1786566Z   SubworkflowPolicyChecker
2025-04-15T01:03:50.1787000Z     no caller policy
2025-04-15T01:03:50.1788063Z       âœ“ should fall back to `N8N_WORKFLOW_CALLER_POLICY_DEFAULT_OPTION` (19 ms)
2025-04-15T01:03:50.1788819Z     `workflows-from-list` caller policy
2025-04-15T01:03:50.1789685Z       âœ“ should allow if caller list contains parent workflow ID (1 ms)
2025-04-15T01:03:50.1790656Z       âœ“ should deny if caller list does not contain parent workflow ID (2 ms)
2025-04-15T01:03:50.1791404Z     `any` caller policy
2025-04-15T01:03:50.1792483Z       âœ“ should not throw on a regular subworkflow call
2025-04-15T01:03:50.1794004Z     `workflows-from-same-owner` caller policy
2025-04-15T01:03:50.1795365Z       âœ“ should deny if the two workflows are owned by different projects (2 ms)
2025-04-15T01:03:50.1796864Z       âœ“ should allow if both workflows are owned by the same project (1 ms)
2025-04-15T01:03:50.1798672Z     error details
2025-04-15T01:03:50.1799657Z       âœ“ should contain description for accessible case (2 ms)
2025-04-15T01:03:50.1800985Z       âœ“ should contain description for inaccessible personal project case (1 ms)
2025-04-15T01:03:50.1802607Z       âœ“ should contain description for inaccessible team project case (1 ms)
2025-04-15T01:03:50.1803945Z       âœ“ should contain description for default (e.g. error workflow) case (2 ms)
2025-04-15T01:03:50.1804689Z 
2025-04-15T01:03:51.8804777Z PASS src/__tests__/active-executions.test.ts
2025-04-15T01:03:51.8808928Z   ActiveExecutions
2025-04-15T01:03:51.8813504Z     âœ“ Should initialize activeExecutions with empty list (11 ms)
2025-04-15T01:03:51.8818120Z     âœ“ Should add execution to active execution list (2 ms)
2025-04-15T01:03:51.8821010Z     âœ“ Should update execution if add is called with execution ID (19 ms)
2025-04-15T01:03:51.8823919Z     âœ“ Should attach and resolve response promise to existing execution (2 ms)
2025-04-15T01:03:51.8826619Z     âœ“ Should copy over startedAt and responsePromise when resuming a waiting execution (4 ms)
2025-04-15T01:03:51.8828768Z     attachWorkflowExecution
2025-04-15T01:03:51.8830899Z       âœ“ Should fail attaching execution to invalid executionId (40 ms)
2025-04-15T01:03:51.8833937Z       âœ“ Should successfully attach execution to valid executionId (4 ms)
2025-04-15T01:03:51.8843509Z     finalizeExecution
2025-04-15T01:03:51.8845666Z       âœ“ Should not remove a waiting execution (4 ms)
2025-04-15T01:03:51.8848036Z       âœ“ Should remove an existing execution (9 ms)
2025-04-15T01:03:51.8850675Z       âœ“ Should not try to resolve a post-execute promise for an inactive execution (1 ms)
2025-04-15T01:03:51.8864877Z       âœ“ Should resolve post execute promise on removal (12 ms)
2025-04-15T01:03:51.8865501Z     getPostExecutePromise
2025-04-15T01:03:51.8866411Z       âœ“ Should throw error when trying to create a promise with invalid execution (1 ms)
2025-04-15T01:03:51.8867116Z     stopExecution
2025-04-15T01:03:51.8867721Z       âœ“ Should cancel ongoing executions (3 ms)
2025-04-15T01:03:51.8868393Z       âœ“ Should cancel waiting executions (1 ms)
2025-04-15T01:03:51.8868860Z     shutdown
2025-04-15T01:03:51.8870012Z       âœ“ Should cancel only executions with response-promises by default (23 ms)
2025-04-15T01:03:51.8871082Z       âœ“ Should cancel all executions when cancelAll is true (21 ms)
2025-04-15T01:03:51.8871725Z 
2025-04-15T01:03:55.5401370Z PASS test/integration/public-api/credentials.test.ts (8.06 s)
2025-04-15T01:03:55.5408300Z   POST /credentials
2025-04-15T01:03:55.5409075Z     âœ“ should create credentials (180 ms)
2025-04-15T01:03:55.5409710Z     âœ“ should fail with invalid inputs (30 ms)
2025-04-15T01:03:55.5410195Z   DELETE /credentials/:id
2025-04-15T01:03:55.5410799Z     âœ“ should delete owned cred for owner (27 ms)
2025-04-15T01:03:55.5411484Z     âœ“ should delete non-owned cred for owner (20 ms)
2025-04-15T01:03:55.5412327Z     âœ“ should delete owned cred for member (21 ms)
2025-04-15T01:03:55.5413175Z     âœ“ should delete owned cred for member but leave others untouched (66 ms)
2025-04-15T01:03:55.5414027Z     âœ“ should not delete non-owned cred for member (30 ms)
2025-04-15T01:03:55.5414668Z     âœ“ should fail if cred not found (7 ms)
2025-04-15T01:03:55.5417655Z   GET /credentials/schema/:credentialType
2025-04-15T01:03:55.5418621Z     âœ“ should fail due to not found type (16 ms)
2025-04-15T01:03:55.5419987Z     âœ“ should retrieve credential type (8 ms)
2025-04-15T01:03:55.5420432Z   PUT /credentials/:id/transfer
2025-04-15T01:03:55.5422583Z     âœ“ should transfer credential to project (45 ms)
2025-04-15T01:03:55.5423760Z     âœ“ should transfer the right credential, not the first one it finds (37 ms)
2025-04-15T01:03:55.5424628Z     âœ“ if no destination project, should reject (19 ms)
2025-04-15T01:03:55.5425502Z 
2025-04-15T01:03:57.6675016Z PASS test/integration/eventbus.ee.test.ts (7.264 s)
2025-04-15T01:03:57.6677184Z   âœ“ should have a running logwriter process (5 ms)
2025-04-15T01:03:57.6679650Z   âœ“ should have logwriter log messages (52 ms)
2025-04-15T01:03:57.6681819Z   âœ“ should anonymize audit message to syslog  (10 ms)
2025-04-15T01:03:57.6683767Z   âœ“ should send message to webhook  (5 ms)
2025-04-15T01:03:57.6685629Z   âœ“ should send message to sentry  (6 ms)
2025-04-15T01:03:57.6686662Z   âœ“ DELETE /eventbus/destination delete all destinations by id (22 ms)
2025-04-15T01:03:57.6687297Z   GET /eventbus/destination
2025-04-15T01:03:57.6687900Z     âœ“ should fail due to missing authentication (20 ms)
2025-04-15T01:03:57.6688717Z     âœ“ all returned destinations should exist in eventbus (14 ms)
2025-04-15T01:03:57.6689328Z   POST /eventbus/destination
2025-04-15T01:03:57.6689944Z     âœ“ create syslog destination (12 ms)
2025-04-15T01:03:57.6690493Z     âœ“ create sentry destination (9 ms)
2025-04-15T01:03:57.6691121Z     âœ“ create webhook destination (7 ms)
2025-04-15T01:03:57.6691443Z 
2025-04-15T01:03:59.1358156Z PASS src/telemetry/__tests__/telemetry.test.ts
2025-04-15T01:03:59.1359047Z   Telemetry
2025-04-15T01:03:59.1359682Z     trackWorkflowExecution
2025-04-15T01:03:59.1360773Z       âœ“ should count executions correctly (9 ms)
2025-04-15T01:03:59.1362029Z       âœ“ should fire "Workflow execution errored" event for failed executions (3 ms)
2025-04-15T01:03:59.1363052Z       âœ“ should track production executions count correctly (14 ms)
2025-04-15T01:03:59.1363649Z     Rudderstack
2025-04-15T01:03:59.1364803Z       âœ“ should call rudderStack.identify() with a fake IP address to instruct Rudderstack to not use the user's IP address (1 ms)
2025-04-15T01:03:59.1366468Z       âœ“ should call rudderStack.track() with a fake IP address to instruct Rudderstack to not use the user's IP address (1 ms)
2025-04-15T01:03:59.1367227Z 
2025-04-15T01:03:59.5069723Z PASS test/integration/external-secrets/external-secrets.api.test.ts (7.433 s)
2025-04-15T01:03:59.5075591Z   GET /external-secrets/providers
2025-04-15T01:03:59.5076448Z     âœ“ can retrieve providers as owner (40 ms)
2025-04-15T01:03:59.5077156Z     âœ“ can not retrieve providers as non-owner (9 ms)
2025-04-15T01:03:59.5077806Z     âœ“ does obscure passwords (11 ms)
2025-04-15T01:03:59.5078343Z   GET /external-secrets/providers/:provider
2025-04-15T01:03:59.5078969Z     âœ“ can retrieve provider as owner (10 ms)
2025-04-15T01:03:59.5079973Z     âœ“ can not retrieve provider as non-owner (8 ms)
2025-04-15T01:03:59.5080630Z     âœ“ does obscure passwords (11 ms)
2025-04-15T01:03:59.5081191Z   POST /external-secrets/providers/:provider
2025-04-15T01:03:59.5084917Z     âœ“ can update provider settings (14 ms)
2025-04-15T01:03:59.5085730Z     âœ“ can update provider settings with blanking value (16 ms)
2025-04-15T01:03:59.5086446Z   POST /external-secrets/providers/:provider/connect
2025-04-15T01:03:59.5087196Z     âœ“ can change provider connected state (11 ms)
2025-04-15T01:03:59.5087842Z   POST /external-secrets/providers/:provider/test
2025-04-15T01:03:59.5088470Z     âœ“ can test provider (7 ms)
2025-04-15T01:03:59.5089010Z     âœ“ can test provider fail (7 ms)
2025-04-15T01:03:59.5089581Z   POST /external-secrets/providers/:provider/update
2025-04-15T01:03:59.5090202Z     âœ“ can update provider (6 ms)
2025-04-15T01:03:59.5090801Z     âœ“ can not update errored provider (10 ms)
2025-04-15T01:03:59.5091733Z     âœ“ can not update provider without a valid license (8 ms)
2025-04-15T01:03:59.5092336Z   GET /external-secrets/secrets
2025-04-15T01:03:59.5092896Z     âœ“ can get secret names as owner (5 ms)
2025-04-15T01:03:59.5093535Z     âœ“ can not get secret names as non-owner (6 ms)
2025-04-15T01:03:59.5093884Z 
2025-04-15T01:04:05.2998294Z PASS test/integration/active-workflow-manager.test.ts (7.38 s)
2025-04-15T01:04:05.2999684Z   init()
2025-04-15T01:04:05.3000752Z     âœ“ should load workflows into memory (57 ms)
2025-04-15T01:04:05.3001382Z     âœ“ should call external hook (7 ms)
2025-04-15T01:04:05.3002591Z     âœ“ should check that workflow can be activated (35 ms)
2025-04-15T01:04:05.3003086Z   isActive()
2025-04-15T01:04:05.3003677Z     âœ“ should return `true` for active workflow in storage (21 ms)
2025-04-15T01:04:05.3004583Z     âœ“ should return `false` for inactive workflow in storage (12 ms)
2025-04-15T01:04:05.3005189Z   add()
2025-04-15T01:04:05.3006002Z     âœ“ should count workflow triggers correctly when node has multiple webhooks (11 ms)
2025-04-15T01:04:05.3006794Z     in single-main mode
2025-04-15T01:04:05.3007836Z       âœ“ should add webhooks, triggers and pollers for workflow in 'activate' activation mode (21 ms)
2025-04-15T01:04:05.3031108Z       âœ“ should add webhooks, triggers and pollers for workflow in 'update' activation mode (17 ms)
2025-04-15T01:04:05.3032034Z   removeAll()
2025-04-15T01:04:05.3032685Z     âœ“ should remove all active workflows from memory (29 ms)
2025-04-15T01:04:05.3033197Z   remove()
2025-04-15T01:04:05.3033502Z     in single-main mode
2025-04-15T01:04:05.3034196Z       âœ“ should remove all webhooks of a workflow from database (16 ms)
2025-04-15T01:04:05.3035213Z       âœ“ should remove all webhooks of a workflow from external service (16 ms)
2025-04-15T01:04:05.3036141Z       âœ“ should stop running triggers and pollers (18 ms)
2025-04-15T01:04:05.3036694Z   executeErrorWorkflow()
2025-04-15T01:04:05.3037408Z     âœ“ should be called on failure to activate due to 401 (22 ms)
2025-04-15T01:04:05.3037976Z   addWebhooks()
2025-04-15T01:04:05.3038772Z     âœ“ should call `WebhookService.storeWebhook()` (18 ms)
2025-04-15T01:04:05.3039200Z 
2025-04-15T01:04:06.8288685Z PASS test/integration/prometheus-metrics.test.ts (7.071 s)
2025-04-15T01:04:06.8289337Z   PrometheusMetricsService
2025-04-15T01:04:06.8290080Z     âœ“ should return n8n version (36 ms)
2025-04-15T01:04:06.8290718Z     âœ“ should return default metrics if enabled (16 ms)
2025-04-15T01:04:06.8291420Z     âœ“ should not return default metrics if disabled (6 ms)
2025-04-15T01:04:06.8297130Z     âœ“ should return cache metrics if enabled (4 ms)
2025-04-15T01:04:06.8297890Z     âœ“ should not return cache metrics if disabled (3 ms)
2025-04-15T01:04:06.8298607Z     âœ“ should return route metrics if enabled (11 ms)
2025-04-15T01:04:06.8299372Z     âœ“ should include last activity metric with route metrics (15 ms)
2025-04-15T01:04:06.8300157Z     âœ“ should return labels in route metrics if enabled (8 ms)
2025-04-15T01:04:06.8300838Z     âœ“ should return queue metrics if enabled (4 ms)
2025-04-15T01:04:06.8302215Z     âœ“ should set queue metrics in response to `job-counts-updated` event (4 ms)
2025-04-15T01:04:06.8303020Z     âœ“ should return active workflow count (22 ms)
2025-04-15T01:04:06.8303345Z 
2025-04-15T01:04:07.1922461Z PASS test/integration/evaluation/test-runs.api.test.ts (7.78 s)
2025-04-15T01:04:07.1923680Z   GET /evaluation/test-definitions/:testDefinitionId/runs
2025-04-15T01:04:07.1925017Z     âœ“ should retrieve empty list of runs for a test definition (86 ms)
2025-04-15T01:04:07.1926245Z     âœ“ should return 404 if test definition does not exist (45 ms)
2025-04-15T01:04:07.1927418Z     âœ“ should return 404 if user does not have access to test definition (27 ms)
2025-04-15T01:04:07.1928637Z     âœ“ should retrieve list of runs for a test definition (28 ms)
2025-04-15T01:04:07.1929824Z     âœ“ should retrieve list of runs for a test definition with pagination (47 ms)
2025-04-15T01:04:07.1930866Z   GET /evaluation/test-definitions/:testDefinitionId/runs/:id
2025-04-15T01:04:07.1932128Z     âœ“ should retrieve test run for a test definition (34 ms)
2025-04-15T01:04:07.1933202Z     âœ“ should return 404 if test run does not exist (29 ms)
2025-04-15T01:04:07.1934359Z     âœ“ should return 404 if user does not have access to test definition (27 ms)
2025-04-15T01:04:07.1969605Z     âœ“ should retrieve test run for a test definition of a shared workflow (65 ms)
2025-04-15T01:04:07.1970555Z   DELETE /evaluation/test-definitions/:testDefinitionId/runs/:id
2025-04-15T01:04:07.1971486Z     âœ“ should delete test run for a test definition (33 ms)
2025-04-15T01:04:07.1972959Z     âœ“ should return 404 if test run does not exist (28 ms)
2025-04-15T01:04:07.1973883Z     âœ“ should return 404 if user does not have access to test definition (24 ms)
2025-04-15T01:04:07.1974792Z   POST /evaluation/test-definitions/:testDefinitionId/runs/:id/cancel
2025-04-15T01:04:07.1975606Z     âœ“ should cancel test run (30 ms)
2025-04-15T01:04:07.1976288Z     âœ“ should return 404 if test run does not exist (28 ms)
2025-04-15T01:04:07.1977133Z     âœ“ should return 404 if test definition does not exist (22 ms)
2025-04-15T01:04:07.1978095Z     âœ“ should return 404 if user does not have access to test definition (23 ms)
2025-04-15T01:04:07.1978585Z 
2025-04-15T01:04:12.5427408Z PASS src/commands/__tests__/community-node.test.ts (5.468 s)
2025-04-15T01:04:12.5428093Z   uninstallCredential
2025-04-15T01:04:12.5428854Z     âœ“ should delete a credential (10 ms)
2025-04-15T01:04:12.5429525Z     âœ“ should return if the user is not found (1 ms)
2025-04-15T01:04:12.5430281Z     âœ“ should return if the credential is not found (2 ms)
2025-04-15T01:04:12.5430960Z     âœ“ should delete multiple credentials (2 ms)
2025-04-15T01:04:12.5431425Z   uninstallPackage
2025-04-15T01:04:12.5432098Z     âœ“ should uninstall the package (3 ms)
2025-04-15T01:04:12.5432749Z     âœ“ should uninstall all nodes from a package (2 ms)
2025-04-15T01:04:12.5433190Z     âœ“ should return if a package is not found (1 ms)
2025-04-15T01:04:12.5433564Z     âœ“ should return if nodes are not found (1 ms)
2025-04-15T01:04:12.5434019Z 
2025-04-15T01:04:13.5575072Z PASS test/integration/public-api/projects.test.ts (8.023 s)
2025-04-15T01:04:13.5575987Z   Projects in Public API
2025-04-15T01:04:13.5576524Z     GET /projects
2025-04-15T01:04:13.5577613Z       âœ“ if licensed, should return all projects with pagination (223 ms)
2025-04-15T01:04:13.5578562Z       âœ“ if not authenticated, should reject (8 ms)
2025-04-15T01:04:13.5579307Z       âœ“ if not licensed, should reject (20 ms)
2025-04-15T01:04:13.5580306Z       âœ“ if missing scope, should reject (18 ms)
2025-04-15T01:04:13.5583143Z     POST /projects
2025-04-15T01:04:13.5583972Z       âœ“ if licensed, should create a new project (35 ms)
2025-04-15T01:04:13.5587508Z       âœ“ if not authenticated, should reject (6 ms)
2025-04-15T01:04:13.5588622Z       âœ“ if not licensed, should reject (20 ms)
2025-04-15T01:04:13.5589706Z       âœ“ if missing scope, should reject (16 ms)
2025-04-15T01:04:13.5590685Z     DELETE /projects/:id
2025-04-15T01:04:13.5591716Z       âœ“ if licensed, should delete a project (71 ms)
2025-04-15T01:04:13.5598559Z       âœ“ if not authenticated, should reject (8 ms)
2025-04-15T01:04:13.5599510Z       âœ“ if not licensed, should reject (21 ms)
2025-04-15T01:04:13.5600334Z       âœ“ if missing scope, should reject (17 ms)
2025-04-15T01:04:13.5600966Z     PUT /projects/:id
2025-04-15T01:04:13.5601857Z       âœ“ if licensed, should update a project (27 ms)
2025-04-15T01:04:13.5607774Z       âœ“ if not authenticated, should reject (7 ms)
2025-04-15T01:04:13.5608861Z       âœ“ if not licensed, should reject (20 ms)
2025-04-15T01:04:13.5612206Z       âœ“ if missing scope, should reject (18 ms)
2025-04-15T01:04:13.5612552Z 
2025-04-15T01:04:14.5375892Z PASS src/executions/__tests__/execution-recovery.service.test.ts (7.104 s)
2025-04-15T01:04:14.5380451Z   ExecutionRecoveryService
2025-04-15T01:04:14.5384849Z     recoverFromLogs
2025-04-15T01:04:14.5386920Z       if follower
2025-04-15T01:04:14.5388288Z         âœ“ should do nothing (36 ms)
2025-04-15T01:04:14.5389007Z       if leader, with 0 messages
2025-04-15T01:04:14.5390308Z         âœ“ should return `null` if no execution found (13 ms)
2025-04-15T01:04:14.5393001Z         âœ“ should update `status` and `stoppedAt` (51 ms)
2025-04-15T01:04:14.5393794Z       if leader, with 1+ messages
2025-04-15T01:04:14.5394737Z         âœ“ for successful dataful execution, should return `null` (15 ms)
2025-04-15T01:04:14.5395708Z         âœ“ should return `null` if no execution found (5 ms)
2025-04-15T01:04:14.5396743Z         âœ“ for successful dataless execution, should update `status`, `stoppedAt` and `data` (67 ms)
2025-04-15T01:04:14.5398473Z         âœ“ for running execution, should update `status`, `stoppedAt` and `data` if last node did not finish (19 ms)
2025-04-15T01:04:14.5400226Z         âœ“ should update `status`, `stoppedAt` and `data` if last node finished (17 ms)
2025-04-15T01:04:14.5400866Z 
2025-04-15T01:04:17.9203578Z PASS src/controllers/oauth/__tests__/oauth1-credential.controller.test.ts (5.124 s)
2025-04-15T01:04:17.9208749Z   OAuth1CredentialController
2025-04-15T01:04:17.9213443Z     getAuthUri
2025-04-15T01:04:17.9218559Z       âœ“ should throw a BadRequestError when credentialId is missing in the query (37 ms)
2025-04-15T01:04:17.9232845Z       âœ“ should throw a NotFoundError when no matching credential is found for the user (2 ms)
2025-04-15T01:04:17.9237897Z       âœ“ should return a valid auth URI (97 ms)
2025-04-15T01:04:17.9242847Z     handleCallback
2025-04-15T01:04:17.9244136Z       âœ“ should render the error page when required query params are missing (2 ms)
2025-04-15T01:04:17.9245696Z       âœ“ should render the error page when `state` query param is invalid (5 ms)
2025-04-15T01:04:17.9247194Z       âœ“ should render the error page when credential is not found in DB (2 ms)
2025-04-15T01:04:17.9248821Z       âœ“ should render the error page when state differs from the stored state in the credential (8 ms)
2025-04-15T01:04:17.9250473Z       âœ“ should render the error page when state is older than 5 minutes (2 ms)
2025-04-15T01:04:17.9252650Z       âœ“ should exchange the code for a valid token, and save it to DB (37 ms)
2025-04-15T01:04:17.9253471Z 
2025-04-15T01:04:18.4727039Z PASS src/scaling/__tests__/scaling.service.test.ts
2025-04-15T01:04:18.4729000Z   ScalingService
2025-04-15T01:04:18.4733311Z     setupQueue
2025-04-15T01:04:18.4734759Z       if leader main
2025-04-15T01:04:18.4739178Z         âœ“ should set up queue + listeners + queue recovery (8 ms)
2025-04-15T01:04:18.4741057Z       if follower main
2025-04-15T01:04:18.4743227Z         âœ“ should set up queue + listeners (1 ms)
2025-04-15T01:04:18.4745167Z       if worker
2025-04-15T01:04:18.4745869Z         âœ“ should set up queue + listeners (1 ms)
2025-04-15T01:04:18.4746632Z       webhook
2025-04-15T01:04:18.4748408Z         âœ“ should set up a queue + listeners (1 ms)
2025-04-15T01:04:18.4749191Z     setupWorker
2025-04-15T01:04:18.4750290Z       âœ“ should set up a worker with concurrency (1 ms)
2025-04-15T01:04:18.4751257Z       âœ“ should throw if called on a non-worker instance (24 ms)
2025-04-15T01:04:18.4752517Z       âœ“ should throw if called before queue is ready (2 ms)
2025-04-15T01:04:18.4753284Z     stop
2025-04-15T01:04:18.4755400Z       if main
2025-04-15T01:04:18.4756192Z         âœ“ should pause queue, stop queue recovery and queue metrics (2 ms)
2025-04-15T01:04:18.4756989Z       if worker
2025-04-15T01:04:18.4758757Z         âœ“ should pause queue and wait for running jobs to finish (1 ms)
2025-04-15T01:04:18.4759496Z     pingQueue
2025-04-15T01:04:18.4760108Z       âœ“ should ping the queue (1 ms)
2025-04-15T01:04:18.4761163Z     addJob
2025-04-15T01:04:18.4763153Z       âœ“ should add a job (1 ms)
2025-04-15T01:04:18.4763699Z     getJob
2025-04-15T01:04:18.4764394Z       âœ“ should get a job (8 ms)
2025-04-15T01:04:18.4764971Z     findJobsByStatus
2025-04-15T01:04:18.4765628Z       âœ“ should find jobs by status (2 ms)
2025-04-15T01:04:18.4766573Z       âœ“ should filter out `null` in Redis response (1 ms)
2025-04-15T01:04:18.4767242Z     stopJob
2025-04-15T01:04:18.4768018Z       âœ“ should stop an active job (2 ms)
2025-04-15T01:04:18.4769036Z       âœ“ should stop an inactive job (2 ms)
2025-04-15T01:04:18.4769951Z       âœ“ should report failure to stop a job (1 ms)
2025-04-15T01:04:18.4770652Z 
2025-04-15T01:04:20.6352259Z PASS src/task-runners/task-managers/__tests__/data-request-response-stripper.test.ts
2025-04-15T01:04:20.6359751Z   DataRequestResponseStripper
2025-04-15T01:04:20.6362690Z     all data
2025-04-15T01:04:20.6365497Z       âœ“ should build the runExecutionData as is when everything is requested (6 ms)
2025-04-15T01:04:20.6376389Z     envProviderState
2025-04-15T01:04:20.6377183Z       âœ“ should filter out envProviderState when it's not requested (1 ms)
2025-04-15T01:04:20.6377761Z     input data
2025-04-15T01:04:20.6378224Z       âœ“ drops input data from result
2025-04-15T01:04:20.6378750Z       âœ“ returns only chunked data
2025-04-15T01:04:20.6379126Z     nodes
2025-04-15T01:04:20.6379757Z       âœ“ should return empty run data when only Code node is requested (1 ms)
2025-04-15T01:04:20.6380691Z       âœ“ should return empty run data when only Code node is requested (1 ms)
2025-04-15T01:04:20.6381892Z       âœ“ should return only DebugHelper's data when only DebugHelper node is requested (1 ms)
2025-04-15T01:04:20.6383003Z       âœ“ should return DebugHelper's data when only prevNode node is requested (2 ms)
2025-04-15T01:04:20.6383645Z     passthrough properties
2025-04-15T01:04:20.6384135Z       âœ“ it doesn't change workflow
2025-04-15T01:04:20.6384721Z       âœ“ it doesn't change connectionInputSource (1 ms)
2025-04-15T01:04:20.6385337Z       âœ“ it doesn't change node (1 ms)
2025-04-15T01:04:20.6385967Z       âœ“ it doesn't change runIndex
2025-04-15T01:04:20.6386516Z       âœ“ it doesn't change itemIndex (1 ms)
2025-04-15T01:04:20.6387070Z       âœ“ it doesn't change activeNodeName
2025-04-15T01:04:20.6387671Z       âœ“ it doesn't change siblingParameters (1 ms)
2025-04-15T01:04:20.6388216Z       âœ“ it doesn't change mode
2025-04-15T01:04:20.6388758Z       âœ“ it doesn't change defaultReturnRunIndex
2025-04-15T01:04:20.6389618Z       âœ“ it doesn't change selfData
2025-04-15T01:04:20.6390183Z       âœ“ it doesn't change contextNodeName
2025-04-15T01:04:20.6390747Z       âœ“ it doesn't change additionalData
2025-04-15T01:04:20.6391042Z 
2025-04-15T01:04:23.1354945Z PASS test/integration/public-api/tags.test.ts (8.39 s)
2025-04-15T01:04:23.1355547Z   GET /tags
2025-04-15T01:04:23.1356285Z     âœ“ should fail due to missing API Key (34 ms)
2025-04-15T01:04:23.1356961Z     âœ“ should fail due to invalid API Key (8 ms)
2025-04-15T01:04:23.1357642Z     âœ“ should return all tags (189 ms)
2025-04-15T01:04:23.1358293Z     âœ“ should return all tags with pagination (28 ms)
2025-04-15T01:04:23.1358791Z   GET /tags/:id
2025-04-15T01:04:23.1359292Z     âœ“ should fail due to missing API Key (9 ms)
2025-04-15T01:04:23.1359931Z     âœ“ should fail due to invalid API Key (7 ms)
2025-04-15T01:04:23.1360576Z     âœ“ should fail due to non-existing tag (16 ms)
2025-04-15T01:04:23.1361178Z     âœ“ should retrieve tag (12 ms)
2025-04-15T01:04:23.1361847Z   DELETE /tags/:id
2025-04-15T01:04:23.1362412Z     âœ“ should fail due to missing API Key (5 ms)
2025-04-15T01:04:23.1363068Z     âœ“ should fail due to invalid API Key (6 ms)
2025-04-15T01:04:23.1363732Z     âœ“ should fail due to non-existing tag (23 ms)
2025-04-15T01:04:23.1364374Z     âœ“ owner should delete the tag (13 ms)
2025-04-15T01:04:23.1364976Z     âœ“ non-owner should not delete tag (9 ms)
2025-04-15T01:04:23.1365431Z   POST /tags
2025-04-15T01:04:23.1365932Z     âœ“ should fail due to missing API Key (4 ms)
2025-04-15T01:04:23.1367006Z     âœ“ should fail due to invalid API Key (5 ms)
2025-04-15T01:04:23.1367654Z     âœ“ should fail due to invalid body (13 ms)
2025-04-15T01:04:23.1368230Z     âœ“ should create tag (10 ms)
2025-04-15T01:04:23.1368910Z     âœ“ should not create tag if tag with same name exists (8 ms)
2025-04-15T01:04:23.1369460Z   PUT /tags/:id
2025-04-15T01:04:23.1369971Z     âœ“ should fail due to missing API Key (3 ms)
2025-04-15T01:04:23.1370612Z     âœ“ should fail due to invalid API Key (5 ms)
2025-04-15T01:04:23.1371275Z     âœ“ should fail due to non-existing tag (11 ms)
2025-04-15T01:04:23.1372114Z     âœ“ should fail due to invalid body (8 ms)
2025-04-15T01:04:23.1372703Z     âœ“ should update tag (16 ms)
2025-04-15T01:04:23.1373439Z     âœ“ should fail if there is already a tag with a the new name (18 ms)
2025-04-15T01:04:23.1373887Z 
2025-04-15T01:04:26.7060011Z PASS test/integration/password-reset.api.test.ts (8.038 s)
2025-04-15T01:04:26.7065223Z   POST /forgot-password
2025-04-15T01:04:26.7066515Z     âœ“ should send password reset email (83 ms)
2025-04-15T01:04:26.7067212Z     âœ“ should fail if emailing is not set up (55 ms)
2025-04-15T01:04:26.7067917Z     âœ“ should fail if SAML is authentication method (34 ms)
2025-04-15T01:04:26.7068806Z     âœ“ should succeed if SAML is authentication method and requestor is owner (30 ms)
2025-04-15T01:04:26.7069594Z     âœ“ should fail with invalid inputs (28 ms)
2025-04-15T01:04:26.7070190Z     âœ“ should fail if user is not found (19 ms)
2025-04-15T01:04:26.7070689Z   GET /resolve-password-token
2025-04-15T01:04:26.7071250Z     âœ“ should succeed with valid inputs (26 ms)
2025-04-15T01:04:26.7072055Z     âœ“ should fail with invalid inputs (18 ms)
2025-04-15T01:04:26.7072657Z     âœ“ should fail if user is not found (21 ms)
2025-04-15T01:04:26.7073242Z     âœ“ should fail if token is expired (20 ms)
2025-04-15T01:04:26.7073862Z     âœ“ should fail after password has changed (23 ms)
2025-04-15T01:04:26.7074355Z   POST /change-password
2025-04-15T01:04:26.7074873Z     âœ“ should succeed with valid inputs (238 ms)
2025-04-15T01:04:26.7075490Z     âœ“ should fail with invalid inputs (49 ms)
2025-04-15T01:04:26.7076077Z     âœ“ should fail when token has expired (18 ms)
2025-04-15T01:04:26.7076872Z     âœ“ owner should be able to reset its password when quota:users = 1 (223 ms)
2025-04-15T01:04:26.7077836Z     âœ“ member should not be able to reset its password when quota:users = 1 (118 ms)
2025-04-15T01:04:26.7078305Z 
2025-04-15T01:04:27.5200184Z PASS src/executions/__tests__/execution.service.test.ts
2025-04-15T01:04:27.5201183Z   ExecutionService
2025-04-15T01:04:27.5201918Z     retry
2025-04-15T01:04:27.5202930Z       âœ“ should error on retrying a execution that was aborted before starting (30 ms)
2025-04-15T01:04:27.5203598Z     stop
2025-04-15T01:04:27.5204169Z       âœ“ should throw when stopping a missing execution (1 ms)
2025-04-15T01:04:27.5205021Z       âœ“ should throw when stopping a not-in-progress execution (1 ms)
2025-04-15T01:04:27.5205981Z       regular mode
2025-04-15T01:04:27.5206687Z         âœ“ should stop a `running` execution in regular mode (4 ms)
2025-04-15T01:04:27.5207533Z         âœ“ should stop a `waiting` execution in regular mode (2 ms)
2025-04-15T01:04:27.5208531Z         âœ“ should stop a concurrency-controlled `new` execution in regular mode (2 ms)
2025-04-15T01:04:27.5209180Z       scaling mode
2025-04-15T01:04:27.5209516Z         manual execution
2025-04-15T01:04:27.5210189Z           âœ“ should stop a `running` execution in scaling mode (2 ms)
2025-04-15T01:04:27.5210753Z         production execution
2025-04-15T01:04:27.5211471Z           âœ“ should stop a `running` execution in scaling mode (2 ms)
2025-04-15T01:04:27.5212559Z           âœ“ should stop a `waiting` execution in scaling mode (2 ms)
2025-04-15T01:04:27.5212968Z 
2025-04-15T01:04:29.0840587Z PASS test/integration/saml/saml.api.test.ts (8.243 s)
2025-04-15T01:04:29.0842041Z   Instance owner
2025-04-15T01:04:29.0842374Z     PATCH /me
2025-04-15T01:04:29.0843121Z       âœ“ should succeed with valid inputs (86 ms)
2025-04-15T01:04:29.0845488Z       âœ“ should throw BadRequestError if email is changed when SAML is enabled (32 ms)
2025-04-15T01:04:29.0846057Z     PATCH /password
2025-04-15T01:04:29.0846798Z       âœ“ should throw BadRequestError if password is changed when SAML is enabled (11 ms)
2025-04-15T01:04:29.0847479Z     POST /sso/saml/config
2025-04-15T01:04:29.0847980Z       âœ“ should post saml config (311 ms)
2025-04-15T01:04:29.0848575Z       âœ“ should return 400 on invalid config (13 ms)
2025-04-15T01:04:29.0849092Z     POST /sso/saml/config/toggle
2025-04-15T01:04:29.0849756Z       âœ“ should toggle saml as default authentication method (42 ms)
2025-04-15T01:04:29.0850613Z       âœ“ should fail enable saml if default authentication is not email (32 ms)
2025-04-15T01:04:29.0851187Z   Check endpoint permissions
2025-04-15T01:04:29.0851741Z     Owner
2025-04-15T01:04:29.0852306Z       âœ“ should be able to access GET /sso/saml/metadata (14 ms)
2025-04-15T01:04:29.0853041Z       âœ“ should be able to access GET /sso/saml/config (19 ms)
2025-04-15T01:04:29.0853779Z       âœ“ should be able to access POST /sso/saml/config (24 ms)
2025-04-15T01:04:29.0854549Z       âœ“ should be able to access POST /sso/saml/config/toggle (12 ms)
2025-04-15T01:04:29.0855276Z       âœ“ should be able to access GET /sso/saml/acs (8 ms)
2025-04-15T01:04:29.0855965Z       âœ“ should be able to access POST /sso/saml/acs (7 ms)
2025-04-15T01:04:29.0856667Z       âœ“ should be able to access GET /sso/saml/initsso (17 ms)
2025-04-15T01:04:29.0857460Z       âœ“ should be able to access GET /sso/saml/config/test (14 ms)
2025-04-15T01:04:29.0858012Z     Authenticated Member
2025-04-15T01:04:29.0858606Z       âœ“ should be able to access GET /sso/saml/metadata (8 ms)
2025-04-15T01:04:29.0859297Z       âœ“ should be able to access GET /sso/saml/config (14 ms)
2025-04-15T01:04:29.0859986Z       âœ“ should NOT be able to access POST /sso/saml/config (8 ms)
2025-04-15T01:04:29.0860737Z       âœ“ should NOT be able to access POST /sso/saml/config/toggle (7 ms)
2025-04-15T01:04:29.0861445Z       âœ“ should be able to access GET /sso/saml/acs (9 ms)
2025-04-15T01:04:29.0866816Z       âœ“ should be able to access POST /sso/saml/acs (11 ms)
2025-04-15T01:04:29.0867513Z       âœ“ should be able to access GET /sso/saml/initsso (9 ms)
2025-04-15T01:04:29.0868265Z       âœ“ should NOT be able to access GET /sso/saml/config/test (9 ms)
2025-04-15T01:04:29.0868799Z     Non-Authenticated User
2025-04-15T01:04:29.0869349Z       âœ“ should be able to access /sso/saml/metadata (5 ms)
2025-04-15T01:04:29.0870310Z       âœ“ should NOT be able to access GET /sso/saml/config (4 ms)
2025-04-15T01:04:29.0871060Z       âœ“ should NOT be able to access POST /sso/saml/config (4 ms)
2025-04-15T01:04:29.0872041Z       âœ“ should NOT be able to access POST /sso/saml/config/toggle (5 ms)
2025-04-15T01:04:29.0872795Z       âœ“ should be able to access GET /sso/saml/acs (9 ms)
2025-04-15T01:04:29.0873447Z       âœ“ should be able to access POST /sso/saml/acs (5 ms)
2025-04-15T01:04:29.0874123Z       âœ“ should be able to access GET /sso/saml/initsso (5 ms)
2025-04-15T01:04:29.0874880Z       âœ“ should NOT be able to access GET /sso/saml/config/test (4 ms)
2025-04-15T01:04:29.0875255Z 
2025-04-15T01:04:31.8948727Z PASS src/__tests__/node-types.test.ts
2025-04-15T01:04:31.8949712Z   NodeTypes
2025-04-15T01:04:31.8953758Z     getByName
2025-04-15T01:04:31.8955573Z       âœ“ should return node type when it exists (13 ms)
2025-04-15T01:04:31.8956400Z     getByNameAndVersion
2025-04-15T01:04:31.8957732Z       âœ“ should throw an error if the package does not exist (24 ms)
2025-04-15T01:04:31.8958836Z       âœ“ should throw an error if the node-type does not exist (1 ms)
2025-04-15T01:04:31.8960012Z       âœ“ should return a regular node-type without version (1 ms)
2025-04-15T01:04:31.8961036Z       âœ“ should return a regular node-type with version
2025-04-15T01:04:31.8973483Z       âœ“ should throw when a node-type is requested as tool, but does not support being used as one (1 ms)
2025-04-15T01:04:31.8974832Z       âœ“ should throw when a node-type is requested as tool, but the original node is already a tool (1 ms)
2025-04-15T01:04:31.8976470Z       âœ“ should return the tool node-type when requested as tool (2 ms)
2025-04-15T01:04:31.8977539Z       âœ“ should return a tool node-type from a community node,  when requested as tool (1 ms)
2025-04-15T01:04:31.8978638Z       âœ“ should return a declarative node-type with an `.execute` method (2 ms)
2025-04-15T01:04:31.8979622Z       âœ“ should return a declarative node-type as a tool with an `.execute` method (2 ms)
2025-04-15T01:04:31.8980235Z     getWithSourcePath
2025-04-15T01:04:31.8980924Z       âœ“ should return description and source path for existing node (1 ms)
2025-04-15T01:04:31.8981926Z       âœ“ should throw error for non-existent node (1 ms)
2025-04-15T01:04:31.8982396Z     getKnownTypes
2025-04-15T01:04:31.8982870Z       âœ“ should return known node types (1 ms)
2025-04-15T01:04:31.8983308Z     getNodeTypeDescriptions
2025-04-15T01:04:31.8983924Z       âœ“ should return descriptions for valid node types (1 ms)
2025-04-15T01:04:31.8984617Z       âœ“ should throw error for invalid node type (1 ms)
2025-04-15T01:04:31.8984951Z 
2025-04-15T01:04:34.4025190Z PASS test/integration/pruning.service.test.ts (7.456 s)
2025-04-15T01:04:34.4036857Z   softDeleteOnPruningCycle()
2025-04-15T01:04:34.4045449Z     when EXECUTIONS_DATA_PRUNE_MAX_COUNT is set
2025-04-15T01:04:34.4046618Z       âœ“ should mark as deleted based on EXECUTIONS_DATA_PRUNE_MAX_COUNT (40 ms)
2025-04-15T01:04:34.4047650Z       âœ“ should not re-mark already marked executions (15 ms)
2025-04-15T01:04:34.4048410Z       âœ“ should prune unknown executions (16 ms)
2025-04-15T01:04:34.4049115Z       âœ“ should prune canceled executions (15 ms)
2025-04-15T01:04:34.4049812Z       âœ“ should prune crashed executions (13 ms)
2025-04-15T01:04:34.4050469Z       âœ“ should prune error executions (13 ms)
2025-04-15T01:04:34.4051118Z       âœ“ should prune success executions (12 ms)
2025-04-15T01:04:34.4051984Z       âœ“ should not prune new executions (13 ms)
2025-04-15T01:04:34.4052682Z       âœ“ should not prune running executions (12 ms)
2025-04-15T01:04:34.4053434Z       âœ“ should not prune waiting executions (11 ms)
2025-04-15T01:04:34.4054120Z       âœ“ should not prune annotated executions (25 ms)
2025-04-15T01:04:34.4054695Z     when EXECUTIONS_DATA_MAX_AGE is set
2025-04-15T01:04:34.4055506Z       âœ“ should mark as deleted based on EXECUTIONS_DATA_MAX_AGE (11 ms)
2025-04-15T01:04:34.4056396Z       âœ“ should not re-mark already marked executions (11 ms)
2025-04-15T01:04:34.4057390Z       âœ“ should prune unknown executions (9 ms)
2025-04-15T01:04:34.4058117Z       âœ“ should prune canceled executions (8 ms)
2025-04-15T01:04:34.4058826Z       âœ“ should prune crashed executions (8 ms)
2025-04-15T01:04:34.4059504Z       âœ“ should prune error executions (11 ms)
2025-04-15T01:04:34.4060145Z       âœ“ should prune success executions (8 ms)
2025-04-15T01:04:34.4060803Z       âœ“ should not prune new executions (11 ms)
2025-04-15T01:04:34.4061490Z       âœ“ should not prune running executions (10 ms)
2025-04-15T01:04:34.4062421Z       âœ“ should not prune waiting executions (15 ms)
2025-04-15T01:04:34.4063170Z       âœ“ should not prune annotated executions (17 ms)
2025-04-15T01:04:34.4063538Z 
2025-04-15T01:04:35.1422938Z PASS src/__tests__/license.test.ts
2025-04-15T01:04:35.1423743Z   License
2025-04-15T01:04:35.1424464Z     âœ“ initializes license manager (10 ms)
2025-04-15T01:04:35.1425293Z     âœ“ initializes license manager for worker (3 ms)
2025-04-15T01:04:35.1426194Z     âœ“ attempts to activate license with provided key (1 ms)
2025-04-15T01:04:35.1426981Z     âœ“ renews license (1 ms)
2025-04-15T01:04:35.1427658Z     âœ“ check if feature is enabled (1 ms)
2025-04-15T01:04:35.1428431Z     âœ“ check if sharing feature is enabled (1 ms)
2025-04-15T01:04:35.1429188Z     âœ“ check fetching entitlements (7 ms)
2025-04-15T01:04:35.1429892Z     âœ“ check fetching feature values (2 ms)
2025-04-15T01:04:35.1430563Z     âœ“ check management jwt (1 ms)
2025-04-15T01:04:35.1431368Z     âœ“ getMainPlan() returns the latest main entitlement (2 ms)
2025-04-15T01:04:35.1433025Z     âœ“ getMainPlan() returns undefined if there is no main plan (2 ms)
2025-04-15T01:04:35.1433740Z     init
2025-04-15T01:04:35.1434657Z       âœ“ when leader main with N8N_LICENSE_AUTO_RENEW_ENABLED=true, should enable renewal (2 ms)
2025-04-15T01:04:35.1436035Z       âœ“ when leader main with N8N_LICENSE_AUTO_RENEW_ENABLED=false, should disable renewal (2 ms)
2025-04-15T01:04:35.1437424Z       âœ“ when follower main with N8N_LICENSE_AUTO_RENEW_ENABLED=true, should disable renewal (1 ms)
2025-04-15T01:04:35.1438854Z       âœ“ when follower main with N8N_LICENSE_AUTO_RENEW_ENABLED=false, should disable renewal (2 ms)
2025-04-15T01:04:35.1440244Z       âœ“ when CLI command with N8N_LICENSE_AUTO_RENEW_ENABLED=true, should enable renewal (2 ms)
2025-04-15T01:04:35.1440959Z 
2025-04-15T01:04:36.0333228Z PASS test/integration/commands/import.cmd.test.ts (8.281 s)
2025-04-15T01:04:36.0338036Z   âœ“ import:workflow should import active workflow and deactivate it (100 ms)
2025-04-15T01:04:36.0351928Z   âœ“ import:workflow should import active workflow from combined file and deactivate it (31 ms)
2025-04-15T01:04:36.0353134Z   âœ“ import:workflow can import a single workflow object (27 ms)
2025-04-15T01:04:36.0354452Z   âœ“ `import:workflow --userId ...` should fail if the workflow exists already and is owned by somebody else (74 ms)
2025-04-15T01:04:36.0355896Z   âœ“ only update the workflow, don't create or update the owner if `--userId` is not passed (42 ms)
2025-04-15T01:04:36.0357468Z   âœ“ `import:workflow --projectId ...` should fail if the credential already exists and is owned by another project (58 ms)
2025-04-15T01:04:36.0361013Z   âœ“ `import:workflow --projectId ... --userId ...` fails explaining that only one of the options can be used at a time (10 ms)
2025-04-15T01:04:36.0362153Z 
2025-04-15T01:04:38.0494870Z PASS src/middlewares/list-query/__tests__/list-query.test.ts
2025-04-15T01:04:38.0495563Z   List query middleware
2025-04-15T01:04:38.0495947Z     Query filter
2025-04-15T01:04:38.0496784Z       âœ“ should not set filter on request if none sent (5 ms)
2025-04-15T01:04:38.0497567Z       âœ“ should parse valid filter (4 ms)
2025-04-15T01:04:38.0498208Z       âœ“ should ignore invalid filter (1 ms)
2025-04-15T01:04:38.0498886Z       âœ“ should throw on invalid JSON (30 ms)
2025-04-15T01:04:38.0499650Z       âœ“ should throw on valid filter with invalid type (3 ms)
2025-04-15T01:04:38.0500193Z     Query select
2025-04-15T01:04:38.0500851Z       âœ“ should not set select on request if none sent (1 ms)
2025-04-15T01:04:38.0502203Z       âœ“ should parse valid select (1 ms)
2025-04-15T01:04:38.0502916Z       âœ“ ignore invalid select (1 ms)
2025-04-15T01:04:38.0503520Z       âœ“ throw on invalid JSON (3 ms)
2025-04-15T01:04:38.0504210Z       âœ“ throw on non-string-array JSON for select (2 ms)
2025-04-15T01:04:38.0504739Z     Query pagination
2025-04-15T01:04:38.0505533Z       âœ“ should not set pagination options on request if none sent (1 ms)
2025-04-15T01:04:38.0506320Z       âœ“ should parse valid pagination (1 ms)
2025-04-15T01:04:38.0506997Z       âœ“ should throw on skip without take (1 ms)
2025-04-15T01:04:38.0507640Z       âœ“ should default skip to 0 (3 ms)
2025-04-15T01:04:38.0508203Z       âœ“ should cap take at 50
2025-04-15T01:04:38.0508845Z       âœ“ should throw on non-numeric-integer take (2 ms)
2025-04-15T01:04:38.0509592Z       âœ“ should throw on non-numeric-integer skip (1 ms)
2025-04-15T01:04:38.0510096Z     Query sort by
2025-04-15T01:04:38.0510756Z       âœ“ should succeed validation when sorting by name asc (1 ms)
2025-04-15T01:04:38.0511793Z       âœ“ should succeed validation when sorting by name desc
2025-04-15T01:04:38.0512680Z       âœ“ should succeed validation when sorting by createdAt asc
2025-04-15T01:04:38.0513534Z       âœ“ should succeed validation when sorting by createdAt desc
2025-04-15T01:04:38.0514444Z       âœ“ should succeed validation when sorting by updatedAt asc (1 ms)
2025-04-15T01:04:38.0515340Z       âœ“ should succeed validation when sorting by updatedAt desc
2025-04-15T01:04:38.0516223Z       âœ“ should fail validation when sorting by invalid column (1 ms)
2025-04-15T01:04:38.0517564Z       âœ“ should fail validation when sorting by valid column without order (1 ms)
2025-04-15T01:04:38.0518680Z       âœ“ should fail validation when sorting by valid column with invalid order (1 ms)
2025-04-15T01:04:38.0519670Z       âœ“ should not pass sortBy to listQueryOptions if not provided
2025-04-15T01:04:38.0520261Z     Combinations
2025-04-15T01:04:38.0520794Z       âœ“ should combine filter with select (1 ms)
2025-04-15T01:04:38.0521808Z       âœ“ should combine filter with pagination options (1 ms)
2025-04-15T01:04:38.0522643Z       âœ“ should combine select with pagination options
2025-04-15T01:04:38.0523024Z 
2025-04-15T01:04:39.0114557Z PASS src/environments.ee/source-control/__tests__/source-control.service.test.ts
2025-04-15T01:04:39.0115689Z   SourceControlService
2025-04-15T01:04:39.0116570Z     pushWorkfolder
2025-04-15T01:04:39.0118368Z       âœ“ should throw an error if a file is given that is not in the workfolder (33 ms)
2025-04-15T01:04:39.0119144Z     pullWorkfolder
2025-04-15T01:04:39.0124123Z       âœ“ does not filter locally created credentials (3 ms)
2025-04-15T01:04:39.0127154Z       âœ“ does not filter remotely deleted credentials (1 ms)
2025-04-15T01:04:39.0129927Z       âœ“ should throw an error if a file is given that is not in the workfolder (2 ms)
2025-04-15T01:04:39.0137766Z     getStatus
2025-04-15T01:04:39.0138469Z       âœ“ conflict depends on the value of `direction` (7 ms)
2025-04-15T01:04:39.0138884Z 
2025-04-15T01:04:39.5085154Z PASS src/environments.ee/source-control/__tests__/source-control-export.service.test.ts
2025-04-15T01:04:39.5086427Z   SourceControlExportService
2025-04-15T01:04:39.5095585Z     exportCredentialsToWorkFolder
2025-04-15T01:04:39.5096551Z       âœ“ should export credentials to work folder (23 ms)
2025-04-15T01:04:39.5097330Z       âœ“ should handle team project credentials (2 ms)
2025-04-15T01:04:39.5098074Z       âœ“ should handle missing credentials (7 ms)
2025-04-15T01:04:39.5098578Z     exportTagsToWorkFolder
2025-04-15T01:04:39.5099210Z       âœ“ should export tags to work folder (2 ms)
2025-04-15T01:04:39.5099830Z       âœ“ should not export empty tags (1 ms)
2025-04-15T01:04:39.5100310Z     exportFoldersToWorkFolder
2025-04-15T01:04:39.5100908Z       âœ“ should export folders to work folder (1 ms)
2025-04-15T01:04:39.5101748Z       âœ“ should not export empty folders (1 ms)
2025-04-15T01:04:39.5102285Z     exportVariablesToWorkFolder
2025-04-15T01:04:39.5104441Z       âœ“ should export variables to work folder (1 ms)
2025-04-15T01:04:39.5105165Z       âœ“ should not export empty variables (1 ms)
2025-04-15T01:04:39.5113307Z     exportWorkflowsToWorkFolder
2025-04-15T01:04:39.5113913Z       âœ“ should export workflows to work folder (2 ms)
2025-04-15T01:04:39.5114625Z       âœ“ should throw an error if workflow has no owner (30 ms)
2025-04-15T01:04:39.5115013Z 
2025-04-15T01:04:43.0471841Z PASS src/metrics/__tests__/prometheus-metrics.service.test.ts
2025-04-15T01:04:43.0473105Z   PrometheusMetricsService
2025-04-15T01:04:43.0473872Z     constructor
2025-04-15T01:04:43.0474763Z       âœ“ should enable metrics based on global config (8 ms)
2025-04-15T01:04:43.0475305Z     init
2025-04-15T01:04:43.0475856Z       âœ“ should set up `n8n_version_info` (1 ms)
2025-04-15T01:04:43.0476738Z       âœ“ should set up default metrics collection with `prom-client` (2 ms)
2025-04-15T01:04:43.0477621Z       âœ“ should set up `n8n_cache_hits_total` (1 ms)
2025-04-15T01:04:43.0478354Z       âœ“ should set up `n8n_cache_misses_total` (2 ms)
2025-04-15T01:04:43.0479136Z       âœ“ should set up `n8n_cache_updates_total` (2 ms)
2025-04-15T01:04:43.0480027Z       âœ“ should set up route metrics with `express-prom-bundle` (2 ms)
2025-04-15T01:04:43.0480823Z       âœ“ should set up event bus metrics (1 ms)
2025-04-15T01:04:43.0481746Z       âœ“ should set up queue metrics if enabled (3 ms)
2025-04-15T01:04:43.0482726Z       âœ“ should not set up queue metrics if enabled but not on scaling mode (1 ms)
2025-04-15T01:04:43.0483944Z       âœ“ should not set up queue metrics if enabled and on scaling mode but instance is not main (2 ms)
2025-04-15T01:04:43.0485436Z       âœ“ should setup active workflow count metric (4 ms)
2025-04-15T01:04:43.0485840Z 
2025-04-15T01:04:44.1762148Z PASS src/__tests__/workflow-execute-additional-data.test.ts
2025-04-15T01:04:44.1764051Z   WorkflowExecuteAdditionalData
2025-04-15T01:04:44.1765188Z     âœ“ logAiEvent should call MessageEventBus (6 ms)
2025-04-15T01:04:44.1765811Z     executeWorkflow
2025-04-15T01:04:44.1767304Z       âœ“ should execute workflow, return data and execution id (11 ms)
2025-04-15T01:04:44.1768220Z       âœ“ should execute workflow, skip waiting (3 ms)
2025-04-15T01:04:44.1769073Z       âœ“ should set sub workflow execution as running (2 ms)
2025-04-15T01:04:44.1770076Z       âœ“ should return waitTill property when workflow execution is waiting (3 ms)
2025-04-15T01:04:44.1770768Z     getRunData
2025-04-15T01:04:44.1771366Z       âœ“ should throw error to add trigger ndoe (29 ms)
2025-04-15T01:04:44.1772748Z       âœ“ should return default data (2 ms)
2025-04-15T01:04:44.1773597Z       âœ“ should return run data with input data and metadata (1 ms)
2025-04-15T01:04:44.1774063Z 
2025-04-15T01:04:46.5774510Z PASS test/integration/community-packages.api.test.ts (7.309 s)
2025-04-15T01:04:46.5778155Z   GET /community-packages
2025-04-15T01:04:46.5780178Z     âœ“ should respond 200 if no nodes are installed (45 ms)
2025-04-15T01:04:46.5783161Z     âœ“ should return list of one installed package and node (7 ms)
2025-04-15T01:04:46.5788906Z     âœ“ should return list of multiple installed packages and nodes (8 ms)
2025-04-15T01:04:46.5791893Z     âœ“ should not check for updates if no packages installed (21 ms)
2025-04-15T01:04:46.5795746Z     âœ“ should check for updates if packages installed (7 ms)
2025-04-15T01:04:46.5796612Z     âœ“ should report package updates if available (6 ms)
2025-04-15T01:04:46.5797185Z   POST /community-packages
2025-04-15T01:04:46.5797870Z     âœ“ should reject if package name is missing (7 ms)
2025-04-15T01:04:46.5798623Z     âœ“ should reject if package is duplicate (8 ms)
2025-04-15T01:04:46.5799564Z     âœ“ should allow installing packages that could not be loaded (7 ms)
2025-04-15T01:04:46.5800433Z     âœ“ should not install a banned package (8 ms)
2025-04-15T01:04:46.5800974Z   DELETE /community-packages
2025-04-15T01:04:46.5801886Z     âœ“ should not delete if package name is empty (7 ms)
2025-04-15T01:04:46.5802719Z     âœ“ should reject if package is not installed (7 ms)
2025-04-15T01:04:46.5803436Z     âœ“ should uninstall package (7 ms)
2025-04-15T01:04:46.5804389Z   PATCH /community-packages
2025-04-15T01:04:46.5805125Z     âœ“ should reject if package name is empty (6 ms)
2025-04-15T01:04:46.5805885Z     âœ“ should reject if package is not installed (6 ms)
2025-04-15T01:04:46.5806584Z     âœ“ should update a package (11 ms)
2025-04-15T01:04:46.5806901Z 
2025-04-15T01:04:50.0546033Z PASS src/services/__tests__/workflow-statistics.service.test.ts
2025-04-15T01:04:50.0550151Z   WorkflowStatisticsService
2025-04-15T01:04:50.0550637Z     workflowExecutionCompleted
2025-04-15T01:04:50.0551760Z       âœ“ should create metrics for production successes (9 ms)
2025-04-15T01:04:50.0552536Z       âœ“ should only create metrics for production successes
2025-04-15T01:04:50.0553274Z       âœ“ should not send metrics for updated entries (1 ms)
2025-04-15T01:04:50.0553775Z     nodeFetchedData
2025-04-15T01:04:50.0554329Z       âœ“ should create metrics when the db is updated (2 ms)
2025-04-15T01:04:50.0555232Z       âœ“ should emit event with no `userId` if workflow is owned by team project (1 ms)
2025-04-15T01:04:50.0556197Z       âœ“ should create metrics with credentials when the db is updated (1 ms)
2025-04-15T01:04:50.0557128Z       âœ“ should not send metrics for entries that already have the flag set (2 ms)
2025-04-15T01:04:50.0557549Z 
2025-04-15T01:04:51.1603008Z PASS test/integration/workflow-history.api.test.ts (7.868 s)
2025-04-15T01:04:51.1603740Z   GET /workflow-history/:workflowId
2025-04-15T01:04:51.1604659Z     âœ“ should not work when license is not available (27 ms)
2025-04-15T01:04:51.1605893Z     âœ“ should not return anything on an invalid workflow ID (42 ms)
2025-04-15T01:04:51.1606685Z     âœ“ should not return anything if not shared with user (24 ms)
2025-04-15T01:04:51.1607417Z     âœ“ should return any empty list if no versions (25 ms)
2025-04-15T01:04:51.1608062Z     âœ“ should return versions for workflow (60 ms)
2025-04-15T01:04:51.1608800Z     âœ“ should return versions only for workflow id provided (55 ms)
2025-04-15T01:04:51.1609499Z     âœ“ should work with take parameter (41 ms)
2025-04-15T01:04:51.1610087Z     âœ“ should work with skip parameter (39 ms)
2025-04-15T01:04:51.1610709Z   GET /workflow-history/workflow/:workflowId/version/:versionId
2025-04-15T01:04:51.1611484Z     âœ“ should not work when license is not available (11 ms)
2025-04-15T01:04:51.1612611Z     âœ“ should not return anything on an invalid workflow ID (16 ms)
2025-04-15T01:04:51.1613418Z     âœ“ should not return anything on an invalid version ID (21 ms)
2025-04-15T01:04:51.1614098Z     âœ“ should return version (28 ms)
2025-04-15T01:04:51.1614855Z     âœ“ should not return anything if not shared with user (23 ms)
2025-04-15T01:04:51.1615923Z     âœ“ should not return anything if not shared with user and using workflow owned by unshared user (31 ms)
2025-04-15T01:04:51.1616531Z 
2025-04-15T01:04:52.4642153Z PASS test/integration/commands/credentials.cmd.test.ts (7.956 s)
2025-04-15T01:04:52.4652782Z   âœ“ import:credentials should import a credential (67 ms)
2025-04-15T01:04:52.4653876Z   âœ“ import:credentials should import a credential from separated files (34 ms)
2025-04-15T01:04:52.4655372Z   âœ“ `import:credentials --userId ...` should fail if the credential exists already and is owned by somebody else (84 ms)
2025-04-15T01:04:52.4657089Z   âœ“ only update credential, don't create or update owner if neither `--userId` nor `--projectId` is passed (43 ms)
2025-04-15T01:04:52.4658798Z   âœ“ `import:credential --projectId ...` should fail if the credential already exists and is owned by another project (49 ms)
2025-04-15T01:04:52.4660622Z   âœ“ `import:credential --projectId ... --userId ...` fails explaining that only one of the options can be used at a time (5 ms)
2025-04-15T01:04:52.4661451Z 
2025-04-15T01:04:54.5794714Z PASS src/services/__tests__/ownership.service.test.ts
2025-04-15T01:04:54.5795409Z   OwnershipService
2025-04-15T01:04:54.5796707Z     getWorkflowProjectCached()
2025-04-15T01:04:54.5798113Z       âœ“ should retrieve a workflow owner project (13 ms)
2025-04-15T01:04:54.5799344Z       âœ“ should throw if no workflow owner project found (13 ms)
2025-04-15T01:04:54.5800067Z     getPersonalProjectOwnerCached()
2025-04-15T01:04:54.5801017Z       âœ“ should retrieve a project owner (1 ms)
2025-04-15T01:04:54.5802511Z       âœ“ should not throw if no project owner found, should return null instead (1 ms)
2025-04-15T01:04:54.5803772Z       âœ“ should not use the repository if the owner was found in the cache (3 ms)
2025-04-15T01:04:54.5806661Z     getProjectOwnerCached()
2025-04-15T01:04:54.5809449Z       âœ“ should retrieve a project owner
2025-04-15T01:04:54.5815227Z       âœ“ should not throw if no project owner found, should return null instead (1 ms)
2025-04-15T01:04:54.5815947Z     addOwnedByAndSharedWith()
2025-04-15T01:04:54.5816727Z       âœ“ should add `ownedBy` and `sharedWith` to credential (2 ms)
2025-04-15T01:04:54.5817657Z       âœ“ should add `ownedBy` and `sharedWith` to workflow (1 ms)
2025-04-15T01:04:54.5818843Z       âœ“ should produce an empty sharedWith if no sharee (1 ms)
2025-04-15T01:04:54.5819663Z     getInstanceOwner()
2025-04-15T01:04:54.5820531Z       âœ“ should find owner using global owner role ID (1 ms)
2025-04-15T01:04:54.5821113Z 
2025-04-15T01:04:54.6426675Z PASS src/__tests__/wait-tracker.test.ts
2025-04-15T01:04:54.6445583Z   WaitTracker
2025-04-15T01:04:54.6445950Z     init()
2025-04-15T01:04:54.6446805Z       âœ“ should query DB for waiting executions if leader (7 ms)
2025-04-15T01:04:54.6447594Z       âœ“ if follower, should do nothing (1 ms)
2025-04-15T01:04:54.6448331Z       âœ“ if no executions to start, should do nothing
2025-04-15T01:04:54.6449400Z       if execution to start
2025-04-15T01:04:54.6450188Z         âœ“ if not enough time passed, should not start execution (1 ms)
2025-04-15T01:04:54.6451109Z         âœ“ if enough time passed, should start execution (2 ms)
2025-04-15T01:04:54.6451894Z     startExecution()
2025-04-15T01:04:54.6452505Z       âœ“ should query for execution to start (2 ms)
2025-04-15T01:04:54.6453374Z       âœ“ should also resume parent execution once sub-workflow finishes (5 ms)
2025-04-15T01:04:54.6454062Z     single-main setup
2025-04-15T01:04:54.6454622Z       âœ“ should start tracking (1 ms)
2025-04-15T01:04:54.6455072Z     multi-main setup
2025-04-15T01:04:54.6455636Z       âœ“ should start tracking if leader (1 ms)
2025-04-15T01:04:54.6456311Z       âœ“ should not start tracking if follower (1 ms)
2025-04-15T01:04:54.6456662Z 
2025-04-15T01:04:55.7405024Z PASS src/services/cache/__tests__/cache.service.test.ts
2025-04-15T01:04:55.7409540Z   memory
2025-04-15T01:04:55.7413940Z     init
2025-04-15T01:04:55.7418691Z       âœ“ should select backend based on config (6 ms)
2025-04-15T01:04:55.7423623Z       âœ“ should honor max size when enough (2 ms)
2025-04-15T01:04:55.7428426Z       âœ“ should honor max size when not enough (1 ms)
2025-04-15T01:04:55.7433122Z     set
2025-04-15T01:04:55.7437385Z       âœ“ should set a string value
2025-04-15T01:04:55.7441358Z       âœ“ should set a number value
2025-04-15T01:04:55.7442491Z       âœ“ should set an object value (1 ms)
2025-04-15T01:04:55.7445593Z       âœ“ should not cache `null` or `undefined` values (1 ms)
2025-04-15T01:04:55.7446329Z       âœ“ should disregard zero-length keys
2025-04-15T01:04:55.7446924Z       âœ“ should honor ttl (201 ms)
2025-04-15T01:04:55.7447334Z     get
2025-04-15T01:04:55.7447840Z       âœ“ should fall back to fallback value (1 ms)
2025-04-15T01:04:55.7448479Z       âœ“ should refresh value (1 ms)
2025-04-15T01:04:55.7449074Z       âœ“ should handle non-ASCII key (1 ms)
2025-04-15T01:04:55.7449547Z     delete
2025-04-15T01:04:55.7450072Z       âœ“ should delete a key (1 ms)
2025-04-15T01:04:55.7450723Z       âœ“ should handle non-ASCII key (1 ms)
2025-04-15T01:04:55.7451209Z     setMany
2025-04-15T01:04:55.7452013Z       âœ“ should set multiple string values (1 ms)
2025-04-15T01:04:55.7452723Z       âœ“ should set multiple number values (1 ms)
2025-04-15T01:04:55.7453409Z       âœ“ should disregard zero-length keys (2 ms)
2025-04-15T01:04:55.7453885Z     getMany
2025-04-15T01:04:55.7454443Z       âœ“ should return undefined on missing result (1 ms)
2025-04-15T01:04:55.7455342Z     setHash
2025-04-15T01:04:55.7455887Z       âœ“ should set a hash if non-existing (1 ms)
2025-04-15T01:04:55.7456577Z       âœ“ should add to a hash value if existing (1 ms)
2025-04-15T01:04:55.7457076Z     deleteFromHash
2025-04-15T01:04:55.7457587Z       âœ“ should delete a hash field (1 ms)
2025-04-15T01:04:55.7458047Z     getHashValue
2025-04-15T01:04:55.7458573Z       âœ“ should return a hash field value (4 ms)
2025-04-15T01:04:55.7459036Z   redis
2025-04-15T01:04:55.7459328Z     init
2025-04-15T01:04:55.7459882Z       âœ“ should select backend based on config (2 ms)
2025-04-15T01:04:55.7460704Z       âœ“ with auto backend and queue mode, should select redis (1 ms)
2025-04-15T01:04:55.7461252Z     set
2025-04-15T01:04:55.7461905Z       âœ“ should set a string value (4 ms)
2025-04-15T01:04:55.7462502Z       âœ“ should set a number value (1 ms)
2025-04-15T01:04:55.7463056Z       âœ“ should set an object value
2025-04-15T01:04:55.7463760Z       âœ“ should not cache `null` or `undefined` values (4 ms)
2025-04-15T01:04:55.7464470Z       âœ“ should disregard zero-length keys
2025-04-15T01:04:55.7465094Z       âœ“ should honor ttl (202 ms)
2025-04-15T01:04:55.7465526Z     get
2025-04-15T01:04:55.7466080Z       âœ“ should fall back to fallback value (1 ms)
2025-04-15T01:04:55.7466675Z       âœ“ should refresh value
2025-04-15T01:04:55.7467206Z       âœ“ should handle non-ASCII key
2025-04-15T01:04:55.7467619Z     delete
2025-04-15T01:04:55.7468058Z       âœ“ should delete a key (1 ms)
2025-04-15T01:04:55.7468941Z       âœ“ should handle non-ASCII key
2025-04-15T01:04:55.7469363Z     setMany
2025-04-15T01:04:55.7469864Z       âœ“ should set multiple string values (1 ms)
2025-04-15T01:04:55.7470512Z       âœ“ should set multiple number values (1 ms)
2025-04-15T01:04:55.7471191Z       âœ“ should disregard zero-length keys (1 ms)
2025-04-15T01:04:55.7471864Z     getMany
2025-04-15T01:04:55.7472429Z       âœ“ should return undefined on missing result (1 ms)
2025-04-15T01:04:55.7472931Z     setHash
2025-04-15T01:04:55.7473447Z       âœ“ should set a hash if non-existing (1 ms)
2025-04-15T01:04:55.7474130Z       âœ“ should add to a hash value if existing (1 ms)
2025-04-15T01:04:55.7474614Z     deleteFromHash
2025-04-15T01:04:55.7475110Z       âœ“ should delete a hash field (1 ms)
2025-04-15T01:04:55.7475554Z     getHashValue
2025-04-15T01:04:55.7476037Z       âœ“ should return a hash field value
2025-04-15T01:04:55.7476367Z 
2025-04-15T01:05:00.4217630Z PASS test/integration/executions/pre-execution-checks/credentials-permission-checker.test.ts (5.625 s)
2025-04-15T01:05:00.4240164Z   check()
2025-04-15T01:05:00.4241169Z     âœ“ should allow if workflow has no creds (23 ms)
2025-04-15T01:05:00.4242210Z     âœ“ should allow if workflow creds are valid subset (34 ms)
2025-04-15T01:05:00.4243102Z     âœ“ should deny if workflow creds are not valid subset (33 ms)
2025-04-15T01:05:00.4244104Z     âœ“ should allow all credentials if current user is instance owner (22 ms)
2025-04-15T01:05:00.4244633Z 
2025-04-15T01:05:00.5180033Z PASS src/environments.ee/source-control/__tests__/source-control-helper.ee.test.ts
2025-04-15T01:05:00.5180919Z   Source Control
2025-04-15T01:05:00.5181892Z     âœ“ should generate an SSH key pair (122 ms)
2025-04-15T01:05:00.5182574Z     âœ“ should generate an RSA key pair (1438 ms)
2025-04-15T01:05:00.5183458Z     âœ“ should check for git and ssh folders and create them if required (2 ms)
2025-04-15T01:05:00.5184320Z     âœ“ should get repo type from url (1 ms)
2025-04-15T01:05:00.5185138Z     âœ“ should get tracking information from pre-push results (4 ms)
2025-04-15T01:05:00.5186034Z     âœ“ should get tracking information from post-push results
2025-04-15T01:05:00.5186883Z     âœ“ should get tracking information from pull results (1 ms)
2025-04-15T01:05:00.5187296Z 
2025-04-15T01:05:03.1260327Z PASS test/integration/public-api/users.ee.test.ts (8.236 s)
2025-04-15T01:05:03.1265343Z   With license unlimited quota:users
2025-04-15T01:05:03.1270199Z     GET /users
2025-04-15T01:05:03.1275035Z       âœ“ should fail due to missing API Key (494 ms)
2025-04-15T01:05:03.1280219Z       âœ“ should fail due to invalid API Key (16 ms)
2025-04-15T01:05:03.1283710Z       âœ“ should return all users (221 ms)
2025-04-15T01:05:03.1292420Z       âœ“ should return users filtered by project ID (57 ms)
2025-04-15T01:05:03.1293002Z     GET /users/:id
2025-04-15T01:05:03.1293602Z       âœ“ should fail due to missing API Key (26 ms)
2025-04-15T01:05:03.1294920Z       âœ“ should fail due to invalid API Key (16 ms)
2025-04-15T01:05:03.1297553Z       âœ“ should fail due to member trying to access owner only endpoint (20 ms)
2025-04-15T01:05:03.1299472Z       âœ“ should return 404 for non-existing id  (16 ms)
2025-04-15T01:05:03.1300153Z       âœ“ should return a pending user (38 ms)
2025-04-15T01:05:03.1300618Z     GET /users/:email
2025-04-15T01:05:03.1301228Z       âœ“ with non-existing email should return 404 (27 ms)
2025-04-15T01:05:03.1302109Z       âœ“ should return a user (19 ms)
2025-04-15T01:05:03.1302624Z   With license without quota:users
2025-04-15T01:05:03.1303364Z     âœ“ GET /users should fail due to invalid license (28 ms)
2025-04-15T01:05:03.1304200Z     âœ“ GET /users/:id should fail due to invalid license (21 ms)
2025-04-15T01:05:03.1304619Z 
2025-04-15T01:05:03.9150130Z PASS src/controllers/__tests__/binary-data.controller.test.ts
2025-04-15T01:05:03.9153173Z   BinaryDataController
2025-04-15T01:05:03.9155452Z     get
2025-04-15T01:05:03.9157784Z       âœ“ should return 400 if binary data mode is missing (9 ms)
2025-04-15T01:05:03.9163734Z       âœ“ should return 400 if binary data mode is invalid (1 ms)
2025-04-15T01:05:03.9164913Z       âœ“ should return 404 if file is not found (2 ms)
2025-04-15T01:05:03.9165766Z       âœ“ should set Content-Type and Content-Length from query if provided (2 ms)
2025-04-15T01:05:03.9166753Z       âœ“ should set Content-Type and Content-Length from metadata if not provided (1 ms)
2025-04-15T01:05:03.9167578Z       âœ“ should set Content-Disposition for download action
2025-04-15T01:05:03.9168369Z       âœ“ should set Content-Security-Policy for HTML in view mode (12 ms)
2025-04-15T01:05:03.9169253Z       âœ“ should not set Content-Security-Policy for HTML in download mode (1 ms)
2025-04-15T01:05:03.9170014Z       âœ“ should return the file stream on success (1 ms)
2025-04-15T01:05:03.9170449Z     getSigned
2025-04-15T01:05:03.9170989Z       âœ“ should return 400 if binary data mode is missing (1 ms)
2025-04-15T01:05:03.9171861Z       âœ“ should return 400 if binary data mode is invalid (2 ms)
2025-04-15T01:05:03.9172555Z       âœ“ should return 400 if token is invalid (1 ms)
2025-04-15T01:05:03.9173198Z       âœ“ should return 404 if file is not found (1 ms)
2025-04-15T01:05:03.9173905Z       âœ“ should return the file stream on a valid signed token (1 ms)
2025-04-15T01:05:03.9174290Z 
2025-04-15T01:05:07.7122242Z PASS src/environments.ee/source-control/__tests__/source-control-import.service.ee.test.ts
2025-04-15T01:05:07.7123500Z   SourceControlImportService
2025-04-15T01:05:07.7124168Z     getRemoteVersionIdsFromFiles
2025-04-15T01:05:07.7125250Z       âœ“ should parse workflow files correctly (5 ms)
2025-04-15T01:05:07.7126224Z       âœ“ should filter out files without valid workflow data
2025-04-15T01:05:07.7126986Z     getRemoteCredentialsFromFiles
2025-04-15T01:05:07.7127822Z       âœ“ should parse credential files correctly (1 ms)
2025-04-15T01:05:07.7128837Z       âœ“ should filter out files without valid credential data (1 ms)
2025-04-15T01:05:07.7129642Z     getRemoteVariablesFromFile
2025-04-15T01:05:07.7130420Z       âœ“ should parse variables file correctly
2025-04-15T01:05:07.7131401Z       âœ“ should return empty array if no variables file found (1 ms)
2025-04-15T01:05:07.7132587Z     getRemoteTagsAndMappingsFromFile
2025-04-15T01:05:07.7133529Z       âœ“ should parse tags and mappings file correctly (1 ms)
2025-04-15T01:05:07.7134521Z       âœ“ should return empty tags and mappings if no file found
2025-04-15T01:05:07.7135346Z     getRemoteFoldersAndMappingsFromFile
2025-04-15T01:05:07.7136299Z       âœ“ should parse folders and mappings file correctly (1 ms)
2025-04-15T01:05:07.7138246Z       âœ“ should return empty folders and mappings if no file found (1 ms)
2025-04-15T01:05:07.7139087Z     getLocalVersionIdsFromDb
2025-04-15T01:05:07.7139935Z       âœ“ should replace invalid updatedAt with current timestamp
2025-04-15T01:05:07.7144072Z     getLocalFoldersAndMappingsFromDb
2025-04-15T01:05:07.7144920Z       âœ“ should return data from DB (2 ms)
2025-04-15T01:05:07.7145361Z 
2025-04-15T01:05:07.8745143Z PASS test/integration/workflows/workflow.service.ee.test.ts (7.239 s)
2025-04-15T01:05:07.8750413Z   EnterpriseWorkflowService
2025-04-15T01:05:07.8755303Z     validateWorkflowCredentialUsage
2025-04-15T01:05:07.8760678Z       âœ“ Should throw error saving a workflow using credential without access (37 ms)
2025-04-15T01:05:07.8766974Z       âœ“ Should not throw error when saving a workflow using credential with access (1 ms)
2025-04-15T01:05:07.8770657Z       âœ“ Should not throw error when saving a workflow removing node without credential access (2 ms)
2025-04-15T01:05:07.8772195Z       âœ“ Should save fine when not making changes to workflow without access (2 ms)
2025-04-15T01:05:07.8773753Z       âœ“ Should throw error saving a workflow adding node without credential access (3 ms)
2025-04-15T01:05:07.8775828Z     getNodesWithInaccessibleCreds
2025-04-15T01:05:07.8776700Z       âœ“ Should return an empty list for a workflow without nodes (1 ms)
2025-04-15T01:05:07.8777822Z       âœ“ Should return an empty list for a workflow with nodes without credentials (2 ms)
2025-04-15T01:05:07.8778983Z       âœ“ Should return an element for a node with a credential without access (1 ms)
2025-04-15T01:05:07.8780590Z       âœ“ Should return an empty list for a node with a credential with access (2 ms)
2025-04-15T01:05:07.8783842Z       âœ“ Should return an element for a node with two credentials and mixed access (1 ms)
2025-04-15T01:05:07.8785056Z       âœ“ Should return one node for a workflow with two nodes and two credentials (1 ms)
2025-04-15T01:05:07.8786274Z       âœ“ Should return one element for a workflows with two nodes and one credential (2 ms)
2025-04-15T01:05:07.8787595Z       âœ“ Should return one element for a workflows with two nodes and partial credential access (1 ms)
2025-04-15T01:05:07.8788977Z       âœ“ Should return two elements for a workflows with two nodes and partial credential access (1 ms)
2025-04-15T01:05:07.8790346Z       âœ“ Should return two elements for a workflows with two nodes and no credential access (1 ms)
2025-04-15T01:05:07.8790974Z 
2025-04-15T01:05:08.6001073Z PASS src/controllers/__tests__/dynamic-node-parameters.controller.test.ts
2025-04-15T01:05:08.6005578Z   DynamicNodeParametersController
2025-04-15T01:05:08.6009265Z     getOptions
2025-04-15T01:05:08.6013633Z       âœ“ should call getOptionsViaMethodName when methodName is provided (8 ms)
2025-04-15T01:05:08.6017950Z       âœ“ should call getOptionsViaLoadOptions when loadOptions is provided (1 ms)
2025-04-15T01:05:08.6022190Z       âœ“ should return empty array when no method or load options are provided
2025-04-15T01:05:08.6025965Z     getResourceLocatorResults
2025-04-15T01:05:08.6029676Z       âœ“ should call getResourceLocatorResults with correct parameters (2 ms)
2025-04-15T01:05:08.6032374Z     getResourceMappingFields
2025-04-15T01:05:08.6034832Z       âœ“ should call getResourceMappingFields with correct parameters (1 ms)
2025-04-15T01:05:08.6035523Z     getLocalResourceMappingFields
2025-04-15T01:05:08.6036575Z       âœ“ should call getLocalResourceMappingFields with correct parameters (1 ms)
2025-04-15T01:05:08.6037831Z     getActionResult
2025-04-15T01:05:08.6040341Z       âœ“ should call getActionResult with correct parameters (1 ms)
2025-04-15T01:05:08.6041045Z 
2025-04-15T01:05:14.7670679Z PASS test/integration/security-audit/instance-risk-reporter.test.ts (6.617 s)
2025-04-15T01:05:14.7675678Z   âœ“ should report webhook lacking authentication (344 ms)
2025-04-15T01:05:14.7686152Z   âœ“ should not report webhooks having basic or header auth (22 ms)
2025-04-15T01:05:14.7687116Z   âœ“ should not report webhooks validated by direct children (27 ms)
2025-04-15T01:05:14.7688321Z   âœ“ should not report non-webhook node (13 ms)
2025-04-15T01:05:14.7689076Z   âœ“ should report outdated instance when outdated (9 ms)
2025-04-15T01:05:14.7689948Z   âœ“ should not report outdated instance when up to date (103 ms)
2025-04-15T01:05:14.7690943Z   âœ“ should report security settings (8 ms)
2025-04-15T01:05:14.7693403Z 
2025-04-15T01:05:17.1020041Z PASS src/webhooks/__tests__/webhook-request-handler.test.ts
2025-04-15T01:05:17.1023428Z   WebhookRequestHandler
2025-04-15T01:05:17.1027978Z     âœ“ should throw for unsupported methods (22 ms)
2025-04-15T01:05:17.1032336Z     preflight requests
2025-04-15T01:05:17.1036598Z       âœ“ should handle missing header for requested method (2 ms)
2025-04-15T01:05:17.1040924Z       âœ“ should handle default origin and max-age (1 ms)
2025-04-15T01:05:17.1045324Z       âœ“ should handle wildcard origin (1 ms)
2025-04-15T01:05:17.1049454Z       âœ“ should handle custom origin (1 ms)
2025-04-15T01:05:17.1053620Z     webhook requests
2025-04-15T01:05:17.1057947Z       âœ“ should delegate the request to the webhook manager and send the response (1 ms)
2025-04-15T01:05:17.1062983Z       âœ“ should send an error response if webhook execution throws (7 ms)
2025-04-15T01:05:17.1066287Z       âœ“ should handle 'DELETE' method (2 ms)
2025-04-15T01:05:17.1068963Z       âœ“ should handle 'GET' method (1 ms)
2025-04-15T01:05:17.1071783Z       âœ“ should handle 'HEAD' method (1 ms)
2025-04-15T01:05:17.1084339Z       âœ“ should handle 'PATCH' method (1 ms)
2025-04-15T01:05:17.1085476Z       âœ“ should handle 'POST' method (1 ms)
2025-04-15T01:05:17.1086090Z       âœ“ should handle 'PUT' method (1 ms)
2025-04-15T01:05:17.1086413Z 
2025-04-15T01:05:21.8695789Z PASS test/integration/public-api/users.test.ts (13.838 s)
2025-04-15T01:05:21.8697079Z   Users in Public API
2025-04-15T01:05:21.8698008Z     POST /users
2025-04-15T01:05:21.8701477Z       âœ“ if not authenticated, should reject (31 ms)
2025-04-15T01:05:21.8705665Z       âœ“ if missing scope, should reject (224 ms)
2025-04-15T01:05:21.8706390Z       âœ“ should create a user (79 ms)
2025-04-15T01:05:21.8706848Z     DELETE /users/:id
2025-04-15T01:05:21.8707462Z       âœ“ if not authenticated, should reject (19 ms)
2025-04-15T01:05:21.8708162Z       âœ“ if missing scope, should reject (33 ms)
2025-04-15T01:05:21.8708781Z       âœ“ should delete a user (69 ms)
2025-04-15T01:05:21.8709226Z     PATCH /users/:id/role
2025-04-15T01:05:21.8709794Z       âœ“ if not authenticated, should reject (15 ms)
2025-04-15T01:05:21.8710509Z       âœ“ if not licensed, should reject (31 ms)
2025-04-15T01:05:21.8712112Z       âœ“ if missing scope, should reject (27 ms)
2025-04-15T01:05:21.8712851Z       âœ“ should return a 400 on invalid payload (22 ms)
2025-04-15T01:05:21.8713553Z       âœ“ should change a user's role (33 ms)
2025-04-15T01:05:21.8713907Z 
2025-04-15T01:05:22.0728679Z PASS src/webhooks/__tests__/test-webhooks.test.ts
2025-04-15T01:05:22.0729343Z   TestWebhooks
2025-04-15T01:05:22.0729706Z     needsWebhook()
2025-04-15T01:05:22.0730812Z       âœ“ if webhook is needed, should register then create webhook and return true (7 ms)
2025-04-15T01:05:22.0732926Z       âœ“ if webhook activation fails, should deactivate workflow webhooks (16 ms)
2025-04-15T01:05:22.0733999Z       âœ“ if no webhook is found to start workflow, should return false (1 ms)
2025-04-15T01:05:22.0734996Z       âœ“ returns false if a triggerToStartFrom with triggerData is given
2025-04-15T01:05:22.0736322Z       âœ“ returns true, registers and then creates webhook if triggerToStartFrom is given with no triggerData (1 ms)
2025-04-15T01:05:22.0737204Z     executeWebhook()
2025-04-15T01:05:22.0737840Z       âœ“ if webhook is not registered, should throw (9 ms)
2025-04-15T01:05:22.0738807Z       âœ“ if webhook is registered but missing from workflow, should throw (1 ms)
2025-04-15T01:05:22.0739462Z     deactivateWebhooks()
2025-04-15T01:05:22.0740072Z       âœ“ should add additional data to workflow (2 ms)
2025-04-15T01:05:22.0740447Z 
2025-04-15T01:05:22.3315672Z PASS test/integration/webhooks.api.test.ts (13.507 s)
2025-04-15T01:05:22.3316718Z   Webhook API
2025-04-15T01:05:22.3317118Z     Content-Type support
2025-04-15T01:05:22.3317877Z       âœ“ should handle JSON (38 ms)
2025-04-15T01:05:22.3318430Z       âœ“ should handle XML (16 ms)
2025-04-15T01:05:22.3319025Z       âœ“ should handle form-urlencoded (11 ms)
2025-04-15T01:05:22.3319660Z       âœ“ should handle plain text (11 ms)
2025-04-15T01:05:22.3320305Z       âœ“ should handle multipart/form-data (26 ms)
2025-04-15T01:05:22.3320796Z     Params support
2025-04-15T01:05:22.3321754Z       âœ“ should handle params (46 ms)
2025-04-15T01:05:22.3322070Z 
2025-04-15T01:05:41.0221794Z PASS test/integration/import.service.test.ts (18.715 s)
2025-04-15T01:05:41.0238515Z   ImportService
2025-04-15T01:05:41.0241423Z     âœ“ should import credless and tagless workflow (56 ms)
2025-04-15T01:05:41.0318224Z     âœ“ should make user owner of imported workflow (19 ms)
2025-04-15T01:05:41.0319104Z     âœ“ should not change the owner if it already exists (71 ms)
2025-04-15T01:05:41.0319959Z     âœ“ should deactivate imported workflow if active (71 ms)
2025-04-15T01:05:41.0320756Z     âœ“ should leave intact new-format credentials (24 ms)
2025-04-15T01:05:41.0321461Z     âœ“ should set tag by identical match (60 ms)
2025-04-15T01:05:41.0322371Z     âœ“ should set tag by name match (31 ms)
2025-04-15T01:05:41.0326222Z     âœ“ should set tag by creating if no match (27 ms)
2025-04-15T01:05:41.0327116Z 
2025-04-15T01:05:41.0380747Z PASS test/integration/security-audit/credentials-risk-reporter.test.ts (18.456 s)
2025-04-15T01:05:41.0382178Z   âœ“ should report credentials not in any use (261 ms)
2025-04-15T01:05:41.0384723Z   âœ“ should report credentials not in active use (45 ms)
2025-04-15T01:05:41.0385638Z   âœ“ should report credential in not recently executed workflow (67 ms)
2025-04-15T01:05:41.0386611Z   âœ“ should not report credentials in recently executed workflow (27 ms)
2025-04-15T01:05:41.0387119Z 
2025-04-15T01:05:43.1904362Z PASS src/__tests__/workflow-runner.test.ts (21.121 s)
2025-04-15T01:05:43.1906294Z   processError
2025-04-15T01:05:43.1907314Z     âœ“ processError should return early in Bull stalled edge case (173 ms)
2025-04-15T01:05:43.1908412Z     âœ“ processError should return early if the error is `ExecutionNotFoundError` (27 ms)
2025-04-15T01:05:43.1909294Z     âœ“ processError should process error (40 ms)
2025-04-15T01:05:43.1909742Z   run
2025-04-15T01:05:43.1910768Z     âœ“ uses recreateNodeExecutionStack to create a partial execution if a triggerToStartFrom with data is sent (30 ms)
2025-04-15T01:05:43.1912826Z     âœ“ does not use recreateNodeExecutionStack to create a partial execution if a triggerToStartFrom without data is sent (5 ms)
2025-04-15T01:05:43.1913648Z 
2025-04-15T01:05:44.2652941Z PASS src/push/__tests__/index.test.ts
2025-04-15T01:05:44.2654654Z   Push
2025-04-15T01:05:44.2654999Z     setupPushServer
2025-04-15T01:05:44.2655360Z       sse backend
2025-04-15T01:05:44.2656152Z         âœ“ should not create a WebSocket server (7 ms)
2025-04-15T01:05:44.2656666Z       websocket backend
2025-04-15T01:05:44.2657680Z         âœ“ should not upgrade non-push urls (3 ms)
2025-04-15T01:05:44.2658565Z         âœ“ should upgrade push url, and route it to express (4 ms)
2025-04-15T01:05:44.2659157Z     handleRequest
2025-04-15T01:05:44.2659507Z       sse backend
2025-04-15T01:05:44.2660075Z         âœ“ should throw if pushRef is invalid (2 ms)
2025-04-15T01:05:44.2660888Z         âœ“ should add the connection if pushRef is valid (2 ms)
2025-04-15T01:05:44.2661509Z         should throw on invalid origin
2025-04-15T01:05:44.2662406Z           âœ“ https://subdomain.example.com (20 ms)
2025-04-15T01:05:44.2663080Z           âœ“ https://123example.com (1 ms)
2025-04-15T01:05:44.2663631Z           âœ“ undefined (1 ms)
2025-04-15T01:05:44.2664030Z       websocket backend
2025-04-15T01:05:44.2664570Z         âœ“ should throw if pushRef is invalid (1 ms)
2025-04-15T01:05:44.2665288Z         âœ“ should add the connection if pushRef is valid (1 ms)
2025-04-15T01:05:44.2666126Z         âœ“ should respond with 401 if request is not WebSocket (1 ms)
2025-04-15T01:05:44.2666753Z         should throw on invalid origin
2025-04-15T01:05:44.2667404Z           âœ“ https://subdomain.example.com (1 ms)
2025-04-15T01:05:44.2668057Z           âœ“ https://123example.com (1 ms)
2025-04-15T01:05:44.2668585Z           âœ“ undefined (10 ms)
2025-04-15T01:05:44.2668850Z 
2025-04-15T01:05:45.7270546Z PASS src/webhooks/__tests__/waiting-forms.test.ts
2025-04-15T01:05:45.7275297Z   WaitingForms
2025-04-15T01:05:45.7277670Z     findCompletionPage
2025-04-15T01:05:45.7280613Z       âœ“ should return lastNodeExecuted if it is a non-disabled form completion node (16 ms)
2025-04-15T01:05:45.7283433Z       âœ“ should return undefined if lastNodeExecuted is disabled (1 ms)
2025-04-15T01:05:45.7293908Z       âœ“ should return undefined if lastNodeExecuted is not a form node (5 ms)
2025-04-15T01:05:45.7295183Z       âœ“ should return undefined if lastNodeExecuted operation is not completion (1 ms)
2025-04-15T01:05:45.7297570Z       âœ“ should find first valid completion form in parent nodes if lastNodeExecuted is not valid (2 ms)
2025-04-15T01:05:45.7300382Z       âœ“ should return undefined if no valid completion form is found in parent nodes (1 ms)
2025-04-15T01:05:45.7301811Z       âœ“ should skip parent nodes without runData (21 ms)
2025-04-15T01:05:45.7302730Z       âœ“ should mark as test form webhook when execution mode is manual (1 ms)
2025-04-15T01:05:45.7303862Z       âœ“ should return status of execution if suffix is WAITING_FORMS_EXECUTION_STATUS (8 ms)
2025-04-15T01:05:45.7304429Z 
2025-04-15T01:05:47.5548361Z PASS src/services/pruning/__tests__/pruning.service.test.ts
2025-04-15T01:05:47.5553630Z   PruningService
2025-04-15T01:05:47.5556431Z     init
2025-04-15T01:05:47.5559707Z       âœ“ should start pruning on main instance that is the leader (8 ms)
2025-04-15T01:05:47.5563583Z       âœ“ should not start pruning on main instance that is a follower (1 ms)
2025-04-15T01:05:47.5566421Z       âœ“ should register leadership events if main on multi-main setup (2 ms)
2025-04-15T01:05:47.5571902Z     isEnabled
2025-04-15T01:05:47.5582779Z       âœ“ should return `true` based on config if leader main (1 ms)
2025-04-15T01:05:47.5583678Z       âœ“ should return `false` based on config if leader main (1 ms)
2025-04-15T01:05:47.5584633Z       âœ“ should return `false` if non-main even if config is enabled (1 ms)
2025-04-15T01:05:47.5585667Z       âœ“ should return `false` if follower main even if config is enabled (1 ms)
2025-04-15T01:05:47.5586305Z     startPruning
2025-04-15T01:05:47.5586904Z       âœ“ should not start pruning if service is disabled
2025-04-15T01:05:47.5587817Z       âœ“ should start pruning if service is enabled and DB is migrated (1 ms)
2025-04-15T01:05:47.5588304Z 
2025-04-15T01:05:49.5847804Z PASS test/integration/task-runners/js-task-runner-execution.integration.test.ts (6.173 s)
2025-04-15T01:05:49.5855681Z   JS TaskRunner execution on internal mode
2025-04-15T01:05:49.5857596Z     Basic code execution
2025-04-15T01:05:49.5859705Z       âœ“ should execute a simple JS task (1406 ms)
2025-04-15T01:05:49.5882354Z     Internal and external libs
2025-04-15T01:05:49.5883298Z       âœ“ should allow importing allowed internal module (1426 ms)
2025-04-15T01:05:49.5884175Z       âœ“ should not allow importing disallowed internal module (10 ms)
2025-04-15T01:05:49.5885017Z       âœ“ should allow importing allowed external module (10 ms)
2025-04-15T01:05:49.5885891Z       âœ“ should not allow importing disallowed external module (7 ms)
2025-04-15T01:05:49.5886322Z 
2025-04-15T01:05:50.7059487Z PASS src/__tests__/credentials-helper.test.ts
2025-04-15T01:05:50.7060150Z   CredentialsHelper
2025-04-15T01:05:50.7060513Z     authenticate
2025-04-15T01:05:50.7061280Z       âœ“ basicAuth, default property names (26 ms)
2025-04-15T01:05:50.7063365Z       âœ“ headerAuth (1 ms)
2025-04-15T01:05:50.7063987Z       âœ“ headerAuth, key and value expressions (2 ms)
2025-04-15T01:05:50.7064592Z       âœ“ queryAuth (1 ms)
2025-04-15T01:05:50.7065079Z       âœ“ custom authentication
2025-04-15T01:05:50.7065371Z 
2025-04-15T01:05:52.7800020Z PASS src/commands/db/__tests__/revert.test.ts
2025-04-15T01:05:52.7802745Z   âœ“ don't revert migrations if there is no migration (7 ms)
2025-04-15T01:05:52.7804981Z   âœ“ don't revert the last migration if it had no down migration (1 ms)
2025-04-15T01:05:52.7813131Z   âœ“ print migration name instead of class name in error message if the migration has a name (6 ms)
2025-04-15T01:05:52.7814386Z   âœ“ don't revert the last migration if we cannot find the migration in the code (1 ms)
2025-04-15T01:05:52.7815338Z   âœ“ revert the last migration if it has a down migration
2025-04-15T01:05:52.7816780Z   âœ“ don't use transaction if the last migration has transaction = false (1 ms)
2025-04-15T01:05:52.7817321Z 
2025-04-15T01:05:55.9232172Z PASS src/scaling/__tests__/worker-server.test.ts
2025-04-15T01:05:55.9240360Z   WorkerServer
2025-04-15T01:05:55.9240711Z     constructor
2025-04-15T01:05:55.9241481Z       âœ“ should throw if non-worker instance type (22 ms)
2025-04-15T01:05:55.9242338Z       âœ“ should exit if port taken (2 ms)
2025-04-15T01:05:55.9242800Z     init
2025-04-15T01:05:55.9243354Z       âœ“ should mount all endpoints when all are enabled (1 ms)
2025-04-15T01:05:55.9244314Z       âœ“ should mount only health and overwrites endpoints if only those are enabled (1 ms)
2025-04-15T01:05:55.9245119Z       âœ“ should throw if no endpoints are enabled (2 ms)
2025-04-15T01:05:55.9245661Z       âœ“ should call `worker.ready` external hook
2025-04-15T01:05:55.9245942Z 
2025-04-15T01:05:58.3544409Z PASS src/deprecation/__tests__/deprecation.service.test.ts
2025-04-15T01:05:58.3553215Z   DeprecationService
2025-04-15T01:05:58.3555415Z     âœ“ should detect when N8N_BINARY_DATA_TTL is `1` (5 ms)
2025-04-15T01:05:58.3557771Z     âœ“ should detect when N8N_PERSISTED_BINARY_DATA_TTL is `1`
2025-04-15T01:05:58.3568863Z     âœ“ should detect when EXECUTIONS_DATA_PRUNE_TIMEOUT is `1`
2025-04-15T01:05:58.3569610Z     âœ“ should detect when N8N_CONFIG_FILES is `1` (1 ms)
2025-04-15T01:05:58.3570534Z     âœ“ should detect when N8N_SKIP_WEBHOOK_DEREGISTRATION_SHUTDOWN is `1` (1 ms)
2025-04-15T01:05:58.3571513Z     âœ“ should detect when N8N_PARTIAL_EXECUTION_VERSION_DEFAULT is `1` (1 ms)
2025-04-15T01:05:58.3572828Z     âœ“ should detect when N8N_PARTIAL_EXECUTION_VERSION_DEFAULT is `2` (1 ms)
2025-04-15T01:05:58.3573821Z     âœ“ should detect when N8N_PARTIAL_EXECUTION_VERSION_DEFAULT is `undefined`
2025-04-15T01:05:58.3574674Z     âœ“ should handle N8N_BINARY_DATA_MODE as default (1 ms)
2025-04-15T01:05:58.3575449Z     âœ“ should handle N8N_BINARY_DATA_MODE as filesystem (1 ms)
2025-04-15T01:05:58.3576178Z     âœ“ should handle N8N_BINARY_DATA_MODE as s3
2025-04-15T01:05:58.3576810Z     âœ“ should handle DB_TYPE as sqlite (1 ms)
2025-04-15T01:05:58.3577400Z     âœ“ should handle DB_TYPE as postgresdb
2025-04-15T01:05:58.3578017Z     âœ“ should handle DB_TYPE as mysqldb (1 ms)
2025-04-15T01:05:58.3578599Z     âœ“ should handle DB_TYPE as mariadb
2025-04-15T01:05:58.3579095Z     N8N_PARTIAL_EXECUTION_VERSION_DEFAULT
2025-04-15T01:05:58.3580350Z       âœ“ supports multiple warnings for the same environment variable (9 ms)
2025-04-15T01:05:58.3581032Z     N8N_RUNNERS_ENABLED
2025-04-15T01:05:58.3581772Z       âœ“ should handle value: false (1 ms)
2025-04-15T01:05:58.3582325Z       âœ“ should handle value: 
2025-04-15T01:05:58.3582856Z       âœ“ should handle value: true (1 ms)
2025-04-15T01:05:58.3583465Z       âœ“ should handle value: undefined
2025-04-15T01:05:58.3583962Z     OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS
2025-04-15T01:05:58.3584444Z       when executions.mode is queue
2025-04-15T01:05:58.3585241Z         âœ“ should warn when OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS is false (1 ms)
2025-04-15T01:05:58.3586244Z         âœ“ should warn when OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS is empty (1 ms)
2025-04-15T01:05:58.3587211Z         âœ“ should not warn when OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS is true (1 ms)
2025-04-15T01:05:58.3588191Z         âœ“ should warn when OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS is undefined
2025-04-15T01:05:58.3588851Z       when executions.mode is not queue
2025-04-15T01:05:58.3589385Z         âœ“ should not warn
2025-04-15T01:05:58.3589623Z 
2025-04-15T01:06:02.6288845Z PASS src/__tests__/active-workflow-manager.test.ts
2025-04-15T01:06:02.6294454Z   ActiveWorkflowManager
2025-04-15T01:06:02.6294871Z     checkIfWorkflowCanBeActivated
2025-04-15T01:06:02.6295642Z       âœ“ should skip disabled nodes (6 ms)
2025-04-15T01:06:02.6296263Z       âœ“ should skip nodes marked as ignored (6 ms)
2025-04-15T01:06:02.6296868Z       âœ“ should skip unknown nodes (1 ms)
2025-04-15T01:06:02.6297511Z       âœ“ should skip nodes with no trigger method (1 ms)
2025-04-15T01:06:02.6298605Z       âœ“ should activate if poll method exists (1 ms)
2025-04-15T01:06:02.6299246Z       âœ“ should activate if trigger method exists (1 ms)
2025-04-15T01:06:02.6299905Z       âœ“ should activate if webhook method exists (1 ms)
2025-04-15T01:06:02.6300375Z     shouldAddWebhooks
2025-04-15T01:06:02.6300705Z       if leader
2025-04-15T01:06:02.6301154Z         âœ“ should return `true` for `init`
2025-04-15T01:06:02.6302064Z         âœ“ should return `false` for `leadershipChange` (1 ms)
2025-04-15T01:06:02.6302819Z         âœ“ should return `true` for `update` or `activate` (1 ms)
2025-04-15T01:06:02.6303312Z       if follower
2025-04-15T01:06:02.6303842Z         âœ“ should return `false` for `update` or `activate`
2025-04-15T01:06:02.6304296Z       add
2025-04-15T01:06:02.6304918Z         âœ“ should skip inactive workflow in `init` activation mode (2 ms)
2025-04-15T01:06:02.6305918Z         âœ“ should skip inactive workflow in `leadershipChange` activation mode (1 ms)
2025-04-15T01:06:02.6306457Z 
2025-04-15T01:06:06.9853404Z PASS test/integration/controllers/dynamic-node-parameters.controller.test.ts (20.97 s)
2025-04-15T01:06:06.9987584Z   DynamicNodeParametersController
2025-04-15T01:06:06.9988179Z     POST /dynamic-node-parameters/options
2025-04-15T01:06:06.9989028Z       âœ“ should take params via body (51 ms)
2025-04-15T01:06:06.9989680Z       âœ“ should take params with loadOptions (11 ms)
2025-04-15T01:06:06.9990588Z       âœ“ should return empty array when no method or loadOptions provided (8 ms)
2025-04-15T01:06:06.9991408Z     POST /dynamic-node-parameters/resource-locator-results
2025-04-15T01:06:06.9992353Z       âœ“ should return resource locator results (8 ms)
2025-04-15T01:06:06.9993180Z       âœ“ should handle resource locator results without pagination (8 ms)
2025-04-15T01:06:06.9994048Z       âœ“ should return a 400 if methodName is not defined (8 ms)
2025-04-15T01:06:06.9994746Z     POST /dynamic-node-parameters/resource-mapper-fields
2025-04-15T01:06:06.9995492Z       âœ“ should return resource mapper fields (8 ms)
2025-04-15T01:06:06.9996215Z       âœ“ should return a 400 if methodName is not defined (7 ms)
2025-04-15T01:06:06.9996939Z     POST /dynamic-node-parameters/local-resource-mapper-fields
2025-04-15T01:06:06.9997714Z       âœ“ should return local resource mapper fields (8 ms)
2025-04-15T01:06:06.9998476Z       âœ“ should return a 400 if methodName is not defined (7 ms)
2025-04-15T01:06:06.9999133Z     POST /dynamic-node-parameters/action-result
2025-04-15T01:06:07.0000223Z       âœ“ should return action result with handler (7 ms)
2025-04-15T01:06:07.0001018Z       âœ“ should return a 400 if handler is not defined (6 ms)
2025-04-15T01:06:07.0001406Z 
2025-04-15T01:06:07.0395263Z PASS src/executions/__tests__/executions.controller.test.ts
2025-04-15T01:06:07.0403156Z   ExecutionsController
2025-04-15T01:06:07.0404309Z     getOne
2025-04-15T01:06:07.0405403Z       âœ“ should 400 when execution is not a number (23 ms)
2025-04-15T01:06:07.0406018Z     getMany
2025-04-15T01:06:07.0406554Z       if either status or range provided
2025-04-15T01:06:07.0407325Z         âœ“ should fetch executions per query (3 ms)
2025-04-15T01:06:07.0408102Z         âœ“ should fetch executions per query (2 ms)
2025-04-15T01:06:07.0408864Z         âœ“ should fetch executions per query (5 ms)
2025-04-15T01:06:07.0409596Z         âœ“ should fetch executions per query (3 ms)
2025-04-15T01:06:07.0410246Z       if neither status nor range provided
2025-04-15T01:06:07.0410975Z         âœ“ should fetch executions per query (2 ms)
2025-04-15T01:06:07.0411881Z         âœ“ should fetch executions per query (1 ms)
2025-04-15T01:06:07.0412521Z       if both status and range provided
2025-04-15T01:06:07.0413247Z         âœ“ should fetch executions per query (3 ms)
2025-04-15T01:06:07.0413788Z     stop
2025-04-15T01:06:07.0414474Z       âœ“ should 404 when execution is inaccessible for user (2 ms)
2025-04-15T01:06:07.0415320Z       âœ“ should call ask for an execution to be stopped
2025-04-15T01:06:07.0415763Z 
2025-04-15T01:06:11.2240581Z PASS src/metrics/__tests__/prometheus-metrics.service.unmocked.test.ts
2025-04-15T01:06:11.2241376Z   workflow_success_total
2025-04-15T01:06:11.2242424Z     âœ“ support workflow id labels (24 ms)
2025-04-15T01:06:11.2243122Z     âœ“ support a custom prefix (1 ms)
2025-04-15T01:06:11.2243601Z   Active workflow count
2025-04-15T01:06:11.2244151Z     âœ“ should prioritize cached value (3 ms)
2025-04-15T01:06:11.2244791Z     âœ“ should query value from database if cache misses (1 ms)
2025-04-15T01:06:11.2249209Z 
2025-04-15T01:06:13.2843794Z PASS test/integration/collaboration/collaboration.service.test.ts (20.27 s)
2025-04-15T01:06:13.2848633Z   CollaborationService
2025-04-15T01:06:13.2853060Z     workflow opened message
2025-04-15T01:06:13.2857983Z       âœ“ should emit collaboratorsChanged after workflowOpened (36 ms)
2025-04-15T01:06:13.2863263Z       âœ“ should not emit collaboratorsChanged if user don't have access to the workflow (6 ms)
2025-04-15T01:06:13.2868078Z     workflow closed message
2025-04-15T01:06:13.2873468Z       âœ“ should not emit collaboratorsChanged after workflowClosed when there are no active users (16 ms)
2025-04-15T01:06:13.2879059Z       âœ“ should emit collaboratorsChanged after workflowClosed when there are active users (23 ms)
2025-04-15T01:06:13.2887618Z       âœ“ should not emit collaboratorsChanged if user don't have access to the workflow (10 ms)
2025-04-15T01:06:13.2890700Z 
2025-04-15T01:06:13.3865661Z PASS src/shutdown/__tests__/shutdown.service.test.ts
2025-04-15T01:06:13.3866748Z   ShutdownService
2025-04-15T01:06:13.3867190Z     shutdown
2025-04-15T01:06:13.3868860Z       âœ“ should signal shutdown (5 ms)
2025-04-15T01:06:13.3869497Z       âœ“ should signal shutdown in the priority order (6 ms)
2025-04-15T01:06:13.3870319Z       âœ“ should throw error if shutdown is already in progress (11 ms)
2025-04-15T01:06:13.3871147Z       âœ“ should report error if component shutdown fails (1 ms)
2025-04-15T01:06:13.3872048Z     waitForShutdown
2025-04-15T01:06:13.3872540Z       âœ“ should wait for shutdown (1 ms)
2025-04-15T01:06:13.3873226Z       âœ“ should throw error if app is not shutting down (1 ms)
2025-04-15T01:06:13.3873716Z     isShuttingDown
2025-04-15T01:06:13.3874202Z       âœ“ should return true if app is shutting down
2025-04-15T01:06:13.3874867Z       âœ“ should return false if app is not shutting down
2025-04-15T01:06:13.3875342Z     validate
2025-04-15T01:06:13.3876067Z       âœ“ should throw error if component is not registered with the DI container (1 ms)
2025-04-15T01:06:13.3877380Z       âœ“ should throw error if component is missing the shutdown method (1 ms)
2025-04-15T01:06:13.3877870Z 
2025-04-15T01:06:16.6818490Z PASS src/services/__tests__/hooks.service.test.ts
2025-04-15T01:06:16.6820094Z   HooksService
2025-04-15T01:06:16.6821880Z     âœ“ hooksService.inviteUsers should call userService.inviteUsers (6 ms)
2025-04-15T01:06:16.6823345Z     âœ“ hooksService.issueCookie should call authService.issueCookie (1 ms)
2025-04-15T01:06:16.6824817Z     âœ“ hooksService.findOneUser should call authUserRepository.findOne (1 ms)
2025-04-15T01:06:16.6826127Z     âœ“ hooksService.saveUser should call userRepository.save
2025-04-15T01:06:16.6828559Z     âœ“ hooksService.updateSettings should call settingRepository.update (1 ms)
2025-04-15T01:06:16.6829723Z     âœ“ hooksService.workflowsCount should call workflowRepository.count (1 ms)
2025-04-15T01:06:16.6830848Z     âœ“ hooksService.credentialsCount should call credentialRepository.count
2025-04-15T01:06:16.6834111Z     âœ“ hooksService.settingsCount should call settingsRepository.count (1 ms)
2025-04-15T01:06:16.6835259Z     âœ“ hooksService.authMiddleware should call authService.authMiddleware
2025-04-15T01:06:16.6836341Z     âœ“ hooksService.dbCollections should return valid repositories (1 ms)
2025-04-15T01:06:16.6837214Z     âœ“ hooksService.getRudderStackClient (5 ms)
2025-04-15T01:06:16.6837584Z 
2025-04-15T01:06:19.2244094Z PASS src/execution-lifecycle/__tests__/restore-binary-data-id.test.ts
2025-04-15T01:06:19.2246636Z   on filesystem-v2 mode
2025-04-15T01:06:19.2257087Z     âœ“ should restore if binary data ID is missing execution ID (7 ms)
2025-04-15T01:06:19.2258040Z     âœ“ should do nothing if binary data ID is not missing execution ID (1 ms)
2025-04-15T01:06:19.2258827Z     âœ“ should do nothing if no binary data ID (1 ms)
2025-04-15T01:06:19.2259475Z     âœ“ should do nothing on itemless case (1 ms)
2025-04-15T01:06:19.2260109Z     âœ“ should do nothing if data is undefined (1 ms)
2025-04-15T01:06:19.2260878Z     âœ“ should do nothing if workflow execution mode is not `webhook`
2025-04-15T01:06:19.2261824Z     âœ“ should ignore error thrown on renaming (7 ms)
2025-04-15T01:06:19.2262296Z   on s3 mode
2025-04-15T01:06:19.2262888Z     âœ“ should restore if binary data ID is missing execution ID (1 ms)
2025-04-15T01:06:19.2263690Z     âœ“ should do nothing if binary data ID is not missing execution ID
2025-04-15T01:06:19.2264364Z     âœ“ should do nothing if no binary data ID (1 ms)
2025-04-15T01:06:19.2264935Z     âœ“ should do nothing on itemless case (1 ms)
2025-04-15T01:06:19.2265513Z     âœ“ should do nothing if data is undefined (1 ms)
2025-04-15T01:06:19.2266215Z     âœ“ should do nothing if workflow execution mode is not `webhook`
2025-04-15T01:06:19.2266847Z     âœ“ should ignore error thrown on renaming
2025-04-15T01:06:19.2267250Z   on default mode
2025-04-15T01:06:19.2267649Z     âœ“ should do nothing (1 ms)
2025-04-15T01:06:19.2267889Z 
2025-04-15T01:06:23.3647066Z PASS src/executions/__tests__/parse-range-query.middleware.test.ts
2025-04-15T01:06:23.3647825Z   `parseRangeQuery` middleware
2025-04-15T01:06:23.3648280Z     errors
2025-04-15T01:06:23.3648996Z       âœ“ should fail on invalid JSON (26 ms)
2025-04-15T01:06:23.3649603Z       âœ“ should fail on invalid schema (6 ms)
2025-04-15T01:06:23.3650049Z     filter
2025-04-15T01:06:23.3650561Z       âœ“ should parse status and mode fields (3 ms)
2025-04-15T01:06:23.3651238Z       âœ“ should parse date-related fields (2 ms)
2025-04-15T01:06:23.3652159Z       âœ“ should parse ID-related fields (2 ms)
2025-04-15T01:06:23.3652799Z       âœ“ should parse `projectId` field (2 ms)
2025-04-15T01:06:23.3653407Z       âœ“ should delete invalid fields (1 ms)
2025-04-15T01:06:23.3653862Z     range
2025-04-15T01:06:23.3654284Z       âœ“ should parse first and last IDs
2025-04-15T01:06:23.3654785Z       âœ“ should parse limit
2025-04-15T01:06:23.3655353Z       âœ“ should default limit to 20 if absent (1 ms)
2025-04-15T01:06:23.3655701Z 
2025-04-15T01:06:27.4404029Z PASS test/integration/services/project.service.test.ts (20.169 s)
2025-04-15T01:06:27.4415624Z   ProjectService
2025-04-15T01:06:27.4416511Z     addUser
2025-04-15T01:06:27.4417620Z       âœ“ creates a relation between the user and the project using the role project:viewer (33 ms)
2025-04-15T01:06:27.4418916Z       âœ“ creates a relation between the user and the project using the role project:admin (13 ms)
2025-04-15T01:06:27.4420110Z       âœ“ creates a relation between the user and the project using the role project:editor (13 ms)
2025-04-15T01:06:27.4421356Z       âœ“ creates a relation between the user and the project using the role project:personalOwner (13 ms)
2025-04-15T01:06:27.4423134Z       âœ“ changes the role the user has in the project if the user is already part of the project, instead of creating a new relationship (23 ms)
2025-04-15T01:06:27.4424038Z     getProjectWithScope
2025-04-15T01:06:27.4425064Z       âœ“ should return the project if the user has the role project:admin and wants the scope workflow:list (16 ms)
2025-04-15T01:06:27.4426577Z       âœ“ should return the project if the user has the role project:admin and wants the scope workflow:create (13 ms)
2025-04-15T01:06:27.4428078Z       âœ“ should return the project if the user has the role project:viewer and wants the scope workflow:create (13 ms)
2025-04-15T01:06:27.4429590Z       âœ“ should return the project if the user has the role project:viewer and wants the scope credential:create (11 ms)
2025-04-15T01:06:27.4430765Z       âœ“ should not return the project if the user is not part of it (8 ms)
2025-04-15T01:06:27.4431222Z 
2025-04-15T01:06:29.8560977Z PASS src/__tests__/credentials-overwrites.test.ts
2025-04-15T01:06:29.8562255Z   CredentialsOverwrites
2025-04-15T01:06:29.8562669Z     constructor
2025-04-15T01:06:29.8563493Z       âœ“ should parse and set overwrite data from config (9 ms)
2025-04-15T01:06:29.8564031Z     setData
2025-04-15T01:06:29.8564648Z       âœ“ should reset resolvedTypes when setting new data (1 ms)
2025-04-15T01:06:29.8565203Z     applyOverwrite
2025-04-15T01:06:29.8565815Z       âœ“ should apply overwrites only for empty fields (1 ms)
2025-04-15T01:06:29.8566652Z       âœ“ should return original data if no overwrites exist (2 ms)
2025-04-15T01:06:29.8567210Z     getOverwrites
2025-04-15T01:06:29.8567884Z       âœ“ should return undefined for unrecognized credential type (2 ms)
2025-04-15T01:06:29.8568640Z       âœ“ should cache resolved types (1 ms)
2025-04-15T01:06:29.8569304Z       âœ“ should merge overwrites from parent types (5 ms)
2025-04-15T01:06:29.8569673Z 
2025-04-15T01:06:32.8129040Z PASS src/controllers/__tests__/owner.controller.test.ts
2025-04-15T01:06:32.8142908Z   OwnerController
2025-04-15T01:06:32.8143266Z     setupOwner
2025-04-15T01:06:32.8146198Z       âœ“ should throw a BadRequestError if the instance owner is already setup (22 ms)
2025-04-15T01:06:32.8151238Z       âœ“ should setup the instance owner successfully (5 ms)
2025-04-15T01:06:32.8153253Z     dismissBanner
2025-04-15T01:06:32.8153951Z       âœ“ should not call dismissBanner if no banner is provided
2025-04-15T01:06:32.8154798Z       âœ“ should call dismissBanner with the correct banner name
2025-04-15T01:06:32.8155205Z 
2025-04-15T01:06:33.4684282Z PASS test/integration/credentials-helper.test.ts (19.877 s)
2025-04-15T01:06:33.4690108Z   CredentialsHelper
2025-04-15T01:06:33.4690929Z     credentialOwnedBySuperUsers
2025-04-15T01:06:33.4693052Z       âœ“ owners are super users (30 ms)
2025-04-15T01:06:33.4693963Z       âœ“ admins are super users (12 ms)
2025-04-15T01:06:33.4694769Z       âœ“ owners need to own the credential (12 ms)
2025-04-15T01:06:33.4695624Z       âœ“ admins need to own the credential (10 ms)
2025-04-15T01:06:33.4701914Z       âœ“ members are no super users (10 ms)
2025-04-15T01:06:33.4702924Z       âœ“ credential in team project with instance owner as an admin can use external secrets (15 ms)
2025-04-15T01:06:33.4704209Z       âœ“ credential in team project with instance admin as an admin can use external secrets (14 ms)
2025-04-15T01:06:33.4705541Z       âœ“ credential in team project with instance owner as an editor cannot use external secrets (11 ms)
2025-04-15T01:06:33.4707283Z       âœ“ credential in team project with instance admin as an editor cannot use external secrets (13 ms)
2025-04-15T01:06:33.4708808Z       âœ“ credential in team project with no instance admin or owner as part of the project cannot use external secrets (10 ms)
2025-04-15T01:06:33.4709513Z 
2025-04-15T01:06:35.8739289Z PASS src/execution-lifecycle/__tests__/save-execution-progress.test.ts
2025-04-15T01:06:35.8743871Z   saveExecutionProgress
2025-04-15T01:06:35.8746467Z     âœ“ should not try to update non-existent executions (9 ms)
2025-04-15T01:06:35.8752697Z     âœ“ should handle DB errors on execution lookup (2 ms)
2025-04-15T01:06:35.8759618Z     âœ“ should handle DB errors when updating the execution (1 ms)
2025-04-15T01:06:35.8760479Z     âœ“ should not try to update finished executions (1 ms)
2025-04-15T01:06:35.8761257Z     âœ“ should populate `.data` when it is missing (1 ms)
2025-04-15T01:06:35.8762613Z     âœ“ should augment `.data` if it already exists (2 ms)
2025-04-15T01:06:35.8763671Z     âœ“ should set last executed node correctly
2025-04-15T01:06:35.8765807Z 
2025-04-15T01:06:43.8299033Z PASS test/integration/security-audit/database-risk-reporter.test.ts (20.235 s)
2025-04-15T01:06:43.8306378Z   âœ“ should report expressions in queries (102 ms)
2025-04-15T01:06:43.8307134Z   âœ“ should report expressions in query params (13 ms)
2025-04-15T01:06:43.8322228Z   âœ“ should report unused query params (12 ms)
2025-04-15T01:06:43.8323474Z   âœ“ should not report non-database node (5 ms)
2025-04-15T01:06:43.8323851Z 
2025-04-15T01:06:56.7624399Z PASS test/integration/binary-data.api.test.ts (23.055 s)
2025-04-15T01:06:56.7626819Z   GET /binary-data
2025-04-15T01:06:56.7631176Z     should reject on missing or invalid binary data ID
2025-04-15T01:06:56.7632763Z       âœ“ on request to view (55 ms)
2025-04-15T01:06:56.7633731Z       âœ“ on request to download (21 ms)
2025-04-15T01:06:56.7634441Z     should return binary data [filesystem]
2025-04-15T01:06:56.7635216Z       âœ“ on request to view (29 ms)
2025-04-15T01:06:56.7637891Z       âœ“ on request to download (15 ms)
2025-04-15T01:06:56.7638740Z     should handle non-ASCII filename [filesystem]
2025-04-15T01:06:56.7640033Z       âœ“ on request to download (12 ms)
2025-04-15T01:06:56.7641083Z     should return 404 on file not found [filesystem]
2025-04-15T01:06:56.7642281Z       âœ“ on request to view (6 ms)
2025-04-15T01:06:56.7643077Z       âœ“ on request to download (8 ms)
2025-04-15T01:06:56.7644233Z     should return binary data [s3]
2025-04-15T01:06:56.7645259Z       âœ“ on request to view (19 ms)
2025-04-15T01:06:56.7646510Z       âœ“ on request to download (7 ms)
2025-04-15T01:06:56.7647384Z     should return 404 on file not found [s3]
2025-04-15T01:06:56.7648213Z       âœ“ on request to view (7 ms)
2025-04-15T01:06:56.7649840Z       âœ“ on request to download (5 ms)
2025-04-15T01:06:56.7650148Z 
2025-04-15T01:06:57.2530558Z PASS test/integration/database/repositories/project.repository.test.ts (21.149 s)
2025-04-15T01:06:57.2533754Z   ProjectRepository
2025-04-15T01:06:57.2534196Z     getPersonalProjectForUser
2025-04-15T01:06:57.2535226Z       âœ“ returns the personal project (44 ms)
2025-04-15T01:06:57.2535818Z       âœ“ does not return non personal projects (16 ms)
2025-04-15T01:06:57.2536342Z     getPersonalProjectForUserOrFail
2025-04-15T01:06:57.2536942Z       âœ“ returns the personal project (15 ms)
2025-04-15T01:06:57.2537587Z       âœ“ does not return non personal projects (46 ms)
2025-04-15T01:06:57.2538113Z     update personal project name
2025-04-15T01:06:57.2539005Z       âœ“ do not pass a User instance with circular references into `UserRepository.create` (26 ms)
2025-04-15T01:06:57.2539584Z 
2025-04-15T01:06:59.6142872Z PASS src/push/__tests__/websocket.push.test.ts
2025-04-15T01:06:59.6150818Z   WebSocketPush
2025-04-15T01:06:59.6151796Z     âœ“ can add a connection (7 ms)
2025-04-15T01:06:59.6152420Z     âœ“ closes a connection (1 ms)
2025-04-15T01:06:59.6153027Z     âœ“ sends data to one connection (2 ms)
2025-04-15T01:06:59.6153672Z     âœ“ sends data to all connections (2 ms)
2025-04-15T01:06:59.6154804Z     âœ“ pings all connections (1 ms)
2025-04-15T01:06:59.6155570Z     âœ“ sends data to all users connections (1 ms)
2025-04-15T01:06:59.6156372Z     âœ“ emits message event when connection receives data (3 ms)
2025-04-15T01:06:59.6157147Z     âœ“ emits doesn' emit message for client heartbeat
2025-04-15T01:06:59.6157542Z 
2025-04-15T01:07:00.5893790Z PASS src/external-secrets.ee/__tests__/external-secrets-manager.ee.test.ts
2025-04-15T01:07:00.5933451Z   External Secrets Manager
2025-04-15T01:07:00.5937046Z     âœ“ should get secret (9 ms)
2025-04-15T01:07:00.5937746Z     âœ“ should not throw errors during init (3 ms)
2025-04-15T01:07:00.5938524Z     âœ“ should not throw errors during shutdown (1 ms)
2025-04-15T01:07:00.5939238Z     âœ“ should save provider settings (4 ms)
2025-04-15T01:07:00.5940047Z     âœ“ should call provider update functions on a timer (4 ms)
2025-04-15T01:07:00.5941021Z     âœ“ should not call provider update functions if the not licensed (7 ms)
2025-04-15T01:07:00.5942392Z     âœ“ should not call provider update functions if the provider has an error (1 ms)
2025-04-15T01:07:00.5943506Z     âœ“ should reinitialize a provider when save provider settings (1 ms)
2025-04-15T01:07:00.5944041Z 
2025-04-15T01:07:02.2023295Z PASS src/execution-lifecycle/__tests__/to-save-settings.test.ts
2025-04-15T01:07:02.2024078Z   failed production executions
2025-04-15T01:07:02.2024966Z     âœ“ should favor workflow settings over defaults (5 ms)
2025-04-15T01:07:02.2025807Z     âœ“ should fall back to default if no workflow setting (1 ms)
2025-04-15T01:07:02.2026857Z   successful production executions
2025-04-15T01:07:02.2027515Z     âœ“ should favor workflow settings over defaults
2025-04-15T01:07:02.2028246Z     âœ“ should fall back to default if no workflow setting
2025-04-15T01:07:02.2028756Z   manual executions
2025-04-15T01:07:02.2029336Z     âœ“ should favor workflow setting over default (1 ms)
2025-04-15T01:07:02.2030288Z     âœ“ should favor fall back to default if workflow setting is explicit default (1 ms)
2025-04-15T01:07:02.2031215Z     âœ“ should fall back to default if no workflow setting
2025-04-15T01:07:02.2031945Z   execution progress
2025-04-15T01:07:02.2032565Z     âœ“ should favor workflow setting over default (1 ms)
2025-04-15T01:07:02.2033499Z     âœ“ should favor fall back to default if workflow setting is explicit default (1 ms)
2025-04-15T01:07:02.2034416Z     âœ“ should fall back to default if no workflow setting
2025-04-15T01:07:02.2034798Z 
2025-04-15T01:07:05.3793509Z PASS src/webhooks/__tests__/webhook-form-data.test.ts
2025-04-15T01:07:05.3798600Z   webhook-form-data
2025-04-15T01:07:05.3802827Z     createMultiFormDataParser
2025-04-15T01:07:05.3807469Z       âœ“ should parse fields from the multipart form data (45 ms)
2025-04-15T01:07:05.3812324Z       âœ“ should parse text/plain file from the multipart form data (14 ms)
2025-04-15T01:07:05.3817100Z       âœ“ should parse multiple files and fields from the multipart form data (10 ms)
2025-04-15T01:07:05.3821879Z       âœ“ should ignore file that is too large (7 ms)
2025-04-15T01:07:05.3825929Z 
2025-04-15T01:07:07.0633678Z PASS test/integration/role.api.test.ts (23.017 s)
2025-04-15T01:07:07.0635754Z   GET /roles/
2025-04-15T01:07:07.0639352Z     âœ“ should return all role categories (29 ms)
2025-04-15T01:07:07.0640275Z     âœ“ should return fixed global roles (8 ms)
2025-04-15T01:07:07.0641148Z     âœ“ should return fixed project roles (7 ms)
2025-04-15T01:07:07.0643290Z     âœ“ should return fixed credential sharing roles (5 ms)
2025-04-15T01:07:07.0646116Z     âœ“ should return fixed workflow sharing roles (5 ms)
2025-04-15T01:07:07.0646560Z 
2025-04-15T01:07:25.1778439Z PASS test/integration/license.api.test.ts (24.353 s)
2025-04-15T01:07:25.1782672Z   GET /license
2025-04-15T01:07:25.1783868Z     âœ“ should return license information to the instance owner (41 ms)
2025-04-15T01:07:25.1787574Z     âœ“ should return license information to a regular user (10 ms)
2025-04-15T01:07:25.1788213Z   POST /license/enterprise/request_trial
2025-04-15T01:07:25.1789259Z     âœ“ should work for instance owner (28 ms)
2025-04-15T01:07:25.1789959Z     âœ“ does not work for regular users (7 ms)
2025-04-15T01:07:25.1790397Z   POST /license/activate
2025-04-15T01:07:25.1790936Z     âœ“ should work for instance owner (9 ms)
2025-04-15T01:07:25.1791735Z     âœ“ does not work for regular users (7 ms)
2025-04-15T01:07:25.1792326Z     âœ“ errors out properly (23 ms)
2025-04-15T01:07:25.1792756Z   POST /license/renew
2025-04-15T01:07:25.1793277Z     âœ“ should work for instance owner (11 ms)
2025-04-15T01:07:25.1793856Z     âœ“ does not work for regular users (8 ms)
2025-04-15T01:07:25.1794451Z     âœ“ errors out properly (8 ms)
2025-04-15T01:07:25.1794736Z 
2025-04-15T01:07:27.7512103Z PASS src/task-runners/__tests__/task-runner-process.test.ts
2025-04-15T01:07:27.7516036Z   TaskRunnerProcess
2025-04-15T01:07:27.7516385Z     constructor
2025-04-15T01:07:27.7517132Z       âœ“ should throw if runner mode is external (25 ms)
2025-04-15T01:07:27.7517997Z       âœ“ should register listener for `runner:failed-heartbeat-check` event (2 ms)
2025-04-15T01:07:27.7519011Z       âœ“ should register listener for `runner:timed-out-during-task` event (4 ms)
2025-04-15T01:07:27.7519618Z     start
2025-04-15T01:07:27.7520093Z       âœ“ should propagate PATH from env as is (6 ms)
2025-04-15T01:07:27.7520873Z       âœ“ should propagate NODE_FUNCTION_ALLOW_BUILTIN from env as is (1 ms)
2025-04-15T01:07:27.7521964Z       âœ“ should propagate NODE_FUNCTION_ALLOW_EXTERNAL from env as is (13 ms)
2025-04-15T01:07:27.7522786Z       âœ“ should propagate N8N_SENTRY_DSN from env as is (1 ms)
2025-04-15T01:07:27.7523912Z       âœ“ should propagate N8N_VERSION from env as is (1 ms)
2025-04-15T01:07:27.7524592Z       âœ“ should propagate ENVIRONMENT from env as is (4 ms)
2025-04-15T01:07:27.7525348Z       âœ“ should propagate DEPLOYMENT_NAME from env as is (1 ms)
2025-04-15T01:07:27.7526046Z       âœ“ should propagate NODE_PATH from env as is (1 ms)
2025-04-15T01:07:27.7526748Z       âœ“ should propagate GENERIC_TIMEZONE from env as is (1 ms)
2025-04-15T01:07:27.7527584Z       âœ“ should pass NODE_OPTIONS env if maxOldSpaceSize is configured (1 ms)
2025-04-15T01:07:27.7528515Z       âœ“ should not pass NODE_OPTIONS env if maxOldSpaceSize is not configured (2 ms)
2025-04-15T01:07:27.7529634Z       âœ“ should use --disallow-code-generation-from-strings and --disable-proto=delete flags (1 ms)
2025-04-15T01:07:27.7530220Z 
2025-04-15T01:07:29.8243285Z PASS test/integration/controllers/oauth/oauth2.api.test.ts (24.207 s)
2025-04-15T01:07:29.8246786Z   OAuth2 API
2025-04-15T01:07:29.8254007Z     âœ“ should return a valid auth URL when the auth flow is initiated (215 ms)
2025-04-15T01:07:29.8255184Z     âœ“ should fail on auth when callback is called as another user (41 ms)
2025-04-15T01:07:29.8256797Z     âœ“ should handle a valid callback without auth (63 ms)
2025-04-15T01:07:29.8273010Z 
2025-04-15T01:07:30.8403004Z PASS test/integration/credentials/credentials.service.test.ts (23.587 s)
2025-04-15T01:07:30.8408903Z   credentials service
2025-04-15T01:07:30.8409417Z     replaceCredentialContentsForSharee
2025-04-15T01:07:30.8410533Z       âœ“ should replace the contents of the credential for sharee (23 ms)
2025-04-15T01:07:30.8411768Z       âœ“ should replace the contents of the credential for project viewer (31 ms)
2025-04-15T01:07:30.8412889Z       âœ“ should not replace the contents of the credential for project editor (25 ms)
2025-04-15T01:07:30.8413420Z 
2025-04-15T01:07:30.9718855Z PASS src/sso.ee/saml/__tests__/saml.service.ee.test.ts
2025-04-15T01:07:30.9719482Z   SamlService
2025-04-15T01:07:30.9720000Z     getAttributesFromLoginResponse
2025-04-15T01:07:30.9720889Z       âœ“ throws when any attribute is missing (131 ms)
2025-04-15T01:07:30.9721355Z     init
2025-04-15T01:07:30.9722301Z       âœ“ calls `reset` if an InvalidSamlMetadataError is thrown (2 ms)
2025-04-15T01:07:30.9723073Z       âœ“ calls `reset` if a SyntaxError is thrown (1 ms)
2025-04-15T01:07:30.9723831Z       âœ“ does not call reset and rethrows if another error is thrown (2 ms)
2025-04-15T01:07:30.9724864Z       âœ“ does not call reset if no error is thrown (1 ms)
2025-04-15T01:07:30.9725343Z     reset
2025-04-15T01:07:30.9726051Z       âœ“ disables saml login and deletes the saml `features.saml` key in the db (2 ms)
2025-04-15T01:07:30.9726559Z 
2025-04-15T01:07:33.2287760Z PASS src/controllers/__tests__/api-keys.controller.test.ts
2025-04-15T01:07:33.2288881Z   ApiKeysController
2025-04-15T01:07:33.2289526Z     createAPIKey
2025-04-15T01:07:33.2296278Z       âœ“ should create and save an API key (6 ms)
2025-04-15T01:07:33.2298790Z       âœ“ should fail to create API key if user uses a scope not allow for its role (14 ms)
2025-04-15T01:07:33.2301916Z     updateApiKey
2025-04-15T01:07:33.2302831Z       âœ“ should fail to update API key if user uses a scope not allow for its role (2 ms)
2025-04-15T01:07:33.2303516Z     getAPIKeys
2025-04-15T01:07:33.2304121Z       âœ“ should return the users api keys redacted (4 ms)
2025-04-15T01:07:33.2304650Z     deleteAPIKey
2025-04-15T01:07:33.2305181Z       âœ“ should delete the API key (4 ms)
2025-04-15T01:07:33.2305525Z 
2025-04-15T01:07:34.1389731Z PASS src/__tests__/external-hooks.test.ts
2025-04-15T01:07:34.1390358Z   ExternalHooks
2025-04-15T01:07:34.1390722Z     init()
2025-04-15T01:07:34.1391829Z       âœ“ should not load hooks if no external hook files are configured (6 ms)
2025-04-15T01:07:34.1392703Z       âœ“ should throw an error if hook file cannot be loaded (13 ms)
2025-04-15T01:07:34.1393533Z       âœ“ should successfully load hooks from valid hook file (2 ms)
2025-04-15T01:07:34.1394068Z     run()
2025-04-15T01:07:34.1394986Z       âœ“ should not throw if no hooks are registered (1 ms)
2025-04-15T01:07:34.1395639Z       âœ“ should execute registered hooks (5 ms)
2025-04-15T01:07:34.1396304Z       âœ“ should report error if hook execution fails (2 ms)
2025-04-15T01:07:34.1396658Z 
2025-04-15T01:07:37.6102963Z PASS src/credentials/__tests__/credentials.service.test.ts
2025-04-15T01:07:37.6107136Z   CredentialsService
2025-04-15T01:07:37.6110577Z     redact
2025-04-15T01:07:37.6118963Z       âœ“ should redact sensitive values (5 ms)
2025-04-15T01:07:37.6132433Z     decrypt
2025-04-15T01:07:37.6133012Z       âœ“ should redact sensitive values by default (1 ms)
2025-04-15T01:07:37.6133805Z       âœ“ should return sensitive values if `includeRawData` is true (1 ms)
2025-04-15T01:07:37.6134672Z       âœ“ should return return an empty object if decryption fails (1 ms)
2025-04-15T01:07:37.6135099Z 
2025-04-15T01:07:54.1211234Z PASS test/integration/workflows/workflow-sharing.service.test.ts (22.909 s)
2025-04-15T01:07:54.1218302Z   WorkflowSharingService
2025-04-15T01:07:54.1219728Z     getSharedWorkflowIds
2025-04-15T01:07:54.1223076Z       âœ“ should show all workflows to owners (33 ms)
2025-04-15T01:07:54.1223837Z       âœ“ should show shared workflows to users (34 ms)
2025-04-15T01:07:54.1224893Z       âœ“ should show workflows that the user has access to through a team project they are part of (15 ms)
2025-04-15T01:07:54.1226032Z       âœ“ should show workflows that the user has update access to (27 ms)
2025-04-15T01:07:54.1226476Z 
2025-04-15T01:08:00.0344228Z PASS test/integration/public-api/variables.test.ts (25.664 s)
2025-04-15T01:08:00.0345340Z   Variables in Public API
2025-04-15T01:08:00.0345892Z     GET /variables
2025-04-15T01:08:00.0347166Z       âœ“ if licensed, should return all variables with pagination (408 ms)
2025-04-15T01:08:00.0348297Z       âœ“ if not licensed, should reject (21 ms)
2025-04-15T01:08:00.0351120Z     POST /variables
2025-04-15T01:08:00.0352108Z       âœ“ if licensed, should create a new variable (36 ms)
2025-04-15T01:08:00.0352985Z       âœ“ if not licensed, should reject (20 ms)
2025-04-15T01:08:00.0353478Z     DELETE /variables/:id
2025-04-15T01:08:00.0354049Z       âœ“ if licensed, should delete a variable (62 ms)
2025-04-15T01:08:00.0354655Z       âœ“ if not licensed, should reject (20 ms)
2025-04-15T01:08:00.0354921Z 
2025-04-15T01:08:03.0815406Z PASS test/integration/executions.controller.test.ts (25.279 s)
2025-04-15T01:08:03.0816640Z   GET /executions
2025-04-15T01:08:03.0818129Z     âœ“ only returns executions of shared workflows if sharing is enabled (122 ms)
2025-04-15T01:08:03.0819161Z     âœ“ should return a scopes array for each execution (55 ms)
2025-04-15T01:08:03.0819735Z   GET /executions/:id
2025-04-15T01:08:03.0827656Z     âœ“ project viewers can view executions for workflows in the project (90 ms)
2025-04-15T01:08:03.0828890Z     âœ“ only returns executions of shared workflows if sharing is enabled (64 ms)
2025-04-15T01:08:03.0829603Z   POST /executions/delete
2025-04-15T01:08:03.0830224Z     âœ“ should hard-delete an execution (54 ms)
2025-04-15T01:08:03.0830595Z 
2025-04-15T01:08:03.1453035Z PASS src/services/__tests__/ai.service.test.ts
2025-04-15T01:08:03.1455135Z   AiService
2025-04-15T01:08:03.1457010Z     init
2025-04-15T01:08:03.1478988Z       âœ“ should not initialize client if AI assistant is not enabled (6 ms)
2025-04-15T01:08:03.1479996Z       âœ“ should initialize client when AI assistant is enabled (1 ms)
2025-04-15T01:08:03.1480575Z     chat
2025-04-15T01:08:03.1481239Z       âœ“ should call client chat method after initialization (1 ms)
2025-04-15T01:08:03.1482323Z       âœ“ should throw error if client is not initialized (17 ms)
2025-04-15T01:08:03.1482891Z     applySuggestion
2025-04-15T01:08:03.1483466Z       âœ“ should call client applySuggestion (2 ms)
2025-04-15T01:08:03.1484233Z       âœ“ should throw error if client is not initialized (1 ms)
2025-04-15T01:08:03.1484759Z     askAi
2025-04-15T01:08:03.1485404Z       âœ“ should call client askAi method after initialization (1 ms)
2025-04-15T01:08:03.1486218Z       âœ“ should throw error if client is not initialized
2025-04-15T01:08:03.1487068Z 
2025-04-15T01:08:06.4270472Z PASS src/executions/pre-execution-checks/__tests__/credentials-permission-checker.test.ts
2025-04-15T01:08:06.4275561Z   CredentialsPermissionChecker
2025-04-15T01:08:06.4280265Z     âœ“ should throw if a node has a credential without an id (15 ms)
2025-04-15T01:08:06.4285011Z     âœ“ should throw if a credential is not accessible (1 ms)
2025-04-15T01:08:06.4289739Z     âœ“ should not throw an error if the workflow has no credentials (1 ms)
2025-04-15T01:08:06.4291042Z     âœ“ should not throw an error if all credentials are accessible (1 ms)
2025-04-15T01:08:06.4300109Z     âœ“ should skip credential checks if the home project owner has global scope (1 ms)
2025-04-15T01:08:06.4300688Z 
2025-04-15T01:08:06.6027892Z PASS src/decorators/__tests__/controller.registry.test.ts
2025-04-15T01:08:06.6033328Z   ControllerRegistry
2025-04-15T01:08:06.6037577Z     Rate limiting
2025-04-15T01:08:06.6038641Z       âœ“ should not rate-limit by default (79 ms)
2025-04-15T01:08:06.6039399Z       âœ“ should rate-limit when configured (26 ms)
2025-04-15T01:08:06.6039889Z     Authorization
2025-04-15T01:08:06.6040483Z       âœ“ should not require auth if configured to skip (8 ms)
2025-04-15T01:08:06.6041178Z       âœ“ should require auth by default (5 ms)
2025-04-15T01:08:06.6041832Z     License checks
2025-04-15T01:08:06.6042405Z       âœ“ should disallow when feature is missing (14 ms)
2025-04-15T01:08:06.6043127Z       âœ“ should allow when feature is available (6 ms)
2025-04-15T01:08:06.6043599Z     Args
2025-04-15T01:08:06.6044175Z       âœ“ should pass in correct args to the route handler (7 ms)
2025-04-15T01:08:06.6044575Z 
2025-04-15T01:08:09.0878654Z PASS src/__tests__/credential-types.test.ts
2025-04-15T01:08:09.0880155Z   CredentialTypes
2025-04-15T01:08:09.0883149Z     getByName
2025-04-15T01:08:09.0885432Z       âœ“ Should throw error when calling invalid credential name (18 ms)
2025-04-15T01:08:09.0888872Z       âœ“ Should return correct credential type for valid name (2 ms)
2025-04-15T01:08:09.0889905Z     recognizes
2025-04-15T01:08:09.0891117Z       âœ“ Should recognize credential type that exists in knownCredentials (1 ms)
2025-04-15T01:08:09.0892613Z       âœ“ Should recognize credential type that exists in loadedCredentials
2025-04-15T01:08:09.0899950Z       âœ“ Should not recognize unknown credential type (1 ms)
2025-04-15T01:08:09.0900475Z     getSupportedNodes
2025-04-15T01:08:09.0901497Z       âœ“ Should return supported nodes for known credential type (1 ms)
2025-04-15T01:08:09.0902657Z       âœ“ Should return empty array for unknown credential type supported nodes (1 ms)
2025-04-15T01:08:09.0903250Z     getParentTypes
2025-04-15T01:08:09.0903871Z       âœ“ Should return parent types for credential type with extends (1 ms)
2025-04-15T01:08:09.0904741Z       âœ“ Should return empty array for credential type without extends
2025-04-15T01:08:09.0905670Z       âœ“ Should return empty array for unknown credential type parent types (1 ms)
2025-04-15T01:08:09.0906172Z 
2025-04-15T01:08:11.3521320Z PASS test/integration/webhooks.test.ts
2025-04-15T01:08:11.3521810Z   WebhookServer
2025-04-15T01:08:11.3522018Z     CORS
2025-04-15T01:08:11.3522201Z       for webhook
2025-04-15T01:08:11.3522722Z         âœ“ should handle preflight requests (41 ms)
2025-04-15T01:08:11.3523099Z         âœ“ should handle regular requests (7 ms)
2025-04-15T01:08:11.3523360Z       for webhookTest
2025-04-15T01:08:11.3523667Z         âœ“ should handle preflight requests (4 ms)
2025-04-15T01:08:11.3524048Z         âœ“ should handle regular requests (5 ms)
2025-04-15T01:08:11.3524341Z     Routing for Waiting Webhooks
2025-04-15T01:08:11.3524669Z       âœ“ should handle URLs without suffix (4 ms)
2025-04-15T01:08:11.3525271Z       âœ“ should handle URLs with suffix (4 ms)
2025-04-15T01:08:11.3525583Z 
2025-04-15T01:08:12.5083139Z PASS src/controllers/__tests__/user-settings.controller.test.ts
2025-04-15T01:08:12.5090917Z   UserSettingsController
2025-04-15T01:08:12.5092857Z     NPS Survey
2025-04-15T01:08:12.5094182Z       âœ“ updates user settings, setting response state to done (5 ms)
2025-04-15T01:08:12.5095348Z       âœ“ updates user settings, setting response state to done, ignoring other keys like waitForResponse
2025-04-15T01:08:12.5096691Z       âœ“ updates user settings, setting response state to done, ignoring other keys like ignoredCount (1 ms)
2025-04-15T01:08:12.5097916Z       âœ“ updates user settings, setting response state to done, ignoring other unknown keys
2025-04-15T01:08:12.5098847Z       âœ“ updates user settings, updating ignore count (1 ms)
2025-04-15T01:08:12.5099626Z       âœ“ updates user settings, resetting to waiting state (1 ms)
2025-04-15T01:08:12.5100570Z       âœ“ updates user settings, updating ignore count, ignoring unknown keys (1 ms)
2025-04-15T01:08:12.5101460Z       âœ“ updates user settings, setting response state to done
2025-04-15T01:08:12.5102418Z       âœ“ updates user settings, updating ignore count (1 ms)
2025-04-15T01:08:12.5103147Z       âœ“ throws error when request payload is is missing (10 ms)
2025-04-15T01:08:12.5103880Z       âœ“ throws error when request payload is is undefined (1 ms)
2025-04-15T01:08:12.5104812Z       âœ“ throws error when request payload is is responded but missing lastShownAt (1 ms)
2025-04-15T01:08:12.5105945Z       âœ“ throws error when request payload is is waitingForResponse but missing lastShownAt (1 ms)
2025-04-15T01:08:12.5107141Z       âœ“ throws error when request payload is is waitingForResponse but missing ignoredCount (1 ms)
2025-04-15T01:08:12.5107704Z 
2025-04-15T01:08:15.2609348Z PASS src/scaling/__tests__/publisher.service.test.ts
2025-04-15T01:08:15.2609942Z   Publisher
2025-04-15T01:08:15.2610257Z     constructor
2025-04-15T01:08:15.2611056Z       âœ“ should init Redis client in scaling mode (7 ms)
2025-04-15T01:08:15.2611947Z       âœ“ should not init Redis client in regular mode
2025-04-15T01:08:15.2612429Z     shutdown
2025-04-15T01:08:15.2612924Z       âœ“ should disconnect Redis client (1 ms)
2025-04-15T01:08:15.2613402Z     publishCommand
2025-04-15T01:08:15.2613989Z       âœ“ should do nothing if not in scaling mode (1 ms)
2025-04-15T01:08:15.2614837Z       âœ“ should publish command into `n8n.commands` pubsub channel (1 ms)
2025-04-15T01:08:15.2615776Z       âœ“ should not debounce `add-webhooks-triggers-and-pollers` (1 ms)
2025-04-15T01:08:15.2616661Z       âœ“ should not debounce `remove-triggers-and-pollers` (1 ms)
2025-04-15T01:08:15.2617235Z     publishWorkerResponse
2025-04-15T01:08:15.2618468Z       âœ“ should publish worker response into `n8n.worker-response` pubsub channel (1 ms)
2025-04-15T01:08:15.2619042Z 
2025-04-15T01:08:18.5527833Z PASS src/license/__tests__/license.service.test.ts
2025-04-15T01:08:18.5531703Z   LicenseService
2025-04-15T01:08:18.5543678Z     getLicenseData
2025-04-15T01:08:18.5549042Z       âœ“ should return usage and license data (7 ms)
2025-04-15T01:08:18.5549570Z     activateLicense
2025-04-15T01:08:18.5550130Z       âœ“ should handle SCHEMA_VALIDATION error (12 ms)
2025-04-15T01:08:18.5550824Z       âœ“ should handle RESERVATION_EXHAUSTED error
2025-04-15T01:08:18.5551743Z       âœ“ should handle RESERVATION_EXPIRED error (1 ms)
2025-04-15T01:08:18.5552424Z       âœ“ should handle NOT_FOUND error (7 ms)
2025-04-15T01:08:18.5553075Z       âœ“ should handle RESERVATION_CONFLICT error (1 ms)
2025-04-15T01:08:18.5553808Z       âœ“ should handle RESERVATION_DUPLICATE error (1 ms)
2025-04-15T01:08:18.5554291Z     renewLicense
2025-04-15T01:08:18.5554701Z       âœ“ on success (1 ms)
2025-04-15T01:08:18.5555123Z       âœ“ on failure (2 ms)
2025-04-15T01:08:18.5555532Z     registerCommunityEdition
2025-04-15T01:08:18.5556024Z       âœ“ on success (1 ms)
2025-04-15T01:08:18.5556414Z       âœ“ on failure (2 ms)
2025-04-15T01:08:18.5556645Z 
2025-04-15T01:08:19.3718322Z PASS test/integration/owner.api.test.ts (25.039 s)
2025-04-15T01:08:19.3721175Z   POST /owner/setup
2025-04-15T01:08:19.3722747Z     âœ“ should create owner and enable isInstanceOwnerSetUp (229 ms)
2025-04-15T01:08:19.3724009Z     âœ“ should create owner with lowercased email (136 ms)
2025-04-15T01:08:19.3726100Z     âœ“ should fail with invalid inputs (36 ms)
2025-04-15T01:08:19.3726432Z 
2025-04-15T01:08:21.9698137Z PASS src/task-runners/task-managers/__tests__/task-manager.test.ts
2025-04-15T01:08:21.9698842Z   TaskRequester
2025-04-15T01:08:21.9699167Z     handleRpc
2025-04-15T01:08:21.9699892Z       âœ“ should handle logNodeOutput rpc call (5 ms)
2025-04-15T01:08:21.9700595Z       âœ“ should handle helpers.assertBinaryData rpc call
2025-04-15T01:08:21.9701500Z       âœ“ should handle helpers.getBinaryDataBuffer rpc call (1 ms)
2025-04-15T01:08:21.9702620Z       âœ“ should handle helpers.prepareBinaryData rpc call
2025-04-15T01:08:21.9703448Z       âœ“ should handle helpers.setBinaryDataBuffer rpc call
2025-04-15T01:08:21.9704238Z       âœ“ should handle helpers.binaryToString rpc call (5 ms)
2025-04-15T01:08:21.9704990Z       âœ“ should handle helpers.httpRequest rpc call (1 ms)
2025-04-15T01:08:21.9705772Z       âœ“ converts any serialized buffer arguments into buffers (1 ms)
2025-04-15T01:08:21.9706279Z       errors
2025-04-15T01:08:21.9706966Z         âœ“ sends method not allowed error if method is not in the allow list
2025-04-15T01:08:21.9707741Z         âœ“ sends error if method throws (1 ms)
2025-04-15T01:08:21.9708053Z 
2025-04-15T01:08:24.9534563Z PASS src/databases/repositories/__tests__/execution.repository.test.ts
2025-04-15T01:08:24.9544619Z   ExecutionRepository
2025-04-15T01:08:24.9545117Z     getWaitingExecutions()
2025-04-15T01:08:24.9546279Z       âœ“ on sqlite, should be called with expected args (6 ms)
2025-04-15T01:08:24.9547192Z       âœ“ on postgresdb, should be called with expected args (1 ms)
2025-04-15T01:08:24.9547811Z     deleteExecutionsByFilter
2025-04-15T01:08:24.9548412Z       âœ“ should delete binary data (1 ms)
2025-04-15T01:08:24.9548888Z     updateExistingExecution
2025-04-15T01:08:24.9549652Z       âœ“ should update execution and data in transaction on sqlite (2 ms)
2025-04-15T01:08:24.9550602Z       âœ“ should update execution and data in transaction on postgresdb
2025-04-15T01:08:24.9551492Z       âœ“ should update execution and data in transaction on mysqldb
2025-04-15T01:08:24.9552175Z 
2025-04-15T01:08:35.6333353Z PASS test/integration/workflow-history-manager.test.ts (24.099 s)
2025-04-15T01:08:35.6335079Z   Workflow History Manager
2025-04-15T01:08:35.6335911Z     âœ“ should prune on interval (15 ms)
2025-04-15T01:08:35.6336562Z     âœ“ should not prune when not licensed (85 ms)
2025-04-15T01:08:35.6337318Z     âœ“ should not prune when licensed but disabled (27 ms)
2025-04-15T01:08:35.6338576Z     âœ“ should not prune when both prune times are -1 (infinite) (24 ms)
2025-04-15T01:08:35.6339530Z     âœ“ should prune when config prune time is not -1 (infinite) (23 ms)
2025-04-15T01:08:35.6340431Z     âœ“ should prune when license prune time is not -1 (infinite) (21 ms)
2025-04-15T01:08:35.6341263Z     âœ“ should only prune versions older than prune time (40 ms)
2025-04-15T01:08:35.6341849Z 
2025-04-15T01:08:40.1128930Z PASS src/environments.ee/source-control/__tests__/source-control.controller.ee.test.ts
2025-04-15T01:08:40.1130289Z   SourceControlController
2025-04-15T01:08:40.1131043Z     pushWorkfolder
2025-04-15T01:08:40.1132466Z       âœ“ should push workfolder with expected parameters (9 ms)
2025-04-15T01:08:40.1133498Z     pullWorkfolder
2025-04-15T01:08:40.1134400Z       âœ“ should pull workfolder with expected parameters (2 ms)
2025-04-15T01:08:40.1141997Z     getStatus
2025-04-15T01:08:40.1142698Z       âœ“ should call getStatus with expected parameters (3 ms)
2025-04-15T01:08:40.1143253Z     status
2025-04-15T01:08:40.1143868Z       âœ“ should call getStatus with expected parameters (1 ms)
2025-04-15T01:08:40.1144254Z 
2025-04-15T01:08:42.3512579Z PASS src/modules/insights/__tests__/insights.controller.test.ts (23.571 s)
2025-04-15T01:08:42.3513856Z   InsightsController
2025-04-15T01:08:42.3514476Z     getInsightsSummary
2025-04-15T01:08:42.3515289Z       âœ“ should return default insights if no data (8 ms)
2025-04-15T01:08:42.3516499Z       âœ“ should return the insights summary with null deviation if insights exist only for current period (1 ms)
2025-04-15T01:08:42.3518232Z       âœ“ should return the insights summary if insights exist for both periods (1 ms)
2025-04-15T01:08:42.3520850Z 
2025-04-15T01:08:42.5763849Z PASS src/push/__tests__/sse.push.test.ts
2025-04-15T01:08:42.5767535Z   SSEPush
2025-04-15T01:08:42.5770148Z     âœ“ pings all connections (6 ms)
2025-04-15T01:08:42.5777904Z     âœ“ closes all connections (2 ms)
2025-04-15T01:08:42.5778386Z     add
2025-04-15T01:08:42.5778887Z       âœ“ adds a connection (13 ms)
2025-04-15T01:08:42.5779389Z     closes a connection
2025-04-15T01:08:42.5779886Z       âœ“ on "end" event (3 ms)
2025-04-15T01:08:42.5780430Z       âœ“ on "close" event (2 ms)
2025-04-15T01:08:42.5781344Z       âœ“ on "finish" event (2 ms)
2025-04-15T01:08:42.5783540Z     sends data
2025-04-15T01:08:42.5784088Z       âœ“ to one connection (3 ms)
2025-04-15T01:08:42.5784647Z       âœ“ to all connections (2 ms)
2025-04-15T01:08:42.5785208Z       âœ“ to a specific user (10 ms)
2025-04-15T01:08:42.5785525Z 
2025-04-15T01:08:45.5395395Z PASS src/services/__tests__/active-workflows.service.test.ts
2025-04-15T01:08:45.5397000Z   ActiveWorkflowsService
2025-04-15T01:08:45.5397828Z     getAllActiveIdsInStorage
2025-04-15T01:08:45.5400199Z       âœ“ should filter out any workflow ids that have activation errors (8 ms)
2025-04-15T01:08:45.5401377Z     getAllActiveIdsFor
2025-04-15T01:08:45.5405234Z       âœ“ should return all workflow ids when user has full access (2 ms)
2025-04-15T01:08:45.5406793Z       âœ“ should filter out workflow ids that the user does not have access to (1 ms)
2025-04-15T01:08:45.5408729Z     getActivationError
2025-04-15T01:08:45.5409709Z       âœ“ should throw a BadRequestError a user does not have access to the workflow id (19 ms)
2025-04-15T01:08:45.5410767Z       âœ“ should return the error when the user has access (1 ms)
2025-04-15T01:08:45.5411194Z 
2025-04-15T01:08:48.6805783Z PASS src/workflows/workflow-history.ee/__tests__/workflow-history.service.ee.test.ts
2025-04-15T01:08:48.6808421Z   WorkflowHistoryService
2025-04-15T01:08:48.6810349Z     saveVersion
2025-04-15T01:08:48.6819130Z       âœ“ should save a new version when workflow history is enabled and nodes and connections are present (5 ms)
2025-04-15T01:08:48.6828903Z       âœ“ should not save a new version when workflow history is disabled (1 ms)
2025-04-15T01:08:48.6829958Z       âœ“ should not save a new version when nodes or connections are missing (1 ms)
2025-04-15T01:08:48.6831406Z       âœ“ should log an error when failed to save workflow history version (7 ms)
2025-04-15T01:08:48.6832137Z 
2025-04-15T01:08:50.6757897Z PASS test/integration/commands/reset.cmd.test.ts (25.554 s)
2025-04-15T01:08:50.6764075Z   âœ“ user-management:reset should reset DB to default user state (118 ms)
2025-04-15T01:08:50.6764745Z 
2025-04-15T01:08:53.4465242Z PASS src/task-runners/task-broker/auth/__tests__/task-broker-auth.controller.test.ts
2025-04-15T01:08:53.4470401Z   TaskBrokerAuthController
2025-04-15T01:08:53.4473413Z     createGrantToken
2025-04-15T01:08:53.4476620Z       âœ“ should throw BadRequestError when auth token is missing (14 ms)
2025-04-15T01:08:53.4477949Z       âœ“ should throw ForbiddenError when auth token is invalid (1 ms)
2025-04-15T01:08:53.4485635Z       âœ“ should return rant token when auth token is valid (5 ms)
2025-04-15T01:08:53.4486227Z     authMiddleware
2025-04-15T01:08:53.4486928Z       âœ“ should respond with 401 when grant token is missing (2 ms)
2025-04-15T01:08:53.4487810Z       âœ“ should respond with 403 when grant token is invalid (2 ms)
2025-04-15T01:08:53.4488670Z       âœ“ should call next() when grant token is valid (8 ms)
2025-04-15T01:08:53.4489076Z 
2025-04-15T01:08:55.8837708Z PASS src/task-runners/task-managers/__tests__/data-request-response-builder.test.ts
2025-04-15T01:08:55.8843139Z   DataRequestResponseBuilder
2025-04-15T01:08:55.8853235Z     âœ“ picks only specific properties for additional data (8 ms)
2025-04-15T01:08:55.8855379Z     âœ“ picks only specific properties for workflow (3 ms)
2025-04-15T01:08:55.8856588Z     âœ“ clears nodeExecutionStack, waitingExecution and waitingExecutionSource from runExecutionData (3 ms)
2025-04-15T01:08:55.8857863Z 
2025-04-15T01:08:57.5951282Z PASS test/integration/task-runners/task-runner-process.test.ts (8.69 s)
2025-04-15T01:08:57.5956266Z   TaskRunnerProcess
2025-04-15T01:08:57.5960504Z     âœ“ should start and connect the task runner (1243 ms)
2025-04-15T01:08:57.5965235Z     âœ“ should stop an disconnect the task runner (1430 ms)
2025-04-15T01:08:57.5969565Z     âœ“ should restart the task runner if it exits (2485 ms)
2025-04-15T01:08:57.5973757Z     âœ“ should work together with restart loop detector (1031 ms)
2025-04-15T01:08:57.5975266Z 
2025-04-15T01:09:00.8469593Z PASS src/controllers/__tests__/ai.controller.test.ts
2025-04-15T01:09:00.8474288Z   AiController
2025-04-15T01:09:00.8476642Z     chat
2025-04-15T01:09:00.8479644Z       âœ“ should handle chat request successfully (12 ms)
2025-04-15T01:09:00.8482231Z       âœ“ should throw InternalServerError if chat fails (13 ms)
2025-04-15T01:09:00.8482810Z     applySuggestion
2025-04-15T01:09:00.8483438Z       âœ“ should apply suggestion successfully (2 ms)
2025-04-15T01:09:00.8484324Z       âœ“ should throw InternalServerError if applying suggestion fails (1 ms)
2025-04-15T01:09:00.8484962Z     askAi method
2025-04-15T01:09:00.8485481Z       âœ“ should ask AI successfully (2 ms)
2025-04-15T01:09:00.8486241Z       âœ“ should throw InternalServerError if asking AI fails (1 ms)
2025-04-15T01:09:00.8486674Z 
2025-04-15T01:09:03.8393797Z PASS src/databases/repositories/__tests__/shared-credentials.repository.test.ts
2025-04-15T01:09:03.8394645Z   SharedCredentialsRepository
2025-04-15T01:09:03.8395080Z     findCredentialForUser
2025-04-15T01:09:03.8395946Z       âœ“ should allow instance owner access to all credentials (6 ms)
2025-04-15T01:09:03.8396560Z       âœ“ should allow members (1 ms)
2025-04-15T01:09:03.8397259Z       âœ“ should return null when no shared credential is found (1 ms)
2025-04-15T01:09:03.8397685Z 
2025-04-15T01:09:06.3057048Z PASS src/task-runners/__tests__/forward-to-logger.test.ts
2025-04-15T01:09:06.3064422Z   forwardToLogger
2025-04-15T01:09:06.3065225Z     âœ“ should forward stdout data to logger.info (12 ms)
2025-04-15T01:09:06.3065917Z     âœ“ should forward stderr data to logger.error (1 ms)
2025-04-15T01:09:06.3066574Z     âœ“ should remove trailing newline from stdout (1 ms)
2025-04-15T01:09:06.3067238Z     âœ“ should remove trailing newline from stderr (1 ms)
2025-04-15T01:09:06.3067918Z     âœ“ should forward stderr data to logger.error (1 ms)
2025-04-15T01:09:06.3068950Z     âœ“ should include prefix if provided for stdout
2025-04-15T01:09:06.3069664Z     âœ“ should include prefix if provided for stderr (1 ms)
2025-04-15T01:09:06.3070506Z     âœ“ should make sure there is no duplicate space after prefix for stdout
2025-04-15T01:09:06.3071412Z     âœ“ should make sure there is no duplicate space after prefix for stderr
2025-04-15T01:09:06.3072029Z 
2025-04-15T01:09:07.5310096Z PASS test/integration/security-audit/nodes-risk-reporter.test.ts (24.738 s)
2025-04-15T01:09:07.5315097Z   âœ“ should report risky official nodes (133 ms)
2025-04-15T01:09:07.5315956Z   âœ“ should not report non-risky official nodes (24 ms)
2025-04-15T01:09:07.5316697Z   âœ“ should report community nodes (7 ms)
2025-04-15T01:09:07.5317024Z 
2025-04-15T01:09:09.3785723Z PASS src/services/__tests__/user.service.test.ts
2025-04-15T01:09:09.3791193Z   UserService
2025-04-15T01:09:09.3797841Z     toPublic
2025-04-15T01:09:09.3798895Z       âœ“ should remove sensitive properties (6 ms)
2025-04-15T01:09:09.3803317Z       âœ“ should add scopes if requested (1 ms)
2025-04-15T01:09:09.3804146Z       âœ“ should add invite URL if requested (1 ms)
2025-04-15T01:09:09.3804874Z     update
2025-04-15T01:09:09.3806382Z       âœ“ should use `save` instead of `update` (1 ms)
2025-04-15T01:09:09.3806730Z 
2025-04-15T01:09:11.8437381Z PASS src/validators/__tests__/no-xss.validator.test.ts
2025-04-15T01:09:11.8438381Z   NoXss
2025-04-15T01:09:11.8438703Z     Scripts
2025-04-15T01:09:11.8439407Z       âœ“ should block <script src/> (9 ms)
2025-04-15T01:09:11.8440558Z       âœ“ should block <script>alert('xss')</script> (1 ms)
2025-04-15T01:09:11.8441240Z       âœ“ should block <a href="#">Jack</a> (1 ms)
2025-04-15T01:09:11.8441911Z     Names
2025-04-15T01:09:11.8442383Z       âœ“ should allow Johann StrauÃŸ (1 ms)
2025-04-15T01:09:11.8442945Z       âœ“ should allow Ð’Ð°Ð³Ð¸Ñ„ Ð¡Ó™Ð¼Ó™Ð´Ð¾Ò“Ð»Ñƒ
2025-04-15T01:09:11.8443465Z       âœ“ should allow RenÃ© Magritte
2025-04-15T01:09:11.8444001Z       âœ“ should allow à¦¸à§à¦•à§à¦®à¦¾à¦° à¦°à¦¾à§Ÿ (1 ms)
2025-04-15T01:09:11.8444562Z       âœ“ should allow à½˜à½‚à½¼à½“à¼‹à½”à½¼à¼‹à½¢à¾¡à½¼à¼‹à½¢à¾—à½ºà¼
2025-04-15T01:09:11.8445100Z       âœ“ should allow Ø¹Ø¨Ø¯Ø§Ù„Ø­Ù„ÙŠÙ… Ø­Ø§ÙØ¸ (1 ms)
2025-04-15T01:09:11.8445523Z     ISO-8601 timestamps
2025-04-15T01:09:11.8446077Z       âœ“ should allow 2022-01-01T00:00:00.000Z (1 ms)
2025-04-15T01:09:11.8446761Z       âœ“ should allow 2022-01-01T00:00:00.000+02:00 (1 ms)
2025-04-15T01:09:11.8447225Z     Semver versions
2025-04-15T01:09:11.8447660Z       âœ“ should allow 1.0.0 (1 ms)
2025-04-15T01:09:11.8448159Z       âœ“ should allow 1.0.0-alpha.1
2025-04-15T01:09:11.8448593Z     Miscellaneous strings
2025-04-15T01:09:11.8449058Z       âœ“ should allow CI/CD (1 ms)
2025-04-15T01:09:11.8449448Z     Array of strings
2025-04-15T01:09:11.8450222Z       âœ“ should allow array: ["cloud-infrastructure-orchestration","ci-cd","reporting"]
2025-04-15T01:09:11.8451395Z       âœ“ should allow array: ["automationGoalDevops","cloudComputing","containerization"] (1 ms)
2025-04-15T01:09:11.8453316Z       âœ“ should reject array containing invalid string: ["valid-string","<script>alert(\"xss\")</script>","another-valid-string"] (1 ms)
2025-04-15T01:09:11.8454873Z       âœ“ should reject array containing invalid string: ["<img src=\"x\" onerror=\"alert('XSS')\">","valid-string"] (1 ms)
2025-04-15T01:09:11.8455551Z 
2025-04-15T01:09:23.3856107Z PASS test/integration/project.service.integration.test.ts (25.521 s)
2025-04-15T01:09:23.3857160Z   ProjectService
2025-04-15T01:09:23.3857657Z     findRolesInProjects
2025-04-15T01:09:23.3858215Z       when user has roles in projects where workflow is accessible
2025-04-15T01:09:23.3859119Z         âœ“ should return roles and project IDs (56 ms)
2025-04-15T01:09:23.3859802Z       when user has no roles in projects where workflow is accessible
2025-04-15T01:09:23.3860567Z         âœ“ should return project IDs but no roles (14 ms)
2025-04-15T01:09:23.3861244Z       when user has roles in projects where workflow is inaccessible
2025-04-15T01:09:23.3862218Z         âœ“ should return project IDs but no roles (28 ms)
2025-04-15T01:09:23.3862576Z 
2025-04-15T01:09:35.4606112Z PASS test/integration/ai/ai.api.test.ts (27.701 s)
2025-04-15T01:09:35.4607122Z   POST /ai/free-credits
2025-04-15T01:09:35.4608125Z     âœ“ should create OpenAI managed credential (108 ms)
2025-04-15T01:09:35.4609482Z 
2025-04-15T01:09:38.1557120Z PASS test/integration/activation-errors.service.test.ts
2025-04-15T01:09:38.1558733Z   ActivationErrorsService
2025-04-15T01:09:38.1559834Z     register
2025-04-15T01:09:38.1562614Z       âœ“ should register an activation error for a workflow (7 ms)
2025-04-15T01:09:38.1564984Z     deregister
2025-04-15T01:09:38.1565693Z       âœ“ should deregister an activation error for a workflow (1 ms)
2025-04-15T01:09:38.1566254Z     get
2025-04-15T01:09:38.1566806Z       âœ“ should retrieve an activation error for a workflow
2025-04-15T01:09:38.1567667Z       âœ“ should return `null` if no activation error found for a workflow (1 ms)
2025-04-15T01:09:38.1568255Z     getAll
2025-04-15T01:09:38.1568766Z       âœ“ should retrieve all activation errors (1 ms)
2025-04-15T01:09:38.1569536Z       âœ“ should return an empty object if no activation errors
2025-04-15T01:09:38.1570044Z     clearAll()
2025-04-15T01:09:38.1570534Z       âœ“ should clear activation errors (1 ms)
2025-04-15T01:09:38.1570846Z 
2025-04-15T01:09:39.3033298Z PASS test/integration/tags.api.test.ts (27.206 s)
2025-04-15T01:09:39.3035615Z   POST /tags
2025-04-15T01:09:39.3036587Z     âœ“ should create tag (44 ms)
2025-04-15T01:09:39.3037215Z     âœ“ should not create duplicate tag (80 ms)
2025-04-15T01:09:39.3037819Z     âœ“ should delete tag (14 ms)
2025-04-15T01:09:39.3038391Z     âœ“ should update tag name (25 ms)
2025-04-15T01:09:39.3038969Z     âœ“ should retrieve all tags (16 ms)
2025-04-15T01:09:39.3039684Z     âœ“ should retrieve all tags with with usage count (18 ms)
2025-04-15T01:09:39.3040099Z 
2025-04-15T01:09:40.6963019Z PASS src/webhooks/__tests__/test-webhook-registrations.service.test.ts
2025-04-15T01:09:40.6964535Z   TestWebhookRegistrationsService
2025-04-15T01:09:40.6965170Z     register()
2025-04-15T01:09:40.6966261Z       âœ“ should register a test webhook registration (9 ms)
2025-04-15T01:09:40.6967447Z       âœ“ should skip setting TTL in single-main setup
2025-04-15T01:09:40.6968176Z     deregister()
2025-04-15T01:09:40.6969014Z       âœ“ should deregister a test webhook registration (1 ms)
2025-04-15T01:09:40.6969750Z     get()
2025-04-15T01:09:40.6970529Z       âœ“ should retrieve a test webhook registration (1 ms)
2025-04-15T01:09:40.6971958Z       âœ“ should return undefined if no such test webhook registration was found (1 ms)
2025-04-15T01:09:40.6972905Z     getAllKeys()
2025-04-15T01:09:40.6973845Z       âœ“ should retrieve all test webhook registration keys (1 ms)
2025-04-15T01:09:40.6974846Z     getAllRegistrations()
2025-04-15T01:09:40.6975791Z       âœ“ should retrieve all test webhook registrations (2 ms)
2025-04-15T01:09:40.6976588Z     deregisterAll()
2025-04-15T01:09:40.6977448Z       âœ“ should deregister all test webhook registrations
2025-04-15T01:09:40.6978555Z     toKey()
2025-04-15T01:09:40.6979887Z       âœ“ should convert a test webhook registration to a key (1 ms)
2025-04-15T01:09:40.6980620Z 
2025-04-15T01:09:42.4421720Z PASS src/services/__tests__/naming.service.test.ts
2025-04-15T01:09:42.4426564Z   NamingService
2025-04-15T01:09:42.4430896Z     getUniqueWorkflowName()
2025-04-15T01:09:42.4438720Z       âœ“ should return requested name if already unique (7 ms)
2025-04-15T01:09:42.4443725Z       âœ“ should return requested name suffixed if already existing once (1 ms)
2025-04-15T01:09:42.4448764Z       âœ“ should return requested name with incremented suffix if already suffixed (1 ms)
2025-04-15T01:09:42.4449937Z     getUniqueCredentialName()
2025-04-15T01:09:42.4451343Z       âœ“ should return requested name if already unique (1 ms)
2025-04-15T01:09:42.4452875Z       âœ“ should return requested name suffixed if already existing once (1 ms)
2025-04-15T01:09:42.4457900Z       âœ“ should return requested name with incremented suffix if already suffixed (1 ms)
2025-04-15T01:09:42.4460062Z 
2025-04-15T01:09:45.3035792Z PASS src/user-management/email/__tests__/user-management-mailer.test.ts
2025-04-15T01:09:45.3037889Z   UserManagementMailer
2025-04-15T01:09:45.3038325Z     when SMTP is not configured
2025-04-15T01:09:45.3039075Z       âœ“ should not setup email transport (5 ms)
2025-04-15T01:09:45.3039612Z       âœ“ should not send emails
2025-04-15T01:09:45.3039996Z     when SMTP is configured
2025-04-15T01:09:45.3040492Z       âœ“ should setup email transport (2 ms)
2025-04-15T01:09:45.3041079Z       âœ“ should send invitation emails (13 ms)
2025-04-15T01:09:45.3042403Z       âœ“ should send password reset emails (4 ms)
2025-04-15T01:09:45.3042748Z 
2025-04-15T01:09:51.6034644Z PASS test/integration/commands/worker.cmd.test.ts (28.05 s)
2025-04-15T01:09:51.6036162Z   âœ“ worker initializes all its components (157 ms)
2025-04-15T01:09:51.6038835Z 
2025-04-15T01:10:07.6390077Z PASS test/integration/database/repositories/execution.repository.test.ts (26.7 s)
2025-04-15T01:10:07.6391917Z   ExecutionRepository
2025-04-15T01:10:07.6392817Z     createNewExecution
2025-04-15T01:10:07.6398007Z       âœ“ should save execution data (35 ms)
2025-04-15T01:10:07.6398904Z       âœ“ should not create execution if execution data insert fails (17 ms)
2025-04-15T01:10:07.6399365Z 
2025-04-15T01:10:11.3774755Z PASS src/webhooks/__tests__/waiting-webhooks.test.ts
2025-04-15T01:10:11.3775451Z   WaitingWebhooks
2025-04-15T01:10:11.3779091Z     âœ“ should throw NotFoundError if there is no execution to resume (26 ms)
2025-04-15T01:10:11.3781421Z     âœ“ should throw ConflictError if the execution to resume is already running (1 ms)
2025-04-15T01:10:11.3785831Z     âœ“ should throw ConflictError if the execution to resume already finished (2 ms)
2025-04-15T01:10:11.3786970Z     âœ“ should mark as test webhook when execution mode is manual (2 ms)
2025-04-15T01:10:11.3787950Z 
2025-04-15T01:10:12.1140661Z PASS test/integration/license-metrics.repository.test.ts (26.589 s)
2025-04-15T01:10:12.1146497Z   LicenseMetricsRepository
2025-04-15T01:10:12.1146964Z     getLicenseRenewalMetrics
2025-04-15T01:10:12.1147873Z       âœ“ should return license renewal metrics (81 ms)
2025-04-15T01:10:12.1148761Z       âœ“ should handle zero execution statistics correctly (15 ms)
2025-04-15T01:10:12.1149214Z 
2025-04-15T01:10:15.2169243Z PASS src/modules/insights/__tests__/insights.module.test.ts
2025-04-15T01:10:15.2169914Z   InsightsModule
2025-04-15T01:10:15.2170279Z     backgroundProcess
2025-04-15T01:10:15.2171263Z       âœ“ should start background process if instance is main and leader (9 ms)
2025-04-15T01:10:15.2172698Z       âœ“ should not start background process if instance is main but not leader (1 ms)
2025-04-15T01:10:15.2173707Z       âœ“ should start background process on leader takeover (1 ms)
2025-04-15T01:10:15.2174587Z       âœ“ should stop background process on leader stepdown (2 ms)
2025-04-15T01:10:15.2175015Z 
2025-04-15T01:10:17.9301294Z PASS src/evaluation.ee/test-runner/__tests__/create-pin-data.ee.test.ts
2025-04-15T01:10:17.9340465Z   createPinData
2025-04-15T01:10:17.9342772Z     âœ“ should create pin data from past execution data (7 ms)
2025-04-15T01:10:17.9347078Z     âœ“ should not create pin data for non-existing mocked nodes (1 ms)
2025-04-15T01:10:17.9349690Z     âœ“ should create pin data for all mocked nodes (1 ms)
2025-04-15T01:10:17.9350645Z     âœ“ should return empty object if no mocked nodes are provided
2025-04-15T01:10:17.9351342Z     âœ“ should create pin data for all mocked nodes with renamed nodes (1 ms)
2025-04-15T01:10:17.9351875Z 
2025-04-15T01:10:20.2783137Z PASS test/integration/workflows/workflow.service.test.ts (28.443 s)
2025-04-15T01:10:20.2786293Z   update()
2025-04-15T01:10:20.2789549Z     âœ“ should remove and re-add to active workflows on `active: true` payload (75 ms)
2025-04-15T01:10:20.2792869Z     âœ“ should remove from active workflows on `active: false` payload (33 ms)
2025-04-15T01:10:20.2797228Z 
2025-04-15T01:10:22.1255646Z PASS src/controllers/__tests__/auth.controller.test.ts
2025-04-15T01:10:22.1256360Z   AuthController
2025-04-15T01:10:22.1256695Z     login
2025-04-15T01:10:22.1257671Z       âœ“ should not validate email in "emailOrLdapLoginId" if LDAP is enabled (7 ms)
2025-04-15T01:10:22.1258112Z 
2025-04-15T01:10:22.7080586Z PASS src/concurrency/__tests__/concurrency-queue.test.ts
2025-04-15T01:10:22.7083967Z   ConcurrencyQueue
2025-04-15T01:10:22.7084864Z     âœ“ should limit concurrency (12 ms)
2025-04-15T01:10:22.7085650Z     âœ“ should debounce emitting of the `concurrency-check` event (1 ms)
2025-04-15T01:10:22.7086100Z 
2025-04-15T01:10:25.7283019Z PASS src/task-runners/task-broker/auth/__tests__/task-broker-auth.service.test.ts
2025-04-15T01:10:25.7288863Z   TaskBrokerAuthService
2025-04-15T01:10:25.7292412Z     isValidAuthToken
2025-04-15T01:10:25.7295459Z       âœ“ should be valid for the configured token (5 ms)
2025-04-15T01:10:25.7301484Z       âœ“ should be invalid for anything else
2025-04-15T01:10:25.7302189Z     createGrantToken
2025-04-15T01:10:25.7302806Z       âœ“ should generate a random token (3 ms)
2025-04-15T01:10:25.7303568Z       âœ“ should store the generated token in cache (2 ms)
2025-04-15T01:10:25.7304892Z     tryConsumeGrantToken
2025-04-15T01:10:25.7306508Z       âœ“ should return false for an invalid grant token
2025-04-15T01:10:25.7308975Z       âœ“ should return true for a valid grant token (1 ms)
2025-04-15T01:10:25.7312098Z       âœ“ should return false for a already used grant token
2025-04-15T01:10:25.7313502Z       âœ“ should return false for an expired grant token (302 ms)
2025-04-15T01:10:25.7314684Z 
2025-04-15T01:10:41.5247966Z PASS test/integration/commands/update/workflow.test.ts (29.214 s)
2025-04-15T01:10:41.5249723Z   âœ“ update:workflow can activate all workflows (43 ms)
2025-04-15T01:10:41.5251445Z   âœ“ update:workflow can deactivate all workflows (14 ms)
2025-04-15T01:10:41.5252807Z   âœ“ update:workflow can activate a specific workflow (20 ms)
2025-04-15T01:10:41.5253957Z   âœ“ update:workflow can deactivate a specific workflow (11 ms)
2025-04-15T01:10:41.5256990Z 
2025-04-15T01:10:44.5775993Z PASS src/external-secrets.ee/providers/__tests__/gcp-secrets-manager.test.ts
2025-04-15T01:10:44.5776783Z   GCP Secrets Manager
2025-04-15T01:10:44.5777557Z     âœ“ should update cached secrets (14 ms)
2025-04-15T01:10:44.5777911Z 
2025-04-15T01:10:49.3568248Z PASS src/credentials/__tests__/credentials.controller.test.ts
2025-04-15T01:10:49.3572668Z   CredentialsController
2025-04-15T01:10:49.3574653Z     createCredentials
2025-04-15T01:10:49.3576546Z       âœ“ should create new credentials and emit "credentials-created" (8 ms)
2025-04-15T01:10:49.3577255Z 
2025-04-15T01:10:52.7793371Z PASS test/integration/database/repositories/workflow.repository.test.ts (26.874 s)
2025-04-15T01:10:52.7797656Z   WorkflowRepository
2025-04-15T01:10:52.7799124Z     activateAll
2025-04-15T01:10:52.7801309Z       âœ“ should activate all workflows (34 ms)
2025-04-15T01:10:52.7803676Z     deactivateAll
2025-04-15T01:10:52.7804216Z       âœ“ should deactivate all workflows (10 ms)
2025-04-15T01:10:52.7804666Z     getActiveIds
2025-04-15T01:10:52.7805815Z       âœ“ should return all active workflow IDs when invoked without maxResults (10 ms)
2025-04-15T01:10:52.7806961Z       âœ“ should return a capped number of active workflow IDs when invoked with maxResults (10 ms)
2025-04-15T01:10:52.7807527Z 
2025-04-15T01:10:52.8604700Z PASS test/integration/environments/source-control.api.test.ts (30.502 s)
2025-04-15T01:10:52.8605572Z   GET /sourceControl/preferences
2025-04-15T01:10:52.8609744Z     âœ“ should return Source Control preferences (34 ms)
2025-04-15T01:10:52.8612710Z     âœ“ should return repo sync status (13 ms)
2025-04-15T01:10:52.8613569Z     âœ“ refreshing key pairsshould return new rsa key (1598 ms)
2025-04-15T01:10:52.8613995Z 
2025-04-15T01:10:53.8888417Z PASS src/scaling/__tests__/job-processor.service.test.ts
2025-04-15T01:10:53.8899851Z   JobProcessor
2025-04-15T01:10:53.8904031Z     âœ“ should refrain from processing a crashed execution (38 ms)
2025-04-15T01:10:53.8906582Z     âœ“ should use manualExecutionService to process a job in "manual" mode (13 ms)
2025-04-15T01:10:53.8914633Z     âœ“ should use manualExecutionService to process a job in "evaluation" mode (2 ms)
2025-04-15T01:10:53.8915281Z 
2025-04-15T01:10:55.3194976Z PASS src/collaboration/__tests__/collaboration.state.test.ts
2025-04-15T01:10:55.3207868Z   CollaborationState
2025-04-15T01:10:55.3212217Z     addCollaborator
2025-04-15T01:10:55.3215743Z       âœ“ should add workflow user with correct cache key and value (9 ms)
2025-04-15T01:10:55.3218633Z     removeCollaborator
2025-04-15T01:10:55.3221797Z       âœ“ should remove workflow user with correct cache key (1 ms)
2025-04-15T01:10:55.3235033Z     getCollaborators
2025-04-15T01:10:55.3235759Z       âœ“ should get workflows with correct cache key (1 ms)
2025-04-15T01:10:55.3236566Z       âœ“ should get workflow users that are not expired (2 ms)
2025-04-15T01:10:55.3236975Z 
2025-04-15T01:10:55.6119242Z PASS src/decorators/__tests__/on-shutdown.test.ts
2025-04-15T01:10:55.6120274Z   OnShutdown
2025-04-15T01:10:55.6121440Z     âœ“ should register a methods that is decorated with OnShutdown (8 ms)
2025-04-15T01:10:55.6123003Z     âœ“ should register multiple methods in the same class (7 ms)
2025-04-15T01:10:55.6126620Z     âœ“ should use the given priority (1 ms)
2025-04-15T01:10:55.6128309Z     âœ“ should throw an error if the decorated member is not a function (11 ms)
2025-04-15T01:10:55.6129993Z     âœ“ should throw if the priority is invalid (6 ms)
2025-04-15T01:10:55.6130970Z 
2025-04-15T01:10:56.4205512Z PASS src/evaluation.ee/test-runner/__tests__/evaluation-metrics.ee.test.ts
2025-04-15T01:10:56.4210383Z   EvaluationMetrics
2025-04-15T01:10:56.4215242Z     âœ“ should aggregate metrics correctly (9 ms)
2025-04-15T01:10:56.4220227Z     âœ“ should throw when metric value is not number (13 ms)
2025-04-15T01:10:56.4221206Z     âœ“ should handle empty metrics
2025-04-15T01:10:56.4222917Z     âœ“ should handle empty testMetrics
2025-04-15T01:10:56.4225263Z     âœ“ should ignore non-relevant values (1 ms)
2025-04-15T01:10:56.4226453Z     âœ“ should report info on added metrics (2 ms)
2025-04-15T01:10:56.4227470Z 
2025-04-15T01:10:58.9248431Z PASS src/task-runners/task-broker/__tests__/task-broker-ws-server.test.ts
2025-04-15T01:10:58.9253259Z   TaskBrokerWsServer
2025-04-15T01:10:58.9257077Z     removeConnection
2025-04-15T01:10:58.9258441Z       âœ“ should close with 1000 status code by default (6 ms)
2025-04-15T01:10:58.9259914Z     heartbeat timer
2025-04-15T01:10:58.9260765Z       âœ“ should set up heartbeat timer on server start (2 ms)
2025-04-15T01:10:58.9261904Z       âœ“ should clear heartbeat timer on server stop
2025-04-15T01:10:58.9262586Z     sendMessage
2025-04-15T01:10:58.9263422Z       âœ“ should work with a message containing circular references (1 ms)
2025-04-15T01:10:58.9264548Z 
2025-04-15T01:11:00.5373773Z PASS src/workflows/__tests__/workflows.controller.test.ts
2025-04-15T01:11:00.5374400Z   WorkflowsController
2025-04-15T01:11:00.5374750Z     getFromUrl
2025-04-15T01:11:00.5375111Z       should return workflow data
2025-04-15T01:11:00.5375945Z         âœ“ when the URL points to a valid JSON file (5 ms)
2025-04-15T01:11:00.5376799Z       should throw a BadRequestError
2025-04-15T01:11:00.5377614Z         âœ“ when the URL does not point to a valid JSON file (24 ms)
2025-04-15T01:11:00.5378427Z         âœ“ when the data is not a valid n8n workflow JSON
2025-04-15T01:11:00.5379167Z         âœ“ when the data is missing required fields
2025-04-15T01:11:00.5379546Z 
2025-04-15T01:11:03.5869963Z PASS src/metrics/__tests__/license-metrics.service.test.ts
2025-04-15T01:11:03.5874565Z   LicenseMetricsService
2025-04-15T01:11:03.5878681Z     collectPassthroughData
2025-04-15T01:11:03.5883553Z       âœ“ should return an object with active workflow IDs (10 ms)
2025-04-15T01:11:03.5887790Z     collectUsageMetrics
2025-04-15T01:11:03.5892296Z       âœ“ should return an array of expected usage metrics (2 ms)
2025-04-15T01:11:03.5896343Z 
2025-04-15T01:11:24.1152037Z PASS test/integration/workflow-tag-mapping.repository.integration.test.ts (28.579 s)
2025-04-15T01:11:24.1156268Z   WorkflowTagMappingRepository
2025-04-15T01:11:24.1156761Z     overwriteTaggings
2025-04-15T01:11:24.1157601Z       âœ“ should overwrite taggings in a workflow (42 ms)
2025-04-15T01:11:24.1158427Z       âœ“ should delete taggings if no tags are provided (13 ms)
2025-04-15T01:11:24.1158848Z 
2025-04-15T01:11:28.7210967Z PASS test/integration/debug.controller.test.ts (29.573 s)
2025-04-15T01:11:28.7255176Z   DebugController
2025-04-15T01:11:28.7256002Z     GET /debug/multi-main-setup
2025-04-15T01:11:28.7257103Z       âœ“ should return multi-main setup details (37 ms)
2025-04-15T01:11:28.7257977Z 
2025-04-15T01:11:31.0932070Z PASS src/evaluation.ee/test-runner/__tests__/format-test-case-execution-input-data.ee.test.ts
2025-04-15T01:11:31.0933052Z   formatTestCaseExecutionInputData
2025-04-15T01:11:31.0934303Z     âœ“ should format the test case execution input data correctly (8 ms)
2025-04-15T01:11:31.0935730Z 
2025-04-15T01:11:33.3828381Z PASS src/posthog/__tests__/posthog.test.ts
2025-04-15T01:11:33.3829071Z   PostHog
2025-04-15T01:11:33.3829908Z     âœ“ inits PostHog correctly (7 ms)
2025-04-15T01:11:33.3830952Z     âœ“ does not initialize or track if diagnostics are not enabled (1 ms)
2025-04-15T01:11:33.3831864Z     âœ“ captures PostHog events (1 ms)
2025-04-15T01:11:33.3832406Z     âœ“ gets feature flags (1 ms)
2025-04-15T01:11:33.3832665Z 
2025-04-15T01:11:34.4981885Z PASS test/integration/eventbus.test.ts (30.682 s)
2025-04-15T01:11:34.4982521Z   GET /eventbus/destination
2025-04-15T01:11:34.4983418Z     âœ“ should fail due to missing authentication (25 ms)
2025-04-15T01:11:34.4992280Z     âœ“ should fail due to missing license when authenticated (15 ms)
2025-04-15T01:11:34.4992961Z   POST /eventbus/destination
2025-04-15T01:11:34.4993665Z     âœ“ should fail due to missing authentication (3 ms)
2025-04-15T01:11:34.4994499Z     âœ“ should fail due to missing license when authenticated (6 ms)
2025-04-15T01:11:34.4995110Z   DELETE /eventbus/destination
2025-04-15T01:11:34.4995752Z     âœ“ should fail due to missing authentication (4 ms)
2025-04-15T01:11:34.4996634Z     âœ“ should fail due to missing license when authenticated (6 ms)
2025-04-15T01:11:34.4997093Z 
2025-04-15T01:11:37.0618076Z PASS src/task-runners/__tests__/task-runner-process-restart-loop-detector.test.ts
2025-04-15T01:11:37.0646719Z   TaskRunnerProcessRestartLoopDetector
2025-04-15T01:11:37.0648358Z     âœ“ should detect a restart loop if process exits 5 times within 5s (5 ms)
2025-04-15T01:11:37.0651384Z     âœ“ should not detect a restart loop if process exits less than 5 times within 5s (2 ms)
2025-04-15T01:11:37.0652167Z 
2025-04-15T01:11:55.1498223Z PASS test/integration/insights/insights.api.test.ts (30.814 s)
2025-04-15T01:11:55.1500735Z   GET /insights routes work for owner and admins
2025-04-15T01:11:55.1504062Z     âœ“ Call should work and return empty summary for user owner (45 ms)
2025-04-15T01:11:55.1507487Z     âœ“ Call should work and return empty summary for user member (14 ms)
2025-04-15T01:11:55.1508394Z     âœ“ Call should work and return empty summary for user admin (19 ms)
2025-04-15T01:11:55.1508960Z   GET /insights/by-worklow
2025-04-15T01:11:55.1510019Z     âœ“ Call should work with valid query parameters (7 ms)
2025-04-15T01:11:55.1511047Z     âœ“ Call should return internal server error with invalid pagination query parameters (11 ms)
2025-04-15T01:11:55.1512425Z     âœ“ Call should return internal server error with invalid pagination query parameters (6 ms)
2025-04-15T01:11:55.1513476Z     âœ“ Call should return bad request with invalid sortby query parameters (5 ms)
2025-04-15T01:11:55.1513958Z 
2025-04-15T01:11:58.2480380Z PASS src/sso.ee/saml/routes/__tests__/saml.controller.ee.test.ts
2025-04-15T01:11:58.2482987Z   Test views
2025-04-15T01:11:58.2485288Z     âœ“ Should render success with template (5 ms)
2025-04-15T01:11:58.2490054Z     âœ“ Should render failure with template
2025-04-15T01:11:58.2493272Z     âœ“ Should render error with template (1 ms)
2025-04-15T01:11:58.2495732Z 
2025-04-15T01:12:01.4588046Z PASS src/environments.ee/source-control/__tests__/source-control-git.service.test.ts
2025-04-15T01:12:01.4588933Z   SourceControlGitService
2025-04-15T01:12:01.4589346Z     getBranches
2025-04-15T01:12:01.4590169Z       âœ“ should support branch names containing slashes (4 ms)
2025-04-15T01:12:01.4590713Z     initRepository
2025-04-15T01:12:01.4591171Z       when local repo is set up after remote is ready
2025-04-15T01:12:01.4592052Z         âœ“ should track remote (8 ms)
2025-04-15T01:12:01.4592365Z 
2025-04-15T01:12:02.1380234Z PASS src/modules/insights/database/entities/__tests__/insights-raw.test.ts (28.589 s)
2025-04-15T01:12:02.1383453Z   Insights Raw Entity
2025-04-15T01:12:02.1385822Z     âœ“ `success` can be serialized and deserialized correctly (8 ms)
2025-04-15T01:12:02.1388388Z     âœ“ `failure` can be serialized and deserialized correctly (2 ms)
2025-04-15T01:12:02.1389383Z     âœ“ `runtime_ms` can be serialized and deserialized correctly (1 ms)
2025-04-15T01:12:02.1390395Z     âœ“ `time_saved_min` can be serialized and deserialized correctly (1 ms)
2025-04-15T01:12:02.1391445Z     âœ“ `timestamp` can be serialized and deserialized correctly (1 ms)
2025-04-15T01:12:02.1392598Z     âœ“ timestamp uses the correct default value (71 ms)
2025-04-15T01:12:02.1393001Z 
2025-04-15T01:12:03.8790358Z PASS src/task-runners/__tests__/sliding-window-signal.test.ts
2025-04-15T01:12:03.8791105Z   SlidingWindowSignal
2025-04-15T01:12:03.8792351Z     âœ“ should return the last signal if within window size (7 ms)
2025-04-15T01:12:03.8793357Z     âœ“ should return null if there is no signal within the window (3 ms)
2025-04-15T01:12:03.8794364Z     âœ“ should return null if "exit" event is not emitted before timeout (1 ms)
2025-04-15T01:12:03.8795438Z     âœ“ should return the signal emitted on "exit" event before timeout (1 ms)
2025-04-15T01:12:03.8795947Z 
2025-04-15T01:12:04.4900542Z PASS src/services/cache/__tests__/cache-mock.service.test.ts
2025-04-15T01:12:04.4911949Z   CacheService (Mock)
2025-04-15T01:12:04.4916487Z     should prevent use of empty keys
2025-04-15T01:12:04.4924753Z       âœ“ get (9 ms)
2025-04-15T01:12:04.4928988Z       âœ“ getMany (1 ms)
2025-04-15T01:12:04.4933391Z       âœ“ set (2 ms)
2025-04-15T01:12:04.4937512Z       âœ“ setMany (1 ms)
2025-04-15T01:12:04.4941774Z       âœ“ delete
2025-04-15T01:12:04.4945940Z       âœ“ deleteMany (1 ms)
2025-04-15T01:12:04.4949845Z 
2025-04-15T01:12:05.6905801Z PASS test/integration/security-audit/filesystem-risk-reporter.test.ts (28.46 s)
2025-04-15T01:12:05.6913784Z   âœ“ should report filesystem interaction nodes (82 ms)
2025-04-15T01:12:05.6916914Z   âœ“ should not report non-filesystem-interaction node (7 ms)
2025-04-15T01:12:05.6919546Z 
2025-04-15T01:12:06.9676105Z PASS src/services/__tests__/jwt.service.test.ts
2025-04-15T01:12:06.9680692Z   JwtService
2025-04-15T01:12:06.9685194Z     secret initialization
2025-04-15T01:12:06.9688325Z       âœ“ should read the secret from config, when set (7 ms)
2025-04-15T01:12:06.9690982Z       âœ“ should derive the secret from encryption key when not set in config (1 ms)
2025-04-15T01:12:06.9694119Z     with a secret set
2025-04-15T01:12:06.9696591Z       âœ“ should sign (3 ms)
2025-04-15T01:12:06.9699968Z       âœ“ should decode and verify payload (3 ms)
2025-04-15T01:12:06.9703246Z       âœ“ should throw an error on verify if the token is expired (12 ms)
2025-04-15T01:12:06.9704887Z 
2025-04-15T01:12:08.4252200Z PASS src/external-secrets.ee/providers/__tests__/azure-key-vault.test.ts
2025-04-15T01:12:08.4253176Z   AzureKeyVault
2025-04-15T01:12:08.4253946Z     âœ“ should update cached secrets (108 ms)
2025-04-15T01:12:08.4255129Z 
2025-04-15T01:12:09.6335550Z PASS src/task-runners/task-broker/__tests__/task-broker-server.test.ts
2025-04-15T01:12:09.6340097Z   TaskBrokerServer
2025-04-15T01:12:09.6344792Z     handleUpgradeRequest
2025-04-15T01:12:09.6345993Z       âœ“ should close WebSocket when response status code is > 200 (10 ms)
2025-04-15T01:12:09.6347281Z       âœ“ should not close WebSocket when response status code is 200 (2 ms)
2025-04-15T01:12:09.6348611Z 
2025-04-15T01:12:10.7755777Z PASS src/executions/__tests__/execution-data.service.test.ts
2025-04-15T01:12:10.7756453Z   ExecutionDataService
2025-04-15T01:12:10.7756927Z     generateFailedExecutionFromError
2025-04-15T01:12:10.7757957Z       âœ“ should generate a failed execution with error details (12 ms)
2025-04-15T01:12:10.7758894Z       âœ“ should generate a failed execution without node details if node is undefined (1 ms)
2025-04-15T01:12:10.7759382Z 
2025-04-15T01:12:12.9884024Z PASS src/public-api/v1/__tests__/global.middleware.test.ts
2025-04-15T01:12:12.9886957Z   apiKeyHasScope
2025-04-15T01:12:12.9890260Z     âœ“ should return API key scope middleware if "feat:apiKeyScopes" is enabled (7 ms)
2025-04-15T01:12:12.9892049Z     âœ“ should return empty middleware if "feat:apiKeyScopes" is disabled (1 ms)
2025-04-15T01:12:12.9893166Z   apiKeyHasScopeWithGlobalScopeFallback
2025-04-15T01:12:12.9894348Z     âœ“ should return global middleware if "feat:apiKeyScopes" is disabled
2025-04-15T01:12:12.9894965Z 
2025-04-15T01:12:13.2084706Z PASS src/task-runners/errors/__tests__/task-runner-disconnected-error.test.ts
2025-04-15T01:12:13.2093726Z   TaskRunnerDisconnectedError
2025-04-15T01:12:13.2094857Z     âœ“ should have the correct default error message (4 ms)
2025-04-15T01:12:13.2095694Z     âœ“ should have the error level set to "error" (1 ms)
2025-04-15T01:12:13.2096652Z     âœ“ should set the correct description for non-cloud deployments (1 ms)
2025-04-15T01:12:13.2097562Z     âœ“ should set the correct description for cloud deployments (1 ms)
2025-04-15T01:12:13.2098000Z 
2025-04-15T01:12:15.5537358Z PASS src/modules/__tests__/modules.config.test.ts
2025-04-15T01:12:15.5539897Z   ModulesConfig
2025-04-15T01:12:15.5542990Z     âœ“ should initialize with insights modules if no environment variable is set (5 ms)
2025-04-15T01:12:15.5545218Z     âœ“ should parse valid module names from environment variable (1 ms)
2025-04-15T01:12:15.5557408Z     âœ“ should disable valid module names from environment variable
2025-04-15T01:12:15.5558222Z     âœ“ should throw UnexpectedError for invalid module names (14 ms)
2025-04-15T01:12:15.5559173Z     âœ“ should throw UnexpectedError if any module is both enabled and disabled (6 ms)
2025-04-15T01:12:15.5560160Z     âœ“ should throw UnexpectedError if any enabled module name is invalid (1 ms)
2025-04-15T01:12:15.5561122Z     âœ“ should throw UnexpectedError if any disabled module name is invalid (1 ms)
2025-04-15T01:12:15.5561743Z 
2025-04-15T01:12:16.1009685Z PASS src/databases/repositories/__tests__/workflow-statistics.test.ts
2025-04-15T01:12:16.1011208Z   insertWorkflowStatistics
2025-04-15T01:12:16.1012713Z     âœ“ Successfully inserts data when it is not yet present (6 ms)
2025-04-15T01:12:16.1013599Z     âœ“ Does not insert when data is present (1 ms)
2025-04-15T01:12:16.1014302Z     âœ“ throws an error when insertion fails (2 ms)
2025-04-15T01:12:16.1014655Z 
2025-04-15T01:12:17.9377093Z PASS src/__tests__/utils.test.ts
2025-04-15T01:12:17.9385927Z   shouldAssignExecuteMethod
2025-04-15T01:12:17.9406601Z     âœ“ should return true when node has no execute, poll, trigger, webhook (unless declarative), or methods (6 ms)
2025-04-15T01:12:17.9409348Z     âœ“ should return false when node has execute (1 ms)
2025-04-15T01:12:17.9411344Z     âœ“ should return false when node has poll
2025-04-15T01:12:17.9413583Z     âœ“ should return false when node has trigger (1 ms)
2025-04-15T01:12:17.9415747Z     âœ“ should return false when node has webhook and is not declarative
2025-04-15T01:12:17.9418237Z     âœ“ should return true when node has webhook but is declarative (1 ms)
2025-04-15T01:12:17.9419073Z     âœ“ should return false when node has methods
2025-04-15T01:12:17.9419442Z 
2025-04-15T01:12:19.3217837Z PASS src/sso.ee/saml/__tests__/saml-helpers.test.ts
2025-04-15T01:12:19.3222338Z   sso/saml/samlHelpers
2025-04-15T01:12:19.3224668Z     updateUserFromSamlAttributes
2025-04-15T01:12:19.3226650Z       âœ“ does not user `Repository.update`, but `Repository.save` instead (13 ms)
2025-04-15T01:12:19.3230251Z 
2025-04-15T01:12:22.3190303Z PASS test/integration/task-runners/task-runner-module.external.test.ts
2025-04-15T01:12:22.3192688Z   TaskRunnerModule in external mode
2025-04-15T01:12:22.3193813Z     start
2025-04-15T01:12:22.3196072Z       âœ“ should throw if the task runner is disabled (17 ms)
2025-04-15T01:12:22.3197159Z       âœ“ should throw if auth token is missing (10 ms)
2025-04-15T01:12:22.3200060Z       âœ“ should start the task runner (465 ms)
2025-04-15T01:12:22.3200820Z       âœ“ should use DefaultTaskRunnerDisconnectAnalyzer
2025-04-15T01:12:22.3201224Z 
2025-04-15T01:12:25.1308258Z PASS src/modules/insights/__tests__/insights.pre-init.test.ts
2025-04-15T01:12:25.1319924Z   InsightsModulePreInit
2025-04-15T01:12:25.1324725Z     âœ“ should return false if instance type is not "main" (6 ms)
2025-04-15T01:12:25.1329304Z     âœ“ should return false if database type is "sqlite" and poolSize is < 1 (1 ms)
2025-04-15T01:12:25.1334426Z     âœ“ should return true if instance type is "main" and database is not sqlite
2025-04-15T01:12:25.1335560Z     âœ“ should return true if instance type is "main" and database is not sqlite (1 ms)
2025-04-15T01:12:25.1339716Z     âœ“ should return true if instance type is "main" and database is not sqlite (1 ms)
2025-04-15T01:12:25.1344868Z     âœ“ should return true if instance type is "main" and sqlite poolSize is >= 1
2025-04-15T01:12:25.1345383Z 
2025-04-15T01:12:28.0194198Z PASS src/controllers/__tests__/translation.controller.test.ts
2025-04-15T01:12:28.0194816Z   TranslationController
2025-04-15T01:12:28.0195213Z     getCredentialTranslation
2025-04-15T01:12:28.0197176Z       âœ“ should throw 400 on invalid credential types (17 ms)
2025-04-15T01:12:28.0198027Z       âœ“ should return translation json on valid credential types (1 ms)
2025-04-15T01:12:28.0198468Z 
2025-04-15T01:12:33.3762759Z PASS test/integration/services/workflow-static-data.service.test.ts (29.26 s)
2025-04-15T01:12:33.3763937Z   WorkflowStaticDataService
2025-04-15T01:12:33.3765121Z     âœ“ should not change workflow updatedAt when calling saveStaticData (25 ms)
2025-04-15T01:12:33.3769438Z     âœ“ should not change workflow updatedAt when calling saveStaticDataById (5 ms)
2025-04-15T01:12:33.3770258Z 
2025-04-15T01:12:35.6223778Z PASS src/errors/response-errors/__tests__/webhook-not-found.error.test.ts
2025-04-15T01:12:35.6225213Z   utils test webhookNotFoundErrorMessage 
2025-04-15T01:12:35.6226257Z     âœ“ should return a message with path and method (4 ms)
2025-04-15T01:12:35.6230363Z     âœ“ should return a message with path
2025-04-15T01:12:35.6242795Z     âœ“ should return a message with method with tip (1 ms)
2025-04-15T01:12:35.6243945Z     âœ“ should return a message with method with tip
2025-04-15T01:12:35.6245131Z     âœ“ should return a message with method with tip (1 ms)
2025-04-15T01:12:35.6246618Z 
2025-04-15T01:12:49.6421384Z PASS test/integration/auth.mw.test.ts (31.446 s)
2025-04-15T01:12:49.6426698Z   Auth Middleware
2025-04-15T01:12:49.6427403Z     Routes requiring Authentication
2025-04-15T01:12:49.6428643Z       âœ“ patch /me should return 401 Unauthorized if no cookie (25 ms)
2025-04-15T01:12:49.6429655Z       âœ“ patch /me/password should return 401 Unauthorized if no cookie (3 ms)
2025-04-15T01:12:49.6431105Z       âœ“ post /me/survey should return 401 Unauthorized if no cookie (3 ms)
2025-04-15T01:12:49.6432367Z       âœ“ post /invitations should return 401 Unauthorized if no cookie (3 ms)
2025-04-15T01:12:49.6433315Z       âœ“ delete /users/123 should return 401 Unauthorized if no cookie (3 ms)
2025-04-15T01:12:49.6433977Z     Routes requiring Authorization
2025-04-15T01:12:49.6434776Z       âœ“ post /invitations should return 403 Forbidden for member (13 ms)
2025-04-15T01:12:49.6435677Z       âœ“ delete /users/123 should return 403 Forbidden for member (7 ms)
2025-04-15T01:12:49.6436140Z 
2025-04-15T01:12:51.9254243Z PASS src/scaling/__tests__/subscriber.service.test.ts
2025-04-15T01:12:51.9285204Z   Subscriber
2025-04-15T01:12:51.9285705Z     constructor
2025-04-15T01:12:51.9286482Z       âœ“ should init Redis client in scaling mode (7 ms)
2025-04-15T01:12:51.9287169Z       âœ“ should not init Redis client in regular mode (1 ms)
2025-04-15T01:12:51.9287657Z     shutdown
2025-04-15T01:12:51.9288110Z       âœ“ should disconnect Redis client (1 ms)
2025-04-15T01:12:51.9288522Z     subscribe
2025-04-15T01:12:51.9289005Z       âœ“ should subscribe to pubsub channel (1 ms)
2025-04-15T01:12:51.9289341Z 
2025-04-15T01:12:54.9506227Z PASS src/databases/repositories/__tests__/credentials.repository.test.ts
2025-04-15T01:12:54.9510896Z   findMany
2025-04-15T01:12:54.9519387Z     âœ“ return `data` property if `includeData:true` and select is using the record syntax (5 ms)
2025-04-15T01:12:54.9520646Z     âœ“ return `data` property if `includeData:true` and select is using the record syntax
2025-04-15T01:12:54.9521900Z 
2025-04-15T01:12:57.1738499Z PASS src/services/__tests__/url.service.test.ts
2025-04-15T01:12:57.1739073Z   UrlService
2025-04-15T01:12:57.1739354Z     getInstanceBaseUrl
2025-04-15T01:12:57.1740104Z       âœ“ should set URL from N8N_EDITOR_BASE_URL (8 ms)
2025-04-15T01:12:57.1740733Z       âœ“ should set URL from WEBHOOK_URL (1 ms)
2025-04-15T01:12:57.1741732Z       âœ“ should trim quotes when setting URL from N8N_EDITOR_BASE_URL (1 ms)
2025-04-15T01:12:57.1742627Z       âœ“ should trim quotes when setting URL from WEBHOOK_URL (1 ms)
2025-04-15T01:12:57.1743035Z 
2025-04-15T01:12:58.0115744Z PASS test/integration/user.repository.test.ts (29.825 s)
2025-04-15T01:12:58.0116407Z   UserRepository
2025-04-15T01:12:58.0116791Z     countUsersByRole()
2025-04-15T01:12:58.0117709Z       âœ“ should return the number of users in each role (74 ms)
2025-04-15T01:12:58.0118320Z     createUserWithProject()
2025-04-15T01:12:58.0119070Z       âœ“ should create personal project for a user (15 ms)
2025-04-15T01:12:58.0119479Z 
2025-04-15T01:13:00.1897808Z PASS test/integration/task-runners/task-runner-server.test.ts
2025-04-15T01:13:00.1898639Z   TaskBrokerServer
2025-04-15T01:13:00.1899394Z     /healthz
2025-04-15T01:13:00.1900375Z       âœ“ should return 200 (22 ms)
2025-04-15T01:13:00.1901041Z     /runners/_ws
2025-04-15T01:13:00.1902198Z       âœ“ should return 429 when too many requests are made (23 ms)
2025-04-15T01:13:00.1904959Z     /runners/auth
2025-04-15T01:13:00.1906956Z       âœ“ should return 429 when too many requests are made (22 ms)
2025-04-15T01:13:00.1909377Z 
2025-04-15T01:13:01.0423852Z PASS test/integration/task-runners/task-broker-server.test.ts
2025-04-15T01:13:01.0424774Z   TaskBrokerServer
2025-04-15T01:13:01.0425133Z     /healthz
2025-04-15T01:13:01.0426245Z       âœ“ should return 200 (22 ms)
2025-04-15T01:13:01.0426709Z     /runners/_ws
2025-04-15T01:13:01.0427387Z       âœ“ should return 429 when too many requests are made (20 ms)
2025-04-15T01:13:01.0428008Z     /runners/auth
2025-04-15T01:13:01.0428698Z       âœ“ should return 429 when too many requests are made (20 ms)
2025-04-15T01:13:01.0429133Z 
2025-04-15T01:13:05.9077017Z PASS src/controllers/__tests__/users.controller.test.ts
2025-04-15T01:13:05.9090132Z   UsersController
2025-04-15T01:13:05.9090508Z     changeGlobalRole
2025-04-15T01:13:05.9091311Z       âœ“ should emit event user-changed-role (8 ms)
2025-04-15T01:13:05.9091905Z 
2025-04-15T01:13:07.2664275Z PASS test/integration/services/execution-metadata.service.test.ts (31.426 s)
2025-04-15T01:13:07.2666309Z   ProjectService
2025-04-15T01:13:07.2666664Z     save
2025-04-15T01:13:07.2667702Z       âœ“ should deduplicate entries by exeuctionId and key, keeping the latest one (36 ms)
2025-04-15T01:13:07.2668287Z 
2025-04-15T01:13:09.0684252Z PASS src/workflows/workflow-history.ee/__tests__/workflow-history-helper.ee.test.ts
2025-04-15T01:13:09.0696810Z   getWorkflowHistoryPruneTime
2025-04-15T01:13:09.0697808Z     âœ“ should return -1 (infinite) if config and license are -1 (5 ms)
2025-04-15T01:13:09.0698736Z     âœ“ should return config time if license is infinite and config is not
2025-04-15T01:13:09.0699619Z     âœ“ should return license time if config is infinite and license is not
2025-04-15T01:13:09.0700558Z     âœ“ should return lowest of config and license time if both are not -1 (1 ms)
2025-04-15T01:13:09.0701022Z 
2025-04-15T01:13:12.0140810Z PASS src/services/__tests__/password.utility.test.ts
2025-04-15T01:13:12.0143779Z   PasswordUtility
2025-04-15T01:13:12.0144184Z     hash()
2025-04-15T01:13:12.0146511Z       âœ“ should hash a plaintext password (127 ms)
2025-04-15T01:13:12.0147149Z     compare()
2025-04-15T01:13:12.0148255Z       âœ“ should return true on match (201 ms)
2025-04-15T01:13:12.0149096Z       âœ“ should return false on mismatch (200 ms)
2025-04-15T01:13:12.0149593Z 
2025-04-15T01:13:16.2025557Z PASS src/services/__tests__/orchestration.service.test.ts
2025-04-15T01:13:16.2029610Z   Orchestration Service
2025-04-15T01:13:16.2072596Z     âœ“ should initialize (9 ms)
2025-04-15T01:13:16.2073011Z 
2025-04-15T01:13:19.1047059Z PASS src/ldap.ee/__tests__/helpers.test.ts
2025-04-15T01:13:19.1053996Z   Ldap/helpers
2025-04-15T01:13:19.1054384Z     updateLdapUserOnLocalDb
2025-04-15T01:13:19.1058190Z       âœ“ does not use `Repository.update`, but `Repository.save` instead (9 ms)
2025-04-15T01:13:19.1058708Z 
2025-04-15T01:13:21.4184918Z PASS src/evaluation.ee/test-runner/__tests__/get-test-run-final-result.ee.test.ts
2025-04-15T01:13:21.4240363Z   getTestRunFinalResult
2025-04-15T01:13:21.4254884Z     âœ“ should return success if all test cases are successful (8 ms)
2025-04-15T01:13:21.4259552Z     âœ“ should return error if at least one test case is errored (1 ms)
2025-04-15T01:13:21.4264169Z     âœ“ should return warning if at least one test case is warned
2025-04-15T01:13:21.4268458Z     âœ“ should return error if there are errors and warnings (1 ms)
2025-04-15T01:13:21.4270116Z 
2025-04-15T01:13:23.7145569Z PASS src/evaluation.ee/test-runner/__tests__/get-start-node.ee.test.ts
2025-04-15T01:13:23.7146365Z   getPastExecutionStartNode
2025-04-15T01:13:23.7147267Z     âœ“ should return the start node of the past execution (7 ms)
2025-04-15T01:13:23.7148281Z     âœ“ should return the start node of the past execution with multiple triggers (1 ms)
2025-04-15T01:13:23.7149523Z     âœ“ should return the start node of the past execution with multiple triggers - chat trigger (1 ms)
2025-04-15T01:13:23.7150136Z 
2025-04-15T01:13:31.4963333Z PASS test/integration/cta.service.test.ts (31.078 s)
2025-04-15T01:13:31.4967649Z   CtaService
2025-04-15T01:13:31.4971458Z     getBecomeCreatorCta()
2025-04-15T01:13:31.4974908Z       âœ“ should return false if user has 0 active workflows with 0 successful production executions (19 ms)
2025-04-15T01:13:31.4976308Z       âœ“ should return false if user has 2 active workflows with 5 successful production executions (29 ms)
2025-04-15T01:13:31.4977694Z       âœ“ should return false if user has 3 active workflows with 4 successful production executions (28 ms)
2025-04-15T01:13:31.4979098Z       âœ“ should return true if user has 3 active workflows with 5 successful production executions (20 ms)
2025-04-15T01:13:31.4979736Z 
2025-04-15T01:13:33.7605864Z PASS test/integration/middlewares/body-parser.test.ts
2025-04-15T01:13:33.7607210Z   bodyParser
2025-04-15T01:13:33.7608406Z     âœ“ should handle uncompressed data (24 ms)
2025-04-15T01:13:33.7609195Z     âœ“ should handle gzip data (5 ms)
2025-04-15T01:13:33.7611356Z     âœ“ should handle deflate data (4 ms)
2025-04-15T01:13:33.7611936Z 
2025-04-15T01:13:36.2270274Z PASS src/databases/entities/__tests__/user.entity.test.ts
2025-04-15T01:13:36.2271966Z   User Entity
2025-04-15T01:13:36.2275214Z     JSON.stringify
2025-04-15T01:13:36.2276436Z       âœ“ should not serialize sensitive data (5 ms)
2025-04-15T01:13:36.2277303Z     createPersonalProjectName
2025-04-15T01:13:36.2279065Z       âœ“ given fistName: Nathan, lastName: Nathaniel and email: nathan@nathaniel.n8n this gives the projectName: "Nathan Nathaniel <nathan@nathaniel.n8n>"
2025-04-15T01:13:36.2281448Z       âœ“ given fistName: undefined, lastName: Nathaniel and email: nathan@nathaniel.n8n this gives the projectName: "<nathan@nathaniel.n8n>" (1 ms)
2025-04-15T01:13:36.2283875Z       âœ“ given fistName: Nathan, lastName: undefined and email: nathan@nathaniel.n8n this gives the projectName: "<nathan@nathaniel.n8n>"
2025-04-15T01:13:36.2290945Z       âœ“ given fistName: undefined, lastName: undefined and email: nathan@nathaniel.n8n this gives the projectName: "<nathan@nathaniel.n8n>"
2025-04-15T01:13:36.2292835Z       âœ“ given fistName: undefined, lastName: undefined and email: undefined this gives the projectName: "Unnamed Project" (1 ms)
2025-04-15T01:13:36.2294369Z       âœ“ given fistName: Nathan, lastName: Nathaniel and email: undefined this gives the projectName: "Unnamed Project"
2025-04-15T01:13:36.2295054Z 
2025-04-15T01:13:39.1713555Z PASS test/integration/task-runners/task-runner-module.internal.test.ts
2025-04-15T01:13:39.1725414Z   TaskRunnerModule in internal mode
2025-04-15T01:13:39.1726388Z     start
2025-04-15T01:13:39.1727247Z       âœ“ should throw if the task runner is disabled (19 ms)
2025-04-15T01:13:39.1729511Z       âœ“ should start the task runner (461 ms)
2025-04-15T01:13:39.1730324Z       âœ“ should use InternalTaskRunnerDisconnectAnalyzer (1 ms)
2025-04-15T01:13:39.1731214Z 
2025-04-15T01:13:39.3501286Z PASS test/integration/workflows/workflows.controller-with-active-workflow-manager.ee.test.ts (31.825 s)
2025-04-15T01:13:39.3518368Z   PUT /:workflowId/transfer
2025-04-15T01:13:39.3519195Z     âœ“ can transfer an active workflow (117 ms)
2025-04-15T01:13:39.3519546Z 
2025-04-15T01:13:41.6517991Z PASS src/utils/__tests__/object-to-error.test.ts
2025-04-15T01:13:41.6518568Z   objectToError
2025-04-15T01:13:41.6518914Z     node error handling
2025-04-15T01:13:41.6519852Z       âœ“ should create `NodeOperationError` when node is found (9 ms)
2025-04-15T01:13:41.6520732Z       âœ“ should create `Error` when node is not found (1 ms)
2025-04-15T01:13:41.6521174Z 
2025-04-15T01:13:43.6034009Z PASS src/services/__tests__/credentials-tester.service.test.ts
2025-04-15T01:13:43.6034926Z   CredentialsTester
2025-04-15T01:13:43.6036064Z     âœ“ should find the OAuth2 credential test for a generic OAuth2 API credential (8 ms)
2025-04-15T01:13:43.6036605Z 
2025-04-15T01:13:47.7781058Z PASS src/task-runners/__tests__/node-process-oom-detector.test.ts
2025-04-15T01:13:47.7783239Z   NodeProcessOomDetector
2025-04-15T01:13:47.7786494Z     âœ“ should detect an out-of-memory error in a monitored process (1381 ms)
2025-04-15T01:13:47.7787643Z     âœ“ should not detect an out-of-memory error in a process that exits normally (43 ms)
2025-04-15T01:13:47.7788193Z 
2025-04-15T01:13:50.7758590Z PASS src/execution-lifecycle/shared/__tests__/shared-hook-functions.test.ts
2025-04-15T01:13:50.7763058Z   determineFinalExecutionStatus
2025-04-15T01:13:50.7767402Z     âœ“ should return "error" when resultData.error exists (1 ms)
2025-04-15T01:13:50.7770158Z     âœ“ should return "waiting" when waitTill is defined
2025-04-15T01:13:50.7772745Z     When waitTill is not set
2025-04-15T01:13:50.7775207Z       âœ“ should return "canceled" (6 ms)
2025-04-15T01:13:50.7777542Z       âœ“ should return "crashed"
2025-04-15T01:13:50.7779560Z       âœ“ should return "error"
2025-04-15T01:13:50.7781845Z       âœ“ should return "success"
2025-04-15T01:13:50.7782106Z 
2025-04-15T01:13:55.0434443Z PASS src/modules/insights/database/entities/__tests__/insights-by-period.test.ts (31.111 s)
2025-04-15T01:13:55.0435844Z   Insights By Period
2025-04-15T01:13:55.0437226Z     âœ“ `time_saved_min` can be serialized and deserialized correctly (8 ms)
2025-04-15T01:13:55.0440222Z     âœ“ `runtime_ms` can be serialized and deserialized correctly (2 ms)
2025-04-15T01:13:55.0441123Z     âœ“ `failure` can be serialized and deserialized correctly (1 ms)
2025-04-15T01:13:55.0442310Z     âœ“ `success` can be serialized and deserialized correctly (2 ms)
2025-04-15T01:13:55.0443134Z     âœ“ `hour` can be serialized and deserialized correctly (1 ms)
2025-04-15T01:13:55.0443935Z     âœ“ `day` can be serialized and deserialized correctly (1 ms)
2025-04-15T01:13:55.0444705Z     âœ“ `week` can be serialized and deserialized correctly (1 ms)
2025-04-15T01:13:55.0445098Z 
2025-04-15T01:13:57.2212184Z PASS src/utils/__tests__/path-util.test.ts
2025-04-15T01:13:57.2217989Z   isContainedWithin
2025-04-15T01:13:57.2218956Z     âœ“ should return true when parent and child paths are the same (6 ms)
2025-04-15T01:13:57.2221929Z     âœ“ should return true for parent /some/parent/folder and child /some/parent/folder/subfolder/file.txt (1 ms)
2025-04-15T01:13:57.2223474Z     âœ“ should return true for parent /some/parent/folder and child /some/parent/folder/../folder/subfolder/file.txt
2025-04-15T01:13:57.2224978Z     âœ“ should return true for parent /some/parent/folder/ and child /some/parent/folder/subfolder/file.txt (1 ms)
2025-04-15T01:13:57.2226328Z     âœ“ should return true for parent /some/parent/folder and child /some/parent/folder/subfolder/
2025-04-15T01:13:57.2228090Z     âœ“ should return false for parent /some/parent/folder and child /some/other/folder/file.txt (1 ms)
2025-04-15T01:13:57.2229447Z     âœ“ should return false for parent /some/parent/folder and child /some/parent/folder_but_not_really
2025-04-15T01:13:57.2230619Z     âœ“ should return false for parent /one/path and child /another/path (1 ms)
2025-04-15T01:13:57.2231119Z 
2025-04-15T01:14:00.0427274Z PASS src/services/__tests__/execution-metadata.service.test.ts
2025-04-15T01:14:00.0429569Z   ExecutionMetadataService
2025-04-15T01:14:00.0431908Z     âœ“ Execution metadata is saved in a batch (8 ms)
2025-04-15T01:14:00.0434190Z 
2025-04-15T01:14:02.4133532Z PASS src/decorators/__tests__/module.test.ts
2025-04-15T01:14:02.4138526Z   registerLifecycleHooks
2025-04-15T01:14:02.4139597Z     âœ“ is called when ModuleRegistry.registerLifecycleHooks is called (6 ms)
2025-04-15T01:14:02.4140116Z 
2025-04-15T01:14:05.7113017Z PASS src/environments.ee/source-control/__tests__/source-control-preferences.service.ee.test.ts
2025-04-15T01:14:05.7123905Z   SourceControlPreferencesService
2025-04-15T01:14:05.7125696Z     âœ“ should class validate correct preferences (8 ms)
2025-04-15T01:14:05.7126092Z 
2025-04-15T01:14:15.0407402Z PASS test/integration/commands/license.cmd.test.ts (33.172 s)
2025-04-15T01:14:15.0413054Z   âœ“ license:clear invokes clear() to release any floating entitlements and deletes the license cert from the DB (22 ms)
2025-04-15T01:14:15.0413866Z 
2025-04-15T01:14:17.3040681Z PASS src/validators/__tests__/no-url.validator.test.ts
2025-04-15T01:14:17.3042317Z   NoUrl
2025-04-15T01:14:17.3044077Z     URLs
2025-04-15T01:14:17.3045111Z       âœ“ should block http://google.com (9 ms)
2025-04-15T01:14:17.3050013Z       âœ“ should block www.domain.tld (1 ms)
2025-04-15T01:14:17.3051142Z       âœ“ should block n8n.io (1 ms)
2025-04-15T01:14:17.3053067Z 
2025-04-15T01:14:19.7393397Z PASS src/config/__tests__/index.test.ts
2025-04-15T01:14:19.7397558Z   userManagement.jwtRefreshTimeoutHours
2025-04-15T01:14:19.7402753Z     âœ“ resets jwtRefreshTimeoutHours to 0 if it's greater than or equal to jwtSessionDurationHours (6 ms)
2025-04-15T01:14:19.7403494Z 
2025-04-15T01:14:21.4634485Z PASS test/integration/saml/saml-helpers.test.ts (30.491 s)
2025-04-15T01:14:21.4639255Z   sso/saml/samlHelpers
2025-04-15T01:14:21.4639741Z     createUserFromSamlAttributes
2025-04-15T01:14:21.4640617Z       âœ“ Creates personal project for user (125 ms)
2025-04-15T01:14:21.4640983Z 
2025-04-15T01:14:33.0425904Z PASS test/integration/healthcheck.controller.test.ts (27.104 s)
2025-04-15T01:14:33.0452563Z   HealthcheckController
2025-04-15T01:14:33.0453801Z     âœ“ should return ok when DB is connected and migrated (16 ms)
2025-04-15T01:14:33.0454823Z     âœ“ should return error when DB is not connected (3 ms)
2025-04-15T01:14:33.0455508Z 
2025-04-15T01:14:33.1653401Z Test Suites: 252 passed, 252 total
2025-04-15T01:14:33.1654990Z Tests:       2884 passed, 2884 total
2025-04-15T01:14:33.1655481Z Snapshots:   3 passed, 3 total
2025-04-15T01:14:33.1655880Z Time:        747.92 s
2025-04-15T01:14:33.1656255Z Ran all test suites.
2025-04-15T01:14:34.2921288Z Post job cleanup.
2025-04-15T01:14:34.3714816Z ok
2025-04-15T01:14:34.4334233Z mariadb-1  | 2025-04-15 01:02:03+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.5.28+maria~ubu2004 started.
2025-04-15T01:14:34.4335538Z mariadb-1  | 2025-04-15 01:02:03+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
2025-04-15T01:14:34.4336837Z mariadb-1  | 2025-04-15 01:02:03+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.5.28+maria~ubu2004 started.
2025-04-15T01:14:34.4338034Z mariadb-1  | 2025-04-15 01:02:03+00:00 [Note] [Entrypoint]: Initializing database files
2025-04-15T01:14:34.4338996Z mariadb-1  | 2025-04-15 01:02:04+00:00 [Note] [Entrypoint]: Database files initialized
2025-04-15T01:14:34.4339981Z mariadb-1  | 2025-04-15 01:02:04+00:00 [Note] [Entrypoint]: Starting temporary server
2025-04-15T01:14:34.4340871Z mariadb-1  | 2025-04-15 01:02:04+00:00 [Note] [Entrypoint]: Waiting for server startup
2025-04-15T01:14:34.4342445Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] Starting MariaDB 10.5.28-MariaDB-ubu2004 source revision 7eded23be6597b4c485e8cad1538f2ae14541f91 server_uid 72+4ASMvYxproTQgRqIDplDA1XA= as process 101
2025-04-15T01:14:34.4343318Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Uses event mutexes
2025-04-15T01:14:34.4343833Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
2025-04-15T01:14:34.4344328Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Number of pools: 1
2025-04-15T01:14:34.4344876Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
2025-04-15T01:14:34.4345578Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] mysqld: O_TMPFILE is not supported on /tmp (disabling future attempts)
2025-04-15T01:14:34.4346165Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Using Linux native AIO
2025-04-15T01:14:34.4346831Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
2025-04-15T01:14:34.4347500Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Completed initialization of buffer pool
2025-04-15T01:14:34.4348044Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: 128 rollback segments are active.
2025-04-15T01:14:34.4348630Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Creating shared tablespace for temporary tables
2025-04-15T01:14:34.4349534Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
2025-04-15T01:14:34.4350693Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
2025-04-15T01:14:34.4351362Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] InnoDB: 10.5.28 started; log sequence number 45091; transaction id 20
2025-04-15T01:14:34.4352158Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] Plugin 'FEEDBACK' is disabled.
2025-04-15T01:14:34.4352700Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] Reading of all Master_info entries succeeded
2025-04-15T01:14:34.4353241Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] Added new Master_info '' to hash table
2025-04-15T01:14:34.4353732Z mariadb-1  | 2025-04-15  1:02:04 0 [Note] mysqld: ready for connections.
2025-04-15T01:14:34.4354434Z mariadb-1  | Version: '10.5.28-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 0  mariadb.org binary distribution
2025-04-15T01:14:34.4355131Z mariadb-1  | 2025-04-15 01:02:05+00:00 [Note] [Entrypoint]: Temporary server started.
2025-04-15T01:14:34.4355665Z mariadb-1  | 2025-04-15 01:02:06+00:00 [Note] [Entrypoint]: Creating database n8n
2025-04-15T01:14:34.4356378Z mariadb-1  | 2025-04-15 01:02:06+00:00 [Note] [Entrypoint]: Securing system users (equivalent to running mysql_secure_installation)
2025-04-15T01:14:34.4356853Z mariadb-1  | 
2025-04-15T01:14:34.4357242Z mariadb-1  | 2025-04-15 01:02:06+00:00 [Note] [Entrypoint]: Stopping temporary server
2025-04-15T01:14:34.4357801Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] mysqld (initiated by: unknown): Normal shutdown
2025-04-15T01:14:34.4358552Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] InnoDB: FTS optimize thread exiting.
2025-04-15T01:14:34.4359051Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] InnoDB: Starting shutdown...
2025-04-15T01:14:34.4359642Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] InnoDB: Dumping buffer pool(s) to /var/lib/mysql/ib_buffer_pool
2025-04-15T01:14:34.4360286Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] InnoDB: Buffer pool(s) dump completed at 250415  1:02:06
2025-04-15T01:14:34.4360906Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] InnoDB: Removed temporary tablespace data file: "ibtmp1"
2025-04-15T01:14:34.4361730Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] InnoDB: Shutdown completed; log sequence number 45103; transaction id 21
2025-04-15T01:14:34.4362363Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] Event Scheduler: Purging the queue. 0 events
2025-04-15T01:14:34.4362868Z mariadb-1  | 2025-04-15  1:02:06 0 [Note] mysqld: Shutdown complete
2025-04-15T01:14:34.4363400Z mariadb-1  | 2025-04-15 01:02:06+00:00 [Note] [Entrypoint]: Temporary server stopped
2025-04-15T01:14:34.4363881Z mariadb-1  | 
2025-04-15T01:14:34.4364350Z mariadb-1  | 2025-04-15 01:02:06+00:00 [Note] [Entrypoint]: MariaDB init process done. Ready for start up.
2025-04-15T01:14:34.4364743Z mariadb-1  | 
2025-04-15T01:14:34.4365585Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] Starting MariaDB 10.5.28-MariaDB-ubu2004 source revision 7eded23be6597b4c485e8cad1538f2ae14541f91 server_uid 72+4ASMvYxproTQgRqIDplDA1XA= as process 1
2025-04-15T01:14:34.4366427Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Uses event mutexes
2025-04-15T01:14:34.4366931Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
2025-04-15T01:14:34.4367427Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Number of pools: 1
2025-04-15T01:14:34.4367929Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
2025-04-15T01:14:34.4368566Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] mysqld: O_TMPFILE is not supported on /tmp (disabling future attempts)
2025-04-15T01:14:34.4369142Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Using Linux native AIO
2025-04-15T01:14:34.4369791Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
2025-04-15T01:14:34.4370437Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Completed initialization of buffer pool
2025-04-15T01:14:34.4370980Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: 128 rollback segments are active.
2025-04-15T01:14:34.4371748Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Creating shared tablespace for temporary tables
2025-04-15T01:14:34.4372551Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
2025-04-15T01:14:34.4373232Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
2025-04-15T01:14:34.4373861Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: 10.5.28 started; log sequence number 45103; transaction id 20
2025-04-15T01:14:34.4374435Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] Plugin 'FEEDBACK' is disabled.
2025-04-15T01:14:34.4375035Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
2025-04-15T01:14:34.4375670Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] Server socket created on IP: '::'.
2025-04-15T01:14:34.4376257Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] InnoDB: Buffer pool(s) load completed at 250415  1:02:07
2025-04-15T01:14:34.4376837Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] Reading of all Master_info entries succeeded
2025-04-15T01:14:34.4377359Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] Added new Master_info '' to hash table
2025-04-15T01:14:34.4377847Z mariadb-1  | 2025-04-15  1:02:07 0 [Note] mysqld: ready for connections.
2025-04-15T01:14:34.4378560Z mariadb-1  | Version: '10.5.28-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 3306  mariadb.org binary distribution
2025-04-15T01:14:34.4379766Z mariadb-1  | 2025-04-15  1:06:13 191 [Warning] Aborted connection 191 to db: 'n8n_test_zqrzqzdw_1744679157003' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T01:14:34.4380920Z mariadb-1  | 2025-04-15  1:06:13 190 [Warning] Aborted connection 190 to db: 'n8n_test_zqrzqzdw_1744679157003' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T01:14:34.4382348Z mariadb-1  | 2025-04-15  1:06:13 187 [Warning] Aborted connection 187 to db: 'n8n_test_zqrzqzdw_1744679157003' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T01:14:34.4383495Z mariadb-1  | 2025-04-15  1:07:30 214 [Warning] Aborted connection 214 to db: 'n8n_test_ruqgqm_1744679231396' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T01:14:34.4384618Z mariadb-1  | 2025-04-15  1:07:30 213 [Warning] Aborted connection 213 to db: 'n8n_test_ruqgqm_1744679231396' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T01:14:34.4385944Z mariadb-1  | 2025-04-15  1:10:20 263 [Warning] Aborted connection 263 to db: 'n8n_test_phtfnxbe8_1744679396484' user: 'root' host: '172.18.0.1' (Got an error reading communication packets)
2025-04-15T01:14:34.9956413Z  Container github-mariadb-1  Stopping
2025-04-15T01:14:35.5264456Z  Container github-mariadb-1  Stopped
2025-04-15T01:14:35.5265199Z  Container github-mariadb-1  Removing
2025-04-15T01:14:35.5304835Z  Container github-mariadb-1  Removed
2025-04-15T01:14:35.5310531Z  Network github_default  Removing
2025-04-15T01:14:35.6404651Z  Network github_default  Removed
2025-04-15T01:14:36.1450922Z docker-compose is down
2025-04-15T01:14:36.1542679Z Post job cleanup.
2025-04-15T01:14:36.2545796Z {"level":30,"time":1744678910748,"pid":1962,"hostname":"fv-az1118-677","msg":"Server listening at http://[::1]:41230"}
2025-04-15T01:14:36.2546684Z {"level":30,"time":1744678910750,"pid":1962,"hostname":"fv-az1118-677","msg":"Server listening at http://127.0.0.1:41230"}
2025-04-15T01:14:36.2547856Z {"level":30,"time":1744678910961,"pid":1962,"hostname":"fv-az1118-677","reqId":"req-1","req":{"method":"GET","url":"/","hostname":"localhost:41230","remoteAddress":"::1","remotePort":35572},"msg":"incoming request"}
2025-04-15T01:14:36.2549060Z {"level":30,"time":1744678910967,"pid":1962,"hostname":"fv-az1118-677","reqId":"req-1","res":{"statusCode":200},"responseTime":5.7841780000017025,"msg":"request completed"}
2025-04-15T01:14:36.2550347Z {"level":30,"time":1744679676247,"pid":1962,"hostname":"fv-az1118-677","reqId":"req-2","req":{"method":"DELETE","url":"/shutdown","hostname":"localhost:41230","remoteAddress":"::1","remotePort":58102},"msg":"incoming request"}
2025-04-15T01:14:36.2551808Z {"level":30,"time":1744679676248,"pid":1962,"hostname":"fv-az1118-677","reqId":"req-2","res":{"statusCode":200},"responseTime":0.4759390000253916,"msg":"request completed"}
2025-04-15T01:14:36.2552320Z 
2025-04-15T01:14:36.3325689Z Post job cleanup.
2025-04-15T01:14:36.4995617Z Post job cleanup.
2025-04-15T01:14:36.5707198Z [command]/usr/bin/git version
2025-04-15T01:14:36.5740131Z git version 2.49.0
2025-04-15T01:14:36.5788814Z Temporarily overriding HOME='/home/runner/work/_temp/23971c6d-6949-4e56-8183-363a727538b0' before making global git config changes
2025-04-15T01:14:36.5789790Z Adding repository directory to the temporary git global config as a safe directory
2025-04-15T01:14:36.5794255Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/n8n/n8n
2025-04-15T01:14:36.5829907Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-04-15T01:14:36.5860150Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-04-15T01:14:36.6102967Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-04-15T01:14:36.6122508Z http.https://github.com/.extraheader
2025-04-15T01:14:36.6134480Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-04-15T01:14:36.6163436Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-04-15T01:14:36.6494179Z Cleaning up orphan processes

Requested labels: ubuntu-latest
Job defined at: danielmiessler/fabric/.github/workflows/ci.yml@refs/pull/1399/merge
Waiting for a runner to pick up this job...
Job is waiting for a hosted runner to come online.
Job is about to start running on the hosted runner: GitHub Actions 9 (hosted)
Current runner version: '2.323.0'
##[group]Operating System
Ubuntu
24.04.2
LTS
##[endgroup]
##[group]Runner Image
Image: ubuntu-24.04
Version: 20250323.1.0
Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250323.1/images/ubuntu/Ubuntu2404-Readme.md
Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250323.1
##[endgroup]
##[group]Runner Image Provisioner
2.0.422.1
##[endgroup]
##[group]GITHUB_TOKEN Permissions
Contents: <:*:>
Metadata: read
##[endgroup]
Secret source: <:*:>
Prepare workflow directory
Prepare all required actions
Getting action download info
##[group]Download immutable action package <:*:>
Version: 4.2.2
Digest: sha256:<:SEQ:>
Source commit SHA: <:SEQ:>
##[endgroup]
Download action repository <:*:> (SHA:<:SEQ:>)
##[group]Download immutable action package <:*:>
Version: 4.1.0
Digest: sha256:<:SEQ:>
Source commit SHA: <:SEQ:>
##[endgroup]
Complete job name: Run tests
##[group]Run <:*:>
with:
repository: <:*:>
token: ***
ssh-strict: true
ssh-user: git
persist-credentials: <:*:>
clean: true
sparse-checkout-cone-mode: true
fetch-depth: <:NUM:>
fetch-tags: false
show-progress: true
lfs: false
submodules: <:*:>
set-safe-directory: true
##[endgroup]
Syncing repository: <:*:>
##[group]Getting Git version info
Working directory is <:*:>
[command]/usr/bin/git version
git version <:NUM:>.<:NUM:>.<:NUM:>
##[endgroup]
Temporarily overriding HOME='/home/runner/work/_temp/11e7da37-7b00-4b7e-b933-25a63b141622' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
[command]/usr/bin/git config --global --add safe.directory /home/runner/work/fabric/fabric
Deleting the contents of <:*:>
##[group]Initializing the repository
[command]/usr/bin/git init <:*:>
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint:
hint: git config --global init.defaultBranch <name>
hint:
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint:
hint: git branch -m <name>
Initialized empty Git repository in <:*:>
[command]/usr/bin/git remote add origin <:*:>
##[endgroup]
##[group]Disabling automatic garbage collection
[command]/usr/bin/git config --local gc.auto 0
##[endgroup]
##[group]Setting up auth
[command]/usr/bin/git config --local --name-only --get-regexp <:*:>
[command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp <:*:> && git config --local --unset-all <:*:> || :"
[command]/usr/bin/git config --local --name-only --get-regexp <:*:>
[command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp <:*:> && git config --local --unset-all <:*:> || :"
[command]/usr/bin/git config <:*:> http.https://github.com/.extraheader AUTHORIZATION: basic ***
##[endgroup]
##[group]Fetching the repository
[command]/usr/bin/git -c protocol.version=<:NUM:> fetch <:*:> <:*:> <:*:> <:*:> <:*:> <:*:>
From <:*:>
* [new ref] <:SEQ:>-> <:*:>
##[endgroup]
##[group]Determining the checkout info
##[endgroup]
[command]/usr/bin/git sparse-checkout disable
[command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
##[group]Checking out the ref
[command]/usr/bin/git checkout --progress --force refs/remotes/pull/<:NUM:>/merge
Note: switching to 'refs/remotes/pull/<:NUM:>/merge'.
2025-03-31T23:16:00.5126434Z
You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.
2025-03-31T23:16:00.5129455Z
If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:
2025-03-31T23:16:00.5131388Z
git switch -c <new-branch-name>
2025-03-31T23:16:00.5131952Z
Or undo this operation with:
2025-03-31T23:16:00.5132496Z
git switch -
2025-03-31T23:16:00.5132976Z
Turn off this advice by setting config variable advice.detachedHead to false
2025-03-31T23:16:00.5134029Z
HEAD is now at <:*:> Merge <:SEQ:> into <:SEQ:>
##[endgroup]
[command]/usr/bin/git log <:NUM:> <:*:>
<:SEQ:>
##[group]Run <:*:>
with:
<:*:> false
<:*:> false
<:*:> false
github-token: ***
github-server-url: https://github.com
job-status: success
<:*:> true
<:*:> true
<:*:> false
<:*:> true
diagnostic-endpoint: -
<:*:> true
<:*:> false
##[endgroup]
[0;31m[1m[4mDeterminate Systems, Inc. Status
üîµ monitoring: FlakeHub.com flake status badges are unavailable. (https://status.determinate.systems/incidents/d3b01872-0b21-4423-b28d-c3cb2a081446)
See: https://status.determinate.systems/
2025-03-31T23:16:01.2684596Z
##[group]Configuring KVM
##[endgroup]
[32m Accelerated KVM is enabled [33m‚ö°Ô∏è
##[group]Installing Nix
##[group]Downloading nix-installer for x86_64-linux
Fetching from https://us-east-2.swim.install.determinate.systems/nix-installer/stable/x86_64-linux
Cache hit for: determinatesystem-nix-installer-x86_64-linux-da82121f5e3fce624104fd76cfd69e71-8
Received 25449337 of 38032249 (66.9%), 24.3 MBs/sec
Received 38032249 of 38032249 (100.0%), 27.4 MBs/sec
Cache Size: ~36 MB (38032249 B)
[command]/usr/bin/tar -xf /home/runner/work/_temp/d4ea01fc-db84-492c-a144-f042a502bf37/cache.tzst -P -C /home/runner/work/_temp/nix-installer-d5f25579-319c-4601-b825-8f0a26c7cfb2 --use-compress-program unzstd
Cache restored successfully
##[endgroup]
[command]/home/runner/work/_temp/nix-installer-d5f25579-319c-4601-b825-8f0a26c7cfb2/nix-installer install linux
INFO nix-installer v3.1.1
[2m[33m`nix-installer` needs to run as `root`, attempting to escalate now via `sudo`...[39m[0m
INFO nix-installer v3.1.1
INFO Step: Create directory `/nix`
INFO Step: Provision Nix
INFO Step: Create build users (UID 30001-30032) and group (GID 30000)
INFO Step: Configure Nix
INFO Step: Create directory `/etc/tmpfiles.d`
INFO Step: Configure upstream Nix daemon service
INFO Step: Remove directory `/nix/temp-install-dir`
[1m[32mNix was installed successfully![39m[0m
To get started using Nix, open a new shell or run `[1m. /nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh[0m`
2025-03-31T23:16:07.5983459Z
##[endgroup]
##[group]Run <:*:>
with:
go-version-file: ./go.mod
check-latest: false
token: ***
cache: true
env:
DETSYS_BACKTRACE_COLLECTOR: c6c3b3a4-023c-4264-946b-5aa2c703c032
DETERMINATE_NIX_KVM: 1
##[endgroup]
Setup go version spec 1.23.4
Attempting to download 1.23.4...
matching 1.23.4...
Acquiring 1.23.4 from https://github.com/actions/go-versions/releases/download/1.23.4-12152391001/go-1.23.4-linux-x64.tar.gz
Extracting Go...
[command]/usr/bin/tar xz --warning=no-unknown-keyword --overwrite -C /home/runner/work/_temp/03598b02-0d6b-4239-9aa5-48e8c90483a0 -f /home/runner/work/_temp/0f613f69-1d1c-445a-9a1e-5f9d0bef77ca
Successfully extracted go to /home/runner/work/_temp/03598b02-0d6b-4239-9aa5-48e8c90483a0
Adding to the cache ...
Successfully cached go to /opt/hostedtoolcache/go/1.23.4/x64
Added go to the path
Successfully set up Go version 1.23.4
[command]/opt/hostedtoolcache/go/1.23.4/x64/bin/go env GOMODCACHE
[command]/opt/hostedtoolcache/go/1.23.4/x64/bin/go env GOCACHE
/home/runner/go/pkg/mod
/home/runner/.cache/go-build
Received 167772160 of 255050781 (65.8%), 159.8 MBs/sec
Received 255050781 of 255050781 (100.0%), 183.6 MBs/sec
Cache Size: ~243 MB (255050781 B)
[command]/usr/bin/tar -xf /home/runner/work/_temp/7a90fa5d-2aa0-49a3-b9ab-9dd5b885377d/cache.tzst -P -C /home/runner/work/fabric/fabric --use-compress-program unzstd
Cache restored successfully
Cache restored from key: setup-go-Linux-ubuntu24-go-1.23.4-fb3a49bfbadb5d2ac4f8a604184ae5de5b05a638902723a4ae3917e9cfdc67b2
go version go1.23.4 linux/amd64
2025-03-31T23:16:18.5684950Z
##[group]go env
GO111MODULE=''
GOARCH='amd64'
GOBIN=''
GOCACHE='/home/runner/.cache/go-build'
GOENV='/home/runner/.config/go/env'
GOEXE=''
GOEXPERIMENT=''
GOFLAGS=''
GOHOSTARCH='amd64'
GOHOSTOS='linux'
GOINSECURE=''
GOMODCACHE='/home/runner/go/pkg/mod'
GONOPROXY=''
GONOSUMDB=''
GOOS='linux'
GOPATH='/home/runner/go'
GOPRIVATE=''
GOPROXY='https://proxy.golang.org,direct'
GOROOT='/opt/hostedtoolcache/go/1.23.4/x64'
GOSUMDB='sum.golang.org'
GOTMPDIR=''
GOTOOLCHAIN='auto'
GOTOOLDIR='/opt/hostedtoolcache/go/1.23.4/x64/pkg/tool/linux_amd64'
GOVCS=''
GOVERSION='go1.23.4'
GODEBUG=''
GOTELEMETRY='local'
GOTELEMETRYDIR='/home/runner/.config/go/telemetry'
GCCGO='gccgo'
GOAMD64='v1'
AR='ar'
CC='gcc'
CXX='g++'
CGO_ENABLED='1'
GOMOD='/home/runner/work/fabric/fabric/go.mod'
GOWORK=''
CGO_CFLAGS='-O2 -g'
CGO_CPPFLAGS=''
CGO_CXXFLAGS='-O2 -g'
CGO_FFLAGS='-O2 -g'
CGO_LDFLAGS='-O2 -g'
PKG_CONFIG='pkg-config'
GOGCCFLAGS='-fPIC -m64 -pthread -Wl,--no-gc-sections -fmessage-length=0 -ffile-prefix-map=/tmp/go-build1591020615=/tmp/go-build -gno-record-gcc-switches'
2025-03-31T23:16:18.6390762Z
##[endgroup]
##[group]Run go test -v ./...
[36;1mgo test -v ./...[0m
shell: /usr/bin/bash -e {<:NUM:>}
env:
DETSYS_BACKTRACE_COLLECTOR: c6c3b3a4-023c-4264-946b-5aa2c703c032
DETERMINATE_NIX_KVM: 1
##[endgroup]
?   	github.com/danielmiessler/fabric	[no test files]
=== RUN   TestCli
cli_test.go:13: Skipping test for now, collision with flag -t
--- SKIP: TestCli (0.00s)
=== RUN   TestInit
--- PASS: TestInit (0.00s)
=== RUN   TestReadStdin
--- PASS: TestReadStdin (0.00s)
=== RUN   TestBuildChatOptions
--- PASS: TestBuildChatOptions (0.00s)
=== RUN   TestBuildChatOptionsDefaultSeed
--- PASS: TestBuildChatOptionsDefaultSeed (0.00s)
=== RUN   TestInitWithYAMLConfig
=== RUN   TestInitWithYAMLConfig/Load_YAML_config
=== RUN   TestInitWithYAMLConfig/CLI_overrides_YAML
=== RUN   TestInitWithYAMLConfig/Invalid_YAML_config
--- PASS: TestInitWithYAMLConfig (0.00s)
--- PASS: TestInitWithYAMLConfig/Load_YAML_config (0.00s)
--- PASS: TestInitWithYAMLConfig/CLI_overrides_YAML (0.00s)
--- PASS: TestInitWithYAMLConfig/Invalid_YAML_config (0.00s)
=== RUN   TestCopyToClipboard
output_test.go:9: skipping test, because of docker env. in ci.
--- SKIP: TestCopyToClipboard (0.00s)
=== RUN   TestCreateOutputFile
2025-03-31T23:16:21.2581070Z
2025-03-31T23:16:21.2581078Z
... written to test_output.txt
--- PASS: TestCreateOutputFile (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/cli	0.011s
=== RUN   TestNormalizeMessages
--- PASS: TestNormalizeMessages (0.00s)
=== RUN   TestParseFileChanges
=== RUN   TestParseFileChanges/No___CREATE_CODING_FEATURE_FILE_CHANGES___section
=== RUN   TestParseFileChanges/Valid___CREATE_CODING_FEATURE_FILE_CHANGES___section
=== RUN   TestParseFileChanges/Invalid_JSON_in___CREATE_CODING_FEATURE_FILE_CHANGES___section
=== RUN   TestParseFileChanges/Invalid_operation
=== RUN   TestParseFileChanges/Empty_path
=== RUN   TestParseFileChanges/Suspicious_path_with_directory_traversal
--- PASS: TestParseFileChanges (0.00s)
--- PASS: TestParseFileChanges/No___CREATE_CODING_FEATURE_FILE_CHANGES___section (0.00s)
--- PASS: TestParseFileChanges/Valid___CREATE_CODING_FEATURE_FILE_CHANGES___section (0.00s)
--- PASS: TestParseFileChanges/Invalid_JSON_in___CREATE_CODING_FEATURE_FILE_CHANGES___section (0.00s)
--- PASS: TestParseFileChanges/Invalid_operation (0.00s)
--- PASS: TestParseFileChanges/Empty_path (0.00s)
--- PASS: TestParseFileChanges/Suspicious_path_with_directory_traversal (0.00s)
=== RUN   TestApplyFileChanges
Applied create operation to test.txt
Applied create operation to subdir/nested.txt
Applied update operation to test.txt
--- PASS: TestApplyFileChanges (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/common	0.005s
=== RUN   TestSaveEnvFile
--- PASS: TestSaveEnvFile (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/core	0.008s
=== RUN   TestConfigurable_AddSetting
--- PASS: TestConfigurable_AddSetting (0.00s)
=== RUN   TestConfigurable_Configure
--- PASS: TestConfigurable_Configure (0.00s)
=== RUN   TestConfigurable_Setup
2025-03-31T23:16:21.3123262Z
[TestConfigurable]
--- PASS: TestConfigurable_Setup (0.00s)
=== RUN   TestSetting_IsValid
--- PASS: TestSetting_IsValid (0.00s)
=== RUN   TestSetting_Configure
--- PASS: TestSetting_Configure (0.00s)
=== RUN   TestSetting_FillEnvFileContent
--- PASS: TestSetting_FillEnvFileContent (0.00s)
=== RUN   TestSetting_Print
--- PASS: TestSetting_Print (0.00s)
=== RUN   TestSetupQuestion_Ask
2025-03-31T23:16:21.3128925Z
[TestConfigurable] Enter test setting: (leave empty to skip):
--- PASS: TestSetupQuestion_Ask (0.00s)
=== RUN   TestSettings_IsConfigured
--- PASS: TestSettings_IsConfigured (0.00s)
=== RUN   TestSettings_Configure
--- PASS: TestSettings_Configure (0.00s)
=== RUN   TestSettings_FillEnvFileContent
--- PASS: TestSettings_FillEnvFileContent (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins	(cached)
=== RUN   TestNewVendorsModels
--- PASS: TestNewVendorsModels (0.00s)
=== RUN   TestFindVendorsByModelFirst
--- PASS: TestFindVendorsByModelFirst (0.00s)
=== RUN   TestFindVendorsByModel
--- PASS: TestFindVendorsByModel (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai	0.004s
?   	github.com/danielmiessler/fabric/plugins/ai/exolab	[no test files]
=== RUN   TestNewClient_DefaultInitialization
--- PASS: TestNewClient_DefaultInitialization (0.00s)
=== RUN   TestClientListModels
--- PASS: TestClientListModels (0.00s)
=== RUN   TestClient_ListModels_ReturnsCorrectModels
--- PASS: TestClient_ListModels_ReturnsCorrectModels (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai/anthropic	0.005s
=== RUN   TestNewClientInitialization
--- PASS: TestNewClientInitialization (0.00s)
=== RUN   TestClientConfigure
--- PASS: TestClientConfigure (0.00s)
=== RUN   TestListModels
--- PASS: TestListModels (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai/azure	0.005s
=== RUN   TestNewClient_EmbeddedClientNotNil
--- PASS: TestNewClient_EmbeddedClientNotNil (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai/deepseek	0.004s
=== RUN   TestListModels_ReturnsExpectedModel
--- PASS: TestListModels_ReturnsExpectedModel (0.00s)
=== RUN   TestSetup_ReturnsNil
--- PASS: TestSetup_ReturnsNil (0.00s)
=== RUN   TestSendStream_SendsMessages
--- PASS: TestSendStream_SendsMessages (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai/dryrun	0.004s
?   	github.com/danielmiessler/fabric/plugins/ai/gemini_openai	[no test files]
?   	github.com/danielmiessler/fabric/plugins/ai/litellm	[no test files]
?   	github.com/danielmiessler/fabric/plugins/ai/lmstudio	[no test files]
?   	github.com/danielmiessler/fabric/plugins/ai/mistral	[no test files]
?   	github.com/danielmiessler/fabric/plugins/ai/ollama	[no test files]
=== RUN   TestBuildModelNameSimple
--- PASS: TestBuildModelNameSimple (0.00s)
=== RUN   TestExtractText
--- PASS: TestExtractText (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai/gemini	0.008s
=== RUN   TestNewClientEmbeddedClientNotNil
--- PASS: TestNewClientEmbeddedClientNotNil (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai/groq	0.004s
?   	github.com/danielmiessler/fabric/plugins/ai/siliconcloud	[no test files]
?   	github.com/danielmiessler/fabric/plugins/db	[no test files]
=== RUN   TestBuildChatCompletionRequestPinSeed
--- PASS: TestBuildChatCompletionRequestPinSeed (0.00s)
=== RUN   TestBuildChatCompletionRequestNilSeed
--- PASS: TestBuildChatCompletionRequestNilSeed (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai/openai	0.003s
testing: warning: no tests to run
PASS
ok  	github.com/danielmiessler/fabric/plugins/ai/openrouter	0.004s [no tests to run]
?   	github.com/danielmiessler/fabric/plugins/strategy	[no test files]
?   	github.com/danielmiessler/fabric/plugins/tools	[no test files]
=== RUN   TestContexts_GetContext
--- PASS: TestContexts_GetContext (0.00s)
=== RUN   TestDb_Configure
--- PASS: TestDb_Configure (0.00s)
=== RUN   TestDb_LoadEnvFile
--- PASS: TestDb_LoadEnvFile (0.00s)
=== RUN   TestDb_SaveEnv
--- PASS: TestDb_SaveEnv (0.00s)
=== RUN   TestApplyVariables
=== RUN   TestApplyVariables/pattern_with_explicit_input_placement
=== RUN   TestApplyVariables/pattern_without_input_variable_gets_input_appended
--- PASS: TestApplyVariables (0.00s)
--- PASS: TestApplyVariables/pattern_with_explicit_input_placement (0.00s)
--- PASS: TestApplyVariables/pattern_without_input_variable_gets_input_appended (0.00s)
=== RUN   TestGetApplyVariables
=== RUN   TestGetApplyVariables/basic_pattern_with_variables_and_input
=== RUN   TestGetApplyVariables/pattern_with_missing_variable
=== RUN   TestGetApplyVariables/non-existent_pattern
--- PASS: TestGetApplyVariables (0.00s)
--- PASS: TestGetApplyVariables/basic_pattern_with_variables_and_input (0.00s)
--- PASS: TestGetApplyVariables/pattern_with_missing_variable (0.00s)
--- PASS: TestGetApplyVariables/non-existent_pattern (0.00s)
=== RUN   TestSessions_GetOrCreateSession
Creating new session: testSession
--- PASS: TestSessions_GetOrCreateSession (0.00s)
=== RUN   TestSessions_SaveSession
--- PASS: TestSessions_SaveSession (0.00s)
=== RUN   TestStorage_SaveAndLoad
--- PASS: TestStorage_SaveAndLoad (0.00s)
=== RUN   TestStorage_Exists
--- PASS: TestStorage_Exists (0.00s)
=== RUN   TestStorage_Delete
--- PASS: TestStorage_Delete (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/db/fsdb	0.008s
=== RUN   TestDateTimePlugin
=== RUN   TestDateTimePlugin/now_returns_RFC3339
=== RUN   TestDateTimePlugin/time_returns_HH:MM:SS
=== RUN   TestDateTimePlugin/unix_returns_timestamp
=== RUN   TestDateTimePlugin/today_returns_YYYY-MM-DD
=== RUN   TestDateTimePlugin/full_returns_long_date
=== RUN   TestDateTimePlugin/relative_positive_hours
=== RUN   TestDateTimePlugin/relative_negative_days
=== RUN   TestDateTimePlugin/invalid_operation
=== RUN   TestDateTimePlugin/empty_relative_value
=== RUN   TestDateTimePlugin/invalid_relative_format
--- PASS: TestDateTimePlugin (0.00s)
--- PASS: TestDateTimePlugin/now_returns_RFC3339 (0.00s)
--- PASS: TestDateTimePlugin/time_returns_HH:MM:SS (0.00s)
--- PASS: TestDateTimePlugin/unix_returns_timestamp (0.00s)
--- PASS: TestDateTimePlugin/today_returns_YYYY-MM-DD (0.00s)
--- PASS: TestDateTimePlugin/full_returns_long_date (0.00s)
--- PASS: TestDateTimePlugin/relative_positive_hours (0.00s)
--- PASS: TestDateTimePlugin/relative_negative_days (0.00s)
--- PASS: TestDateTimePlugin/invalid_operation (0.00s)
--- PASS: TestDateTimePlugin/empty_relative_value (0.00s)
--- PASS: TestDateTimePlugin/invalid_relative_format (0.00s)
=== RUN   TestExtensionExecutor
=== RUN   TestExtensionExecutor/StdoutExecution
Executing command: /usr/bin/sh -c /tmp/fabric-ext-executor-621712109/test-script.sh stdout World
=== RUN   TestExtensionExecutor/FileExecution
=== RUN   TestExtensionExecutor/ExecutionErrors
Executing command: /usr/bin/sh -c /tmp/fabric-ext-executor-621712109/test-script.sh invalid test
--- PASS: TestExtensionExecutor (0.01s)
--- PASS: TestExtensionExecutor/StdoutExecution (0.00s)
--- PASS: TestExtensionExecutor/FileExecution (0.00s)
--- PASS: TestExtensionExecutor/ExecutionErrors (0.00s)
=== RUN   TestFixedFileExtensionExecutor
=== RUN   TestFixedFileExtensionExecutor/BasicFixedFile
=== RUN   TestFixedFileExtensionExecutor/NoWorkDir
=== RUN   TestFixedFileExtensionExecutor/CleanupBehavior
=== RUN   TestFixedFileExtensionExecutor/ErrorCases
=== RUN   TestFixedFileExtensionExecutor/MissingOutputFile
--- PASS: TestFixedFileExtensionExecutor (0.02s)
--- PASS: TestFixedFileExtensionExecutor/BasicFixedFile (0.00s)
--- PASS: TestFixedFileExtensionExecutor/NoWorkDir (0.00s)
--- PASS: TestFixedFileExtensionExecutor/CleanupBehavior (0.01s)
--- PASS: TestFixedFileExtensionExecutor/ErrorCases (0.00s)
--- PASS: TestFixedFileExtensionExecutor/MissingOutputFile (0.00s)
=== RUN   TestExtensionManager
=== RUN   TestExtensionManager/RegisterExtension
Successfully registered extension:
Name: test-extension
Executable: /tmp/fabric-ext-test-4283696077/test-script.sh
Type: executable
Timeout: 30s
Description: Test extension
Version: 1.0.0
Operations:
echo:
Command Template: {{executable}} echo {{1}}
=== RUN   TestExtensionManager/ListExtensions
Extension: test-extension
Status: ENABLED
Executable: /tmp/fabric-ext-test-4283696077/test-script.sh
Type: executable
Timeout: 30s
Description: Test extension
Version: 1.0.0
Operations:
echo:
Command Template: {{executable}} echo {{1}}
2025-03-31T23:16:22.9235654Z
=== RUN   TestExtensionManager/ProcessExtension
Executing command: /usr/bin/sh -c /tmp/fabric-ext-test-4283696077/test-script.sh echo World
=== RUN   TestExtensionManager/RemoveExtension
--- PASS: TestExtensionManager (0.00s)
--- PASS: TestExtensionManager/RegisterExtension (0.00s)
--- PASS: TestExtensionManager/ListExtensions (0.00s)
--- PASS: TestExtensionManager/ProcessExtension (0.00s)
--- PASS: TestExtensionManager/RemoveExtension (0.00s)
=== RUN   TestExtensionManagerErrors
=== RUN   TestExtensionManagerErrors/RegisterNonexistentConfig
=== RUN   TestExtensionManagerErrors/ProcessNonexistentExtension
=== RUN   TestExtensionManagerErrors/RemoveNonexistentExtension
--- PASS: TestExtensionManagerErrors (0.00s)
--- PASS: TestExtensionManagerErrors/RegisterNonexistentConfig (0.00s)
--- PASS: TestExtensionManagerErrors/ProcessNonexistentExtension (0.00s)
--- PASS: TestExtensionManagerErrors/RemoveNonexistentExtension (0.00s)
=== RUN   TestExtensionManagerWithInvalidConfig
=== RUN   TestExtensionManagerWithInvalidConfig/MissingExecutable
=== RUN   TestExtensionManagerWithInvalidConfig/InvalidTimeout
=== RUN   TestExtensionManagerWithInvalidConfig/EmptyName
--- PASS: TestExtensionManagerWithInvalidConfig (0.00s)
--- PASS: TestExtensionManagerWithInvalidConfig/MissingExecutable (0.00s)
--- PASS: TestExtensionManagerWithInvalidConfig/InvalidTimeout (0.00s)
--- PASS: TestExtensionManagerWithInvalidConfig/EmptyName (0.00s)
=== RUN   TestRegistryPersistence
=== RUN   TestRegistryPersistence/SaveAndReload
=== RUN   TestRegistryPersistence/HashVerification
--- PASS: TestRegistryPersistence (0.00s)
--- PASS: TestRegistryPersistence/SaveAndReload (0.00s)
--- PASS: TestRegistryPersistence/HashVerification (0.00s)
=== RUN   TestFetchPlugin
=== RUN   TestFetchPlugin/invalid_URL
=== RUN   TestFetchPlugin/malformed_URL
--- PASS: TestFetchPlugin (0.00s)
--- PASS: TestFetchPlugin/invalid_URL (0.00s)
--- PASS: TestFetchPlugin/malformed_URL (0.00s)
=== RUN   TestFilePlugin
=== RUN   TestFilePlugin/read_file
=== RUN   TestFilePlugin/tail_file
=== RUN   TestFilePlugin/exists_true
=== RUN   TestFilePlugin/exists_false
=== RUN   TestFilePlugin/size
=== RUN   TestFilePlugin/modified
=== RUN   TestFilePlugin/read_non-existent
=== RUN   TestFilePlugin/invalid_operation
=== RUN   TestFilePlugin/path_traversal_attempt
=== RUN   TestFilePlugin/file_too_large
=== RUN   TestFilePlugin/invalid_tail_format
=== RUN   TestFilePlugin/invalid_tail_count
--- PASS: TestFilePlugin (0.00s)
--- PASS: TestFilePlugin/read_file (0.00s)
--- PASS: TestFilePlugin/tail_file (0.00s)
--- PASS: TestFilePlugin/exists_true (0.00s)
--- PASS: TestFilePlugin/exists_false (0.00s)
--- PASS: TestFilePlugin/size (0.00s)
--- PASS: TestFilePlugin/modified (0.00s)
--- PASS: TestFilePlugin/read_non-existent (0.00s)
--- PASS: TestFilePlugin/invalid_operation (0.00s)
--- PASS: TestFilePlugin/path_traversal_attempt (0.00s)
--- PASS: TestFilePlugin/file_too_large (0.00s)
--- PASS: TestFilePlugin/invalid_tail_format (0.00s)
--- PASS: TestFilePlugin/invalid_tail_count (0.00s)
=== RUN   TestComputeHash
=== RUN   TestComputeHash/valid_file
=== RUN   TestComputeHash/nonexistent_file
--- PASS: TestComputeHash (0.00s)
--- PASS: TestComputeHash/valid_file (0.00s)
--- PASS: TestComputeHash/nonexistent_file (0.00s)
=== RUN   TestComputeStringHash
=== RUN   TestComputeStringHash/empty_string
=== RUN   TestComputeStringHash/simple_string
=== RUN   TestComputeStringHash/longer_string_with_spaces
--- PASS: TestComputeStringHash (0.00s)
--- PASS: TestComputeStringHash/empty_string (0.00s)
--- PASS: TestComputeStringHash/simple_string (0.00s)
--- PASS: TestComputeStringHash/longer_string_with_spaces (0.00s)
=== RUN   TestHashConsistency
--- PASS: TestHashConsistency (0.00s)
=== RUN   TestSysPlugin
=== RUN   TestSysPlugin/hostname_returns_valid_name
=== RUN   TestSysPlugin/user_returns_current_user
=== RUN   TestSysPlugin/os_returns_valid_OS
=== RUN   TestSysPlugin/arch_returns_valid_architecture
=== RUN   TestSysPlugin/env_returns_environment_variable
=== RUN   TestSysPlugin/pwd_returns_valid_directory
=== RUN   TestSysPlugin/home_returns_valid_home_directory
=== RUN   TestSysPlugin/unknown_operation
=== RUN   TestSysPlugin/env_without_variable
=== RUN   TestSysPlugin/env_with_non-existent_variable
--- PASS: TestSysPlugin (0.00s)
--- PASS: TestSysPlugin/hostname_returns_valid_name (0.00s)
--- PASS: TestSysPlugin/user_returns_current_user (0.00s)
--- PASS: TestSysPlugin/os_returns_valid_OS (0.00s)
--- PASS: TestSysPlugin/arch_returns_valid_architecture (0.00s)
--- PASS: TestSysPlugin/env_returns_environment_variable (0.00s)
--- PASS: TestSysPlugin/pwd_returns_valid_directory (0.00s)
--- PASS: TestSysPlugin/home_returns_valid_home_directory (0.00s)
--- PASS: TestSysPlugin/unknown_operation (0.00s)
--- PASS: TestSysPlugin/env_without_variable (0.00s)
--- PASS: TestSysPlugin/env_with_non-existent_variable (0.00s)
=== RUN   TestApplyTemplate
=== RUN   TestApplyTemplate/simple_variable
=== RUN   TestApplyTemplate/multiple_variables
=== RUN   TestApplyTemplate/special_input_variable
=== RUN   TestApplyTemplate/nested_variables
=== RUN   TestApplyTemplate/simple_text_plugin
=== RUN   TestApplyTemplate/text_plugin_with_variable
=== RUN   TestApplyTemplate/plugin_with_dynamic_operation
=== RUN   TestApplyTemplate/multiple_plugins
=== RUN   TestApplyTemplate/nested_plugins
=== RUN   TestApplyTemplate/missing_variable
=== RUN   TestApplyTemplate/unknown_plugin
=== RUN   TestApplyTemplate/unknown_plugin_operation
=== RUN   TestApplyTemplate/nested_plugin_error
=== RUN   TestApplyTemplate/empty_template
=== RUN   TestApplyTemplate/no_substitutions_needed
--- PASS: TestApplyTemplate (0.00s)
--- PASS: TestApplyTemplate/simple_variable (0.00s)
--- PASS: TestApplyTemplate/multiple_variables (0.00s)
--- PASS: TestApplyTemplate/special_input_variable (0.00s)
--- PASS: TestApplyTemplate/nested_variables (0.00s)
--- PASS: TestApplyTemplate/simple_text_plugin (0.00s)
--- PASS: TestApplyTemplate/text_plugin_with_variable (0.00s)
--- PASS: TestApplyTemplate/plugin_with_dynamic_operation (0.00s)
--- PASS: TestApplyTemplate/multiple_plugins (0.00s)
--- PASS: TestApplyTemplate/nested_plugins (0.00s)
--- PASS: TestApplyTemplate/missing_variable (0.00s)
--- PASS: TestApplyTemplate/unknown_plugin (0.00s)
--- PASS: TestApplyTemplate/unknown_plugin_operation (0.00s)
--- PASS: TestApplyTemplate/nested_plugin_error (0.00s)
--- PASS: TestApplyTemplate/empty_template (0.00s)
--- PASS: TestApplyTemplate/no_substitutions_needed (0.00s)
=== RUN   TestTextPlugin
=== RUN   TestTextPlugin/upper_basic
=== RUN   TestTextPlugin/upper_mixed_case
=== RUN   TestTextPlugin/lower_basic
=== RUN   TestTextPlugin/lower_mixed_case
=== RUN   TestTextPlugin/title_basic
=== RUN   TestTextPlugin/title_with_apostrophe
=== RUN   TestTextPlugin/trim_spaces
=== RUN   TestTextPlugin/trim_newlines
=== RUN   TestTextPlugin/empty_value
=== RUN   TestTextPlugin/unknown_operation
--- PASS: TestTextPlugin (0.00s)
--- PASS: TestTextPlugin/upper_basic (0.00s)
--- PASS: TestTextPlugin/upper_mixed_case (0.00s)
--- PASS: TestTextPlugin/lower_basic (0.00s)
--- PASS: TestTextPlugin/lower_mixed_case (0.00s)
--- PASS: TestTextPlugin/title_basic (0.00s)
--- PASS: TestTextPlugin/title_with_apostrophe (0.00s)
--- PASS: TestTextPlugin/trim_spaces (0.00s)
--- PASS: TestTextPlugin/trim_newlines (0.00s)
--- PASS: TestTextPlugin/empty_value (0.00s)
--- PASS: TestTextPlugin/unknown_operation (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/template	(cached)
?   	github.com/danielmiessler/fabric/plugins/tools/code_helper	[no test files]
?   	github.com/danielmiessler/fabric/plugins/tools/githelper	[no test files]
=== RUN   TestHtmlReadability
=== RUN   TestHtmlReadability/Empty_HTML
=== RUN   TestHtmlReadability/HTML_with_text
=== RUN   TestHtmlReadability/HTML_with_nested_tags
=== RUN   TestHtmlReadability/HTML_missing_tags
--- PASS: TestHtmlReadability (0.00s)
--- PASS: TestHtmlReadability/Empty_HTML (0.00s)
--- PASS: TestHtmlReadability/HTML_with_text (0.00s)
--- PASS: TestHtmlReadability/HTML_with_nested_tags (0.00s)
--- PASS: TestHtmlReadability/HTML_missing_tags (0.00s)
PASS
ok  	github.com/danielmiessler/fabric/plugins/tools/converter	(cached)
?   	github.com/danielmiessler/fabric/plugins/tools/jina	[no test files]
?   	github.com/danielmiessler/fabric/plugins/tools/lang	[no test files]
?   	github.com/danielmiessler/fabric/plugins/tools/to_pdf	[no test files]
?   	github.com/danielmiessler/fabric/plugins/tools/youtube	[no test files]
?   	github.com/danielmiessler/fabric/restapi	[no test files]
##[group]Run nix flake check
[36;1mnix flake check[0m
shell: /usr/bin/bash -e {<:NUM:>}
env:
DETSYS_BACKTRACE_COLLECTOR: c6c3b3a4-023c-4264-946b-5aa2c703c032
DETERMINATE_NIX_KVM: 1
##[endgroup]
evaluating flake...
checking flake output 'formatter'...
copying path '/nix/store/v0g0bxsd5gw6k0jz2855f8h7l1218925-source' from 'https://cache.nixos.org'...
unpacking 'github:nix-systems/default/da67096a3b9bf56a91d16901293e51ba5b49a27e?narHash=sha256-Vy1rq5AaRuLzOxct8nz4T6wlgyUR7zLU309k9mBC768%3D' into the Git cache...
checking derivation formatter.x86_64-linux...
unpacking 'github:numtide/treefmt-nix/13c913f5deb3a5c08bb810efd89dc8cb24dd968b?narHash=sha256-p2r8xhQZ3TYIEKBoiEhllKWQqWNJNoT9v64Vmg4q8Zw%3D' into the Git cache...
derivation evaluated to /nix/store/5cmn667g6zsa4l3hvklc423yzi9hihfh-treefmt.drv
checking flake output 'checks'...
checking derivation checks.x86_64-linux.formatting...
derivation evaluated to /nix/store/vxiv73afxkl1x5zx9wc0mx9ni91r64a1-treefmt-check.drv
checking flake output 'devShells'...
checking derivation devShells.x86_64-linux.default...
unpacking 'github:nix-community/gomod2nix/514283ec89c39ad0079ff2f3b1437404e4cba608?narHash=sha256-tPsqU00FhgdFr0JiQUiBMgPVbl1jbPCY5gbFiJycL3I%3D' into the Git cache...
unpacking 'github:numtide/flake-utils/ff7b65b44d01cf9ba6a71320833626af21126384?narHash=sha256-zsNZZGTGnMOf9YpHKJqMSsa0dXbfmxeoJ7xHlrt%2BxmY%3D' into the Git cache...
derivation evaluated to /nix/store/jdmgz1x8smaqmplip260cjp2y7kxy6ws-nix-shell.drv
checking flake output 'packages'...
checking derivation packages.x86_64-linux.gomod2nix...
derivation evaluated to /nix/store/i4lg9fpq4in0w1ml4g82d92wi22jshz8-gomod2nix-dev.drv
checking derivation packages.x86_64-linux.default...
derivation evaluated to /nix/store/d37hdvd2wx9dv4cjln86a3wnyqhr21pj-fabric-ai-1.4.167.drv
checking derivation packages.x86_64-linux.fabric...
derivation evaluated to /nix/store/d37hdvd2wx9dv4cjln86a3wnyqhr21pj-fabric-ai-1.4.167.drv
running 1 flake checks...
copying path '/nix/store/kn855hkv6yda9wi7g48lxwgplijqijb9-git-2.47.0-doc' from 'https://cache.nixos.org'...
copying path '/nix/store/gxv330afrspz91xzicqc291mvkgwfh5j-perl5.40.0-Digest-HMAC-1.04' from 'https://cache.nixos.org'...
copying path '/nix/store/1bp6wq4j24zjc9wlcnp2r2ffh4pwxfpc-perl5.40.0-FCGI-ProcManager-0.28' from 'https://cache.nixos.org'...
copying path '/nix/store/d43yysnlknxiq8q0fl338dxgxnyhx7ia-perl5.40.0-HTML-TagCloud-0.38' from 'https://cache.nixos.org'...
copying path '/nix/store/dh93rwf25khgdm3sqrsdzlzi1w09az9h-perl5.40.0-URI-5.21' from 'https://cache.nixos.org'...
copying path '/nix/store/mb0q4c1b7ag16vgjhy4zc32sy8c9ljfv-perl5.40.0-libnet-3.15' from 'https://cache.nixos.org'...
copying path '/nix/store/17v0ywnr3akp85pvdi56gwl99ljv95kx-gcc-14-20241116-libgcc' from 'https://cache.nixos.org'...
copying path '/nix/store/q2bw5vb464sam6bdsbb6lc0jaabf424l-perl5.40.0-IO-HTML-1.004' from 'https://cache.nixos.org'...
copying path '/nix/store/2adzrcjbs8rrij7inakslzpv5fcq276i-perl5.40.0-Encode-Locale-1.05' from 'https://cache.nixos.org'...
copying path '/nix/store/80nv8li5cbzrzkd4zgw79xnh7yq84wnf-perl5.40.0-Mozilla-CA-20230821' from 'https://cache.nixos.org'...
copying path '/nix/store/mynqz5pq27vc61wprpvr9qf3p41hnd1w-perl5.40.0-Test-Needs-0.002010' from 'https://cache.nixos.org'...
copying path '/nix/store/1m67ipsk39xvhyqrxnzv2m2p48pil8kl-gnu-config-2024-01-01' from 'https://cache.nixos.org'...
copying path '/nix/store/390dg8pwcx489m9dpjdwqn6vzvrwfij0-perl5.40.0-LWP-MediaTypes-6.04' from 'https://cache.nixos.org'...
copying path '/nix/store/ky5k49f2byfjg49ci75ci89szy29hk4k-mailcap-2.1.54' from 'https://cache.nixos.org'...
copying path '/nix/store/288yl27wjpamsijf2wwxvc21dhm4r7fv-perl5.40.0-HTML-Tagset-3.20' from 'https://cache.nixos.org'...
copying path '/nix/store/2b6gl02f7cmz2gzpw80jnygma6mmv965-perl5.40.0-Test-RequiresInternet-0.05' from 'https://cache.nixos.org'...
copying path '/nix/store/pmvskik4cp4vh4gy0affdavpwm79k2mf-iana-etc-20240318' from 'https://cache.nixos.org'...
copying path '/nix/store/xcqcgqazykf6s7fsn08k0blnh0wisdcl-libunistring-1.3' from 'https://cache.nixos.org'...
copying path '/nix/store/gfkyf4hw4riqwgf5scfk8r8g69crbn4x-tzdata-2024b' from 'https://cache.nixos.org'...
copying path '/nix/store/8bsvp7nbfr5kiw7clq0rwgzd6jfpzznz-perl5.40.0-Authen-SASL-2.1700' from 'https://cache.nixos.org'...
copying path '/nix/store/4whjf69dbgvlnxiy5jimdq89z200xv2j-perl5.40.0-Try-Tiny-0.31' from 'https://cache.nixos.org'...
copying path '/nix/store/acfkqzj5qrqs88a4a6ixnybbjxja663d-xgcc-14-20241116-libgcc' from 'https://cache.nixos.org'...
copying path '/nix/store/rzr5p0k0qmypknx41rnkwdzkmrp90ywa-perl5.40.0-TimeDate-2.33' from 'https://cache.nixos.org'...
copying path '/nix/store/0lj0851s55mkwmylmkcw4m71m7ggl772-publicsuffix-list-0-unstable-2024-12-06' from 'https://cache.nixos.org'...
copying path '/nix/store/d29r1bdmlvwmj52apgcdxfl1mm9c5782-update-autotools-gnu-config-scripts-hook' from 'https://cache.nixos.org'...
copying path '/nix/store/1731fryiiiafq9y9py8mhf05wldfm0wv-perl5.40.0-Net-HTTP-6.23' from 'https://cache.nixos.org'...
copying path '/nix/store/la59y3p1cdiz0n0xh54n4dqriggdysyj-perl5.40.0-WWW-RobotRules-6.02' from 'https://cache.nixos.org'...
copying path '/nix/store/chqcxl717ah0k021pfvfa7vrcl3gmnsb-perl5.40.0-Test-Fatal-0.017' from 'https://cache.nixos.org'...
copying path '/nix/store/a4qk8l5j6j2npm75wdwr0vb16ghccf2g-perl5.40.0-HTTP-Date-6.06' from 'https://cache.nixos.org'...
copying path '/nix/store/70alxzrz9bmb4n0jicr3vidckpgbjcby-perl5.40.0-File-Listing-6.16' from 'https://cache.nixos.org'...
copying path '/nix/store/s017walqrqjyr8r0qy1xxz0v0vsm9kin-perl5.40.0-HTTP-CookieJar-0.014' from 'https://cache.nixos.org'...
copying path '/nix/store/34z2792zyd4ayl5186vx0s98ckdaccz9-libidn2-2.3.7' from 'https://cache.nixos.org'...
copying path '/nix/store/65h17wjrrlsj2rj540igylrx7fqcd6vq-glibc-2.40-36' from 'https://cache.nixos.org'...
copying path '/nix/store/a9jgnlhkjkxav6qrc3rzg2q84pkl2wvr-attr-2.5.2' from 'https://cache.nixos.org'...
copying path '/nix/store/5mh7kaj2fyv8mk4sfq1brwxgc02884wi-bash-5.2p37' from 'https://cache.nixos.org'...
copying path '/nix/store/8zvalh0pmrmzypynv2gh8mw1vkkys19i-brotli-1.1.0-lib' from 'https://cache.nixos.org'...
copying path '/nix/store/74h4z8k82pmp24xryflv4lxkz8jlpqqd-ed-1.20.2' from 'https://cache.nixos.org'...
copying path '/nix/store/5ayb629gzbkc3amm6zd5jp1aciprb2zs-expat-2.6.4' from 'https://cache.nixos.org'...
copying path '/nix/store/ivl2v8rgg7qh1jkj5pwpqycax3rc2hnl-bzip2-1.0.8' from 'https://cache.nixos.org'...
copying path '/nix/store/a3c47r5z1q2c4rz0kvq8hlilkhx2s718-gawk-5.3.1' from 'https://cache.nixos.org'...
copying path '/nix/store/abm77lnrkrkb58z6xp1qwjcr1xgkcfwm-gnused-4.9' from 'https://cache.nixos.org'...
copying path '/nix/store/bpq1s72cw9qb2fs8mnmlw6hn2c7iy0ss-gcc-14-20241116-lib' from 'https://cache.nixos.org'...
copying path '/nix/store/fp6cjl1zcmm6mawsnrb5yak1wkz2ma8l-gnumake-4.4.1' from 'https://cache.nixos.org'...
copying path '/nix/store/2h8rk9xwa6xqy2pqk2lr2s57qbrx5p30-gdbm-1.24-lib' from 'https://cache.nixos.org'...
copying path '/nix/store/i1mjz7h6bx4yv5x32wf726b1mgl4yygd-json-c-0.18' from 'https://cache.nixos.org'...
copying path '/nix/store/fkfhss4k4zqi3rqzwgisqa8gm8xjb0b2-libpsl-0.21.5' from 'https://cache.nixos.org'...
copying path '/nix/store/r04wysx6yl7ys1rdv1b1lih6in1810r0-libffi-3.4.6' from 'https://cache.nixos.org'...
copying path '/nix/store/mnnv5iqsa1hcc9v1snyxai3yqzmav9kf-gotools-0.25.0' from 'https://cache.nixos.org'...
copying path '/nix/store/2wh1gqyzf5xsvxpdz2k0bxiz583wwq29-keyutils-1.6.3-lib' from 'https://cache.nixos.org'...
copying path '/nix/store/srz64fswvjbph7i00ffvr3wbyjw87a06-libyaml-0.2.5' from 'https://cache.nixos.org'...
copying path '/nix/store/wm1qn5jqrxpcjkc640gq8a90ns5gw3cn-ncurses-6.4.20221231' from 'https://cache.nixos.org'...
copying path '/nix/store/6cr0spsvymmrp1hj5n0kbaxw55w1lqyp-libxcrypt-4.4.36' from 'https://cache.nixos.org'...
copying path '/nix/store/1aybnfshx1vxh7vi04bhfh1n69k15335-mpdecimal-4.0.0' from 'https://cache.nixos.org'...
copying path '/nix/store/mglixp03lsp0w986svwdvm7vcy17rdax-bzip2-1.0.8-bin' from 'https://cache.nixos.org'...
copying path '/nix/store/82lh8f5wi6ya5jkcwr036md8630j652d-nghttp2-1.64.0-lib' from 'https://cache.nixos.org'...
copying path '/nix/store/h1ydpxkw9qhjdxjpic1pdc2nirggyy6f-openssl-3.3.2' from 'https://cache.nixos.org'...
copying path '/nix/store/5yja5dpk2qw1v5mbfbl2d7klcdfrh90w-patch-2.7.6' from 'https://cache.nixos.org'...
copying path '/nix/store/cf7gkacyxmm66lwl5nj6j6yykbrg4q5c-acl-2.3.2' from 'https://cache.nixos.org'...
copying path '/nix/store/3j1p598fivxs69wx3a657ysv3rw8k06l-pcre2-10.44' from 'https://cache.nixos.org'...
copying path '/nix/store/fxbqrwsfc6q63alynldajiw95lxsnajs-perl5.40.0-Clone-0.46' from 'https://cache.nixos.org'...
copying path '/nix/store/pjdkig8favrhn300cdyn6lzn52xch3an-perl5.40.0-FCGI-0.82' from 'https://cache.nixos.org'...
copying path '/nix/store/8n58sbly7gdjscz5wkr6kia72dcf1qs5-treefmt-2.1.1' from 'https://cache.nixos.org'...
copying path '/nix/store/h60rh960bjnzmhgm2ab3bw86r2mma0g3-perl5.40.0-TermReadKey-2.38' from 'https://cache.nixos.org'...
copying path '/nix/store/jfv85qbj4vb1dafcg6kncg4vrbq2bbxv-go-1.23.4' from 'https://cache.nixos.org'...
copying path '/nix/store/nvvj6sk0k6px48436drlblf4gafgbvzr-gzip-1.13' from 'https://cache.nixos.org'...
copying path '/nix/store/c2njy6bv84kw1i4bjf5k5gn7gz8hn57n-xz-5.6.3' from 'https://cache.nixos.org'...
copying path '/nix/store/cqlaa2xf6lslnizyj9xqa8j0ii1yqw0x-zlib-1.3.1' from 'https://cache.nixos.org'...
copying path '/nix/store/9cwwj1c9csmc85l2cqzs3h9hbf1vwl6c-gnutar-1.35' from 'https://cache.nixos.org'...
copying path '/nix/store/whf0g8g2yymkj5511bp4jl4v17s1kd23-perl5.40.0-HTTP-Message-6.45' from 'https://cache.nixos.org'...
copying path '/nix/store/dj96qp9vps02l3n8xgc2vallqa9rhafb-sqlite-3.47.0' from 'https://cache.nixos.org'...
copying path '/nix/store/c4rj90r2m89rxs64hmm857mipwjhig5d-file-5.46' from 'https://cache.nixos.org'...
copying path '/nix/store/h18s640fnhhj2qdh5vivcfbxvz377srg-xz-5.6.3-bin' from 'https://cache.nixos.org'...
copying path '/nix/store/d6m831pl6cmsihdi8j5pywhsz75sbpwm-perl5.40.0-HTTP-Daemon-6.16' from 'https://cache.nixos.org'...
copying path '/nix/store/wjjpmk5a9mbpdz45bgamymmry86b4zx1-perl5.40.0-HTTP-Negotiate-6.01' from 'https://cache.nixos.org'...
copying path '/nix/store/8bybx6196xzn1c60kda1snpgf4x1zcfy-perl5.40.0-HTTP-Cookies-6.10' from 'https://cache.nixos.org'...
copying path '/nix/store/8hdac0chc55s1ssv9xiksq96qr4r9g0r-perl5.40.0-HTML-Parser-3.81' from 'https://cache.nixos.org'...
copying path '/nix/store/aap6cq56amx4mzbyxp2wpgsf1kqjcr1f-gnugrep-3.11' from 'https://cache.nixos.org'...
copying path '/nix/store/w1mlpianxzqcwk98mvcwrffm8dv2ymgb-perl5.40.0-CGI-4.59' from 'https://cache.nixos.org'...
copying path '/nix/store/9a46kza0vbb4vdsdmpzbdc7f31y7hs0i-gettext-0.22.5' from 'https://cache.nixos.org'...
copying path '/nix/store/a2byxfv4lc8f2g5xfzw8cz5q8k05wi29-gmp-with-cxx-6.3.0' from 'https://cache.nixos.org'...
copying path '/nix/store/srfxqk119fijwnprgsqvn68ys9kiw0bn-patchelf-0.15.0' from 'https://cache.nixos.org'...
copying path '/nix/store/c748z5q1ac6yc92xf69lm7mjaj52m4xx-deadnix-1.2.1' from 'https://cache.nixos.org'...
copying path '/nix/store/ghb61mqc90qf1nx6kyahhhagicyxvcyg-gmp-with-cxx-6.3.0' from 'https://cache.nixos.org'...
copying path '/nix/store/zc1f5d889k3xb33vdxw56mhah1q8a8lb-statix-0.5.8' from 'https://cache.nixos.org'...
copying path '/nix/store/s0zynhz13rhg0gg8cy0ga4c0lnv3yqdn-zstd-1.5.6' from 'https://cache.nixos.org'...
copying path '/nix/store/fp0l21s4j49wcp9l4w59nlb4biy0dr8f-libssh2-1.11.1' from 'https://cache.nixos.org'...
copying path '/nix/store/zqkizm9zn19bf9n58xcfxl4ks7yfs8my-krb5-1.21.3-lib' from 'https://cache.nixos.org'...
copying path '/nix/store/zw1nv1w3fkmdklmsw9zp5l4hhfqlvf42-perl5.40.0-Net-SSLeay-1.92' from 'https://cache.nixos.org'...
copying path '/nix/store/wg7lvwiv4nc41p4a075dikgshwbqkk2h-perl5.40.0-CGI-Fast-2.16' from 'https://cache.nixos.org'...
copying path '/nix/store/4s9rah4cwaxflicsk5cndnknqlk9n4p3-coreutils-9.5' from 'https://cache.nixos.org'...
copying path '/nix/store/jwlvx6cl4s7dnh8i2vw7p8g35p6k0ln7-perl5.40.0-IO-Socket-SSL-2.083' from 'https://cache.nixos.org'...
copying path '/nix/store/8yfak7dis3yqqls4mclzp5jb1ic2jzab-curl-8.11.0' from 'https://cache.nixos.org'...
copying path '/nix/store/9jzrcxf9wi9yp679il6j6zh6cq81p4s9-readline-8.2p13' from 'https://cache.nixos.org'...
copying path '/nix/store/zk4ixqhn7hl77g1qlnpy40ccjzjrwpn2-perl5.40.0-Net-SMTP-SSL-1.04' from 'https://cache.nixos.org'...
copying path '/nix/store/c9m6yd8fg1flz2j5r4bif1ib5j20a0cy-python3-3.12.8' from 'https://cache.nixos.org'...
copying path '/nix/store/1i003ijlh9i0mzp6alqby5hg3090pjdx-perl-5.40.0' from 'https://cache.nixos.org'...
copying path '/nix/store/jqrz1vq5nz4lnv9pqzydj0ir58wbjfy1-findutils-4.10.0' from 'https://cache.nixos.org'...
copying path '/nix/store/00g69vw7c9lycy63h45ximy0wmzqx5y6-diffutils-3.10' from 'https://cache.nixos.org'...
copying path '/nix/store/wkysiv0sxqs6wn44nb46bbyig4plzsy4-elfutils-0.192' from 'https://cache.nixos.org'...
copying path '/nix/store/4ig84cyqi6qy4n0sanrbzsw1ixa497jx-stdenv-linux' from 'https://cache.nixos.org'...
copying path '/nix/store/lch913ar0a3w3f6d63crf5vfvpckddk1-nixfmt-unstable-2024-12-04' from 'https://cache.nixos.org'...
copying path '/nix/store/zjwgaram0g5v8k3nkrrxkj8zjvrrkqld-perl5.40.0-libwww-perl-6.72' from 'https://cache.nixos.org'...
copying path '/nix/store/iwq58rpn6idjnxbnyjh351776qzvsd0r-git-2.47.0' from 'https://cache.nixos.org'...
copying path '/nix/store/ka3h6h9gj6wf24yckrch9844pd4bklfc-python3.12-cbor2-5.6.4' from 'https://cache.nixos.org'...
copying path '/nix/store/a7p8w035ri614k9y82y7c9cs9fkvb6ac-python3.12-colorama-0.4.6' from 'https://cache.nixos.org'...
copying path '/nix/store/f3a35ljg6yaxf4cxb5fqc562r3v978x7-python3.12-mdurl-0.1.2' from 'https://cache.nixos.org'...
copying path '/nix/store/ncvqa6aazrsh3lyjwrd0q5wjvng8si8w-python3.12-pygments-2.18.0' from 'https://cache.nixos.org'...
copying path '/nix/store/ls6dyvvnxji760drr228z8v5n6mivzdh-python3.12-u-msgpack-python-2.8.0' from 'https://cache.nixos.org'...
copying path '/nix/store/iqjg6b78n41i9r2z7i70q0nk6m1d8h6k-python3.12-ruamel-yaml-clib-0.2.7' from 'https://cache.nixos.org'...
copying path '/nix/store/svijjywn5mk2ljh4c9lx2my1w2jmr8hy-python3.12-ruamel-base-1.0.0' from 'https://cache.nixos.org'...
copying path '/nix/store/r5kb9400ihayy81jgj6rw6cwxlq6k24a-python3.12-pyyaml-6.0.2' from 'https://cache.nixos.org'...
copying path '/nix/store/03kwj7hvj4f32ss5g99zm2wq18h8r0wf-python3.12-six-1.17.0' from 'https://cache.nixos.org'...
copying path '/nix/store/v9vdk698r9jk17z6ipph79cj9wjqb573-python3.12-tomlkit-0.13.2' from 'https://cache.nixos.org'...
copying path '/nix/store/vnkay8zkgfh38biyhgj1rp2886qlw9bz-python3.12-markdown-it-py-3.0.0' from 'https://cache.nixos.org'...
copying path '/nix/store/mv5jpzs99allm6ni5zfjbhmyvjw8mdcj-python3.12-python-dateutil-2.9.0.post0' from 'https://cache.nixos.org'...
copying path '/nix/store/ipci9bcpb3kaxq88f5wwcyf3spvqk265-python3.12-ruamel-yaml-0.18.6' from 'https://cache.nixos.org'...
copying path '/nix/store/8cipdqyzsiyqx1d73lzs89anz2sb9pzs-python3.12-rich-13.9.4' from 'https://cache.nixos.org'...
copying path '/nix/store/zqsb4b4rdf5yl7i76vwjhg49hbgp3nli-python3.12-rich-argparse-1.6.0' from 'https://cache.nixos.org'...
copying path '/nix/store/lmzwm13gz7am129ihxg2zjmm51vinaaf-python3.12-remarshal-0.20.0' from 'https://cache.nixos.org'...
building '/nix/store/zpykvf42zcd44mif9y3sfv2l7zkvjnlz-statix.toml.drv'...
building '/nix/store/h2wyc6zpxd83yipm3y33gf2ygqiar5w6-statix-config.drv'...
building '/nix/store/f0pci68fildnfn38bjwfm4fx0dcy1wbq-statix-fix.drv'...
building '/nix/store/ybkhyn9wxyx9sbga5j8cf67g1xd0d6fk-treefmt.toml.drv'...
building '/nix/store/5cmn667g6zsa4l3hvklc423yzi9hihfh-treefmt.drv'...
building '/nix/store/vxiv73afxkl1x5zx9wc0mx9ni91r64a1-treefmt-check.drv'...
error: builder for '/nix/store/vxiv73afxkl1x5zx9wc0mx9ni91r64a1-treefmt-check.drv' failed with exit code 1;
last 25 log lines:
>
>                  if headerApiKey != apiKey {
> -           c.AbortWithStatusJSON(http.StatusUnauthorized, gin.H{"error": fmt.Sprintf("Wrong or missing API Key")})
> +                       c.AbortWithStatusJSON(http.StatusUnauthorized, gin.H{"error": fmt.Sprintf("Wrong or missing API Key")})
>                         return
>                  }
>
>             c.Next()
>        }
> -}
> \ No newline at end of file
> +}
> diff --git a/restapi/serve.go b/restapi/serve.go
> index c9b364a..90bf6c0 100644
> --- a/restapi/serve.go
> +++ b/restapi/serve.go
> @@ -13,7 +13,7 @@ func Serve(registry *core.PluginRegistry, address string, apiKey string) (err er
>     r.Use(gin.Recovery())
>
>         if apiKey != "" {
> -         r.Use(ApiKeyMiddleware(apiKey))
> +           r.Use(ApiKeyMiddleware(apiKey))
>         }
>
>     // Register routes
For full logs, run:
nix log /nix/store/vxiv73afxkl1x5zx9wc0mx9ni91r64a1-treefmt-check.drv
##[error]Process completed with exit code 1.
Post job cleanup.
[0;31m[1m[4mDeterminate Systems, Inc. Status
üîµ monitoring: FlakeHub.com flake status badges are unavailable. (https://status.determinate.systems/incidents/d3b01872-0b21-4423-b28d-c3cb2a081446)
See: https://status.determinate.systems/
2025-03-31T23:16:52.6428843Z
Post job cleanup.
[command]/usr/bin/git version
git version <:NUM:>.<:NUM:>.<:NUM:>
Temporarily overriding HOME='/home/runner/work/_temp/84605c20-6af5-4f95-b884-7faa45fd93cc' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
[command]/usr/bin/git config --global --add safe.directory /home/runner/work/fabric/fabric
[command]/usr/bin/git config --local --name-only --get-regexp <:*:>
[command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp <:*:> && git config --local --unset-all <:*:> || :"
[command]/usr/bin/git config --local --name-only --get-regexp <:*:>
http.https://github.com/.extraheader
[command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
[command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp <:*:> && git config --local --unset-all <:*:> || :"
Cleaning up orphan processes
